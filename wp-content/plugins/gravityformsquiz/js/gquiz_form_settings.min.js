!function(e,n){var r={};function i(e){switch(e){case"none":n("#passfail_grading_options").fadeOut("fast"),n("#letter_options_section").fadeOut("fast");break;case"passfail":n("#letter_options_section").fadeOut("fast"),n("#passfail_grading_options").fadeIn("fast");break;case"letter":n("#passfail_grading_options").fadeOut("fast"),n("#letter_options_section").fadeIn("fast")}}function a(e,t){for(var i=0,a=t.length;i<a;i++)e.prop("checked")?t[i].show():t[i].hide()}function s(e,t){this.text=e,this.value=t}function g(){gquizVars.imagesUrl;for(var e="",t=0;t<r.length;t++)e+="<li data-index='"+t+"'>",e+="<i class='field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>",e+="<input type='text' id='gquiz-grade-text-"+t+"' value=\""+r[t].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' />",e+=" <span class='gquiz-greater-than-or-equal'>&gt;=</span> ",e+='<div class="gquiz-percentage-container">',e+="<input type='text' id='gquiz-grade-value-"+t+"' value=\""+r[t].value+"\" class='gquiz-grade-input gquiz-grade-value percentage-input' >",e+="<span class='gform-settings-field__text-append'>&#37;</span> ",e+="</div>\x3c!-- .percentage-container --\x3e",e+='<div class="gquiz-grade-buttons">',e+="<button class='gquiz-grade-row-button gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' onclick=\"gquiz.insertGrade("+(t+1)+');" />',1<r.length&&(e+="<button class='gquiz-grade-row-button gquiz-delete-grade' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' onclick=\"gquiz.deleteGrade("+t+');" />'),e+="</div>\x3c!-- .gquiz-grade-buttons --\x3e",e+="</li>";return e}function u(){n("ul#gquiz-grades li").each(function(e){var t=n(this),i=t.find("input.gquiz-grade-text").val(),a=t.find("input.gquiz-grade-value").val(),t=t.data("index"),a=new s(i,parseInt(a));r[parseInt(t)]=a})}e.init=function(){var e,t=n("#grades").val();r=n.parseJSON(t),n(".gquiz-grading").click(function(){i(this.value)}),i(n("input[name='_gform_setting_grading']:checked").val()),e=[n("#gform_setting_passConfirmationMessage"),n("#gform_setting_passConfirmationDisableAutoformat"),n("#gform_setting_failConfirmationMessage"),n("#gform_setting_failConfirmationDisableAutoformat")],t=[n("#gform_setting_letterConfirmationMessage"),n("#gform_setting_letterConfirmationDisableAutoformat")],a(n("#passfaildisplayconfirmation"),e),a(n("#letterdisplayconfirmation"),t),n("#gquiz-grades").html(g()),n(document).on("blur","input.gquiz-grade-value",function(){var e=n(this),t=e.val();t<0||isNaN(t)?e.val(0):100<t&&e.val(100)}),n(document).on("keypress","input.gquiz-grade-value",function(e){return 27==e.which?(this.blur(),!1):0===e.which||8===e.which||void((e.which<48||57<e.which)&&e.preventDefault())}),n("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(e,t){!function(e,t){u();var i=r[e];r.splice(e,1),r.splice(t,0,i),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(g())}(t.item.data("index"),t.item.index())}}),n("#gform-settings").submit(function(){u(),n("#grades").val(n.toJSON(r))})},e.insertGrade=function(e){u();var t=r[e-1],i=r[e],i=void 0===i?0:i.value,i=new s("",parseInt(i)+parseInt((t.value-i)/2));r.splice(e,0,i),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(g())},e.deleteGrade=function(e){u(),r.splice(e,1),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(g())},String.prototype.format=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){});