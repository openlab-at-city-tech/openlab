!function(e,s){var g={};function a(e){switch(e){case"none":s("#passfail_grading_options").fadeOut("fast"),s("#letter_options_section").fadeOut("fast");break;case"passfail":s("#letter_options_section").fadeOut("fast"),s("#passfail_grading_options").fadeIn("fast");break;case"letter":s("#passfail_grading_options").fadeOut("fast"),s("#letter_options_section").fadeIn("fast")}}function n(e,t){for(var i=0,a=t.length;i<a;i++)e.prop("checked")?t[i].show():t[i].hide()}function u(e,t){this.text=e,this.value=t}function r(){gquizVars.imagesUrl;for(var e="",t=0;t<g.length;t++)e+="<li data-index='"+t+"'>",e+="<i class='field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>",e+="<input type='text' id='gquiz-grade-text-"+t+"' value=\""+g[t].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' />",e+=" <span class='gquiz-greater-than-or-equal'>&gt;=</span> ",e+='<div class="gquiz-percentage-container">',e+="<input type='text' id='gquiz-grade-value-"+t+"' value=\""+g[t].value+"\" class='gquiz-grade-input gquiz-grade-value percentage-input' >",e+="<span class='gform-settings-field__text-append'>&#37;</span> ",e+="</div>\x3c!-- .percentage-container --\x3e",e+='<div class="gquiz-grade-buttons">',e+="<button class='gquiz-grade-row-button gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' onclick=\"gquiz.insertGrade("+(t+1)+');" />',1<g.length&&(e+="<button class='gquiz-grade-row-button gquiz-delete-grade' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' onclick=\"gquiz.deleteGrade("+t+');" />'),e+="</div>\x3c!-- .gquiz-grade-buttons --\x3e",e+="</li>";return e}function o(){s("ul#gquiz-grades li").each(function(e){var t=s(this),i=t.find("input.gquiz-grade-text").val(),a=t.find("input.gquiz-grade-value").val(),n=t.data("index"),r=new u(i,parseInt(a));g[parseInt(n)]=r})}e.init=function(){var e,t,i=s("#grades").val();g=s.parseJSON(i),s(".gquiz-grading").click(function(){a(this.value)}),a(s("input[name='_gform_setting_grading']:checked").val()),e=[s("#gform_setting_passConfirmationMessage"),s("#gform_setting_passConfirmationDisableAutoformat"),s("#gform_setting_failConfirmationMessage"),s("#gform_setting_failConfirmationDisableAutoformat")],t=[s("#gform_setting_letterConfirmationMessage"),s("#gform_setting_letterConfirmationDisableAutoformat")],n(s("#passfaildisplayconfirmation"),e),n(s("#letterdisplayconfirmation"),t),s("#gquiz-grades").html(r()),s(document).on("blur","input.gquiz-grade-value",function(){var e=s(this),t=e.val();t<0||isNaN(t)?e.val(0):100<t&&e.val(100)}),s(document).on("keypress","input.gquiz-grade-value",function(e){return 27==e.which?(this.blur(),!1):0===e.which||8===e.which||void((e.which<48||57<e.which)&&e.preventDefault())}),s("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(e,t){!function(e,t){o();var i=g[e];g.splice(e,1),g.splice(t,0,i),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())}(t.item.data("index"),t.item.index())}}),s("#gform-settings").submit(function(){o(),s("#grades").val(s.toJSON(g))})},e.insertGrade=function(e){var t;o();var i=g[e-1],a=g[e];t=void 0===a?0:a.value;var n=new u("",parseInt(t)+parseInt((i.value-t)/2));g.splice(e,0,n),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},e.deleteGrade=function(e){o(),g.splice(e,1),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},String.prototype.format=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){});