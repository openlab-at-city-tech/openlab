!function(t,n){var o={};function e(t){switch(t){case"none":n("#passfail_grading_options").fadeOut("fast"),n("#letter_options_section").fadeOut("fast");break;case"passfail":n("#letter_options_section").fadeOut("fast"),n("#passfail_grading_options").fadeIn("fast");break;case"letter":n("#passfail_grading_options").fadeOut("fast"),n("#letter_options_section").fadeIn("fast")}}function s(t,i){this.text=t,this.value=i}function r(){for(var t=gquizVars.imagesUrl,i="",e=0;e<o.length;e++)i=(i=(i=(i=(i+="<li data-index='"+e+"'>")+"<i class='fa fa-sort field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>")+"<input type='text' id='gquiz-grade-text-"+e+"' value=\""+o[e].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' /> <span class='gquiz-greater-than-or-equal'>&gt;=</span> ")+"<input type='text' id='gquiz-grade-value-"+e+"' value=\""+o[e].value+"\" class='gquiz-grade-input gquiz-grade-value' > <span class='gquiz-percentage'>&#37;</span> ")+"<img src='"+t+"/add.png' class='gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' style='cursor:pointer; margin:0 3px;' onclick=\"gquiz.insertGrade("+(e+1)+');" />',1<o.length&&(i+="<img src='"+t+"/remove.png' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' class='gquiz-delete-grade' style='cursor:pointer;' onclick=\"gquiz.deleteGrade("+e+');" />'),i+="</li>";return i}function g(){n("ul#gquiz-grades li").each(function(t){var i=n(this),e=i.children("input.gquiz-grade-text").val(),a=i.children("input.gquiz-grade-value").val(),i=i.data("index"),e=new s(e,parseInt(a));o[parseInt(i)]=e})}t.init=function(){var t,i=n("#grades").val(),i=(o=n.parseJSON(i),n(".gquiz-grading").click(function(){e(this.value)}),n("input[name='_gaddon_setting_grading']:checked").val());e(i),n("#letterdisplayconfirmation").click(function(){n("#gaddon-setting-row-letterConfirmationMessage").toggle(),n("#gaddon-setting-row-letterConfirmationDisableAutoformat").toggle()}),n("#passfaildisplayconfirmation").click(function(){n("#gaddon-setting-row-passConfirmationMessage").toggle(),n("#gaddon-setting-row-passConfirmationDisableAutoformat").toggle(),n("#gaddon-setting-row-failConfirmationMessage").toggle(),n("#gaddon-setting-row-failConfirmationDisableAutoformat").toggle()}),i=n("#passfaildisplayconfirmation").prop("checked"),t=n("#letterdisplayconfirmation").prop("checked"),i?(n("#gaddon-setting-row-passConfirmationMessage").show(),n("#gaddon-setting-row-passConfirmationDisableAutoformat").show(),n("#gaddon-setting-row-failConfirmationMessage").show(),n("#gaddon-setting-row-failConfirmationDisableAutoformat").show()):(n("#gaddon-setting-row-passConfirmationMessage").hide(),n("#gaddon-setting-row-passConfirmationDisableAutoformat").hide(),n("#gaddon-setting-row-failConfirmationMessage").hide(),n("#gaddon-setting-row-failConfirmationDisableAutoformat").hide()),t?(n("#gaddon-setting-row-letterConfirmationMessage").show(),n("#gaddon-setting-row-letterConfirmationDisableAutoformat").show()):(n("#gaddon-setting-row-letterConfirmationMessage").hide(),n("#gaddon-setting-row-letterConfirmationDisableAutoformat").hide()),e(),n("#gquiz-grades").html(r()),n(document).on("blur","input.gquiz-grade-value",function(){var t=n(this),i=t.val();i<0||isNaN(i)?t.val(0):100<i&&t.val(100)}),n(document).on("keypress","input.gquiz-grade-value",function(t){return 27==t.which?(this.blur(),!1):0===t.which||8===t.which||void((t.which<48||57<t.which)&&t.preventDefault())}),n("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(t,i){var e,a=i.item.data("index"),i=i.item.index();a=a,i=i,g(),e=o[a],o.splice(a,1),o.splice(i,0,e),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())}}),n("#gform-settings").submit(function(){g(),n("#grades").val(n.toJSON(o))})},t.insertGrade=function(t){g();var i=o[t-1],e=o[t],e=void 0===e?0:e.value,i=new s("",parseInt(e)+parseInt((i.value-e)/2));o.splice(t,0,i),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},t.deleteGrade=function(t){g(),o.splice(t,1),n("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){});