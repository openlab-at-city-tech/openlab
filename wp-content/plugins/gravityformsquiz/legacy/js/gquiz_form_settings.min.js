!function(t,s){var r={};function a(t){switch(t){case"none":s("#passfail_grading_options").fadeOut("fast"),s("#letter_options_section").fadeOut("fast");break;case"passfail":s("#letter_options_section").fadeOut("fast"),s("#passfail_grading_options").fadeIn("fast");break;case"letter":s("#passfail_grading_options").fadeOut("fast"),s("#letter_options_section").fadeIn("fast")}}function g(t,i){this.text=t,this.value=i}function o(){for(var t=gquizVars.imagesUrl,i="",e=0;e<r.length;e++)i+="<li data-index='"+e+"'>",i+="<i class='fa fa-sort field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>",i+="<input type='text' id='gquiz-grade-text-"+e+"' value=\""+r[e].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' />",i+=" <span class='gquiz-greater-than-or-equal'>&gt;=</span> ",i+="<input type='text' id='gquiz-grade-value-"+e+"' value=\""+r[e].value+"\" class='gquiz-grade-input gquiz-grade-value' >",i+=" <span class='gquiz-percentage'>&#37;</span> ",i+="<img src='"+t+"/add.png' class='gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' style='cursor:pointer; margin:0 3px;' onclick=\"gquiz.insertGrade("+(e+1)+');" />',1<r.length&&(i+="<img src='"+t+"/remove.png' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' class='gquiz-delete-grade' style='cursor:pointer;' onclick=\"gquiz.deleteGrade("+e+');" />'),i+="</li>";return i}function d(){s("ul#gquiz-grades li").each(function(t){var i=s(this),e=i.children("input.gquiz-grade-text").val(),a=i.children("input.gquiz-grade-value").val(),n=i.data("index"),o=new g(e,parseInt(a));r[parseInt(n)]=o})}t.init=function(){var t,i,e=s("#grades").val();r=s.parseJSON(e),s(".gquiz-grading").click(function(){a(this.value)}),a(s("input[name='_gaddon_setting_grading']:checked").val()),s("#letterdisplayconfirmation").click(function(){s("#gaddon-setting-row-letterConfirmationMessage").toggle(),s("#gaddon-setting-row-letterConfirmationDisableAutoformat").toggle()}),s("#passfaildisplayconfirmation").click(function(){s("#gaddon-setting-row-passConfirmationMessage").toggle(),s("#gaddon-setting-row-passConfirmationDisableAutoformat").toggle(),s("#gaddon-setting-row-failConfirmationMessage").toggle(),s("#gaddon-setting-row-failConfirmationDisableAutoformat").toggle()}),t=s("#passfaildisplayconfirmation").prop("checked"),i=s("#letterdisplayconfirmation").prop("checked"),t?(s("#gaddon-setting-row-passConfirmationMessage").show(),s("#gaddon-setting-row-passConfirmationDisableAutoformat").show(),s("#gaddon-setting-row-failConfirmationMessage").show(),s("#gaddon-setting-row-failConfirmationDisableAutoformat").show()):(s("#gaddon-setting-row-passConfirmationMessage").hide(),s("#gaddon-setting-row-passConfirmationDisableAutoformat").hide(),s("#gaddon-setting-row-failConfirmationMessage").hide(),s("#gaddon-setting-row-failConfirmationDisableAutoformat").hide()),i?(s("#gaddon-setting-row-letterConfirmationMessage").show(),s("#gaddon-setting-row-letterConfirmationDisableAutoformat").show()):(s("#gaddon-setting-row-letterConfirmationMessage").hide(),s("#gaddon-setting-row-letterConfirmationDisableAutoformat").hide()),a(),s("#gquiz-grades").html(o()),s(document).on("blur","input.gquiz-grade-value",function(){var t=s(this),i=t.val();i<0||isNaN(i)?t.val(0):100<i&&t.val(100)}),s(document).on("keypress","input.gquiz-grade-value",function(t){return 27==t.which?(this.blur(),!1):0===t.which||8===t.which||void((t.which<48||57<t.which)&&t.preventDefault())}),s("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(t,i){!function(t,i){d();var e=r[t];r.splice(t,1),r.splice(i,0,e),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(o())}(i.item.data("index"),i.item.index())}}),s("#gform-settings").submit(function(){d(),s("#grades").val(s.toJSON(r))})},t.insertGrade=function(t){var i;d();var e=r[t-1],a=r[t];i=void 0===a?0:a.value;var n=new g("",parseInt(i)+parseInt((e.value-i)/2));r.splice(t,0,n),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(o())},t.deleteGrade=function(t){d(),r.splice(t,1),s("div#gquiz-settings-grades-container ul#gquiz-grades").html(o())},String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){});