jQuery(function(a){let n=[];function o(e,d){d=d.attachment.attributes.url;const l=jQuery(e.settings.browse_button).parents("td").find("textarea");l.parent().removeClass("dlm-blury");let t=l.val();t=t?t+"\n"+d:d,l.val(t)}function r(e,d){const l=jQuery(e.settings.browse_button).parents("td").find("textarea");l.parent().addClass("dlm-blury")}a(".dlm_upload_file").each((e,d)=>{n.push(a(d));const l={browser:a(d),plupload:{multi_selection:!1},params:{type:"dlm_download"}},t=new wp.Uploader(l);t.uploader.bind("FilesAdded",r),t.uploader.bind("FileUploaded",o)}),a(document).on("dlm_new_file_added",()=>{a(".dlm_upload_file").each((e,d)=>{if(n.includes(a(d)))return!0;n.push(a(d));const l={browser:a(d),plupload:{multi_selection:!1},params:{type:"dlm_download"}},t=new wp.Uploader(l);t.uploader.bind("FilesAdded",r),t.uploader.bind("FileUploaded",o)})})});