jQuery(function(n){let o=[];function l(e,t){t=t.attachment.attributes.url;const d=jQuery(e.settings.browse_button).parents("td").find("textarea");d.parent().removeClass("dlm-blury");let r=d.val();r=r?r+"\n"+t:t,d.val(r)}function a(e,t){const d=jQuery(e.settings.browse_button).parents("td").find("textarea");d.parent().addClass("dlm-blury")}function s(e,t){jQuery(e.settings.browse_button).parent().append('<p class="error description" style="color:red;">'+t.message+"</p>"),setTimeout(function(){jQuery(e.settings.browse_button).parent().find(".error.description").remove()},3500)}n(".dlm_upload_file").each((e,t)=>{o.push(n(t));const d={browser:n(t),plupload:{multi_selection:!1},params:{type:"dlm_download"}},r=new wp.Uploader(d);r.uploader.bind("FilesAdded",a),r.uploader.bind("FileUploaded",l),r.uploader.bind("Error",s)}),n(document).on("dlm_new_file_added",()=>{n(".dlm_upload_file").each((e,t)=>{if(o.includes(n(t)))return!0;o.push(n(t));const d={browser:n(t),plupload:{multi_selection:!1},params:{type:"dlm_download"}},r=new wp.Uploader(d);r.uploader.bind("FilesAdded",a),r.uploader.bind("FileUploaded",l),r.uploader.bind("Error",s)})})});