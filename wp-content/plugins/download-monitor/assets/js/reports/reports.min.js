function DLM_createLoaderObj(){var t=document.createElement("div");(t=jQuery(t)).addClass("dlm_reports_loader");var e=document.createElement("img");return(e=jQuery(e)).attr("src",dlm_rs.img_path+"ajax-loader.gif"),t.append(e),t}jQuery(function(e){e.each(e(".dlm-reports-block-chart"),function(t,e){new DLM_Reports_Block_Chart(e)}),e.each(e(".dlm-reports-block-summary"),function(t,e){new DLM_Reports_Block_Summary(e)}),e.each(e(".dlm-reports-block-table"),function(t,e){new DLM_Reports_Block_Table(e)}),e("#total_downloads_browser_table").on("click","a",function(t){t.preventDefault();t=e(this).attr("href");e(this).addClass("nav-tab-active"),e("#total_downloads_browser_table").find("a").not(e(this)).removeClass("nav-tab-active"),e(t).removeClass("hidden"),e("#total_downloads_browser_table").find("table").not(e(t)).addClass("hidden")})});var DLM_Reports_Data=function(t){this.type=null,this.from=null,this.to=null,this.period=null,this.init=function(t){this.type=jQuery(t).data("type"),this.to=jQuery(t).data("to"),this.from=jQuery(t).data("from"),this.period=jQuery(t).data("period")},this.init(t)},DLM_Reports_Data_Fetch=function(t,e,a){this.id=t,this.data=e,this.cb=a,this.fetch()};DLM_Reports_Data_Fetch.prototype.fetch=function(){var t=this.id,e=this.cb,a=this.data.from,r=this.data.to,n=this.data.period;jQuery.get(ajaxurl,{action:"dlm_reports_data",nonce:dlm_rs.ajax_nonce,id:t,from:a,to:r,period:n},function(t){e(t)})};var DLM_Reports_Block_Chart=function(t){this.container=t,this.id=null,this.queryData=null,this.data=null,this.chart=null,this.setup=function(){this.id=jQuery(this.container).attr("id"),this.queryData=new DLM_Reports_Data(this.container),this.displayLoader(),this.fetch()},this.setup()};DLM_Reports_Block_Chart.prototype.displayLoader=function(){jQuery(this.container).append(DLM_createLoaderObj())},DLM_Reports_Block_Chart.prototype.hideLoader=function(){jQuery(this.container).find(".dlm_reports_loader").remove()},DLM_Reports_Block_Chart.prototype.fetch=function(){var e=this;new DLM_Reports_Data_Fetch(this.id,this.queryData,function(t){e.data=t,e.hideLoader(),e.render()})},DLM_Reports_Block_Chart.prototype.render=function(){var t;null!==this.data&&(t=document.getElementById("total_downloads_chart"),this.chart=new Chart(t,{title:"",data:this.data,type:this.queryData.type,height:250,show_dots:0,x_axis_mode:"tick",y_axis_mode:"span",is_series:1}))};var DLM_Reports_Block_Summary=function(t){this.container=t,this.id=null,this.data=null,this.data=null,this.chart=null,this.setup=function(){this.id=jQuery(this.container).attr("id"),this.data=new DLM_Reports_Data(this.container),this.displayLoader(),this.fetch()},this.setup()};DLM_Reports_Block_Summary.prototype.displayLoader=function(){jQuery(this.container).append(DLM_createLoaderObj())},DLM_Reports_Block_Summary.prototype.hideLoader=function(){jQuery(this.container).find(".dlm_reports_loader").remove()},DLM_Reports_Block_Summary.prototype.fetch=function(){var e=this;new DLM_Reports_Data_Fetch(this.id,this.data,function(t){e.data=t,e.hideLoader(),e.render()})},DLM_Reports_Block_Summary.prototype.render=function(){var a;null!==this.data&&(a=this,jQuery.each(this.data,function(t,e){jQuery(a.container).find("#"+t)&&jQuery(a.container).find("#"+t).find("span:first").html(e)}))};var DLM_Reports_Block_Table=function(t){this.container=t,this.id=null,this.data=null,this.data=null,this.chart=null,this.setup=function(){this.id=jQuery(this.container).attr("id"),this.data=new DLM_Reports_Data(this.container),this.displayLoader(),this.fetch()},this.setup()};DLM_Reports_Block_Table.prototype.displayLoader=function(){jQuery(this.container).append(DLM_createLoaderObj())},DLM_Reports_Block_Table.prototype.hideLoader=function(){jQuery(this.container).find(".dlm_reports_loader").remove()},DLM_Reports_Block_Table.prototype.fetch=function(){var e=this;new DLM_Reports_Data_Fetch(this.id,this.data,function(t){e.data=t,e.hideLoader(),e.render()})},DLM_Reports_Block_Table.prototype.render=function(){if(!(null===this.data||this.data.length<2&&void 0===this.data.total_downloads_browser_table))if(void 0!==this.data.total_downloads_browser_table){var l=this.data.total_downloads_browser_table,c='<h2 class="dlm-reports-tab-navigation nav-tab-wrapper">';jQuery(this.container).html(""),jQuery(this.container).append('<div class="">'),Object.keys(l).forEach(t=>{var e=jQuery(document.createElement("table")),a="hidden",r="";"desktop"==t&&(a="",r="nav-tab-active"),c+='<a href="#'+t+'" class="nav-tab '+r+'">'+t+"</a>",e.attr("cellspacing",0).attr("cellpadding",0).attr("border",0).attr("id",t).attr("class",a);for(var n=document.createElement("tr"),o=0;o<l[t][0].length;o++){var i=document.createElement("th");i.innerHTML=l[t][0][o],n.appendChild(i)}e.append(n);for(o=1;o<l[t].length;o++){for(var s=document.createElement("tr"),d=0;d<l[t][o].length;d++){var h=document.createElement("td");h.innerHTML=l[t][o][d],s.appendChild(h)}e.append(s)}jQuery(this.container).append(e)}),c+="</div>",jQuery(this.container).prepend(c)}else{var t=jQuery(document.createElement("table"));t.attr("cellspacing",0).attr("cellpadding",0).attr("border",0);for(var e=document.createElement("tr"),a=0;a<this.data[0].length;a++){var r=document.createElement("th");r.innerHTML=this.data[0][a],e.appendChild(r)}t.append(e);for(a=1;a<this.data.length;a++){for(var n=document.createElement("tr"),o=0;o<this.data[a].length;o++){var i=document.createElement("td");i.innerHTML=this.data[a][o],n.appendChild(i)}t.append(n)}jQuery(this.container).html("").append(t)}};