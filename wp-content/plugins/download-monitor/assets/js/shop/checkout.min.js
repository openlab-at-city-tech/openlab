jQuery(function(l){function s(d,r){var e=l("<div>").addClass("dlm-checkout-error");e.append(l("<img>").attr("src",dlm_strings.icon_error).attr("alt","Checkout error").addClass("dlm-checkout-error-icon")),e.append(l("<p>").html(r)),d.prepend(e)}function n(d){var r=l(".dlm-checkout-overlay:first"),e=l(".dlm-checkout-overlay-bg:first");r.fadeOut(300,function(){r.remove()}),e.fadeOut(300,function(){e.remove(),l(d).find("#dlm_checkout_submit").attr("disabled",!1)})}l("#dlm-form-checkout").submit(function(d){var r=l(this);l(r).find(".dlm-checkout-field-error").removeClass("dlm-checkout-field-error"),r.find(".dlm-checkout-error").remove(),function(d){l(d).find("#dlm_checkout_submit").attr("disabled",!0);var d=l("<div>").addClass("dlm-checkout-overlay-bg"),r=l("<div>").addClass("dlm-checkout-overlay");r.append(l("<h2>").html(dlm_strings.overlay_title)),r.append(l("<span>").html(dlm_strings.overlay_body)),r.append(l("<img>").attr("src",dlm_strings.overlay_img_src)),l("body").append(d),l("body").append(r),d.fadeIn(300,function(){r.css("display","block").css("top","47%"),r.animate({top:"+=3%"},300)})}(r);var e={first_name:r.find("#dlm_first_name").val(),last_name:r.find("#dlm_last_name").val(),company:r.find("#dlm_company").val(),email:r.find("#dlm_email").val(),address_1:r.find("#dlm_address_1").val(),postcode:r.find("#dlm_postcode").val(),city:r.find("#dlm_city").val(),country:r.find("#dlm_country").val()},a={payment_gateway:l("input[name=dlm_gateway]:checked",l(this)).val(),customer:e};void 0!==r.data("order_id")&&(a.order_id=r.data("order_id")),void 0!==r.data("order_hash")&&(a.order_hash=r.data("order_hash"));for(var t=[],i=!0,o=0;o<dlm_strings.required_fields.length;o++)""===e[dlm_strings.required_fields[o]]&&(i=!1,t.push(dlm_strings.required_fields[o]));return!1===i?(function(d,r){for(var e=0;e<r.length;e++)l(d).find("#dlm_"+r[e]).addClass("dlm-checkout-field-error")}(r,t),s(r,dlm_strings.error_message_required_fields),n(r)):l.post(dlm_strings.ajax_url_place_order,a,function(d){return!0===d.success&&void 0!==d.redirect?(window.location.replace(d.redirect),!1):(!1===d.success&&""!==d.error&&s(r,d.error),void n(r))}),!1})});