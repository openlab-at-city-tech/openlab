(()=>{"use strict";const e=window.wp.components,t=window.wp.compose,n=window.wp.data,r=window.wp.element,o=window.wp.editPost,i=window.wp.plugins;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var a,u,c=["children"];function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function p(e,t,n){return t=b(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function w(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var y=null!==(a=null===(u=window)||void 0===u||null===(u=u.pltOptions)||void 0===u?void 0:u.panelTitle)&&void 0!==a?a:"Page Links To",v=o.PluginDocumentSettingPanel||function(t){var n=t.children,r=void 0===n?null:n,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,c);return React.createElement(o.PluginPostStatusInfo,i,React.createElement("div",{style:{display:"flex","flex-direction":"column"}},React.createElement(e.PanelRow,null,React.createElement("h2",{style:{"margin-bottom":0,color:"#191e23"}},y)),r))},m=(0,e.createSlotFill)("PageLinksToSidebar").Slot,h=function(n){function r(e){var t,n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=t=p(this,r,[e]),i={prevUrl:"",prevNewTab:!1},(o=w(o="state"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t.toggleStatus=t.toggleStatus.bind(t),t.state.enabled=t.hasUrl(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(r,n),o=r,(i=[{key:"getUrl",value:function(){return this.props.url||""}},{key:"getDisplayUrl",value:function(){var e=this.state.prevUrl;return this.getUrl()||e}},{key:"hasUrl",value:function(){return this.getUrl().length>0}},{key:"opensInNewTab",value:function(){return this.props.newTab}},{key:"enabled",value:function(){return this.state.enabled}},{key:"toggleStatus",value:function(e){var t=this,n=this.state,r=n.prevUrl,o=n.prevNewTab,i=this.props,l=i.onUpdateLink,a=i.onUpdateNewTab;this.setState((function(n){var r={enabled:e};return n.enabled&&(r.prevUrl=t.getUrl()),r})),e?(l(r),a(o)):(l(null),a(!1),this.setState({prevUrl:this.getUrl(),prevNewTab:this.opensInNewTab()}))}},{key:"updateLink",value:function(e){var t=this.props,n=t.meta;(0,t.onUpdateLink)(n,e)}},{key:"render",value:function(){var n=this,r=this.props,o=r.onUpdateLink,i=r.onUpdateNewTab,l=(0,t.withState)({option:this.enabled()?"custom":"wordpress"})((function(t){var r=t.option,o=t.setState;return React.createElement(e.RadioControl,{label:"Point this content to:",selected:r,options:[{label:"Its normal WordPress URL",value:"wordpress"},{label:"A custom URL",value:"custom"}],onChange:function(e){o({option:e}),n.toggleStatus("custom"===e)}})}));return React.createElement(v,{title:y,name:"PageLinksTo",icon:this.enabled()?"admin-links":"disabled",className:"plt-panel"},React.createElement(e.PanelRow,null,React.createElement(l,null)),this.enabled()&&React.createElement(React.Fragment,null,React.createElement(e.PanelRow,null,React.createElement(e.TextControl,{label:"Links to","data-testid":"plt-url",value:this.getDisplayUrl(),onChange:o,placeholder:"https://"})),window.pltOptions.supports.newTab&&React.createElement(e.PanelRow,null,React.createElement(e.CheckboxControl,{label:"Open in new tab","data-testid":"plt-newtab",checked:this.opensInNewTab(),onChange:i})),React.createElement(m,null)))}}])&&s(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i}(r.Component),g=(0,t.compose)([(0,n.withSelect)((function(e){var t=function(t){return(e("core/editor").getEditedPostAttribute("meta")||[])[t]};return{url:t("_links_to"),newTab:"_blank"===t("_links_to_target")}})),(0,n.withDispatch)((function(e){return{onUpdateLink:function(t){e("core/editor").editPost({meta:{_links_to:t}})},onUpdateNewTab:function(t){e("core/editor").editPost({meta:{_links_to_target:t?"_blank":""}})}}})),t.withInstanceId])(h);(0,i.registerPlugin)("page-links-to",{render:g})})();