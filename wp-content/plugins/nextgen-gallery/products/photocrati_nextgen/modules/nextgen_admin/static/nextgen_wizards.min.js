"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var NextGEN_Wizard,manager;"undefined"==typeof NextGEN_Wizard_Manager&&((NextGEN_Wizard=function(t,e){this.id=t,this.manager=e,this.data={},this.steps=[],this.status=null,this.tour=null,this.created=Math.floor(Date.now()/1e3)}).prototype.start=function(){null!=this.tour&&this.tour.start()},NextGEN_Wizard.prototype.getNextStep=function(t){for(var e=0;e<this.steps.length&&this.steps[e].id!=t;e++);return++e<this.steps.length?this.steps[e]:null},NextGEN_Wizard.prototype.setState=function(t){},(manager={state:[],wizards:[],runningWizard:null,views:[],starter:null,anchor:null,events:{},targetWatchers:{},refreshTimer:null,nggEvents:[],init:function(){"undefined"!=typeof NextGEN_Wizard_Manager_State&&(this.state=NextGEN_Wizard_Manager_State);var n=this;function t(t){this.itemSelector=".view-item",this.currentWizard=null,this.currentStep=null,this.doneFlag=!1,this.init=function(){},this.disable=function(){t.addClass("ngg-wizard-disabled")},this.enable=function(){t.removeClass("ngg-wizard-disabled")},this.setup=function(){},this.reset=function(){t.removeClass("ngg-wizard-has-selection"),t.find(this.itemSelector).removeClass("ngg-wizard-selected")},this.done=function(t){this.doneFlag||(this.doneFlag=!0,this.trigger("done",this,t))}}function e(e){t.call(this,e);var n=this;jQuery(e.get(0).ownerDocument).on("click",e.selector,function(t){n.done(e)})}function i(e){t.call(this,e);var n=this;e.on("click",function(t){(!e.is("a,button.ngg_save_settings_button,input.ngg_save_gallery_changes")||e.attr("href").startsWith("#")||e.attr("href").startsWith("javascript:")||e.hasClass("thickbox"))&&n.done(e)}),this.setup=function(){var t;e.is("a,button.ngg_save_settings_button,button.ngg_save_pricelist_button,input.ngg_save_gallery_changes")&&(e.is("a")&&(t=e.attr("href"),this.originalHref=t),(t=e.is("button.ngg_save_settings_button,button.ngg_save_pricelist_button,input.ngg_save_gallery_changes")&&-1<(t=e.parents("form").attr("action")).indexOf("&ngg_wizard")?(hrefSplit=t.split("&ngg_wizard"))[0]:t).startsWith("#")||(-1==t.indexOf("?")?t+="?":t+="&",t=t+"ngg_wizard="+this.currentWizard+"&ngg_wizard_step="+this.currentStep,e.is("a")&&e.attr("href",t),e.is("button.ngg_save_settings_button,button.ngg_save_pricelist_button,input.ngg_save_gallery_changes")&&e.parents("form").attr("action",t)))},this.reset=function(){this.originalHref&&e.is("a")&&e.attr("href",this.originalHref)}}function r(e){t.call(this,e);var n=this;e.on("input",function(t){3<=jQuery(this).val().length&&n.done(e)}),this.setup=function(){}}function o(e){t.call(this,e);var n=this;jQuery(e.get(0).ownerDocument).on("change",e.selector,function(t){jQuery(this).is(":checked")&&n.done(e)}),this.setup=function(){}}function s(e){t.call(this,e);var n=this;e.on("change",function(t){n.done(e)})}jQuery(window.top.document).find("body").on("nextgen_event",function(t,e){n.nggEvents.push({type:e})}),_.extend(t.prototype,Backbone.Events),_.extend(e.prototype,t.prototype),_.extend(i.prototype,t.prototype),_.extend(r.prototype,t.prototype),_.extend(o.prototype,t.prototype),_.extend(s.prototype,t.prototype);this.views.push({handler:s,name:"SelectView",selector:"select"}),this.views.push({handler:o,name:"RadioView",selector:"input[type='radio']"}),this.views.push({handler:r,name:"TextView",selector:"input[type='text'], input[type='search'], input[type='email'], input[type='tel'], input[type='number'], input[type='username'], input[type='password'], textarea"}),this.views.push({handler:i,name:"ButtonView",selector:"a, input[type='button'], input[type='submit'], button"}),this.views.push({handler:e,name:"GenericView",selector:"*"}),Tourist.Tip.Base.prototype.nextButtonTemplate='<a class="button-primary pull-right tour-next">Next step â†’</a>',Tourist.Tip.Base.prototype.finalButtonTemplate='<button class="button-primary pull-right tour-next">Finish up</button>',Tourist.Tip.Base.prototype.closeButtonTemplate='<a class="btn btn-close tour-close" href="#"><i class="icon icon-remove far fa-window-close"></i></a>',Tourist.Tip.BootstrapTip.prototype._getTargetBounds=function(t){var e=t[0],e="function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},n=t.offset();if(t.ownerDocument!=document)for(var i=function t(e,n){for(var i=e.find("iframe"),r=[],o=0;o<i.length;o++){var s=jQuery(i.get(o));try{if(s.prop("contentWindow").document==n)return[s]}catch(t){continue}var a=t(s.contents(),n);if(0<a.length){r.push(s);for(var u=0;u<a.length;u++)r.push(a[u]);break}}return r}(jQuery(document),t.get(0).ownerDocument),r=0;r<i.length;r++){var o=i[r].offset();n.left+=o.left,n.top+=o.top}return jQuery.extend({},e,n)},jQuery(".ngg-wizard-invoker").on("click",function(t){t.preventDefault();for(var e=NextGEN_Wizard_Manager,n=jQuery(this).data("ngg-wizard"),i=null,r=0;r<e.wizards.length;r++){var o=e.wizards[r];if(o.id==n){i=o;break}}return null!=i&&null==this.runningWizard&&i.start(),!1})},bind:function(t,e){t in this.events||(this.events[t]=[]),this.events[t].push({handler:e})},trigger:function(t,e){if(void 0===e&&(e={}),t in this.events)for(var n=this.events[t],i=0;i<n.length;i++){var r=n[i];r.handler&&r.handler(this,e)}},didNextgenEventFire:function(t){for(var e=0;e<this.nggEvents.length;e++)if(this.nggEvents[e].type==t)return!0;return!1},getViewForSelector:function(t,e){var n=null;void 0===e&&(e=!0);for(var i=0;i<this.views.length;i++){var r=this.views[i];if(t.is(r.selector)){n=r.handler;break}}return null!=n?(r=new n(t),e&&r.init(),r):null},getViewFor:function(t,e,n){t=this.getViewForSelector(t,!1);return null!=t&&(t.currentWizard=e,t.currentStep=n,t.init()),t},generateQueue:function(t){var e=this,n=this.state,i=n.wizard_list.length,r=n.starter,o=n.running_wizard;if(0<i){for(var s=t('<div id="ngg-wizard-starter" class="ngg-wizard-starter"></div>'),r=(s.append('<div class="starter-wrap-top"><div class="starter-wrap-icon"><img class="starter-icon" src="'+r.image+'" /></div></div>'),s.append('<div class="starter-wrap-bottom"><div class="starter-wrap-text">'+r.text+"</div></div>"),s.on("click",".starter-wrap-icon, starter-wrap-bottom",function(){e.startQueue()}),s.hide(),s.appendTo("body"),this.starter=s,t('<div id="ngg-wizard-anchor" class="ngg-wizard-anchor"></div>')),a=(r.appendTo("body"),this.anchor=r,0),u=0;u<i;u++){var l=n.wizard_list[u],d=new NextGEN_Wizard(l.id,this),l=(d.data=l,d.steps=l.steps,this.generateTour(d));"ok"==l.result?(d.status="ready",d.tour=l.tour):"wait_element"==l.result&&(d.status="wait",a++),d.id==o?(this.wizards.unshift(d),this.runningWizard=d):this.wizards.push(d)}0<a?this.enqueueRefreshOperation():this.trigger("ready")}},getContextObject:function(t){var e=null;if(null!=t){"object"!==_typeof(t)&&(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if((e=null==e?jQuery(i):e.find(i)).is("iframe")){i=e.prop("contentWindow");if("interactive"!=i.document.readyState&&"complete"!=i.document.readyState){e=jQuery([]);break}e=i.jQuery?i.jQuery("body"):e.contents().find("body")}}0==e.length&&(e=jQuery([]))}else e=jQuery(document);return e},computeStepTarget:function(t,e,n){var i=e.target_wait,r=e.target,o=e.view,s=null,a=null,u=this.getContextObject(e.context),l=!1;if(null!=r){if(0<(s=u.find(r)).length?l=!0:s=this.anchor,!l&&null!=i&&Math.floor(Date.now()/1e3)-t.created<=i)return!1}else s=this.anchor;return null!=o&&0<(r=u.find(o)).length&&(a=this.getViewFor(r,t.id,e.id)),n.highlightTarget=l,n.nextButton=!l||e.optional,n.target=s,n.ngg_view=a,!0},scrollIntoView:function(t){},generateTour:function(t){if(null==t.tour){var e=t.data,n=e.steps,i=e.current_step,r=0,o=[],s=null;if(null!=e.view&&null==(s=this.getViewFor(jQuery(e.view),t.id)))return{result:"wait_element",element:e.view};for(var a=0;a<n.length;a++){var u=n[a],l=(null!=i&&i==u.id&&(r=a),{ngg_step_id:u.id,ngg_step_data:u,viewport:jQuery(window),closeButton:!0,content:'<div class="ngg-wizard-text">'+u.text+"</div>",my:u.popup_anchor,at:u.target_anchor,bind:["onDone"],onDone:function(t,e,n,i){var r,o=t.ngg_wizard,s=!0;if(null==this.ngg_step_data.condition||this.condition_met||(s=!1,this.condition_setup)||this.setupCondition(t,e),s&&null!=o){var a=o.getNextStep(this.ngg_step_id);if(null!=a&&a.lazy){for(var s=!1,u=null,l=0;l<t.options.steps.length;l++){var d=t.options.steps[l];if(d.ngg_step_id==a.id){u=d;break}}null!=u&&(null==u.target||0==u.target.length||"ngg-wizard-anchor"==u.target.attr("id")?!(s=o.manager.computeStepTarget(o,a,u))||null!=u.target&&0!=u.target.length&&"ngg-wizard-anchor"!=u.target.attr("id")||(s=!1):s=!0)}}s?t.next():(null!=this.lazyTimeout&&(clearTimeout(this.lazyTimeout),this.lazyTimeout=null),(r=this).lazyTimeout=setTimeout(function(){r.lazyTimeout=null,r.onDone(t,e,n,i)},500))}});if(!this.computeStepTarget(t,u,l))return{result:"wait_element",element:u.target};l.setupCondition=function(t,e){var n=t.ngg_wizard,t=this.ngg_step_data;if(!this.condition_setup&&null!=t.condition){var t=t.condition,i=t.type,r=t.value,o=t.context,s=t.timeout,a=(this.condition_met=!1,this.condition_setup=!1,o&&"object"!==_typeof(o)&&(o=[o]),jQuery([]));switch(o&&(t=(o=o.slice(0)).pop(),a=n.manager.getContextObject(o).find(t)),0<a.length&&((o=a.get(0).ownerDocument).defaultView||o.parentWindow),i){case"frame_event":window.Frame_Event_Publisher&&(this.condition_setup=!0,l=this,Frame_Event_Publisher.listen_for(r,function(){l.condition_met=!0}));break;case"event_bind":case"uppy_bind":var u=0<a.length;"uppy_bind"===i&&void 0!==window.ngg_uppy&&(a=window.ngg_uppy),u&&(this.condition_setup=!0,l=this,a.on(r,function(){l.condition_met=!0}));break;case"nextgen_event":this.condition_setup=!0,n.manager.didNextgenEventFire(r)?this.condition_met=!0:(l=this,jQuery(window.top.document).find("body").on("nextgen_event",function(t,e){e==r&&(l.condition_met=!0)}));break;case"wait":this.condition_setup=!0;var l=this;setTimeout(function(){l.condition_met=!0},r)}}var t=jQuery(".tourist-popover .ngg-wizard-text"),d=t.find(".ngg-wizard-loading");return d.hide(),this.condition_setup&&!this.condition_met&&0<s&&((this.condition_timeout=0)==d.length&&(d=jQuery('<div class="ngg-wizard-loading"></div>'),t.append(d)),d.html("Loading... ("+Math.ceil(s/1e3).toString()+")"),d.show(),(l=this).condition_timer=setInterval(function(){l.condition_timeout+=1e3,l.condition_timeout>=s&&(l.condition_met=!0);Math.floor(l.condition_timeout/1e3),Math.ceil(s/1e3);var t=Math.floor((s-l.condition_timeout)/1e3);d.html("Loading... ("+t.toString()+")"),l.condition_met&&(d.hide(),clearInterval(l.condition_timer),l.condition_timer=null)},1e3)),this.condition_setup},l.setup=function(t,e){e=e.view;null!=(e=null!=this.ngg_view?this.ngg_view:e)&&(e.currentWizard=t.ngg_wizard_id,e.currentStep=this.ngg_step_id,e.setup(),e.on("done",this.onDone),e.enable())},l.teardown=function(t,e){e=e.view;null!=(e=null!=this.ngg_view?this.ngg_view:e)&&(e.disable(),e.off("done",this.onDone),e.reset())},o.push(l)}var e={steps:o,tipClass:"Bootstrap",tipOptions:{showEffect:"slidein"},stepOptions:{}},d=(null!=s&&(e.stepOptions.view=s),new Tourist.Tour(e));for(d.ngg_wizard_id=t.id,d.ngg_wizard=t;0<r;)d.next(),r--;return{result:"ok",tour:d}}},enqueueRefreshOperation:function(){null!=this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),this.refreshTimer=setTimeout(function(t){NextGEN_Wizard_Manager.refreshQueue()},500)},refreshQueue:function(){this.refreshTimer=null;for(var t=0,e=0;e<this.wizards.length;e++){var n,i=this.wizards[e];"wait"==i.status&&("ok"==(n=this.generateTour(i)).result?(i.status="ready",i.tour=n.tour):"wait_element"==n.result&&(i.status="wait",t++))}0<t?this.enqueueRefreshOperation():this.trigger("ready")},start:function(){null!=this.runningWizard?this.runningWizard.start():this.showStarter()},showStarter:function(){},startQueue:function(){var t;null!=this.starter?(t=this).starter.fadeOut(function(){t.nextTour()}):this.nextTour()},nextTour:function(){for(var t,e=0,n=0;n<this.wizards.length;n++)if("ready"==(t=this.wizards[n]).status&&null!=t.tour){e=n;break}e<this.wizards.length&&(t=this.wizards[e]).tour.start()},updateWizardState:function(t){}}).init(),window.NextGEN_Wizard_Manager=manager),jQuery(function(t){"undefined"!=typeof NextGEN_Wizard_Manager&&(NextGEN_Wizard_Manager.bind("ready",function(){NextGEN_Wizard_Manager.start()}),NextGEN_Wizard_Manager.generateQueue(t))});