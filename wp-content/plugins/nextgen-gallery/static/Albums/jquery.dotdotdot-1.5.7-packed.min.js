"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(s){function f(t,e,n,o,i){var r=t.contents(),d=!1;t.empty();for(var a=0,l=r.length;a<l&&!d;a++){var c=r[a],u=s(c);void 0!==c&&(t.append(u),i&&t[t.is("table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style")?"after":"append"](i),3==c.nodeType?m(n,o)&&(d=function t(e,n,o,i,r){var d=!1,a=e[0];if(void 0===a)return!1;for(var l="letter"==i.wrap?"":" ",c=b(a).split(l),u=-1,s=-1,f=0,h=c.length-1;f<=h;){var p=Math.floor((f+h)/2);if(p==s)break;s=p,y(a,c.slice(0,s+1).join(l)+i.ellipsis),m(o,i)?h=s:f=u=s}{var g,v;-1==u||1==c.length&&0==c[0].length?(g=e.parent(),e.remove(),e=r?r.length:0,g.contents().size()>e?(e=g.contents().eq(-1-e),d=t(e,n,o,i,r)):void 0!==(a=g.prev().contents().eq(-1)[0])&&(v=w(b(a),i),y(a,v),g.remove(),d=!0)):(v=w(c.slice(0,u+1).join(l),i),d=!0,y(a,v))}return d}(u,e,n,o,i)):d=f(u,e,n,o,i),d||i&&i.remove())}return d}function m(t,e){return t.innerHeight()>e.maxHeight}function w(t,e){for(;-1<s.inArray(t.slice(-1),e.lastCharacter.remove);)t=t.slice(0,-1);return s.inArray(t.slice(-1),e.lastCharacter.noEllipsis)<0&&(t+=e.ellipsis),t}function u(t){return{width:t.innerWidth(),height:t.innerHeight()}}function y(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function b(t){return t.innerText||t.nodeValue||t.textContent||""}var h,e,n;s.fn.dotdotdot||(s.fn.dotdotdot=function(t){var o,n,i,r,d,a,l,e,c;return 0==this.length?(t&&!1===t.debug||(e=!0,c='No element found for "'+this.selector+'".',e&&(c="string"==typeof c?"dotdotdot: "+c:["dotdotdot:",c],void 0!==window.console)&&void 0!==window.console.log&&window.console.log(c)),this):1<this.length?this.each(function(){s(this).dotdotdot(t)}):((o=this).data("dotdotdot")&&o.trigger("destroy.dot"),o.bind_events=function(){return o.bind("update.dot",function(t,e){t.preventDefault(),t.stopPropagation(),i.maxHeight="number"==typeof i.height?i.height:function(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],o=0,i=n.length;o<i;o++){var r=parseInt(t.css(n[o]),10);e-=r=isNaN(r)?0:r}return e}(o),i.maxHeight+=i.tolerance,void 0!==e&&(e="string"==typeof e||e instanceof HTMLElement?s("<div />").append(e).contents():e)instanceof s&&(n=e),(l=o.wrapInner('<div class="dotdotdot" />').children()).empty().append(n.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});t=!1,e=!1;return r.afterElement&&(t=r.afterElement.clone(!0),r.afterElement.remove()),m(l,i)&&(e="children"==i.wrap?function(t,e,n){var o=t.children(),i=!1;t.empty();for(var r=0,d=o.length;r<d;r++){var a=o.eq(r);if(t.append(a),n&&t.append(n),m(t,e)){a.remove(),i=!0;break}n&&n.remove()}return i}(l,i,t):f(l,o,l,i,t)),l.replaceWith(l.contents()),l=null,s.isFunction(i.callback)&&i.callback.call(o[0],e,n),r.isTruncated=e}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],r.isTruncated),r.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],n),n}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().empty().append(n).data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){var t,e,n;return o.unwatch(),"window"==i.watch?(t=s(window),e=t.width(),n=t.height(),t.bind("resize.dot"+r.dotId,function(){e==t.width()&&n==t.height()&&i.windowResizeFix||(e=t.width(),n=t.height(),a&&clearInterval(a),a=setTimeout(function(){o.trigger("update.dot")},10))})):(d=u(o),a=setInterval(function(){var t=u(o);d.width==t.width&&d.height==t.height||(o.trigger("update.dot"),d=u(o))},100)),o},o.unwatch=function(){return s(window).unbind("resize.dot"+r.dotId),a&&clearInterval(a),o},n=o.contents(),i=s.extend(!0,{},s.fn.dotdotdot.defaults,t),d={},l=a=null,(r={}).afterElement=(e=i.after,c=o,void 0!==e&&!!e&&("string"==typeof e?!!(e=s(e,c)).length&&e:"object"==_typeof(e)&&void 0!==e.jquery&&e)),r.isTruncated=!1,r.dotId=h++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),i.watch&&o.watch(),o)},s.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},h=1,e=s.fn.html,s.fn.html=function(t){return void 0!==t?this.data("dotdotdot")&&"function"!=typeof t?this.trigger("update",[t]):e.call(this,t):e.call(this)},n=s.fn.text,s.fn.text=function(t){var e;return void 0!==t?this.data("dotdotdot")?((e=s("<div />")).text(t),t=e.html(),e.remove(),this.trigger("update",[t])):n.call(this,t):n.call(this)})}(jQuery);