"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,r){function t(e){if("object"!==_typeof(e.document))throw Error("Cookies.js requires a `window` with a `document` object");function o(e,t,n){return 1===arguments.length?o.get(e):o.set(e,t,n)}return o._document=e.document,o._cacheKeyPrefix="cookey.",o._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),o.defaults={path:"/",secure:!1},o.get=function(e){return o._cachedDocumentCookie!==o._document.cookie&&o._renewCache(),(e=o._cache[o._cacheKeyPrefix+e])===r?r:decodeURIComponent(e)},o.set=function(e,t,n){return(n=o._getExtendedOptions(n)).expires=o._getExpiresDate(t===r?-1:n.expires),o._document.cookie=o._generateCookieString(e,t,n),o},o.expire=function(e,t){return o.set(e,r,t)},o._getExtendedOptions=function(e){return{path:e&&e.path||o.defaults.path,domain:e&&e.domain||o.defaults.domain,expires:e&&e.expires||o.defaults.expires,secure:(e&&e.secure!==r?e:o.defaults).secure}},o._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},o._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=1/0===e?o._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!o._isValidDate(e))throw Error("`expires` parameter cannot be converted to a valid Date instance");return e},o._generateCookieString=function(e,t,n){return e=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent))+((n=n||{}).path?";path="+n.path:""),(e=(e+=n.domain?";domain="+n.domain:"")+(n.expires?";expires="+n.expires.toUTCString():""))+(n.secure?";secure":"")},o._getCacheFromString=function(e){var t={};e=e?e.split("; "):[];for(var n=0;n<e.length;n++){var i=o._getKeyValuePairFromCookieString(e[n]);t[o._cacheKeyPrefix+i.key]===r&&(t[o._cacheKeyPrefix+i.key]=i.value)}return t},o._getKeyValuePairFromCookieString=function(e){var t,n=(n=e.indexOf("="))<0?e.length:n,i=e.substr(0,n);try{t=decodeURIComponent(i)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+i+'"',e)}return{key:t,value:e.substr(n+1)}},o._renewCache=function(){o._cache=o._getCacheFromString(o._document.cookie),o._cachedDocumentCookie=o._document.cookie},o.enabled=(o._areEnabled=function(){var e="1"===o.set("cookies.js",1).get("cookies.js");return o.expire("cookies.js"),e})(),o}var n="object"===_typeof(e.document)?t(e):t;"function"==typeof define&&define.amd?define(function(){return n}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?(exports="object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=n:exports).Cookies=n:e.Cookies=n}("undefined"==typeof window?void 0:window),window.Frame_Event_Publisher={id:window.name,cookie_name:"X-Frame-Events",received:[],initialized:!1,children:{},window:!1,ajax_handlers_setup:!1,is_parent:function(){return window.parent.document===window.document},is_child:function(){return!this.is_parent()},setup_ajax_handlers:function(){var i;this.ajax_handlers_setup||(i=this,jQuery(document).ajaxComplete(function(e,t,n){setTimeout(function(){i.ajax_handler()},0)}))},ajax_handler:function(){this.broadcast(this.get_events(document.cookie))},initialize:function(){return this.setup_ajax_handlers(),void 0!==window.frame_event_publisher_domain&&(Cookies.defaults.domain=window.frame_event_publisher_domain),this.window=window,void 0!==this.window.id&&null!=this.window.id.length&&0<this.window.id.length?this.id=this.window.id:this.id,this.received=this.get_events(document.cookie),this.initialized=!0,this.is_parent()&&this.emit(this.received,!0),this.received},register_child:function(e){this.children[e.id]=e},broadcast:function(e,t){this.initialized||(e=this.initialize()),"Unknown"==this.id?(this.initialized=!1,setTimeout(function(){this.broadcast(e,t)},100)):this.is_child()?(arguments.length<=1&&(t=window),this.find_parent(t).register_child(t.Frame_Event_Publisher),this.notify_parent(e,t)):(0==arguments.length&&(e=this.received),this.notify_children(e))},notify_parent:function(e,t){this.find_parent(t).broadcast(e,t)},notify_children:function(e){for(var t in this.emit(e),this.children){t=this.children[t];try{t.emit(e)}catch(e){"undefined"!=typeof console&&console.log(e),delete this.children.index}}},find_parent:function(e){var t=e;try{for(;t.document!==t.parent.document;)t=t.parent}catch(e){"undefined"!=typeof console&&console.log(e)}return t.Frame_Event_Publisher},emit:function(e,t){for(var n in void 0===t&&(t=!1),e){var i=e[n];t||this.has_received_event(n)||("undefined"!=typeof console&&console.log("Emitting "+n+":"+i.event+" to "+this.id),this.trigger_event(n,e[n]))}},has_received_event:function(e){return null!=this.received[e]},trigger_event:function(e,t){var n=t.context+":"+t.event;t.id=e,"undefined"!=typeof window&&jQuery(window).trigger(n,t),this.received[e]=t},get_events:function(e){for(var t={},n=unescape(e).split(" "),i=0;i<n.length;i++){var o=n[i].match(/X-Frame-Events_([^=]+)=(.*)/);if(o){var r=o[1],o=o[2].replace(/;$/,"");try{t[r]=JSON.parse(o)}catch(e){}this.delete_cookie("X-Frame-Events_"+r)}}return t},delete_cookie:function(e){Cookies.expire(e)},listen_for:function(e,i){var o=this;jQuery(window).on(e,function(e,t){t.context;var n=t.id;o.has_received_event(n)||(i.call(o,t),o.received[n]=t)})}},jQuery(function(e){Frame_Event_Publisher.broadcast()});