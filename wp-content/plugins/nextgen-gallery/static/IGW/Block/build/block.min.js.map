{"version":3,"file":"block.min.js","mappings":"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","sources":["webpack://@envira/nextgen-gallery/./build/nextgen-gallery/static/IGW/Block/src/edit.jsx","webpack://@envira/nextgen-gallery/./build/nextgen-gallery/static/IGW/Block/src/icons.min.js","webpack://@envira/nextgen-gallery/./build/nextgen-gallery/static/IGW/Block/src/block.jsx"],"sourcesContent":["const body = document.body;\n\nclass NGGModal extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.closeModal    = this.closeModal.bind(this);\n\n        this.background_layer = document.createElement('div');\n        this.background_layer.setAttribute('id', 'add-ngg-gallery-modal-background');\n    }\n\n    componentDidMount() {\n        body.style.overflow = 'hidden';\n        body.appendChild(this.background_layer);\n\n        const self = this;\n\n        const iframe = document.getElementById('add-ngg-gallery-block-iframe');\n\n        iframe.addEventListener('NGG_Iframe_Ready', function() {\n            document.getElementById(\"add-ngg-gallery-modal-spinner\").classList.add(\"add-ngg-gallery-modal-spinner-hidden\");\n        });\n\n        iframe.addEventListener('NGG_Insert_Gallery', function(event) {\n            self.props.onInsertGallery(event.detail.shortcode);\n\n        })\n\n        iframe.addEventListener('NGG_Close_Modal', function() {\n            self.props.onCloseModal();\n        })\n    }\n\n    componentWillUnmount() {\n        body.style.overflow = 'auto';\n        body.removeChild(this.background_layer);\n    }\n\n    closeModal() {\n        this.props.onCloseModal();\n    }\n\n    render() {\n        let attach_to_post_url = window.igw.url + '&origin=block';\n        attach_to_post_url += '&nonce=' + window.add_ngg_gallery_block_i18n.nonce;\n\n        if (this.props.content) {\n            attach_to_post_url += '&shortcode=';\n            let shortcode = this.props.content.replace(/\\\\\"/g, '\"');\n            shortcode = shortcode.replace(/^\\[ngg_images/, '');\n            shortcode = shortcode.replace(/^\\[ngg/, '');\n            shortcode = shortcode.replace(/]$/, '');\n            attach_to_post_url += Base64.encode(shortcode);\n        }\n\n        // use createPortal to insert the modal div as a child of <body> to prevent the WP-Admin sidebar\n        // menu from getting in the way and causing annoying z-index issues\n        return ReactDOM.createPortal(\n            <div id=\"add-ngg-gallery-modal\">\n                <a href='#'\n                   id='add-ngg-gallery-modal-close'\n                   onClick={this.closeModal}>\n                    <span className=\"dashicons dashicons-no\"/>\n                </a>\n                <div id=\"add-ngg-gallery-modal-spinner\">\n                    <i className=\"fa fa-spin fa-spinner\"/>\n                </div>\n                <iframe src={attach_to_post_url}\n                        tabIndex=\"-1\"\n                        name=\"add-ngg-gallery-block-iframe\"\n                        id=\"add-ngg-gallery-block-iframe\"/>\n            </div>,\n            body\n        );\n    }\n}\n\nexport default class NGGEditor extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            open: false\n        }\n\n        this.openIGW       = this.openIGW.bind(this);\n        this.closeIGW      = this.closeIGW.bind(this);\n        this.removeGallery = this.removeGallery.bind(this);\n    }\n\n    hasGallery() {\n        return this.props.content && this.props.content.length > 0\n    }\n\n    removeGallery() {\n        this.props.onInsertGallery('');\n    }\n\n    closeIGW() {\n        this.setState({\n            open: false\n        });\n    }\n\n    openIGW() {\n        this.setState({\n            open: true\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"add-ngg-gallery-parent\">\n                {this.state.open ?\n                    <NGGModal content={this.props.content}\n                              onCloseModal={this.closeIGW}\n                              onInsertGallery={this.props.onInsertGallery}/>\n                    : ''\n                }\n                {this.hasGallery() ?\n                    <div className=\"add-ngg-gallery-block\">\n                        <h3>{add_ngg_gallery_block_i18n.h3}</h3>\n                        <button className=\"add-ngg-gallery-button\"\n                                onClick={this.openIGW}>\n                            {add_ngg_gallery_block_i18n.edit}\n                        </button>\n                        <button className=\"add-ngg-gallery-button\"\n                                onClick={this.removeGallery}>\n                            {add_ngg_gallery_block_i18n.delete}\n                        </button>\n                    </div>\n                    :\n                    <div className=\"add-ngg-gallery-block\">\n                        <div className=\"add-ngg-gallery-button\"\n                             onClick={this.openIGW}>\n                            {add_ngg_gallery_block_i18n.create}\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n","const icons = {};\n\nicons.nextgen =\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 240 240\" width=\"240.0pt\" height=\"240.0pt\">\n<path d=\"M 0.00 0.00 L 240.00 0.00 L 240.00 240.00 L 0.00 240.00 L 0.00 0.00 Z\" fill=\"#ffffff\" />\n<path d=\"M 116.97 3.45 C 155.78 2.17 194.29 21.78 215.90 54.07 C 226.92 70.43 234.08 89.34 236.07 109.00 C 239.08 140.20 228.61 172.42 208.14 196.12 C 191.73 215.41 168.66 228.79 143.97 234.16 C 125.25 238.08 105.37 237.44 87.04 231.86 C 67.00 226.07 48.82 214.65 34.69 199.32 C 14.08 177.26 2.88 147.13 3.50 117.00 C 4.36 95.58 10.72 74.49 22.55 56.55 C 35.03 37.69 52.63 22.36 73.52 13.50 C 87.07 6.87 101.94 3.80 116.97 3.45 Z\" fill=\"#9fbb1a\" />\n<path d=\"M 69.17 61.47 C 70.78 61.56 72.37 61.91 73.97 62.05 C 80.30 62.27 86.66 62.04 93.00 62.14 C 96.81 62.23 100.65 61.35 104.18 62.75 C 108.45 64.30 111.62 68.44 111.67 73.03 C 111.78 81.35 111.66 89.68 111.72 98.00 C 111.65 101.03 111.87 104.65 110.30 107.35 C 108.22 110.91 104.17 113.41 100.02 113.40 C 90.68 113.43 81.33 113.42 71.99 113.40 C 65.66 113.41 59.85 108.54 59.66 102.04 C 59.55 92.36 59.70 82.67 59.58 72.99 C 59.41 67.44 63.60 62.15 69.17 61.47 Z\" fill=\"#ffffff\" />\n<path d=\"M 138.98 61.27 C 148.33 61.42 157.69 61.22 167.04 61.37 C 173.28 61.31 178.81 66.69 178.70 72.96 C 178.72 82.65 178.75 92.34 178.68 102.02 C 178.48 108.28 173.18 112.96 167.02 113.04 C 157.69 113.25 148.33 113.02 138.99 113.15 C 132.77 113.56 126.76 108.35 126.66 102.04 C 126.55 94.37 126.67 86.68 126.62 79.00 C 126.63 76.33 126.42 73.60 126.72 70.94 C 127.60 65.24 133.25 60.88 138.98 61.27 Z\" fill=\"#ffffff\" />\n<path d=\"M 70.97 72.97 C 80.41 72.70 89.87 72.92 99.31 72.86 C 99.39 82.36 99.34 91.87 99.34 101.38 C 89.85 101.36 80.36 101.42 70.87 101.35 C 70.90 91.90 70.70 82.42 70.97 72.97 Z\" fill=\"#9fbb1a\" />\n<path d=\"M 138.39 72.91 C 147.80 72.79 157.23 72.85 166.65 72.88 C 166.65 82.41 166.85 91.97 166.55 101.49 C 157.18 101.27 147.79 101.39 138.41 101.42 C 138.30 91.92 138.36 82.41 138.39 72.91 Z\" fill=\"#9fbb1a\" />\n<path d=\"M 69.96 128.72 C 77.95 128.35 86.00 128.68 94.00 128.66 C 97.84 128.75 101.40 128.12 104.93 129.93 C 109.12 131.86 111.63 136.43 111.39 141.00 C 111.31 150.34 111.48 159.70 111.31 169.04 C 111.25 175.45 105.33 180.72 99.01 180.44 C 90.00 180.43 81.00 180.42 71.99 180.44 C 67.16 180.64 62.37 177.99 60.28 173.57 C 59.04 171.04 59.32 167.76 59.27 165.00 C 59.38 156.70 59.15 148.39 59.37 140.10 C 59.59 134.25 64.10 129.27 69.96 128.72 Z\" fill=\"#ffffff\" />\n<path d=\"M 137.96 128.68 C 146.96 128.36 156.00 128.45 165.00 128.61 C 167.68 128.64 170.26 129.00 172.61 130.36 C 176.44 132.46 178.51 136.68 178.41 140.99 C 178.39 150.33 178.47 159.67 178.37 169.01 C 178.48 174.84 173.95 180.48 167.95 180.68 C 159.31 180.89 150.65 180.67 142.00 180.78 C 139.64 180.74 137.05 180.91 134.76 180.27 C 129.71 178.66 126.48 173.17 126.62 168.01 C 126.61 161.01 126.64 154.00 126.62 147.00 C 126.71 143.40 126.11 139.00 127.75 135.73 C 129.57 131.70 133.51 128.85 137.96 128.68 Z\" fill=\"#ffffff\" />\n<path d=\"M 70.98 140.01 C 80.41 139.71 89.87 139.94 99.31 139.89 C 99.40 149.41 99.33 158.93 99.35 168.45 C 89.85 168.43 80.36 168.47 70.86 168.42 C 70.91 158.96 70.69 149.47 70.98 140.01 Z\" fill=\"#9fbb1a\" />\n<path d=\"M 138.45 140.41 C 147.84 140.29 157.27 140.44 166.67 140.35 C 166.70 149.82 166.71 159.29 166.67 168.77 C 157.24 168.71 147.81 168.71 138.38 168.77 C 138.39 159.32 138.24 149.85 138.45 140.41 Z\" fill=\"#9fbb1a\" />\n</svg>\n\nexport default icons;","import NGGEditor from './edit.jsx'\nimport icons     from './icons.min';\nconst { __ } \t\t\t\t= wp.i18n\nconst { RawHTML } \t        = wp.element\nconst { registerBlockType } = wp.blocks\n\n// Register our block\nregisterBlockType('imagely/nextgen-gallery', {\n\n    title: __('NextGEN Gallery'),\n\n    description: __('A block for adding NextGEN Galleries.'),\n\n    icon: icons.nextgen,\n\n    category: 'common',\n\n    attributes: {\n        content: {\n            type: 'string',\n            source: 'html',\n        },\n    },\n\n    supports: {\n        className: false,\n        customClassName: false,\n    },\n\n    edit({attributes, setAttributes}) {\n        return <NGGEditor content={attributes.content}\n                          onInsertGallery={(shortcode) => {\n                              setAttributes({content: shortcode});\n                          }}/>\n    },\n\n    save({ attributes }) {\n        return attributes.content;\n    }\n});\n"],"names":["body","document","NGGModal","props","_this","_classCallCheck","_callSuper","closeModal","bind","background_layer","createElement","setAttribute","_inherits","React","Component","_createClass","key","value","style","overflow","appendChild","this","self","iframe","getElementById","addEventListener","classList","add","event","onInsertGallery","detail","shortcode","onCloseModal","removeChild","attach_to_post_url","window","igw","url","add_ngg_gallery_block_i18n","nonce","content","replace","Base64","encode","ReactDOM","createPortal","id","href","onClick","className","src","tabIndex","name","NGGEditor","_this2","state","open","openIGW","closeIGW","removeGallery","length","setState","hasGallery","h3","edit","create","icons","nextgen","xmlns","version","viewBox","width","height","d","fill","__","wp","i18n","element","RawHTML","registerBlockType","blocks","title","description","icon","category","attributes","type","source","supports","customClassName","_ref","setAttributes","save","_ref2"],"sourceRoot":""}