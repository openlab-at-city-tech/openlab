jQuery(function(a){function e(e){var s=e.attr("data-url"),t=e.attr("data-types"),i=e.attr("data-limit");e.attr("data-show_search");var d=e.attr("data-user_id"),n=e.attr("data-orderby"),o=e.attr("data-order"),r=e.attr("data-show_title"),c=e.attr("data-show_thumb"),l=e.attr("data-show_description"),v=e.attr("data-default_view"),g=e.attr("data-image_width"),f=e.attr("data-image_height");e.find("div.badgeos-rank-lists-spinner").show(),a.ajax({url:s,data:{action:"get-ranks-list",nonce:BadgeosData.security,types:t,limit:i,user_id:d,offset:e.find("#badgeos_rank_lists_offset").val(),count:e.find("#badgeos_ranks_count").val(),search:e.find("#rank_lists_list_search").val(),orderby:n,order:o,show_title:r,show_thumb:c,default_view:v,show_description:l,image_width:g,image_height:f},dataType:"json",success:function(s){e.find("div.badgeos-rank-lists-spinner").hide(),null===s.data.message||(parseInt(e.find("#badgeos_rank_lists_offset").val())>0?e.find("div#badgeos-list-ranks-container .ls_grid_container").append(s.data.message):e.find("div#badgeos-list-ranks-container").append(s.data.message),e.find("#badgeos_rank_lists_offset").val(s.data.offset),e.find("#badgeos_ranks_count").val(s.data.badge_count),s.data.query_count<=s.data.offset?e.find(".rank_lists_list_load_more").hide():e.find(".rank_lists_list_load_more").show(),a(".badgeos-arrange-buttons button").on("click",function(){a(".badgeos-arrange-buttons button").removeClass("selected"),a(this).addClass("selected"),a(this).hasClass("grid")?a("#badgeos-list-ranks-container ul").removeClass("list").addClass("grid"):a(this).hasClass("list")&&a("#badgeos-list-ranks-container ul").removeClass("grid").addClass("list")}))}})}function s(e){var s=e.attr("data-url"),t=e.attr("data-rank_type"),i=e.attr("data-limit");e.attr("data-show_search");var d=e.attr("data-user_id"),n=e.attr("data-orderby"),o=e.attr("data-order"),r=e.attr("data-show_title"),c=e.attr("data-show_thumb"),l=e.attr("data-show_description"),v=e.attr("data-default_view"),g=e.attr("data-image_width"),f=e.attr("data-image_height");e.find("div.badgeos-earned-spinner").show(),a.ajax({url:s,data:{action:"get-earned-ranks",nonce:BadgeosData.security,rank_type:t,limit:i,user_id:d,offset:e.find("#badgeos_earned_ranks_offset").val(),count:e.find("#badgeos_ranks_count").val(),search:e.find("#earned_ranks_list_search").val(),orderby:n,order:o,show_title:r,show_thumb:c,default_view:v,show_description:l,image_width:g,image_height:f},dataType:"json",success:function(s){e.find("div.badgeos-earned-spinner").hide(),null===s.data.message||(parseInt(e.find("#badgeos_earned_ranks_offset").val())>0?e.find("div#badgeos-earned-ranks-container .ls_grid_container").append(s.data.message):e.find("div#badgeos-earned-ranks-container").append(s.data.message),e.find("#badgeos_earned_ranks_offset").val(s.data.offset),e.find("#badgeos_ranks_count").val(s.data.badge_count),s.data.query_count<=s.data.offset?e.find(".earned_ranks_list_load_more").hide():e.find(".earned_ranks_list_load_more").show(),a(".badgeos-arrange-buttons button").on("click",function(){a(".badgeos-arrange-buttons button").removeClass("selected"),a(this).addClass("selected"),a(this).hasClass("grid")?a("#badgeos-earned-ranks-container ul").removeClass("list").addClass("grid"):a(this).hasClass("list")&&a("#badgeos-earned-ranks-container ul").removeClass("grid").addClass("list")}))}})}function t(e){var s=e.attr("data-url"),t=e.attr("data-type"),i=e.attr("data-limit");e.attr("data-show_search");var d=e.attr("data-user_id"),n=e.attr("data-wpms"),r=e.attr("data-orderby"),c=e.attr("data-order"),l=e.attr("data-include"),v=e.attr("data-exclude"),g=e.attr("data-show_title"),f=e.attr("data-show_thumb"),b=e.attr("data-show_description"),h=e.attr("data-default_view"),u=e.attr("data-image_width"),m=e.attr("data-image_height");e.find("div.badgeos-earned-spinner").show(),a.ajax({url:s,data:{action:"get-earned-achievements",nonce:BadgeosData.security,type:t,limit:i,user_id:d,wpms:n,offset:e.find("#badgeos_achievements_offset").val(),count:e.find("#badgeos_achievements_count").val(),search:e.find("#earned_achievements_list_search").val(),orderby:r,order:c,include:l,exclude:v,show_title:g,show_thumb:f,show_description:b,default_view:h,image_width:u,image_height:m},dataType:"json",success:function(s){e.find("div.badgeos-earned-spinner").hide(),null===s.data.message||(parseInt(e.find("#badgeos_achievements_offset").val())>0?e.find("div#badgeos-earned-achievements-container .ls_grid_container").append(s.data.message):e.find("div#badgeos-earned-achievements-container").append(s.data.message),e.find("#badgeos_achievements_offset").val(s.data.offset),e.find("#badgeos_achievements_count").val(s.data.badge_count),s.data.query_count<=s.data.offset?e.find(".earned_achievements_list_load_more").hide():e.find(".earned_achievements_list_load_more").show()),a(".badgeos-arrange-buttons button").on("click",function(){a(".badgeos-arrange-buttons button").removeClass("selected"),a(this).addClass("selected"),a(this).hasClass("grid")?a("#badgeos-earned-achievements-container ul").removeClass("list").addClass("grid"):a(this).hasClass("list")&&a("#badgeos-earned-achievements-container ul").removeClass("grid").addClass("list")}),a(".badgeos-ob-verification-buttons").on("click",function(){o(this)})}})}function i(e){var s=e.attr("data-url"),t=e.attr("data-type"),i=e.attr("data-limit"),d=e.attr("data-show_child"),n=e.attr("data-show_parent");e.attr("data-show_filter"),e.attr("data-show_search");var o=e.attr("data-group_id"),r=e.attr("data-user_id"),c=e.attr("data-wpms"),l=e.attr("data-orderby"),v=e.attr("data-order"),g=e.attr("data-include"),f=e.attr("data-exclude"),b=e.attr("data-meta_key"),h=e.attr("data-meta_value"),u=e.attr("data-show_title"),m=e.attr("data-show_thumb"),p=e.attr("data-show_description"),k=e.attr("data-show_steps"),w=e.attr("data-default_view"),y=e.attr("data-image_width"),x=e.attr("data-image_height");a.ajax({url:s,data:{action:"get-achievements",nonce:BadgeosData.security,type:t,limit:i,show_parent:d,show_child:n,group_id:o,user_id:r,wpms:c,offset:e.find("#badgeos_achievements_offset").val(),count:e.find("#badgeos_achievements_count").val(),filter:e.find("#achievements_list_filter").val(),search:e.find("#achievements_list_search").val(),orderby:l,order:v,include:g,exclude:f,meta_key:b,meta_value:h,show_title:u,show_thumb:m,show_description:p,show_steps:k,default_view:w,image_width:y,image_height:x},dataType:"json",success:function(s){e.find("div.badgeos-spinner").hide(),null===s.data.message||(parseInt(e.find("#badgeos_achievements_offset").val())>0?e.find("div#badgeos-achievements-container .ls_grid_container").append(s.data.message):e.find("div#badgeos-achievements-container").append(s.data.message),e.find("#badgeos_achievements_offset").val(s.data.offset),e.find("#badgeos_achievements_count").val(s.data.badge_count),s.data.query_count<=s.data.offset?e.find(".achievements_list_load_more").hide():e.find(".achievements_list_load_more").show()),a(".badgeos-arrange-buttons button").on("click",function(){a(".badgeos-arrange-buttons button").removeClass("selected"),a(this).addClass("selected"),a(this).hasClass("grid")?a("#badgeos-achievements-container ul").removeClass("list").addClass("grid"):a(this).hasClass("list")&&a("#badgeos-achievements-container ul").removeClass("grid").addClass("list")})}})}function d(){a(".badgeos_achievement_main_container").each(function(e){i(a(this))})}function n(a){a.find("#badgeos_achievements_offset").val(0),a.find("#badgeos_achievements_count").val(0),a.find("div#badgeos-achievements-container").html(""),a.find(".achievements_list_load_more").hide(),i(a)}function o(e){a("#badgeos-ob-verification-res-list").html("");var s=a(e).data("bg"),t=a(e).data("eid"),i=a(e).data("uid");a(".badgeos_verification_modal_popup").fadeToggle(),a(".badgeos_verification_modal_popup").css({visibility:"visible",display:"block"});var d=0;a.ajax({url:BadgeosData.ajax_url,type:"POST",data:{action:"badgeos_validate_open_badge",bg:s,eid:t,uid:i,type:"issued_on"},dataType:"json",success:function(e){"success"==e.type&&parseInt(e.result)>0?a(".badgeos_verification_modal_panel").html('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"):a(".badgeos_verification_modal_panel").html('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"),d+=parseInt(e.result),a.ajax({url:BadgeosData.ajax_url,type:"POST",data:{action:"badgeos_validate_open_badge",bg:s,eid:t,uid:i,type:"issued_by"},dataType:"json",success:function(e){"success"==e.type&&parseInt(e.result)>0?a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"):a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"),d+=parseInt(e.result),a.ajax({url:BadgeosData.ajax_url,type:"POST",data:{action:"badgeos_validate_open_badge",bg:s,eid:t,uid:i,type:"issued_using"},dataType:"json",success:function(e){"success"==e.type&&parseInt(e.result)>0?a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"):a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"),d+=parseInt(e.result),a.ajax({url:BadgeosData.ajax_url,type:"POST",data:{action:"badgeos_validate_open_badge",bg:s,eid:t,uid:i,type:"issued_to"},dataType:"json",success:function(e){"success"==e.type&&parseInt(e.result)>0?a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"):a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"),d+=parseInt(e.result),a.ajax({url:BadgeosData.ajax_url,type:"POST",data:{action:"badgeos_validate_open_badge",bg:s,eid:t,uid:i,type:"expiry_date"},dataType:"json",success:function(e){"success"==e.type&&parseInt(e.result)>0?a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"):a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span>'+e.message+"</span></div></div>"),(d+=parseInt(e.result))<5?a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-times"></i></div><div class="badgeos_verification_badge_title"><span class="badgeos_verified">'+e.notverified_label+"</span></div></div>"):a(".badgeos_verification_modal_panel").append('<div class="badgeos_modal_badge"><div class="badgeos_verification_checkbox"><i class="fas fa-check"></i></div><div class="badgeos_verification_badge_title"><span class="badgeos_verified">'+e.verified_label+"</span></div></div>")}})}})}})}})}})}a("body"),a(".achievements_list_filter").change(function(){n(a(this).parents('div[class^="badgeos_achievement_main_container"]').eq(0))}).change(),a(".rank_lists_list_search_go_form").submit(function(s){var t;s.preventDefault(),(t=a(this).parents('div[class^="badgeos_ranks_list_main_container"]').eq(0)).find("#badgeos_rank_lists_offset").val(0),t.find("#badgeos_ranks_count").val(0),t.find("div#badgeos-list-ranks-container").html(""),t.find(".rank_lists_list_load_more").hide(),e(t)}),a(".earned_ranks_list_search_go").click(function(e){var t;e.preventDefault(),(t=a(this).parents('div[class^="badgeos_earned_rank_main_container"]').eq(0)).find("#badgeos_earned_ranks_offset").val(0),t.find("#badgeos_ranks_count").val(0),t.find("div#badgeos-earned-ranks-container").html(""),t.find(".earned_ranks_list_load_more").hide(),s(t)}),a(".achievements_list_search_go_form").submit(function(e){e.preventDefault();var s=a(this).parents('div[class^="badgeos_achievement_main_container"]').eq(0);n(s),s.find(".achievements_list_search_go").attr("disabled","disabled")}),a(".earned_achievements_list_search_go").click(function(e){var s;e.preventDefault(),(s=a(this).parents('div[class^="badgeos_earned_achievement_main_container"]').eq(0)).find("#badgeos_achievements_offset").val(0),s.find("#badgeos_achievements_count").val(0),s.find("div#badgeos-earned-achievements-container").html(""),s.find(".achievements_list_load_more").hide(),t(s)}),a(".achievements_list_search").focus(function(e){a(this).removeAttr("disabled"),a(".achievements_list_search_go").removeAttr("disabled")}),a(".achievements_list_load_more").click(function(){var e=a(this).parents('div[class^="badgeos_achievement_main_container"]').eq(0);e.find(".badgeos-spinner").show(),i(e)}),a(".earned_achievements_list_load_more").click(function(){var e=a(this).parents('div[class^="badgeos_earned_achievement_main_container"]').eq(0);e.find(".badgeos-earned-spinner").show(),t(e)}),a(".earned_ranks_list_load_more").click(function(){var e=a(this).parents('div[class^="badgeos_earned_rank_main_container"]').eq(0);e.find(".badgeos-earned-ranks-spinner").show(),s(e)}),a(".rank_lists_list_load_more").click(function(){var s=a(this).parents('div[class^="badgeos_ranks_list_main_container"]').eq(0);s.find(".badgeos-rank-lists-spinner").show(),e(s)}),a("#badgeos-achievements-container,.badgeos-single-achievement").on("click",".badgeos-open-close-switch a",function(e){e.preventDefault();var s=a(this);"close"==s.data("action")?(s.parent().siblings(".badgeos-extras-window").slideUp(300),s.data("action","open").prop("class","show-hide-open").text("Show Details")):(s.parent().siblings(".badgeos-extras-window").slideDown(300),s.data("action","close").prop("class","show-hide-close").text("Hide Details"))}),a(".badgeos_earned_achievements_offset").val("0"),a(".badgeos_earned_achievement_main_container").each(function(e){t(a(this))}),a(".badgeos_earned_ranks_offset").val("0"),a(".badgeos_earned_rank_main_container").each(function(e){s(a(this))}),a(".badgeos_rank_lists_offset").val("0"),a(".badgeos_ranks_list_main_container").each(function(s){e(a(this))}),a(document).on("click",".bos_ob_convert_to_ob_btn",function(e){e.preventDefault();var s=a(this),t=s.val();return a.ajax({url:BadgeosData.ajax_url,type:"POST",dataType:"json",data:{action:"bos_ob_convert_to_open_badge",entry_id:t},beforeSend:function(a){s.attr("disabled",!0).find(".bos_ob_btn_fa").show()},success:function(a){"success"==a.status&&s.text(a.message).delay(200).fadeOut()},error:function(a){},complete:function(){s.attr("disabled",!1).find(".bos_ob_btn_fa").hide()}})}),a("#open_badge_enable_baking").change(function(){"0"==a(this).val()?a("#open-badge-setting-section").hide():a("#open-badge-setting-section").show()}).change(),a(".badgeos_verification_close").click(function(){a(".badgeos_verification_modal_popup").fadeToggle(),a(".badgeos_verification_modal_popup").css({visibility:"hidden",display:"none"})}),a("#open-badgeos-verification").on("click",function(){o(this)}),jQuery(document).ready(function(){jQuery(".badge-os").hide(),jQuery(".bdgo-pts").show(),jQuery(".user-dash-tab").click(function(a){jQuery(".badge-os").hide(),jQuery("."+a.target.id).show()})})});