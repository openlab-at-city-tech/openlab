!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n={main:wp.element.createElement("svg",{"aria-hidden":"true",role:"img",focusable:"false",width:"43px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 43 40",version:"1.1",height:"40px"},wp.element.createElement("path",{d:"m12.5 0l-12.5 8.1 8.7 7 12.5-7.8-8.7-7.3zm-12.5 21.9l12.5 8.2 8.7-7.3-12.5-7.7-8.7 6.8zm21.2 0.9l8.8 7.3 12.4-8.1-8.6-6.9-12.6 7.7zm21.2-14.7l-12.4-8.1-8.8 7.3 12.6 7.8 8.6-7zm-21.1 16.3l-8.8 7.3-3.7-2.5v2.8l12.5 7.5 12.5-7.5v-2.8l-3.8 2.5-8.7-7.3z",fill:"#007EE5"})),button:wp.element.createElement("svg",{"aria-hidden":"true",role:"img",focusable:"false",class:"dropr-block-add-icon",width:"25px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 43 40",version:"1.1",height:"20px"},wp.element.createElement("path",{d:"m12.5 0l-12.5 8.1 8.7 7 12.5-7.8-8.7-7.3zm-12.5 21.9l12.5 8.2 8.7-7.3-12.5-7.7-8.7 6.8zm21.2 0.9l8.8 7.3 12.4-8.1-8.6-6.9-12.6 7.7zm21.2-14.7l-12.4-8.1-8.8 7.3 12.6 7.8 8.6-7zm-21.1 16.3l-8.8 7.3-3.7-2.5v2.8l12.5 7.5 12.5-7.5v-2.8l-3.8 2.5-8.7-7.3z",fill:"#191919"}))};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=wp.i18n,d=b.__,y=b.sprintf,h=wp.element,w=h.Component,v=h.createRef,g=wp.apiFetch,O=wp.url.addQueryArgs,j=wp.components,P=j.Placeholder,E=j.Spinner,k=lodash,S=k.isEqual,x=k.debounce;var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,r,n,o=a(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,e)).state={response:null},t.droprRef=v(),t}return t=u,(r=[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.fetch(this.props),this.fetch=x(this.fetch,500)}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"componentDidUpdate",value:function(e,t){if(S(e,this.props)||this.fetch(this.props),this.state.response!==t.response&&null!==this.droprRef.current){var r=this.props.attributes,n=void 0===r?null:r;if(null!==n&&n&&"document"===n.contentType&&"dropbox"===n.document.viewer){var o=this.droprRef.current,i=jQuery(o).find(".dropr-iframe-wrapper"),l=i.find(".dropbox-embed"),c={link:l.attr("href"),file:{zoom:"best"}};i.css({height:l.data("height"),width:l.data("width")}),l.remove(),Dropbox.embed(c,i.get(0))}}}},{key:"fetch",value:function(e){var t=this;if(this.isStillMounted){null!==this.state.response&&this.setState({response:null});var r=e.block,n=e.attributes,o=void 0===n?null:n,i=e.urlQueryArgs,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O("/wp/v2/block-renderer/".concat(e),f(f({context:"edit"},null!==t?{attributes:t}:{}),r))}(r,o,void 0===i?{}:i),c=this.currentFetchRequest=g({path:l}).then((function(e){t.isStillMounted&&c===t.currentFetchRequest&&e&&t.setState({response:e.rendered})})).catch((function(e){t.isStillMounted&&c===t.currentFetchRequest&&t.setState({response:{error:!0,errorMsg:e.message}})}));return c}}},{key:"render",value:function(){var e=this.state.response,t=this.props,r=t.className,n=t.EmptyResponsePlaceholder,o=t.ErrorResponsePlaceholder,l=t.LoadingResponsePlaceholder;if(""===e)return wp.element.createElement(n,i({response:e},this.props));if(!e)return wp.element.createElement(l,i({response:e},this.props));if(e.error)return wp.element.createElement(o,i({response:e},this.props));var c=void 0!==r&&r?"wp-dropr-block-content-wrapper "+r:"wp-dropr-block-content-wrapper";return wp.element.createElement("div",{ref:this.droprRef,className:c,dangerouslySetInnerHTML:{__html:e}})}}])&&l(t.prototype,r),n&&l(t,n),u}(w);_.defaultProps={EmptyResponsePlaceholder:function(e){var t=e.attributes,r=void 0===t?null:t,o=e.className,i=d("No content found!","dropr");return null!==r&&r&&("document"===r.contentType?i=d("No document found!","dropr"):"audio"!==r.contentType&&"video"!==r.contentType||(i=d("No media found!","dropr"))),wp.element.createElement(P,{label:d("Dropr","dropr"),icon:n.button,className:o},i)},ErrorResponsePlaceholder:function(e){var t=e.response,r=e.className,o=y(d("Error loading the block: %s","dropr"),t.errorMsg);return wp.element.createElement(P,{label:d("Dropr","dropr"),icon:n.button,className:r},o)},LoadingResponsePlaceholder:function(e){var t=e.className;return wp.element.createElement(P,{className:t},wp.element.createElement(E,null))}};var D=_;function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=wp.i18n.__,F=wp.element.Component,Q=wp.editor.InspectorControls,U=wp.components,W=U.PanelBody,H=U.TextControl,q=U.ToggleControl,V=U.RadioControl,G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,r,n,o=M(i);function i(){return N(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"setLinkAttributes",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.attributes.link);r[e]=t,this.props.setAttributes({link:r})}},{key:"render",value:function(){var e=this,t=this.props.attributes.link;return wp.element.createElement(Q,null,wp.element.createElement(W,{title:z("Link Settings","dropr")},wp.element.createElement(H,{label:z("Link Text","dropr"),value:t.text,onChange:function(t){return e.setLinkAttributes("text",t)}}),wp.element.createElement(V,{label:z("Link Style","dropr"),help:z("Choose a style for the download link","dropr"),selected:t.class,options:[{value:"plain",label:z("Plain","dropr")},{value:"wpdropbox-button",label:z("Button","dropr")}],onChange:function(t){return e.setLinkAttributes("class",t)}}),wp.element.createElement(q,{label:z("Open in New Tab","dropr"),checked:t.target,onChange:function(t){return e.setLinkAttributes("target",t)}})))}}])&&T(t.prototype,r),n&&T(t,n),i}(F);function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"isValidMSExtension",value:function(e){var t=(void 0!==e?e.split(".").pop():"").replace("?dl=0","");return t=t.replace("?raw=1",""),-1!==jQuery.inArray(t,["doc","pot","pps","ppt","xla","xls","xlt","xlw","docx","dotx","dotm","xlsx","xlsm","pptx"])}}],(r=null)&&J(t.prototype,r),n&&J(t,n),e}();function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var o=oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ne(this,r)}}function ne(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=wp.i18n.__,le=wp.element.Component,ce=wp.editor.InspectorControls,ae=wp.components,ue=ae.PanelBody,pe=ae.TextControl,se=ae.SelectControl,fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(i,e);var t,r,n,o=re(i);function i(){return $(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"setDocumentAttributes",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.attributes.document);r[e]=t,this.props.setAttributes({document:r})}},{key:"render",value:function(){var e=this,t=this.props.attributes.document,r=[{value:"dropbox",label:ie("Dropbox","dropr")},{value:"google",label:ie("Google Docs Viewer","dropr")}];return K.isValidMSExtension(t.url)&&r.push({value:"microsoft",label:ie("Microsoft Office Online","dropr")}),wp.element.createElement(ce,null,wp.element.createElement(ue,{title:ie("Document Settings","dropr")},wp.element.createElement(pe,{label:ie("Width","dropr"),help:ie("Width of document either in px or in %","dropr"),value:t.width,onChange:function(t){return e.setDocumentAttributes("width",t)}}),wp.element.createElement(pe,{label:ie("Height","dropr"),help:ie("Height of document either in px or in %","dropr"),value:t.height,onChange:function(t){return e.setDocumentAttributes("height",t)}}),wp.element.createElement(se,{label:ie("Show Download Link","dropr"),options:[{value:"all",label:ie("For all users","dropr")},{value:"logged",label:ie("For Logged-in users","dropr")},{value:"none",label:ie("No Download","dropr")}],value:t.download,onChange:function(t){return e.setDocumentAttributes("download",t)}}),wp.element.createElement(se,{label:ie("Viewer","dropr"),options:r,value:t.viewer,onChange:function(t){return e.setDocumentAttributes("viewer",t)}})))}}])&&ee(t.prototype,r),n&&ee(t,n),i}(le);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Oe(e);if(t){var o=Oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ge(this,r)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=wp.i18n.__,Pe=wp.element.Component,Ee=wp.editor.InspectorControls,ke=wp.components,Se=ke.PanelBody,xe=ke.ToggleControl,_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,e);var t,r,n,o=ve(i);function i(){return ye(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"setMediaAttributes",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.attributes.media);r[e]=t,this.props.setAttributes({media:r})}},{key:"render",value:function(){var e=this,t=this.props.attributes.media;return wp.element.createElement(Ee,null,wp.element.createElement(Se,{title:je("Media Settings","dropr")},wp.element.createElement(xe,{label:je("Autoplay","dropr"),checked:t.autoplay,onChange:function(t){return e.setMediaAttributes("autoplay",t)}}),wp.element.createElement(xe,{label:je("Loop","dropr"),checked:t.loop,onChange:function(t){return e.setMediaAttributes("loop",t)}})))}}])&&he(t.prototype,r),n&&he(t,n),i}(Pe);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Be(e);if(t){var o=Be(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Me(this,r)}}function Me(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=wp.i18n.__,ze=wp.element.Component,Fe=wp.editor.InspectorControls,Qe=wp.components,Ue=Qe.PanelBody,We=Qe.TextControl,He=Qe.TextareaControl,qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(i,e);var t,r,n,o=Le(i);function i(){return Ae(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"setImageAttributes",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.attributes.image);r[e]=t,this.props.setAttributes({image:r})}},{key:"render",value:function(){var e=this,t=this.props.attributes.image;return wp.element.createElement(Fe,null,wp.element.createElement(Ue,{title:Ie("Image Settings","dropr")},wp.element.createElement(We,{label:Ie("Width","dropr"),help:Ie("Width of Image in px","dropr"),value:t.width,onChange:function(t){return e.setImageAttributes("width",t)}}),wp.element.createElement(We,{label:Ie("Height","dropr"),help:Ie("Height of Image in px","dropr"),value:t.height,onChange:function(t){return e.setImageAttributes("height",t)}}),wp.element.createElement(He,{label:Ie("Alt Text (Alternative Text)"),value:t.alt,onChange:function(t){return e.setImageAttributes("alt",t)},help:Ie("Alternative text describes your image to people who can’t see it. Add a short description with its key details.")})))}}])&&Ne(t.prototype,r),n&&Ne(t,n),i}(ze),Ve=wp.i18n.__,Ge=wp.element.Fragment;function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye=wp.i18n.__,Ze=wp.blocks.registerBlockType,$e=wp.editor,et=$e.BlockControls,tt=$e.BlockAlignmentToolbar,rt=$e.RichText,nt=wp.hooks.addFilter,ot=wp.components,it=ot.Placeholder,lt=ot.Button;Ze("dropr-for-dropbox/dropr",{title:Ye("Dropr","dropr"),description:Ye("Add files from your Dropbox account.","dropr"),icon:n.main,category:"common",keywords:[Ye("Dropbox","dropr"),Ye("Add from Dropbox","dropr")],supports:{html:!1,className:!1},edit:function(e){var t=e.attributes,r=e.setAttributes,o=e.className,i=e.isSelected,l=t.contentType,c=function(e,n){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.image);"class"===e&&(n=n?"align"+n:"alignnone"),o[e]=n,r({image:o})};if(void 0!==l){var a=null,u=null,p=null;if("link"===l||"image"===l){var s=null,f="wp-dropr-block-wrapper";if(f=o?f+" "+o:f,"link"===l){u=wp.element.createElement(G,e);var m=t.link,b=!0===m.target?"_blank":null,d=!0===m.target?"noopener noreferrer":null;s=wp.element.createElement("a",{href:m.src,className:m.class,target:b,rel:d},m.text)}else if("image"===l){var y=t.image,h=void 0!==y.class?y.class:"",w="undefined"!==(h=h.length>0?h:"alignnone")?h.replace("align",""):"";a=wp.element.createElement(et,null,wp.element.createElement(tt,{value:w,onChange:function(e){return c("class",e)},controls:["left","center","right"]})),u=wp.element.createElement(qe,e);var v=wp.element.createElement("img",{src:y.src,className:h,alt:y.alt,title:y.title,width:y.width,height:y.height}),g=y.customURL?wp.element.createElement("a",{href:y.customURL,className:"dropr-img-block-link"},v):v,O=null;rt.isEmpty(y.caption)&&!i||(O=wp.element.createElement(rt,{tagName:"figcaption",placeholder:Ye("Write caption…"),value:y.caption,onChange:function(e){return c("caption",e)},inlineToolbar:!0})),s=wp.element.createElement("figure",{className:"dropr-img-"+h},g,O)}p=wp.element.createElement("div",{className:f},wp.element.createElement("div",{className:"wp-dropr-block wp-dropr-".concat(l,"-block")},s))}else"audio"===l||"video"===l?u=wp.element.createElement(_e,e):"document"===l&&(u=wp.element.createElement(fe,e)),p=wp.element.createElement(D,{block:"dropr-for-dropbox/dropr",attributes:t});return[a,u,p]}return wp.element.createElement(it,{label:Ye("Dropr","dropr"),instructions:Ye("Add files from your Dropbox account.","dropr"),icon:n.button,className:"dropr-block-wrapper"},wp.element.createElement(lt,{className:"awsm-dropr",onClick:function(){return function(e){e.activeDroprBlock=!0,jQuery("#wpdrop-popup").on("click","#wpdpx-drop-insert",(function(t){if(t.preventDefault(),null!==e&&!0===e.activeDroprBlock){e.activeDroprBlock=!1;var r=jQuery("#wpdrop-popup input[name='insert-type']:checked").val(),n={contentType:r},o=jQuery("#wpdpx-embed-"+r).data("blockAttrs");"audio"===r||"video"===r?n.media=o:n[r]=o,e.setAttributes(n)}}))}(e)},isSecondary:!0,isLarge:!0},Ye("Add From Dropbox","dropr")))},save:function(e){var t=e.attributes,r=e.className,n=t.contentType,o=null;if(n&&void 0!==Je(t[n])){var i="",l="wp-dropr-block-wrapper";l=r?l+" "+r:l;var c=t["audio"===n||"video"===n?"media":n];if("audio"===n||"video"===n||"document"===n){var a="";for(var u in c){var p=c[u];a+=" ".concat(u,'="').concat(p,'"')}i="document"===n?"[docembed".concat(a,"]"):"[".concat(n+a,"][/").concat(n,"]")}else if("link"===n){var s=!0===c.target?"_blank":null,f=!0===c.target?"noopener noreferrer":null;i=wp.element.createElement("a",{href:c.src,className:c.class,target:s,rel:f},c.text)}else if("image"===n){var m=void 0!==c.class?c.class:"";m=m.length>0?m:"alignnone";var b=wp.element.createElement("img",{src:c.src,className:m,alt:c.alt,title:c.title,width:c.width,height:c.height}),d=c.customURL?wp.element.createElement("a",{href:c.customURL,className:"dropr-img-block-link"},b):b,y=null;rt.isEmpty(c.caption)||(y=wp.element.createElement(rt.Content,{tagName:"figcaption",value:c.caption})),i=wp.element.createElement("figure",{className:"dropr-img-"+m},d,y)}o=wp.element.createElement("div",{className:l},wp.element.createElement("div",{className:"wp-dropr-block wp-dropr-".concat(n,"-block")},i))}return o}}),nt("editor.PostFeaturedImage","dropr-for-dropbox/dropr",(function(e){return function(t){var r=dropr_options.plugin_url+"images/",n=wp.element.createElement("div",{className:"wp-dropr-block-featured-img-wrapper"},wp.element.createElement("p",{className:"hide-if-no-js"},wp.element.createElement("a",{href:"#",id:"droper-featured"},wp.element.createElement("img",{src:r+"dropr-icon-xs-b.png",style:{float:"left",marginRight:"5px"}}),Ve("Add From Dropbox","dropr")),wp.element.createElement("img",{src:r+"loading-bubbles.svg",style:{display:"none"},className:"droprLoader",alt:Ve("Loading icon","dropr")})),wp.element.createElement("p",{id:"dropr-holder"}));return wp.element.createElement(Ge,null,wp.element.createElement(e,t),n)}}))}]);