{"version":3,"file":"block-usage.js","mappings":"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","sources":["webpack://advanced-gutenberg/./assets/blocks/block-usage/block-usage.jsx"],"sourcesContent":["(function (wpI18n, wpHooks, wpBlocks, wpBlockEditor, wpComponents, wpCompose, wpElement) {\r\n    const { render, useState, useEffect, useRef, useMemo } = wpElement;\r\n    const { PanelBody, Button, Card, Spinner, Flex, FlexItem, ProgressBar, Notice, FormTokenField } = wpComponents;\r\n    const { __, sprintf } = wpI18n;\r\n\r\n    // IndexedDB setup\r\n    const DB_NAME = 'publishpress_blocks';\r\n    const STORE_NAME = 'block_usage_data';\r\n    const DB_VERSION = 1;\r\n    const EXCLUDED_BLOCKS = ['advgb/accordion'];\r\n\r\n    const openDatabase = () => {\r\n        return new Promise((resolve, reject) => {\r\n            const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n            request.onerror = (event) => {\r\n                console.error('Database error:', event.target.error);\r\n                reject(event.target.error);\r\n            };\r\n\r\n            request.onsuccess = (event) => {\r\n                resolve(event.target.result);\r\n            };\r\n\r\n            request.onupgradeneeded = (event) => {\r\n                const db = event.target.result;\r\n                if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n                    db.createObjectStore(STORE_NAME, { keyPath: 'key' });\r\n                }\r\n            };\r\n        });\r\n    };\r\n\r\n    const getFromCache = async (key) => {\r\n        try {\r\n            const db = await openDatabase();\r\n            return new Promise((resolve, reject) => {\r\n                const transaction = db.transaction([STORE_NAME], 'readonly');\r\n                const store = transaction.objectStore(STORE_NAME);\r\n                const request = store.get(key);\r\n\r\n                request.onerror = () => reject('Error reading from cache');\r\n                request.onsuccess = () => resolve(request.result ? request.result.value : null);\r\n            });\r\n        } catch (error) {\r\n            console.error('Cache error:', error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const saveToCache = async (key, value) => {\r\n        try {\r\n            const db = await openDatabase();\r\n            return new Promise((resolve, reject) => {\r\n                const transaction = db.transaction([STORE_NAME], 'readwrite');\r\n                const store = transaction.objectStore(STORE_NAME);\r\n                const request = store.put({ key, value });\r\n\r\n                request.onerror = () => reject('Error saving to cache');\r\n                request.onsuccess = () => resolve();\r\n            });\r\n        } catch (error) {\r\n            console.error('Cache error:', error);\r\n        }\r\n    };\r\n\r\n    const clearCache = async () => {\r\n        try {\r\n            const db = await openDatabase();\r\n            return new Promise((resolve, reject) => {\r\n                const transaction = db.transaction([STORE_NAME], 'readwrite');\r\n                const store = transaction.objectStore(STORE_NAME);\r\n                const request = store.clear();\r\n\r\n                request.onerror = () => reject('Error clearing cache');\r\n                request.onsuccess = () => resolve();\r\n            });\r\n        } catch (error) {\r\n            console.error('Cache error:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const getBlocks = () => {\r\n        if (typeof wp.blocks === 'undefined') {\r\n            return { blocks: [], categories: [] };\r\n        }\r\n\r\n        // Register core blocks if available\r\n        if (wp.blockLibrary && typeof wp.blockLibrary.registerCoreBlocks === 'function') {\r\n            wp.blockLibrary.registerCoreBlocks();\r\n        }\r\n\r\n        let allBlocks = wp.blocks.getBlockTypes();\r\n        let allCategories = wp.blocks.getCategories();\r\n        let listBlocks = [];\r\n\r\n        // Get the category titles from localized data if available\r\n        const localizedCategories = (window.advgb_block_usage_data || {}).blockCategories || [];\r\n        const categoryTitleMap = localizedCategories.reduce((map, cat) => {\r\n            map[cat.slug] = cat.title;\r\n            return map;\r\n        }, {});\r\n\r\n        // Get blocks saved in advgb_block_usage_data.saved_blocks option\r\n        const { saved_blocks = [] } = window.advgb_block_usage_data || {};\r\n        if (saved_blocks.length > 0) {\r\n            const diff_blocks = saved_blocks.filter(\r\n                blocksA => !allBlocks.some(blocksB => blocksA.name === blocksB.name)\r\n            );\r\n            if (diff_blocks.length > 0) {\r\n                allBlocks = [...allBlocks, ...diff_blocks];\r\n            }\r\n        }\r\n\r\n        // Force activate blocks (like widget blocks)\r\n        const force_activate_blocks = [\r\n            {\r\n                'name': 'core/widget-group',\r\n                'icon': 'block-default',\r\n                'title': 'Widget Group',\r\n                'category': 'widgets'\r\n            },\r\n        ];\r\n        allBlocks = [...allBlocks, ...force_activate_blocks];\r\n\r\n        // Additional blocks to include\r\n        const include_blocks = [\r\n            {\r\n                'name': 'core/legacy-widget',\r\n                'icon': 'block-default',\r\n                'title': 'Legacy Widget',\r\n                'category': 'widgets'\r\n            }\r\n        ];\r\n        allBlocks = [...allBlocks, ...include_blocks];\r\n\r\n        // Process all blocks to standardize the format\r\n        allBlocks.forEach(function (block) {\r\n            // Skip excluded blocks\r\n            if (EXCLUDED_BLOCKS.includes(block.name)) {\r\n                return;\r\n            }\r\n            var blockItemIcon = '';\r\n            const blockItem = {\r\n                name: block.name,\r\n                icon: block.icon.src || block.icon,\r\n                title: block.title,\r\n                category: block.category || 'common',\r\n                parent: block.parent,\r\n                description: block.description || ''\r\n            };\r\n\r\n            // Use the localized category title if available\r\n            if (categoryTitleMap[blockItem.category]) {\r\n                blockItem.categoryTitle = categoryTitleMap[blockItem.category];\r\n            }\r\n\r\n            const savedIcon = !!block.icon.src ? block.icon.src : block.icon;\r\n\r\n            if (block.icon.foreground !== undefined) blockItem.iconColor = block.icon.foreground;\r\n\r\n            if (typeof savedIcon === 'function') {\r\n                if (typeof savedIcon.prototype !== 'undefined') {\r\n                    blockItem.icon = wp.element.renderToString(wp.element.createElement(savedIcon));\r\n                    blockItem.icon = blockItem.icon.replace(/stopcolor/g, 'stop-color');\r\n                    blockItem.icon = blockItem.icon.replace(/stopopacity/g, 'stop-opacity');\r\n                } else {\r\n                    blockItemIcon = wp.element.createElement(wp.components.Dashicon, { icon: 'block-default' });\r\n                    blockItem.icon = wp.element.renderToString(blockItemIcon);\r\n                }\r\n            } else if (typeof savedIcon === 'object') {\r\n                blockItem.icon = wp.element.renderToString(savedIcon);\r\n                blockItem.icon = blockItem.icon.replace(/stopcolor/g, 'stop-color');\r\n                blockItem.icon = blockItem.icon.replace(/stopopacity/g, 'stop-opacity');\r\n            } else if (\r\n                typeof savedIcon === 'string'\r\n                && !savedIcon.includes('<span') // Merged blocks icons from 'advgb_blocks_list' are stored as html\r\n                && !savedIcon.includes('<svg') // Merged blocks icons from 'advgb_blocks_list' are stored as html\r\n            ) {\r\n                blockItemIcon = wp.element.createElement(wp.components.Dashicon, { icon: savedIcon });\r\n                blockItem.icon = wp.element.renderToString(blockItemIcon);\r\n            } else {\r\n                blockItem.icon = savedIcon; // Pure html for merged blocks icons from 'advgb_blocks_list'\r\n            }\r\n\r\n            listBlocks.push(blockItem);\r\n        });\r\n\r\n        // Remove duplicated blocks by block name\r\n        const uniqueNames = [];\r\n        let i = listBlocks.length;\r\n        while (i--) {\r\n            const name = listBlocks[i].name;\r\n            if (uniqueNames.includes(name)) {\r\n                listBlocks.splice(i, 1);\r\n            } else {\r\n                uniqueNames.push(name);\r\n            }\r\n        }\r\n\r\n        // Sort categories to show \"advgb-category\" first\r\n        allCategories.sort((a, b) => {\r\n            if (a.slug === 'advgb-category') return -1;\r\n            if (b.slug === 'advgb-category') return 1;\r\n            return 0;\r\n        });\r\n\r\n        // Add any missing categories from localized data\r\n        localizedCategories.forEach(localizedCat => {\r\n            if (!allCategories.some(cat => cat.slug === localizedCat.slug)) {\r\n                allCategories.push({\r\n                    slug: localizedCat.slug,\r\n                    title: localizedCat.title\r\n                });\r\n            }\r\n        });\r\n\r\n        return {\r\n            blocks: listBlocks,\r\n            categories: allCategories\r\n        };\r\n    };\r\n\r\n    const Sidebar = React.memo(({ selected, data, onClose, canEditPosts }) => {\r\n        const [expandedPost, setExpandedPost] = useState(null);\r\n        const { usage = {}, posts = [] } = data;\r\n\r\n        const blockData = usage[selected?.name] || { posts: {}, total: 0 };\r\n        const postIds = Object.keys(blockData.posts);\r\n\r\n        // Get posts that contain this block\r\n        const blockPosts = useMemo(() => {\r\n            return posts.filter(post => postIds.includes(post.post_id.toString()));\r\n        }, [posts, postIds]);\r\n\r\n        // Group posts by title (for multiple instances in same post)\r\n        const groupedPosts = useMemo(() => {\r\n            const groups = {};\r\n\r\n            blockPosts.forEach(post => {\r\n                const count = blockData.posts[post.post_id]?.count || 0;\r\n                const scanned = blockData.posts[post.post_id]?.scanned || '';\r\n\r\n                const key = `${post.post_title}-${post.post_id}`;\r\n\r\n                if (!groups[key]) {\r\n                    groups[key] = {\r\n                        ...post,\r\n                        totalCount: 0,\r\n                        scanned\r\n                    };\r\n                }\r\n\r\n                groups[key].totalCount += count;\r\n            });\r\n\r\n            return Object.values(groups);\r\n        }, [blockPosts, blockData]);\r\n\r\n        const renderBlockItem = (block, depth = 0) => {\r\n            if (!block.name) return null;\r\n\r\n            return (\r\n                <div\r\n                    key={block.clientId || `${block.name}-${depth}-${Math.random().toString(36).substr(2, 9)}`}\r\n                    className=\"pp-blocks-usage-post-block-item\"\r\n                    style={{ marginLeft: `${depth * 15}px` }}\r\n                >\r\n                    <div className=\"pp-blocks-usage-block-name\">\r\n                        {block.icon && (\r\n                            <span className=\"block-icon\" style={block.iconColor ? { color: block.iconColor } : {}}>\r\n                                {typeof block.icon === 'string' && !block.icon.includes('<') ? (\r\n                                    <span className={`dashicons dashicons-${block.icon}`}></span>\r\n                                ) : (\r\n                                    <span dangerouslySetInnerHTML={{ __html: block.icon }} />\r\n                                )}\r\n                            </span>\r\n                        )}\r\n                        {block.name}\r\n                    </div>\r\n                    {block.innerBlocks?.map(innerBlock => renderBlockItem(innerBlock, depth + 1))}\r\n                </div>\r\n            );\r\n        };\r\n\r\n        return (\r\n            <div className=\"pp-blocks-usage-sidebar\" ref={useRef(null)}>\r\n                <div className=\"pp-blocks-usage-sidebar-header\">\r\n                    <h2>\r\n                        <div className=\"pp-blocks-usage-tile-main\">\r\n                            <span>{selected.title}</span>\r\n                        </div>\r\n                        <span className=\"pp-blocks-usage-panel-subtitle\">\r\n                            {groupedPosts.length} {__('locations', 'advanced-gutenberg')} | {blockData.total} {__('instances', 'advanced-gutenberg')}\r\n                        </span>\r\n                    </h2>\r\n                </div>\r\n                <div className=\"pp-blocks-usage-sidebar-content\">\r\n                    <div className=\"pp-blocks-usage-block-meta\">\r\n                        <p><strong>{__('Name:', 'advanced-gutenberg')}</strong> {selected.title}</p>\r\n                        <p><strong>{__('Description:', 'advanced-gutenberg')}</strong> {selected.description}</p>\r\n                        <p><strong>{__('Category:', 'advanced-gutenberg')}</strong> {selected.category}</p>\r\n                    </div>\r\n\r\n                    {groupedPosts.length > 0 ? (\r\n                        <>\r\n                            <div className=\"pp-blocks-usage-usage-stats\">\r\n                                <span><strong>{__('Locations:', 'advanced-gutenberg')}</strong> {groupedPosts.length}</span>\r\n                                <span><strong>{__('Total instances:', 'advanced-gutenberg')}</strong> {blockData.total}</span>\r\n                            </div>\r\n\r\n                            <div className=\"pp-blocks-usage-post-list\">\r\n                                {groupedPosts.map((post) => {\r\n                                    const isExpanded = expandedPost === post.post_id;\r\n                                    const postTypeLabel = post.post_type;\r\n\r\n                                    return (\r\n                                        <div key={post.post_id} className={`pp-blocks-usage-post-item ${isExpanded ? 'expanded' : ''}`}>\r\n                                            <div\r\n                                                className=\"pp-blocks-usage-post-header\"\r\n                                                onClick={() => setExpandedPost(isExpanded ? null : post.post_id)}\r\n                                            >\r\n                                                <div className=\"pp-blocks-usage-post-title\">\r\n                                                    {post.post_title}\r\n                                                </div>\r\n                                                <div className=\"pp-blocks-usage-post-meta\">\r\n                                                    <span className=\"pp-blocks-usage-post-type\">\r\n                                                        {postTypeLabel}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <Button\r\n                                                    size=\"small\"\r\n                                                    icon={isExpanded ? 'arrow-up-alt2' : 'arrow-down-alt2'}\r\n                                                    className=\"pp-blocks-usage-expand-button\"\r\n                                                />\r\n                                            </div>\r\n\r\n                                            {isExpanded && (\r\n                                                <div className=\"pp-blocks-usage-post-content\">\r\n                                                    <div className=\"pp-blocks-usage-post-actions\">\r\n                                                        {post.edit_link && canEditPosts && (\r\n                                                            <Button\r\n                                                                variant=\"secondary\"\r\n                                                                isSmall\r\n                                                                href={post.edit_link}\r\n                                                                target=\"_blank\"\r\n                                                            >\r\n                                                                {__('Edit Post', 'advanced-gutenberg')}\r\n                                                            </Button>\r\n                                                        )}\r\n                                                        <Button\r\n                                                            variant=\"secondary\"\r\n                                                            size=\"small\"\r\n                                                            href={post.view_link}\r\n                                                            target=\"_blank\"\r\n                                                        >\r\n                                                            {__('View Post', 'advanced-gutenberg')}\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                    <div className=\"pp-blocks-usage-post-blocks\">\r\n                                                        <h4>{__('Blocks in this post:', 'advanced-gutenberg')}</h4>\r\n                                                        {post.blocks?.length > 0 ? (\r\n                                                            post.blocks.map(block => renderBlockItem(block))\r\n                                                        ) : (\r\n                                                            <p>{__('No blocks found in this post.', 'advanced-gutenberg')}</p>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"pp-blocks-usage-no-results\">\r\n                            {data.lastScanDate ? (\r\n                                <>\r\n                                    <p><em>{__('This block was not found in any posts.', 'advanced-gutenberg')}</em></p>\r\n                                    <p>{__('Last scan:', 'advanced-gutenberg')} {new Date(data.lastScanDate).toLocaleString()}</p>\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <p><em>{__('No scan history available for this block.', 'advanced-gutenberg')}</em></p>\r\n                                    <p>{__('Click the Scan button to check for usage.', 'advanced-gutenberg')}</p>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    });\r\n\r\n    const App = () => {\r\n        const {\r\n            ajaxUrl = '',\r\n            nonce = '',\r\n            initialData,\r\n            currentUser\r\n        } = window.advgb_block_usage_data || {};\r\n\r\n        const [blocksData, setBlocksData] = useState(() => getBlocks());\r\n        const [data, setData] = useState(initialData);\r\n        const [loadingAll, setLoadingAll] = useState(false);\r\n        const [loadingClearAll, setLoadingClearAll] = useState(false);\r\n        const [selected, setSelected] = useState(null);\r\n        const [showEmptyBlocks, setShowEmptyBlocks] = useState(false);\r\n        const [selectedPostTypes, setSelectedPostTypes] = useState(['post', 'page']);\r\n        const [scanProgress, setScanProgress] = useState({\r\n            current: 0,\r\n            total: 0,\r\n            status: '',\r\n            completed: false\r\n        });\r\n        const [dbError, setDbError] = useState(null);\r\n        const [initialLoadComplete, setInitialLoadComplete] = useState(false);\r\n\r\n        // Load data from IndexedDB on initial render\r\n        useEffect(() => {\r\n            const loadData = async () => {\r\n                try {\r\n                    const cachedData = await getFromCache('block_usage_data');\r\n                    const cachedSettings = await getFromCache('block_usage_settings');\r\n\r\n                    if (cachedData) {\r\n                        setData(cachedData);\r\n                    }\r\n\r\n                    if (cachedSettings) {\r\n                        setShowEmptyBlocks(cachedSettings.showEmptyBlocks !== false);\r\n\r\n                        if (cachedSettings.lastSelectedBlock) {\r\n                            const lastSelected = blocksData.blocks.find(b => b.name === cachedSettings.lastSelectedBlock);\r\n                            if (lastSelected) {\r\n                                setSelected(lastSelected);\r\n                            }\r\n                        }\r\n\r\n                        if (cachedSettings.selectedPostTypes) {\r\n                            setSelectedPostTypes(cachedSettings.selectedPostTypes);\r\n                        }\r\n                    }\r\n                    setInitialLoadComplete(true);\r\n                } catch (error) {\r\n                    console.error('Failed to load data from IndexedDB:', error);\r\n                    setDbError(__('Failed to load data from local storage. Please refresh the page.', 'advanced-gutenberg'));\r\n                    setInitialLoadComplete(true);\r\n                }\r\n            };\r\n\r\n            loadData();\r\n        }, [blocksData.blocks]);\r\n\r\n        const postAjax = (action, data = {}) => {\r\n            const body = new URLSearchParams({ action, nonce, ...data });\r\n            return fetch(ajaxUrl, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                body,\r\n            }).then(r => r.json());\r\n        };\r\n\r\n        const handleToggleChange = async (value) => {\r\n            setShowEmptyBlocks(value);\r\n            try {\r\n                await saveToCache('block_usage_settings', {\r\n                    showEmptyBlocks: value,\r\n                    lastSelectedBlock: selected?.name || '',\r\n                    selectedPostTypes: selectedPostTypes\r\n                });\r\n            } catch (error) {\r\n                console.error('Failed to save showEmptyBlocks setting:', error);\r\n            }\r\n        };\r\n\r\n        const handlePostTypeChange = async (newPostTypes) => {\r\n            setSelectedPostTypes(newPostTypes);\r\n            try {\r\n                await saveToCache('block_usage_settings', {\r\n                    showEmptyBlocks,\r\n                    lastSelectedBlock: selected?.name || '',\r\n                    selectedPostTypes: newPostTypes\r\n                });\r\n            } catch (error) {\r\n                console.error('Failed to save post types:', error);\r\n            }\r\n        };\r\n\r\n        const categories = useMemo(() => {\r\n            const cats = {};\r\n\r\n            // First create the advgb-category if it exists\r\n            const advgbCategory = blocksData.categories.find(cat => cat.slug === 'advgb-category');\r\n            if (advgbCategory) {\r\n                cats[advgbCategory.slug] = {\r\n                    title: advgbCategory.title,\r\n                    blocks: []\r\n                };\r\n            }\r\n\r\n            // Then add all other categories\r\n            blocksData.categories.forEach(cat => {\r\n                if (cat.slug !== 'advgb-category') {\r\n                    cats[cat.slug] = {\r\n                        title: cat.title,\r\n                        blocks: []\r\n                    };\r\n                }\r\n            });\r\n\r\n            // Assign blocks to categories\r\n            blocksData.blocks.forEach(block => {\r\n                const catSlug = block.category || 'common';\r\n                if (!cats[catSlug]) {\r\n                    cats[catSlug] = {\r\n                        title: block.categoryTitle || catSlug,\r\n                        blocks: []\r\n                    };\r\n                }\r\n                cats[catSlug].blocks.push(block);\r\n            });\r\n\r\n            return cats;\r\n        }, [blocksData.categories, blocksData.blocks]);\r\n\r\n        const filteredCategories = useMemo(() => {\r\n            if (showEmptyBlocks) return categories;\r\n\r\n            const filtered = {};\r\n            Object.entries(categories).forEach(([slug, category]) => {\r\n                const filteredBlocks = category.blocks.filter(bt => {\r\n                    return data.usage[bt.name] && Object.keys(data.usage[bt.name].posts).length > 0;\r\n                });\r\n\r\n                if (filteredBlocks.length > 0) {\r\n                    filtered[slug] = {\r\n                        ...category,\r\n                        blocks: filteredBlocks\r\n                    };\r\n                }\r\n            });\r\n\r\n            return filtered;\r\n        }, [categories, data.usage, showEmptyBlocks]);\r\n\r\n        useEffect(() => {\r\n            if (!selected && blocksData.blocks.length > 0 && initialLoadComplete) {\r\n                const firstCategory = Object.values(filteredCategories)[0];\r\n                if (firstCategory && firstCategory.blocks.length > 0) {\r\n                    setSelected(firstCategory.blocks[0]);\r\n                }\r\n            }\r\n        }, [filteredCategories, blocksData.blocks, initialLoadComplete]);\r\n\r\n        const scanAll = async () => {\r\n            setLoadingAll(true);\r\n            setScanProgress({\r\n                current: 0,\r\n                total: 0,\r\n                status: __('Initializing scan...', 'advanced-gutenberg'),\r\n                completed: false\r\n            });\r\n\r\n            try {\r\n                let offset = 0;\r\n                const batchSize = 20;\r\n                let newData = {\r\n                    usage: {},\r\n                    posts: [],\r\n                    lastScanDate: ''\r\n                };\r\n                let totalPosts = 0;\r\n                let hasMorePosts = true;\r\n\r\n                while (hasMorePosts) {\r\n                    setScanProgress(prev => ({\r\n                        ...prev,\r\n                        status: sprintf(\r\n                            __('Processing posts (%1$s/%2$s)', 'advanced-gutenberg'),\r\n                            offset.toLocaleString(),\r\n                            totalPosts.toLocaleString()\r\n                        )\r\n                    }));\r\n\r\n                    const batchResponse = await postAjax('pp_blocks-usage_scan_batch', {\r\n                        offset,\r\n                        batch_size: batchSize,\r\n                        post_types: selectedPostTypes\r\n                    });\r\n\r\n                    if (!batchResponse.success) {\r\n                        throw new Error(__('Batch scan failed', 'advanced-gutenberg'));\r\n                    }\r\n\r\n                    if (batchResponse.data.total) {\r\n                        totalPosts = batchResponse.data.total;\r\n                    }\r\n\r\n                    // Merge usage data\r\n                    Object.entries(batchResponse.data.usage || {}).forEach(([blockName, blockData]) => {\r\n                        if (!newData.usage[blockName]) {\r\n                            newData.usage[blockName] = {\r\n                                posts: {},\r\n                                total: 0\r\n                            };\r\n                        }\r\n\r\n                        Object.entries(blockData.posts || {}).forEach(([postId, entry]) => {\r\n                            newData.usage[blockName].posts[postId] = entry;\r\n                        });\r\n\r\n                        newData.usage[blockName].total += blockData.total || 0;\r\n                    });\r\n\r\n                    // Merge posts\r\n                    newData.posts = [...newData.posts, ...(batchResponse.data.posts || [])];\r\n                    newData.lastScanDate = batchResponse.data.lastScanDate || newData.lastScanDate;\r\n\r\n                    offset += batchResponse.data.processed || 0;\r\n                    hasMorePosts = offset < totalPosts;\r\n\r\n                    setScanProgress(prev => ({\r\n                        ...prev,\r\n                        current: offset,\r\n                        total: totalPosts\r\n                    }));\r\n\r\n                    // Update local state with the new data\r\n                    setData(newData);\r\n\r\n                    // Save to IndexedDB after each batch\r\n                    try {\r\n                        await saveToCache('block_usage_data', newData);\r\n                    } catch (error) {\r\n                        console.error('Failed to save batch to IndexedDB:', error);\r\n                        // Continue with next batch even if save fails\r\n                    }\r\n\r\n                    await new Promise(resolve => setTimeout(resolve, 100));\r\n                }\r\n\r\n                setScanProgress(prev => ({\r\n                    ...prev,\r\n                    completed: true,\r\n                    status: __('Scan completed successfully!', 'advanced-gutenberg')\r\n                }));\r\n            } catch (error) {\r\n                console.error('Scan error:', error);\r\n                setScanProgress(prev => ({\r\n                    ...prev,\r\n                    status: __('Scan failed: ', 'advanced-gutenberg') + error.message\r\n                }));\r\n            } finally {\r\n                setTimeout(() => {\r\n                    setLoadingAll(false);\r\n                    setScanProgress({\r\n                        current: 0,\r\n                        total: 0,\r\n                        status: '',\r\n                        completed: false\r\n                    });\r\n                }, 2000);\r\n            }\r\n        };\r\n\r\n        const clearAllData = async () => {\r\n            setLoadingClearAll(true);\r\n            try {\r\n                await clearCache();\r\n                setData({\r\n                    usage: {},\r\n                    posts: [],\r\n                    lastScanDate: ''\r\n                });\r\n                setShowEmptyBlocks(false);\r\n                setSelected(null);\r\n\r\n                // Clear settings as well\r\n                await saveToCache('block_usage_settings', {\r\n                    showEmptyBlocks: false,\r\n                    lastSelectedBlock: ''\r\n                });\r\n            } catch (error) {\r\n                console.error('Failed to clear data:', error);\r\n                setDbError(__('Failed to clear data. Please try again.', 'advanced-gutenberg'));\r\n            } finally {\r\n                setLoadingClearAll(false);\r\n            }\r\n        };\r\n\r\n        const handleDetailsClick = async (bt) => {\r\n            const newSelected = selected?.name === bt.name ? null : bt;\r\n            setSelected(newSelected);\r\n\r\n            // Save the last selected block\r\n            if (newSelected) {\r\n                try {\r\n                    await saveToCache('block_usage_settings', {\r\n                        showEmptyBlocks,\r\n                        lastSelectedBlock: newSelected.name\r\n                    });\r\n                } catch (error) {\r\n                    console.error('Failed to save last selected block:', error);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (!initialLoadComplete) {\r\n            return (\r\n                <div className=\"pp-blocks-usage-wrapper\">\r\n                    <div className=\"advgb-block-feature-loading-msg\" style={{ display: 'block' }}>\r\n                        {__('Loading...', 'advanced-gutenberg')} <Spinner />\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className={`pp-blocks-usage-wrapper ${selected ? 'has-sidebar' : ''}`}>\r\n                {dbError && (\r\n                    <Notice status=\"error\" onRemove={() => setDbError(null)}>\r\n                        {dbError}\r\n                    </Notice>\r\n                )}\r\n\r\n                <div className=\"pp-blocks-usage-header\">\r\n                    <Flex justify=\"space-between\" align=\"center\">\r\n                        <FlexItem>\r\n                            <div className=\"pp-blocks-usage-controls\">\r\n                                {window.advgb_block_usage_data?.postTypes && (\r\n                                    <div className=\"pp-blocks-usage-post-type-selector\">\r\n                                        <FormTokenField\r\n                                            label={__('Limit Scan to Post Types:', 'advanced-gutenberg')}\r\n                                            value={selectedPostTypes}\r\n                                            suggestions={Object.keys(window.advgb_block_usage_data.postTypes)}\r\n                                            onChange={(newPostTypes) => handlePostTypeChange(newPostTypes)}\r\n                                            displayTransform={(postType) => window.advgb_block_usage_data.postTypes[postType] || postType}\r\n                                            tokenizeOnSpace={false}\r\n                                            __experimentalExpandOnFocus={true}\r\n                                            __experimentalShowHowTo={false}\r\n                                            style={{ minWidth: '300px' }}\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                                <Button variant=\"primary\" onClick={scanAll} disabled={loadingAll}>\r\n                                    {loadingAll ? <Spinner /> : __('Scan Block Usage', 'advanced-gutenberg')}\r\n                                </Button>\r\n                            </div>\r\n                        </FlexItem>\r\n                        <FlexItem>\r\n                            <div className=\"advgb-toggle-wrapper\">\r\n                                {__('Show Empty Blocks', 'advanced-gutenberg')}\r\n                                <div className=\"advgb-switch-button\">\r\n                                    <label className=\"switch\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            name=\"toggle_empty_blocks\"\r\n                                            id=\"toggle_empty_blocks\"\r\n                                            checked={showEmptyBlocks}\r\n                                            onChange={(e) => handleToggleChange(e.target.checked)}\r\n                                        />\r\n                                        <span className=\"slider\"></span>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </FlexItem>\r\n                    </Flex>\r\n                </div>\r\n\r\n                {loadingAll && (\r\n                    <div className=\"scan-progress-container\">\r\n                        <div className=\"scan-progress\">\r\n                            <p>{scanProgress.status}</p>\r\n                            <div className=\"progress-wrap\"><ProgressBar\r\n                                value={scanProgress.total > 0 ? (scanProgress.current / scanProgress.total) * 100 : 0}\r\n                            /></div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {data.lastScanDate && (\r\n                    <div className=\"pp-blocks-usage-last-scan\">\r\n                        <span>{__('Last scan:', 'advanced-gutenberg')} {new Date(data.lastScanDate).toLocaleString()}</span>\r\n                        <div className=\"pp-tooltips-library\" data-toggle=\"tooltip\" data-placement=\"left\">\r\n                            {!loadingClearAll &&\r\n                                <span className=\"dashicons dashicons-editor-help\" style={{ verticalAlign: 'middle', lineHeight: 'inherit' }}></span>\r\n                            }\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                onClick={clearAllData}\r\n                                disabled={loadingAll || loadingClearAll}\r\n                                className=\"is-destructive\"\r\n                                style={{ marginLeft: '8px' }}\r\n                            >\r\n                                {loadingClearAll ? <Spinner /> : __('Clear All Data', 'advanced-gutenberg')}\r\n                            </Button>\r\n                            {!loadingClearAll &&\r\n                                <span className=\"tooltip-text\">\r\n                                    <span>{__('Scan data is stored in your browser to improve performance and handle large datasets. This keeps your WordPress database clean. Click to permanently delete all stored data.', 'advanced-gutenberg')}</span>\r\n                                    <i></i>\r\n                                </span>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"pp-blocks-usage-container\">\r\n                    <div className=\"pp-blocks-usage-categories\">\r\n                        {Object.entries(filteredCategories).map(([slug, { title, blocks }]) => (\r\n                            <PanelBody key={slug} title={title} initialOpen>\r\n                                <div className=\"pp-blocks-usage-block-grid\">\r\n                                    {blocks.map(bt => {\r\n                                        const hasData = data.usage[bt.name] && Object.keys(data.usage[bt.name].posts).length > 0;\r\n                                        const blockData = data.usage[bt.name] || { posts: {}, total: 0 };\r\n                                        const postCount = Object.keys(blockData.posts).length;\r\n                                        const useCount = blockData.total;\r\n                                        const lastScanned = Object.values(blockData.posts)[0]?.scanned || '';\r\n\r\n                                        return (\r\n                                            <Card\r\n                                                key={bt.name}\r\n                                                className={`pp-blocks-usage-block-tile ${selected?.name === bt.name ? 'active' : ''}`}\r\n                                                onClick={() => handleDetailsClick(bt)}\r\n                                            >\r\n                                                <div className=\"pp-blocks-usage-tile-main\">\r\n                                                    {bt.icon && (\r\n                                                        <span className=\"block-icon\" style={bt.iconColor ? { color: bt.iconColor } : {}}>\r\n                                                            {typeof bt.icon === 'string' && !bt.icon.includes('<') ? (\r\n                                                                <span className={`dashicons dashicons-${bt.icon}`}></span>\r\n                                                            ) : (\r\n                                                                <span dangerouslySetInnerHTML={{ __html: bt.icon }} />\r\n                                                            )}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    <span>{bt.title}</span>\r\n                                                </div>\r\n                                                {hasData ? (\r\n                                                    <div className=\"pp-blocks-usage-tile-counts\">\r\n                                                        <div>{__('Locations:', 'advanced-gutenberg')} {postCount}</div>\r\n                                                        <div>{__('Instances:', 'advanced-gutenberg')} {useCount}</div>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <div className=\"pp-blocks-usage-tile-counts\">\r\n                                                        <div className=\"no-scan\">\r\n                                                            {data.lastScanDate\r\n                                                                ? __('Not found in any posts', 'advanced-gutenberg')\r\n                                                                : __('No scan history', 'advanced-gutenberg')}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"pp-blocks-usage-tile-actions\">\r\n                                                    <Button variant=\"secondary\" size=\"small\" onClick={(e) => {\r\n                                                        e.stopPropagation();\r\n                                                        handleDetailsClick(bt);\r\n                                                    }}>\r\n                                                        {__('Details', 'advanced-gutenberg')}\r\n                                                    </Button>\r\n                                                </div>\r\n                                            </Card>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </PanelBody>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {selected && (\r\n                        <Sidebar\r\n                            key={selected.name}\r\n                            selected={selected}\r\n                            data={data}\r\n                            onClose={() => setSelected(null)}\r\n                            canEditPosts={currentUser?.canEditPosts || false}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Only render the app if wp.blocks is available\r\n    if (typeof wp !== 'undefined' && typeof wp.blocks !== 'undefined') {\r\n        render(<App />, document.getElementById('advgb-block-usage-app'));\r\n    } else {\r\n        const appContainer = document.getElementById('advgb-block-usage-app');\r\n        if (appContainer) {\r\n            appContainer.innerHTML = '<p>' + __('Error Loading blocks data...', 'advanced-gutenberg') + '</p>';\r\n        }\r\n    }\r\n\r\n})(wp.i18n, wp.hooks, wp.blocks, wp.blockEditor, wp.components, wp.compose, wp.element);"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","wpI18n","wpHooks","wpBlocks","wpBlockEditor","wpComponents","wpCompose","wpElement","render","useState","useEffect","useRef","useMemo","PanelBody","Button","Card","Spinner","Flex","FlexItem","ProgressBar","Notice","FormTokenField","__","sprintf","STORE_NAME","EXCLUDED_BLOCKS","openDatabase","reject","request","indexedDB","open","onerror","event","console","error","target","onsuccess","result","onupgradeneeded","db","objectStoreNames","contains","createObjectStore","keyPath","getFromCache","_ref","_callee","key","_context","transaction","objectStore","get","t0","_x","saveToCache","_ref2","_callee2","_context2","put","_x2","_x3","clearCache","_ref3","_callee3","_context3","clear","Sidebar","React","memo","_ref5","selected","data","canEditPosts","onClose","_useState2","_slicedToArray","expandedPost","setExpandedPost","_data$usage","usage","_data$posts","posts","blockData","total","postIds","blockPosts","filter","post","includes","post_id","toString","groupedPosts","groups","_blockData$posts$post","_blockData$posts$post2","count","scanned","concat","post_title","_objectSpread","totalCount","renderBlockItem","block","_block$innerBlocks","depth","undefined","createElement","clientId","Math","random","substr","className","style","marginLeft","icon","iconColor","color","dangerouslySetInnerHTML","__html","innerBlocks","map","innerBlock","ref","title","description","category","Fragment","_post$blocks","isExpanded","postTypeLabel","post_type","onClick","size","edit_link","variant","isSmall","href","view_link","blocks","lastScanDate","Date","toLocaleString","App","_window$advgb_block_u","_ref6","window","advgb_block_usage_data","_ref6$ajaxUrl","ajaxUrl","_ref6$nonce","nonce","initialData","currentUser","_useState4","wp","categories","blockLibrary","registerCoreBlocks","allBlocks","getBlockTypes","allCategories","getCategories","listBlocks","localizedCategories","blockCategories","categoryTitleMap","reduce","cat","slug","_ref4$saved_blocks","saved_blocks","diff_blocks","blocksA","some","blocksB","_toConsumableArray","blockItemIcon","blockItem","src","parent","categoryTitle","savedIcon","foreground","element","renderToString","replace","components","Dashicon","uniqueNames","splice","sort","b","localizedCat","getBlocks","blocksData","_useState6","setData","_useState8","loadingAll","setLoadingAll","_useState10","loadingClearAll","setLoadingClearAll","_useState12","setSelected","_useState14","showEmptyBlocks","setShowEmptyBlocks","_useState16","selectedPostTypes","setSelectedPostTypes","_useState18","current","status","completed","scanProgress","setScanProgress","_useState20","dbError","setDbError","_useState22","initialLoadComplete","setInitialLoadComplete","loadData","_ref7","_callee4","cachedData","cachedSettings","lastSelected","_context4","lastSelectedBlock","find","postAjax","action","body","URLSearchParams","fetch","headers","json","handleToggleChange","_ref8","_callee5","_context5","_x4","handlePostTypeChange","_ref9","_callee6","newPostTypes","_context6","_x5","cats","advgbCategory","catSlug","filteredCategories","filtered","entries","_ref10","_ref11","filteredBlocks","bt","firstCategory","scanAll","_ref12","_callee7","offset","batchSize","newData","totalPosts","hasMorePosts","batchResponse","_context7","batch_size","post_types","success","_ref13","_ref14","blockName","_ref15","_ref16","postId","entry","processed","setTimeout","t1","message","clearAllData","_ref17","_callee8","_context8","handleDetailsClick","_ref18","_callee9","newSelected","_context9","_x6","onRemove","justify","align","postTypes","label","suggestions","onChange","displayTransform","postType","tokenizeOnSpace","__experimentalExpandOnFocus","__experimentalShowHowTo","minWidth","disabled","id","checked","verticalAlign","lineHeight","_ref19","_ref20","_ref20$","initialOpen","_Object$values$","hasData","postCount","useCount","stopPropagation","display","document","getElementById","appContainer","innerHTML","i18n","hooks","blockEditor","compose"],"sourceRoot":""}