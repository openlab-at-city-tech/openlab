{"version":3,"sources":["bp-members/js/blocks/online-members/edit.js","bp-members/js/blocks/online-members/transforms.js","bp-members/js/blocks/online-members.js"],"names":["editOnlineMembersBlock","wp","InspectorControls","blockEditor","components","Disabled","PanelBody","RangeControl","TextControl","element","Fragment","createElement","__","i18n","bp","ServerSideRender","blockComponents","attributes","setAttributes","title","maxMembers","text","value","transforms","createBlock","blocks","from","type","isMatch","idBase","instance","raw","transform","max_members","registerBlockType","description","icon","background","foreground","src","category","default","edit"],"mappings":";AAgEeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA7Df,IAiBIC,EAAAA,GAfFC,EADDC,EAAAA,YACCD,kBAEDE,EAAAA,EAAAA,WACCC,EAAAA,EAAAA,SACAC,EAAAA,EAAAA,UACAC,EAAAA,EAAAA,aACAC,EAAAA,EAAAA,YAEDC,EAAAA,EAAAA,QACCC,EAAAA,EAAAA,SACAC,EAAAA,EAAAA,cAGAC,EADDC,EAAAA,KACCD,GAWEE,EAAAA,GAFFC,EADDC,EAAAA,gBACCD,iBAIIf,EAAyB,SAAqC,GAAjCiB,IAAAA,EAAAA,EAAAA,WAAYC,EAAAA,EAAAA,cACtCC,EAAsBF,EAAtBE,MAAOC,EAAeH,EAAfG,WAGd,OAAA,EAAC,EACA,KAAA,EAAC,EACA,KAAA,EAAC,EAAD,CAAW,MAAQR,EAAI,WAAY,cAAiB,aAAc,GACjE,EAAC,EAAD,CACC,MAAQA,EAAI,QAAS,cACrB,MAAQO,EACR,SAAW,SAAEE,GACZH,EAAe,CAAEC,MAAOE,OAG1B,EAAC,EAAD,CACC,MAAQT,EAAI,sBAAuB,cACnC,MAAQQ,EACR,SAAW,SAAEE,GACZJ,OAAAA,EAAe,CAAEE,WAAYE,KAE9B,IAAM,EACN,IAAM,GACN,UAAQ,MAIX,EAAC,EACA,KAAA,EAAC,EAAD,CAAkB,MAAM,oBAAoB,WAAaL,OAM9CjB,EAAAA,EAAAA,QAAAA,QAAAA;;AC5BAuB,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAjCf,IAIItB,EAAAA,GAFFuB,EADDC,EAAAA,OACCD,YASID,EAAa,CAClBG,KAAM,CACL,CACCC,KAAM,QACNF,OAAQ,CAAE,sBACVG,QAAS,SAA4B,GAAxBC,IAAAA,EAAAA,EAAAA,OAAQC,EAAAA,EAAAA,SACf,QAAEA,MAAAA,IAAAA,EAAUC,MAIC,+BAAXF,GAERG,UAAW,SAAoB,GAAhBF,IAAAA,EAAAA,EAAAA,SACPN,OAAAA,EAAa,oBAAqB,CACxCL,MAAOW,EAASC,IAAIZ,MACpBC,WAAYU,EAASC,IAAIE,kBAOfV,EAAAA,EAAAA,QAAAA,QAAAA;;AClBf,aAHA,IAAA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,gCAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAfA,IAOItB,EAAAA,GALFiC,EADDT,EAAAA,OACCS,kBAGAtB,EADDC,EAAAA,KACCD,GAUFsB,EAAmB,oBAAqB,CACvCf,MAAOP,EAAI,iBAAkB,cAC7BuB,YAAavB,EAAI,kCAAmC,cACpDwB,KAAM,CACLC,WAAY,OACZC,WAAY,UACZC,IAAK,UAENC,SAAU,aACVvB,WAAY,CACXE,MAAO,CACNQ,KAAM,SACNc,QAAS7B,EAAI,eAAiB,eAE/BQ,WAAY,CACXO,KAAM,SACNc,QAAS,KAGXC,KAAM1C,EAnBiC,QAoBvCuB,WAAYA,EAAAA","file":"online-members.js","sourceRoot":"../src/js","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tInspectorControls,\n\t},\n\tcomponents: {\n\t\tDisabled,\n\t\tPanelBody,\n\t\tRangeControl,\n\t\tTextControl,\n\t},\n\telement: {\n\t\tFragment,\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * BuddyPress dependencies.\n */\nconst {\n\tblockComponents: {\n\t\tServerSideRender,\n\t},\n} = bp;\n\nconst editOnlineMembersBlock = ( { attributes, setAttributes } ) => {\n\tconst { title, maxMembers } = attributes;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Title', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ ( text ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: text } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Max members to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ maxMembers }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { maxMembers: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 15 }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/online-members\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nexport default editOnlineMembersBlock;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tcreateBlock,\n\t},\n} = wp;\n\n/**\n * Transforms Legacy Widget to Online Members Block.\n *\n * @type {Object}\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/legacy-widget' ],\n\t\t\tisMatch: ( { idBase, instance } ) => {\n\t\t\t\tif ( ! instance?.raw ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn idBase === 'bp_core_whos_online_widget';\n\t\t\t},\n\t\t\ttransform: ( { instance } ) => {\n\t\t\t\treturn createBlock( 'bp/online-members', {\n\t\t\t\t\ttitle: instance.raw.title,\n\t\t\t\t\tmaxMembers: instance.raw.max_members,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport editOnlineMembersBlock from './online-members/edit';\nimport transforms from './online-members/transforms';\n\nregisterBlockType( 'bp/online-members', {\n\ttitle: __( 'Online Members', 'buddypress' ),\n\tdescription: __( 'Profile photos of online users.', 'buddypress' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'groups',\n\t},\n\tcategory: 'buddypress',\n\tattributes: {\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: __( 'Who\\'s Online', 'buddypress' ),\n\t\t},\n\t\tmaxMembers: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 15\n\t\t},\n\t},\n\tedit: editOnlineMembersBlock,\n\ttransforms: transforms,\n} );\n"]}