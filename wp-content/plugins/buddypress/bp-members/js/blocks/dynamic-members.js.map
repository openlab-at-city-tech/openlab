{"version":3,"sources":["bp-members/js/blocks/dynamic-members/constants.js","bp-members/js/blocks/dynamic-members/edit.js","bp-members/js/blocks/dynamic-members/transforms.js","bp-members/js/blocks/dynamic-members.js"],"names":["wp","__","i18n","TYPES","label","value","editDynamicMembersBlock","InspectorControls","blockEditor","components","Disabled","PanelBody","RangeControl","SelectControl","TextControl","ToggleControl","element","Fragment","createElement","bp","ServerSideRender","blockComponents","isActive","blockData","attributes","setAttributes","title","maxMembers","memberDefault","linkTitle","sortTypes","filter","type","text","option","transforms","createBlock","blocks","from","isMatch","idBase","instance","raw","transform","max_members","member_default","link_title","registerBlockType","description","icon","background","foreground","src","category","default","edit"],"mappings":"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","file":"dynamic-members.js","sourceRoot":"../src/js","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Members ordering types.\n *\n * @type {Array}\n */\nexport const TYPES = [\n\t{\n\t\tlabel: __( 'Newest', 'buddypress' ),\n\t\tvalue: 'newest',\n\t},\n\t{\n\t\tlabel: __( 'Active', 'buddypress' ),\n\t\tvalue: 'active',\n\t},\n\t{\n\t\tlabel: __( 'Popular', 'buddypress' ),\n\t\tvalue: 'popular',\n\t},\n];\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tInspectorControls,\n\t},\n\tcomponents: {\n\t\tDisabled,\n\t\tPanelBody,\n\t\tRangeControl,\n\t\tSelectControl,\n\t\tTextControl,\n\t\tToggleControl,\n\t},\n\telement: {\n\t\tFragment,\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * BuddyPress dependencies.\n */\nconst {\n\tblockComponents: {\n\t\tServerSideRender,\n\t},\n\tblockData: {\n\t\tisActive,\n\t}\n} = bp;\n\n/**\n * Internal dependencies.\n */\nimport { TYPES } from './constants';\n\nconst editDynamicMembersBlock = ( { attributes, setAttributes } ) => {\n\tconst { title, maxMembers, memberDefault, linkTitle } = attributes;\n\tconst sortTypes = !! isActive( 'friends' ) ? TYPES : TYPES.filter( ( type ) => 'popular' !== type.value );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Title', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ ( text ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: text } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Max members to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ maxMembers }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { maxMembers: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 10 }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Default members to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ memberDefault }\n\t\t\t\t\t\toptions={ sortTypes }\n\t\t\t\t\t\tonChange={ ( option ) => {\n\t\t\t\t\t\t\tsetAttributes( { memberDefault: option } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Link block title to Members directory', 'buddypress' ) }\n\t\t\t\t\t\tchecked={ !! linkTitle }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( { linkTitle: ! linkTitle } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/dynamic-members\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nexport default editDynamicMembersBlock;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tcreateBlock,\n\t},\n} = wp;\n\n/**\n * Transforms Legacy Widget to Dynamic Members Block.\n *\n * @type {Object}\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/legacy-widget' ],\n\t\t\tisMatch: ( { idBase, instance } ) => {\n\t\t\t\tif ( ! instance?.raw ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn idBase === 'bp_core_members_widget';\n\t\t\t},\n\t\t\ttransform: ( { instance } ) => {\n\t\t\t\treturn createBlock( 'bp/dynamic-members', {\n\t\t\t\t\ttitle: instance.raw.title,\n\t\t\t\t\tmaxMembers: instance.raw.max_members,\n\t\t\t\t\tmemberDefault: instance.raw.member_default,\n\t\t\t\t\tlinkTitle: instance.raw.link_title,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport editDynamicMembersBlock from './dynamic-members/edit';\nimport transforms from './dynamic-members/transforms';\n\nregisterBlockType( 'bp/dynamic-members', {\n\ttitle: __( 'Dynamic Members List', 'buddypress' ),\n\tdescription: __( 'A dynamic list of recently active, popular, and newest members.', 'buddypress' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'groups',\n\t},\n\tcategory: 'buddypress',\n\tattributes: {\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: __( 'Members', 'buddypress' ),\n\t\t},\n\t\tmaxMembers: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 5\n\t\t},\n\t\tmemberDefault: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'active',\n\t\t},\n\t\tlinkTitle: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tedit: editDynamicMembersBlock,\n\ttransforms: transforms,\n} );\n"]}