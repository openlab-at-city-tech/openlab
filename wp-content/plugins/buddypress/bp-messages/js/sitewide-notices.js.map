{"version":3,"sources":["bp-messages/js/sitewide-notices.js"],"names":["bpSitewideNoticeBlock","settings","path","dismissPath","root","nonce","document","querySelectorAll","forEach","dismissButton","addEventListener","event","preventDefault","fetch","method","headers","then","response","json","data","dismissed","elem","remove","window","bpSitewideNoticeBlockSettings","bpSitewideNotice","readyState","start"],"mappings":";AAiDC,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EA5CKA,IAAAA,EAAAA,WACQC,SAAAA,EAAAA,GAAW,EAAA,KAAA,GACfC,IAAAA,EAAmCD,EAAnCC,KAAMC,EAA6BF,EAA7BE,YAAaC,EAAgBH,EAAhBG,KAAMC,EAAUJ,EAAVI,MAC5BH,KAAAA,KAAOA,EACPC,KAAAA,YAAcA,EACdC,KAAAA,KAAOA,EACPC,KAAAA,MAAQA,EAsCd,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,QAnCA,MAAA,WAAQ,IAAA,EAAA,KAEPC,SAASC,iBAAkB,8CAA+CC,QAAS,SAAEC,GACpFA,EAAcC,iBAAkB,QAAS,SAAEC,GAC1CA,EAAMC,iBAENC,MAAO,EAAKT,KAAO,EAAKD,YAAa,CACpCW,OAAQ,OACRC,QAAS,CACO,aAAA,EAAKV,SAElBW,KACH,SAAEC,GAAcA,OAAAA,EAASC,SACxBF,KACD,SAAEG,QACI,IAAuBA,QAAQ,IAAuBA,EAAKC,WAAaD,EAAKC,WACjFd,SAASC,iBAAkB,6BAA8BC,QAAS,SAAEa,GACnEA,EAAKC,qBAkBZ,EA5CKtB,GAqCAC,EAAWsB,OAAOC,+BAAiC,GACnDC,EAAmB,IAAIzB,EAAuBC,GAE/C,YAAcK,SAASoB,WAC3BpB,SAASI,iBAAkB,mBAAoBe,EAAiBE,SAEhEF,EAAiBE","file":"sitewide-notices.js","sourceRoot":"../src/js","sourcesContent":["/**\n * Front-end Sitewide notices block class.\n *\n * @since 9.0.0\n */\nclass bpSitewideNoticeBlock {\n\tconstructor( settings ) {\n\t\tconst { path, dismissPath, root, nonce } = settings;\n\t\tthis.path = path;\n\t\tthis.dismissPath = dismissPath;\n\t\tthis.root = root;\n\t\tthis.nonce = nonce;\n\t}\n\n\tstart() {\n\t\t// Listen to each Block's dismiss button clicks\n\t\tdocument.querySelectorAll( '.bp-sitewide-notice-block a.dismiss-notice' ).forEach( ( dismissButton ) => {\n\t\t\tdismissButton.addEventListener( 'click', ( event ) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tfetch( this.root + this.dismissPath, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'X-WP-Nonce' : this.nonce,\n\t\t\t\t\t}\n\t\t\t\t} ).then(\n\t\t\t\t\t( response ) => response.json()\n\t\t\t\t).then(\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tif ( 'undefined' !== typeof data && 'undefined' !== typeof data.dismissed && data.dismissed ) {\n\t\t\t\t\t\t\tdocument.querySelectorAll( '.bp-sitewide-notice-block' ).forEach( ( elem ) => {\n\t\t\t\t\t\t\t\telem.remove();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} );\n\t\t} );\n\t}\n}\n\n// widget_bp_core_sitewide_messages buddypress widget wp-block-bp-sitewide-notices > bp-sitewide-notice > a.dismiss-notice\nconst settings = window.bpSitewideNoticeBlockSettings || {};\nconst bpSitewideNotice = new bpSitewideNoticeBlock( settings );\n\nif ( 'loading' === document.readyState ) {\n\tdocument.addEventListener( 'DOMContentLoaded', bpSitewideNotice.start() );\n} else {\n\tbpSitewideNotice.start();\n}\n"]}