/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=4fa65a685c8626c7304a)
 * Config saved to config.json and https://gist.github.com/4fa65a685c8626c7304a
 */

/*!
 * Chart.js v2.9.4
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */

if(define("models/User",["backbone","jquery"],function(e,t){return e.Model.extend({defaults:{first_name:"john",last_name:"doe",selected:!1,user_login:null},url:function(){return this.get("id")?ajaxurl+"?action=oplb_user&id="+this.get("id")+"&gbid="+this.get("gbid"):ajaxurl+"?action=oplb_user"},updateStudentGrade:function(i,n,o,a){var r=this;t.post(ajaxurl+"?action=oplb_student_grades&nonce="+oplbGradebook.nonce,{grade:i,type:n,gbid:a,uid:o},function(t){e.pubSub.trigger("editSuccess",t)},"json").error(r.trigger("editError"))}})}),define("models/Course",["backbone"],function(e){return e.Model.extend({defaults:{name:"Needs Name",school:"",semester:"",year:oplbGradebook.currentYear},fetchCourse:function(){var e=this;return new Promise(function(t,i){e.url()?e.fetch({success:function(){t(e)}}):(e.set(e.parse({id:"1",name:"Calculus I",school:"Bergen Community College",semester:"Fall",year:"2010"})),t(e))})},parse:function(e){return e.id=parseInt(e.id),e.year=parseInt(e.year),e},url:function(){return this.get("id")?ajaxurl+"?action=course&gbid="+this.get("id"):ajaxurl+"?action=course"},export2csv:function(){window.location.assign(ajaxurl+"?action=get_csv&nonce="+oplbGradebook.nonce+"&gbid="+this.get("id"))}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=e(this),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var r=e(a);t&&t.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.button"),a="object"==typeof t&&t;o||n.data("bs.button",o=new i(this,a)),"toggle"==t?o.toggle():t&&o.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",a=n.data();t+="Text",null==a.resetText&&n.data("resetText",n[o]()),setTimeout(e.proxy(function(){n[o](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),e(i.target).is('input[type="radio"]')||e(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.carousel"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),r="string"==typeof t?t:a.slide;o||n.data("bs.carousel",o=new i(this,a)),"number"==typeof t?o.to(t):r?o[r]():a.interval&&o.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n="prev"==e?-1:1,o=(i+n)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,n){var o=this.$element.find(".item.active"),a=n||this.getItemForDirection(t,o),r=this.interval,s="next"==t?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var d=a[0],u=e.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(a)]);h&&h.addClass("active")}var c=e.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(c)),r&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var o=function(i){var n,o=e(this),a=e(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var r=e.extend({},a.data(),o.data()),s=o.attr("data-slide-to");s&&(r.interval=!1),t.call(a,r),s&&a.data("bs.carousel").to(s),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(o).remove(),e(a).each(function(){var n=e(this),o=t(n),a={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(o[0],i.target)||(o.trigger(i=e.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof t&&n[t].call(i)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.5",r.prototype.toggle=function(n){var o=e(this);if(!o.is(".disabled, :disabled")){var a=t(o),r=a.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var s={relatedTarget:this};if(a.trigger(n=e.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=t(n),r=o.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&o.find(a).trigger("focus"),n.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,r.prototype.toggle).on("keydown.bs.dropdown.data-api",a,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each(function(){var o=e(this),a=o.data("bs.modal"),r=e.extend({},i.DEFAULTS,o.data(),"object"==typeof t&&t);a||o.data("bs.modal",a=new i(this,r)),"string"==typeof t?a[t](n):r.show&&a.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),o=n.attr("href"),a=e(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},a.data(),n.data());n.is("a")&&i.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(a,r,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.tooltip"),a="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||n.data("bs.tooltip",o=new i(this,a)),"string"==typeof t&&o[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var o=this,a=this.tip(),r=this.getUID(this.type);this.setContent(),a.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),h=a[0].offsetWidth,c=a[0].offsetHeight;if(d){var f=s,g=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+c>g.bottom?"top":"top"==s&&u.top-c<g.top?"bottom":"right"==s&&u.right+h>g.width?"left":"left"==s&&u.left-h<g.left?"right":s,a.removeClass(f).addClass(s)}var p=this.getCalculatedOffset(s,u,h,c);this.applyPlacement(p,s);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),o=n[0].offsetWidth,a=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top+=r,t.left+=s,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=a&&(t.top=t.top+a-d);var u=this.getViewportAdjustedDelta(i,t,l,d);u.left?t.left+=u.left:t.top+=u.top;var h=/top|bottom/.test(i),c=h?2*u.left-o+l:2*u.top-a+d,f=h?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(c,n[0][f],h)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=o.hoverState&&a.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,a=e(this.$tip),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=n?{top:0,left:0}:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,r,s,a)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-r.scroll,l=t.top+a-r.scroll+n;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var d=t.left-a,u=t.left+a+i;d<r.left?o.left=r.left-d:u>r.right&&(o.left=r.left+r.width-u)}return o},i.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},i.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.popover"),a="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||n.data("bs.popover",o=new i(this,a)),"string"==typeof t&&o[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof t&&o[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=i.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),r=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),t.trigger(r),!r.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(n);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(t,n,o){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),s=o&&e.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(i.TRANSITION_DURATION):a(),r.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var o=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.affix"),a="object"==typeof t&&t;o||n.data("bs.affix",o=new i(this,a)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=a.top)&&"bottom":!(e-n>=o+r)&&"bottom";var s=null==this.affixed,l=s?o:a.top,d=s?r:t;return null!=i&&i>=o?"top":null!=n&&l+d>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,o=n.top,a=n.bottom,r=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(a=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var s=this.getState(r,t,o,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-t-a})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),o=i.data("bs.collapse"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!o&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),o||i.data("bs.collapse",o=new n(this,a)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,
this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"))&&t.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),t||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var o=e(n);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=e(this);o.attr("data-target")||n.preventDefault();var a=t(o),r=a.data("bs.collapse"),s=r?"toggle":o.data();i.call(a,s)})}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),o=n.data("bs.scrollspy"),a="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new t(this,a)),"string"==typeof i&&o[i]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),a=/^#./.test(o)&&e(o);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return r!=(e=a[a.length-1])&&this.activate(e);if(r&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)r!=a[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("bootstrap",["jquery"],function(){}),define("views/EditCourseView",["jquery","backbone","underscore","models/User","models/Course","bootstrap"],function(e,t,i,n,o){return EditCourseView=t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel",keyup:"keyPressHandler","click #edit-course-save":"submitForm","submit #edit-course-form":"editSave"},initialize:function(t){return this.course=this.model||null,this.initvals={},t.isInit?(this.initvals.name=oplbGradebook.initName,this.initvals.goInit=!0):(this.initvals.name=!1,this.initvals.goInit=!1),this.courseList=this.collection,e("body").append(this.render().el),this},render:function(){var t=this,n=i.template(e("#edit-course-template").html()),o=n({course:this.course,initvals:this.initvals});return t.$el.html(o),this.$el.modal("show"),i.defer(function(){this.inputName=t.$('input[name="name"]');inputName.val().length}),this},keyPressHandler:function(e){var t=this;switch(e.keyCode){case 27:t.$el.modal("hide");break;case 13:t.submitForm()}return this},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#edit-course-form").submit()},editSave:function(t){var i=this,a=e(t.currentTarget).serializeObject();if(this.course)this.model.save(a,{wait:!0}),this.$el.modal("hide");else{delete a.id;new o(a).save(a,{success:function(e){var t=(new n(e.get("user")),new o(e.get("course")));i.courseList.add(t),i.$el.modal("hide")}})}return!1}}),EditCourseView}),define("views/DeleteGradebookView",["jquery","backbone","underscore"],function(e,t,i){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-gradebook-delete":"submitForm","submit #delete-gradebook-form":"deleteSave"},initialize:function(t){return this.gradebook=t.gradebook,this.course=t.course,e("body").append(this.render().el),this},render:function(){if(this.course){var t=i.template(e("#delete-gradebook-template").html()),n=t({course:this.course});this.$el.html(n)}return this.$el.modal("show"),this},keyPressHandler:function(e){return 27==e.keyCode&&this.deleteCancel(),13==e.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#delete-gradebook-form").submit()},deleteSave:function(e){e.preventDefault(),this.model.set({selected:!1}),this.model.destroy()}})}),define("views/CourseView",["jquery","backbone","underscore","views/EditCourseView","views/DeleteGradebookView"],function(e,t,i,n,o){return t.View.extend({initialize:function(e){this.options=e.options,this.course=this.model,this.courseList=this.collection,this.listenTo(this.model,"change",this.render)},tagName:"tr",events:{"click li.course-submenu-delete":"deleteCourse","click li.course-submenu-export2csv":"exportToCSV","click li.course-submenu-edit":"editCourse"},exportToCSV:function(e){e.preventDefault(),this.model.export2csv()},deleteCourse:function(e){e.preventDefault();new o({model:this.model,gradebook:this.gradebook,course:this.course})},editCourse:function(){new n({model:this.course,collection:this.courseList,options:this.options});return!1},render:function(){var t=i.template(e("#course-view-template").html()),n=t({course:this.course});return this.$el.html(n)},close:function(){this.remove()}})}),define("views/CourseListView",["jquery","backbone","underscore","views/EditCourseView","views/CourseView"],function(e,t,i,n,o){return t.View.extend({initialize:function(){var e=this;this._subviews=[],this.courseList=this.collection,this.listenTo(e.courseList,"add",e.render),this.listenTo(e.courseList,"remove",e.render),this.render()},loadingData:function(){},events:{"click a#add-course":"editCourse","click [class^=course-column-]":"sortCourseList"},checkStudentSortDirection:function(){"asc"===this.courseList.sort_direction?this.courseList.sort_direction="desc":this.courseList.sort_direction="asc"},sortCourseList:function(e){var t=e.target.className.replace("course-column-","");this.courseList.sort_key=t,this.checkStudentSortDirection(),this.courseList.sort(),this.render()},clearSubViews:function(){var e=this;i.each(e._subviews,function(e){e.close()}),this._subviews=[]},render:function(){var t=this,n=i.template(e("#course-list-template").html()),a=n({});return e("#wpbody-content").prepend(this.$el.html(a)),t.courseList.models.length?i.each(t.courseList.models,function(i){var n=new o({model:i,collection:t.courseList});e(".angb-course-list-tbody").append(n.render())}):"instructor"===t.courseList.gbRole&&this.editCourse(!0),this},editCourse:function(e){void 0===e&&(e=!1);new n({collection:this.courseList,isInit:e});return!1},addCourse:function(t){var i=new o({model:t,collection:this.courseList,options:this.options});e("#courses").append(i.render().el)},close:function(){this.clearSubViews(),this.remove()}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(function(){try{return require("moment")}catch(e){}}()):"function"==typeof define&&define.amd?define("chart",["require"],function(e){return t(function(){try{return e("moment")}catch(e){}}())}):(e=e||self).Chart=t(e.moment)}(this,function(e){"use strict";function t(e){var t=function(){for(var e={},t=Object.keys(Be),i=t.length,n=0;n<i;n++)e[t[n]]={distance:-1,parent:null};return e}(),i=[e];for(t[e].distance=0;i.length;)for(var n=i.pop(),o=Object.keys(Be[n]),a=o.length,r=0;r<a;r++){var s=o[r],l=t[s];-1===l.distance&&(l.distance=t[n].distance+1,l.parent=n,i.unshift(s))}return t}function i(e,t){return function(i){return t(e(i))}}function n(e,t){for(var n=[t[e].parent,e],o=Be[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),o=i(Be[t[a].parent][a],o),a=t[a].parent;return o.conversion=n,o}function o(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3,4})$/i),o="";if(n){o=(n=n[1])[3];for(var a=0;a<t.length;a++)t[a]=parseInt(n[a]+n[a],16);o&&(i=Math.round(parseInt(o+o,16)/255*100)/100)}else if(n=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(o=n[2],n=n[1],a=0;a<t.length;a++)t[a]=parseInt(n.slice(2*a,2*a+2),16);o&&(i=Math.round(parseInt(o,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<t.length;a++)t[a]=parseInt(n[a+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<t.length;a++)t[a]=Math.round(2.55*parseFloat(n[a+1]));i=parseFloat(n[4])}else if(n=e.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=He[n[1]]))return}for(a=0;a<t.length;a++)t[a]=u(t[a],0,255);return i=i||0==i?u(i,0,1):1,t[3]=i,t}}function a(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[u(parseInt(t[1]),0,360),u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(i)?1:i,0,1)]}}}function r(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[u(parseInt(t[1]),0,360),u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(i)?1:i,0,1)]}}}function s(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function l(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function d(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function u(e,t,i){return Math.min(Math.max(t,e),i)}function h(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}function c(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function f(e,t){var i=e._chartjs;if(i){var n=i.listeners,o=n.indexOf(t);-1!==o&&n.splice(o,1),n.length>0||(Tt.forEach(function(t){delete e[t]}),delete e._chartjs)}}function g(e,t){var i=t.startAngle,n=t.endAngle,o=t.pixelMargin,a=o/t.outerRadius,r=t.x,s=t.y;e.beginPath(),e.arc(r,s,t.outerRadius,i-a,n+a),t.innerRadius>o?(a=o/t.innerRadius,e.arc(r,s,t.innerRadius-o,n+a,i-a,!0)):e.arc(r,s,o,n+Math.PI/2,i-Math.PI/2),e.closePath(),e.clip()}function p(e,t,i){var n="inner"===t.borderAlign;n?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),i.fullCircles&&function(e,t,i,n){var o,a=i.endAngle;for(n&&(i.endAngle=i.startAngle+Pt,g(e,i),i.endAngle=a,i.endAngle===i.startAngle&&i.fullCircles&&(i.endAngle+=Pt,i.fullCircles--)),e.beginPath(),e.arc(i.x,i.y,i.innerRadius,i.startAngle+Pt,i.startAngle,!0),o=0;o<i.fullCircles;++o)e.stroke();for(e.beginPath(),e.arc(i.x,i.y,t.outerRadius,i.startAngle,i.startAngle+Pt),o=0;o<i.fullCircles;++o)e.stroke()}(e,t,i,n),n&&g(e,i),e.beginPath(),e.arc(i.x,i.y,t.outerRadius,i.startAngle,i.endAngle),e.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),e.closePath(),e.stroke()}function m(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function v(e){return e&&void 0!==e.width}function b(e){var t,i,n,o,a;return v(e)?(a=e.width/2,t=e.x-a,i=e.x+a,n=Math.min(e.y,e.base),o=Math.max(e.y,e.base)):(a=e.height/2,t=Math.min(e.x,e.base),i=Math.max(e.x,e.base),n=e.y-a,o=e.y+a),{left:t,top:n,right:i,bottom:o}}function y(e,t,i){return e===t?i:e===i?t:e}function x(e,t,i){var n,o,a,r,s=e.borderWidth,l=function(e){var t=e.borderSkipped,i={};return t?(e.horizontal?e.base>e.x&&(t=y(t,"left","right")):e.base<e.y&&(t=y(t,"bottom","top")),i[t]=!0,i):i}(e);return pt.isObject(s)?(n=+s.top||0,o=+s.right||0,a=+s.bottom||0,r=+s.left||0):n=o=a=r=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||o<0?0:o>t?t:o,b:l.bottom||a<0?0:a>i?i:a,l:l.left||r<0?0:r>t?t:r}}function w(e,t,i){var n=null===t,o=null===i,a=!(!e||n&&o)&&b(e);return a&&(n||t>=a.left&&t<=a.right)&&(o||i>=a.top&&i<=a.bottom)}function k(e,t,i){var n,o,a=i.barThickness,r=t.stackCount,s=t.pixels[e],l=pt.isNullOrUndef(a)?function(e,t){var i,n,o,a,r=e._length;for(o=1,a=t.length;o<a;++o)r=Math.min(r,Math.abs(t[o]-t[o-1]));for(o=0,a=e.getTicks().length;o<a;++o)n=e.getPixelForTick(o),r=o>0?Math.min(r,Math.abs(n-i)):r,i=n;return r}(t.scale,t.pixels):-1;return pt.isNullOrUndef(a)?(n=l*i.categoryPercentage,o=i.barPercentage):(n=a*r,o=1),{chunk:n/r,ratio:o,start:s-n/2}}function _(e,t){var i=e&&e.options.ticks||{},n=i.reverse,o=void 0===i.min?t:0,a=void 0===i.max?t:0;return{start:n?a:o,end:n?o:a}}function C(e,t,i){var n=i/2,o=_(e,n),a=_(t,n);return{top:a.end,right:o.end,bottom:a.start,left:o.start}}function S(e){var t,i,n,o;return pt.isObject(e)?(t=e.top,i=e.right,n=e.bottom,o=e.left):t=i=n=o=e,{top:t,right:i,bottom:n,left:o}}function M(e,t){return e.native?{x:e.x,y:e.y}:pt.getRelativePosition(e,t)}function T(e,t){var i,n,o,a,r,s,l=e._getSortedVisibleDatasetMetas();for(n=0,a=l.length;n<a;++n)for(o=0,r=(i=l[n].data).length;o<r;++o)(s=i[o])._view.skip||t(s)}function A(e,t){var i=[];return T(e,function(e){e.inRange(t.x,t.y)&&i.push(e)}),i}function D(e,t,i,n){var o=Number.POSITIVE_INFINITY,a=[];return T(e,function(e){if(!i||e.inRange(t.x,t.y)){var r=e.getCenterPoint(),s=n(t,r);s<o?(a=[e],o=s):s===o&&a.push(e)}}),a}function P(e){var t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){var o=t?Math.abs(e.x-n.x):0,a=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function I(e,t,i){var n=M(t,e);i.axis=i.axis||"x";var o=P(i.axis),a=i.intersect?A(e,n):D(e,n,!1,o),r=[];return a.length?(e._getSortedVisibleDatasetMetas().forEach(function(e){var t=e.data[a[0]._index];t&&!t._view.skip&&r.push(t)}),r):[]}function $(e,t){return pt.where(e,function(e){return e.pos===t})}function F(e,t){return e.sort(function(e,i){var n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function O(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function L(e,t,i){var n,o,a=i.box,r=e.maxPadding;if(i.size&&(e[i.pos]-=i.size),i.size=i.horizontal?a.height:a.width,e[i.pos]+=i.size,a.getPadding){var s=a.getPadding();r.top=Math.max(r.top,s.top),r.left=Math.max(r.left,s.left),r.bottom=Math.max(r.bottom,s.bottom),r.right=Math.max(r.right,s.right)}if(n=t.outerWidth-O(r,e,"left","right"),o=t.outerHeight-O(r,e,"top","bottom"),n!==e.w||o!==e.h){e.w=n,e.h=o;var l=i.horizontal?[n,e.w]:[o,e.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function N(e,t){var i=t.maxPadding;return function(e){var n={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){n[e]=Math.max(t[e],i[e])}),n}(e?["left","right"]:["top","bottom"])}function R(e,t,i){var n,o,a,r,s,l,d=[];for(n=0,o=e.length;n<o;++n)(r=(a=e[n]).box).update(a.width||t.w,a.height||t.h,N(a.horizontal,t)),L(t,i,a)&&(l=!0,d.length&&(s=!0)),r.fullWidth||d.push(a);return s&&R(d,t,i)||l}function E(e,t,i){var n,o,a,r,s=i.padding,l=t.x,d=t.y;for(n=0,o=e.length;n<o;++n)r=(a=e[n]).box,a.horizontal?(r.left=r.fullWidth?s.left:t.left,r.right=r.fullWidth?i.outerWidth-s.right:t.left+t.w,r.top=d,r.bottom=d+r.height,r.width=r.right-r.left,d=r.bottom):(r.left=l,r.right=l+r.width,r.top=t.top,r.bottom=t.top+t.h,r.height=r.bottom-r.top,l=r.right);t.x=l,t.y=d}function V(e,t){var i=pt.getStyle(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}function z(e,t,i){e.addEventListener(t,i,Ci)}function B(e,t,i){e.removeEventListener(t,i,Ci)}function j(e,t,i,n,o){return{type:e,chart:t,native:o||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function W(e){var t=document.createElement("div");return t.className=e||"",t}function H(e,t,i){var n,o,a,r,s=e[bi]||(e[bi]={}),l=s.resizer=function(e){var t=W(yi),i=W(yi+"-expand"),n=W(yi+"-shrink");i.appendChild(W()),n.appendChild(W()),t.appendChild(i),t.appendChild(n),t._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var o=function(){t._reset(),e()};return z(i,"scroll",o.bind(i,"expand")),z(n,"scroll",o.bind(n,"shrink")),t}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&e.parentNode,o=n?n.clientWidth:0;t(j("resize",i)),n&&n.clientWidth<o&&i.canvas&&t(j("resize",i))}},a=!1,r=[],function(){r=Array.prototype.slice.call(arguments),o=o||this,a||(a=!0,pt.requestAnimFrame.call(window,function(){a=!1,n.apply(o,r)}))}));!function(e,t){var i=e[bi]||(e[bi]={}),n=i.renderProxy=function(e){e.animationName===wi&&t()};pt.each(ki,function(t){z(e,t,n)}),i.reflow=!!e.offsetParent,e.classList.add(xi)}(e,function(){if(s.resizer){var t=e.parentNode;t&&t!==l.parentNode&&t.insertBefore(l,t.firstChild),l._reset()}})}function U(e){var t=e[bi]||{},i=t.resizer;delete t.resizer,function(e){var t=e[bi]||{},i=t.renderProxy;i&&(pt.each(ki,function(t){B(e,t,i)}),delete t.renderProxy),e.classList.remove(xi)}(e),i&&i.parentNode&&i.parentNode.removeChild(i)}function q(e,t){return t&&(pt.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function G(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Y(e){var t=ut.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Pi(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Pi(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Pi(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Pi(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Pi(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Pi(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Pi(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Pi(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Pi(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Q(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function K(e){return q([],G(e))}function X(){return pt.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,i,n){if("xAxes"===e||"yAxes"===e){var o,a,r,s=i[e].length;for(t[e]||(t[e]=[]),o=0;o<s;++o)r=i[e][o],a=Ni(r.type,"xAxes"===e?"category":"linear"),o>=t[e].length&&t[e].push({}),!t[e][o].type||r.type&&r.type!==t[e][o].type?pt.merge(t[e][o],[Di.getScaleDefaults(a),r]):pt.merge(t[e][o],r)}else pt._merger(e,t,i,n)}})}function Z(){return pt.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,i,n){var o=t[e]||Object.create(null),a=i[e];"scales"===e?t[e]=X(o,a):"scale"===e?t[e]=pt.merge(o,[Di.getScaleDefaults(a.type),a]):pt._merger(e,t,i,n)}})}function J(e){var t=e.options;pt.each(e.scales,function(t){mi.removeBox(e,t)}),t=Z(ut.global,ut[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function ee(e,t,i){var n,o=function(e){return e.id===n};do{n=t+i++}while(pt.findIndex(e,o)>=0);return n}function te(e){return"top"===e||"bottom"===e}function ie(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function ne(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function oe(e){this.options=e||{}}function ae(e,t,i){var n,o=e.getTicks().length,a=Math.min(t,o-1),r=e.getPixelForTick(a),s=e._startPixel,l=e._endPixel;if(!(i&&(n=1===o?Math.max(r-s,l-r):0===t?(e.getPixelForTick(1)-r)/2:(r-e.getPixelForTick(a-1))/2,(r+=a<t?n:-n)<s-1e-6||r>l+1e-6)))return r}function re(e,t,i,n){function o(e){return{width:y[e]||0,height:x[e]||0,offset:w[e]||0}}var a,r,s,l,d,u,h,c,f,g,p,m,v,b=i.length,y=[],x=[],w=[],k=0,_=0;for(a=0;a<b;++a){if(l=i[a].label,d=i[a].major?t.major:t.minor,e.font=u=d.string,h=n[u]=n[u]||{data:{},gc:[]},c=d.lineHeight,f=g=0,ji(l)||Bi(l)){if(Bi(l))for(r=0,s=l.length;r<s;++r)p=l[r],ji(p)||Bi(p)||(f=pt.measureText(e,h.data,h.gc,f,p),g+=c)}else f=pt.measureText(e,h.data,h.gc,f,l),g=c;y.push(f),x.push(g),w.push(c/2),k=Math.max(f,k),_=Math.max(g,_)}return function(e,t){pt.each(e,function(e){var i,n=e.gc,o=n.length/2;if(o>t){for(i=0;i<o;++i)delete e.data[n[i]];n.splice(0,o)}})}(n,b),m=y.indexOf(k),v=x.indexOf(_),{first:o(0),last:o(b-1),widest:o(m),highest:o(v)}}function se(e){return e.drawTicks?e.tickMarkLength:0}function le(e){var t,i;return e.display?(t=pt.options._parseFont(e),i=pt.options.toPadding(e.padding),t.lineHeight+i.height):0}function de(e,t){return pt.extend(pt.options._parseFont({fontFamily:Wi(t.fontFamily,e.fontFamily),fontSize:Wi(t.fontSize,e.fontSize),fontStyle:Wi(t.fontStyle,e.fontStyle),lineHeight:Wi(t.lineHeight,e.lineHeight)}),{color:pt.options.resolve([t.fontColor,e.fontColor,ut.global.defaultFontColor])})}function ue(e){var t=de(e,e.minor);return{minor:t,major:e.major.enabled?de(e,e.major):t}}function he(e){var t,i,n,o=[];for(i=0,n=e.length;i<n;++i)void 0!==(t=e[i])._index&&o.push(t);return o}function ce(e,t,i,n){var o,a,r,s,l=Wi(i,0),d=Math.min(Wi(n,e.length),e.length),u=0;for(t=Math.ceil(t),n&&(t=(o=n-i)/Math.floor(o/t)),s=l;s<0;)u++,s=Math.round(l+u*t);for(a=Math.max(l,0);a<d;a++)r=e[a],a===s?(r._index=a,u++,s=Math.round(l+u*t)):delete r.label}function fe(e,t,i,n){var o,a,r=e.options,s=function(e,t,i){var n=[i.type,void 0===t&&void 0===i.stack?i.index:"",i.stack].join(".");return void 0===e[n]&&(e[n]={pos:[],neg:[]}),e[n]}(t,r.stacked,i),l=s.pos,d=s.neg,u=n.length;for(o=0;o<u;++o)a=e._parseValue(n[o]),isNaN(a.min)||isNaN(a.max)||i.data[o].hidden||(l[o]=l[o]||0,d[o]=d[o]||0,r.relativePoints?l[o]=100:a.min<0||a.max<0?d[o]+=a.min:l[o]+=a.max)}function ge(e,t,i){var n,o,a=i.length;for(n=0;n<a;++n)o=e._parseValue(i[n]),isNaN(o.min)||isNaN(o.max)||t.data[n].hidden||(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}function pe(e,t){return pt.isFinite(e)&&e>=0?e:t}function me(e){var t=e.ticks;return t.display&&e.display?ln(t.fontSize,ut.global.defaultFontSize)+2*t.backdropPaddingY:0}function ve(e,t,i,n,o){return e===n||e===o?{start:t-i/2,end:t+i/2}:e<n||e>o?{start:t-i,end:t}:{start:t,end:t+i}}function be(e){return 0===e||180===e?"center":e<180?"left":"right"}function ye(e,t,i,n){var o,a,r=i.y+n/2;if(pt.isArray(t))for(o=0,a=t.length;o<a;++o)e.fillText(t[o],i.x,r),r+=n;else e.fillText(t,i.x,r)}function xe(e,t,i){90===e||270===e?i.y-=t.h/2:(e>270||e<90)&&(i.y-=t.h)}function we(e){return pt.isNumber(e)?e:0}function ke(e,t){return e-t}function _e(e){return pt.valueOrDefault(e.time.min,e.ticks.min)}function Ce(e){return pt.valueOrDefault(e.time.max,e.ticks.max)}function Se(e,t,i,n){var o=function(e,t,i){for(var n,o,a,r=0,s=e.length-1;r>=0&&r<=s;){if(o=e[(n=r+s>>1)-1]||null,a=e[n],!o)return{lo:null,hi:a};if(a[t]<i)r=n+1;else{if(!(o[t]>i))return{lo:o,hi:a};s=n-1}}return{lo:a,hi:null}}(e,t,i),a=o.lo?o.hi?o.lo:e[e.length-2]:e[0],r=o.lo?o.hi?o.hi:e[e.length-1]:e[1],s=r[t]-a[t],l=s?(i-a[t])/s:0,d=(r[n]-a[n])*l;return a[n]+d}function Me(e,t){var i=e._adapter,n=e.options.time,o=n.parser,a=o||n.format,r=t;return"function"==typeof o&&(r=o(r)),pt.isFinite(r)||(r="string"==typeof a?i.parse(r,a):i.parse(r)),null!==r?+r:(o||"function"!=typeof a||(r=a(t),pt.isFinite(r)||(r=i.parse(r))),r)}function Te(e,t){if(pt.isNullOrUndef(t))return null;var i=e.options.time,n=Me(e,e.getRightValue(t));return null===n?n:(i.round&&(n=+e._adapter.startOf(n,i.round)),n)}function Ae(e,t,i,n){var o,a,r,s=xn.length;for(o=xn.indexOf(e);o<s-1;++o)if(r=(a=yn[xn[o]]).steps?a.steps:bn,a.common&&Math.ceil((i-t)/(r*a.size))<=n)return xn[o];return xn[s-1]}function De(e,t,i){var n,o,a=[],r={},s=t.length;for(n=0;n<s;++n)r[o=t[n]]=n,a.push({value:o,major:!1});return 0!==s&&i?function(e,t,i,n){var o,a,r=e._adapter,s=+r.startOf(t[0].value,n),l=t[t.length-1].value;for(o=s;o<=l;o=+r.add(o,1,n))(a=i[o])>=0&&(t[a].major=!0);return t}(e,a,r,i):a}function Pe(e,t,i){var n,o=e._model||{},a=o.fill;if(void 0===a&&(a=!!o.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(n=parseFloat(a,10),isFinite(n)&&Math.floor(n)===n)return"-"!==a[0]&&"+"!==a[0]||(n=t+n),!(n===t||n<0||n>=i)&&n;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function Ie(e){return(e.el._scale||{}).getPointPositionForValue?function(e){var t,i,n,o,a,r=e.el._scale,s=r.options,l=r.chart.data.labels.length,d=e.fill,u=[];if(!l)return null;for(t=s.ticks.reverse?r.max:r.min,i=s.ticks.reverse?r.min:r.max,n=r.getPointPositionForValue(0,t),o=0;o<l;++o)a="start"===d||"end"===d?r.getPointPositionForValue(o,"start"===d?t:i):r.getBasePosition(o),s.gridLines.circular&&(a.cx=n.x,a.cy=n.y,a.angle=r.getIndexAngle(o)-Math.PI/2),u.push(a);return u}(e):function(e){var t,i=e.el._model||{},n=e.el._scale||{},o=e.fill,a=null;if(isFinite(o))return null;if("start"===o?a=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===o?a=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?a=i.scaleZero:n.getBasePixel&&(a=n.getBasePixel()),null!=a){if(void 0!==a.x&&void 0!==a.y)return a;if(pt.isFinite(a))return{x:(t=n.isHorizontal())?a:null,y:t?null:a}}return null}(e)}function $e(e,t,i){var n,o=e[t].fill,a=[t];if(!i)return o;for(;!1!==o&&-1===a.indexOf(o);){if(!isFinite(o))return o;if(!(n=e[o]))return!1;if(n.visible)return o;a.push(o),o=n.fill}return!1}function Fe(e){var t=e.fill,i="dataset";return!1===t?null:(isFinite(t)||(i="boundary"),Sn[i](e))}function Oe(e){return e&&!e.skip}function Le(e,t,i,n,o){var a,r,s,l;if(n&&o){for(e.moveTo(t[0].x,t[0].y),a=1;a<n;++a)pt.canvas.lineTo(e,t[a-1],t[a]);if(void 0===i[0].angle)for(e.lineTo(i[o-1].x,i[o-1].y),a=o-1;a>0;--a)pt.canvas.lineTo(e,i[a],i[a-1],!0);else for(r=i[0].cx,s=i[0].cy,l=Math.sqrt(Math.pow(i[0].x-r,2)+Math.pow(i[0].y-s,2)),a=o-1;a>0;--a)e.arc(r,s,l,i[a].angle,i[a-1].angle,!0)}}function Ne(e,t,i,n,o,a){var r,s,l,d,u,h,c,f,g=t.length,p=n.spanGaps,m=[],v=[],b=0,y=0;for(e.beginPath(),r=0,s=g;r<s;++r)u=i(d=t[l=r%g]._view,l,n),h=Oe(d),c=Oe(u),a&&void 0===f&&h&&(s=g+(f=r+1)),h&&c?(b=m.push(d),y=v.push(u)):b&&y&&(p?(h&&m.push(d),c&&v.push(u)):(Le(e,m,v,b,y),b=y=0,m=[],v=[]));Le(e,m,v,b,y),e.closePath(),e.fillStyle=o,e.fill()}function Re(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}function Ee(e,t){var i=new Pn({ctx:e.ctx,options:t,chart:e});mi.configure(e,i,t),mi.addBox(e,i),e.legend=i}function Ve(e,t){var i=new Fn({ctx:e.ctx,options:t,chart:e});mi.configure(e,i,t),mi.addBox(e,i),e.titleBlock=i}e=e&&e.hasOwnProperty("default")?e.default:e;var ze={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],
lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Be=function(e,t){return function(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[t[n]]=n);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o)if(o.hasOwnProperty(a)){if(!("channels"in o[a]))throw new Error("missing channels property: "+a);if(!("labels"in o[a]))throw new Error("missing channel labels property: "+a);if(o[a].labels.length!==o[a].channels)throw new Error("channel and label counts mismatch: "+a);var r=o[a].channels,s=o[a].labels;delete o[a].channels,delete o[a].labels,Object.defineProperty(o[a],"channels",{value:r}),Object.defineProperty(o[a],"labels",{value:s})}o.rgb.hsl=function(e){var t,i,n=e[0]/255,o=e[1]/255,a=e[2]/255,r=Math.min(n,o,a),s=Math.max(n,o,a),l=s-r;return s===r?t=0:n===s?t=(o-a)/l:o===s?t=2+(a-n)/l:a===s&&(t=4+(n-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(r+s)/2,[t,100*(s===r?0:i<=.5?l/(s+r):l/(2-s-r)),100*i]},o.rgb.hsv=function(e){var t,i,n,o,a,r=e[0]/255,s=e[1]/255,l=e[2]/255,d=Math.max(r,s,l),u=d-Math.min(r,s,l),h=function(e){return(d-e)/6/u+.5};return 0===u?o=a=0:(a=u/d,t=h(r),i=h(s),n=h(l),r===d?o=n-i:s===d?o=1/3+t-n:l===d&&(o=2/3+i-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*a,100*d]},o.rgb.hwb=function(e){var t=e[0],i=e[1],n=e[2];return[o.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(i,n))*100,100*(n=1-1/255*Math.max(t,Math.max(i,n)))]},o.rgb.cmyk=function(e){var t,i=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},o.rgb.keyword=function(e){var n=i[e];if(n)return n;var o,a,r,s=1/0;for(var l in t)if(t.hasOwnProperty(l)){var d=t[l],u=(a=e,r=d,Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2)+Math.pow(a[2]-r[2],2));u<s&&(s=u,o=l)}return o},o.keyword.rgb=function(e){return t[e]},o.rgb.xyz=function(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]},o.rgb.lab=function(e){var t=o.rgb.xyz(e),i=t[0],n=t[1],a=t[2];return n/=100,a/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},o.hsl.rgb=function(e){var t,i,n,o,a,r=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[a=255*l,a,a];t=2*l-(i=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var d=0;d<3;d++)(n=r+1/3*-(d-1))<0&&n++,n>1&&n--,a=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t,o[d]=255*a;return o},o.hsl.hsv=function(e){var t=e[0],i=e[1]/100,n=e[2]/100,o=i,a=Math.max(n,.01);return i*=(n*=2)<=1?n:2-n,o*=a<=1?a:2-a,[t,100*(0===n?2*o/(a+o):2*i/(n+i)),(n+i)/2*100]},o.hsv.rgb=function(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,a=t-Math.floor(t),r=255*n*(1-i),s=255*n*(1-i*a),l=255*n*(1-i*(1-a));switch(n*=255,o){case 0:return[n,l,r];case 1:return[s,n,r];case 2:return[r,n,l];case 3:return[r,s,n];case 4:return[l,r,n];case 5:return[n,r,s]}},o.hsv.hsl=function(e){var t,i,n,o=e[0],a=e[1]/100,r=e[2]/100,s=Math.max(r,.01);return n=(2-a)*r,i=a*s,[o,100*(i=(i/=(t=(2-a)*s)<=1?t:2-t)||0),100*(n/=2)]},o.hwb.rgb=function(e){var t,i,n,o,a,r,s,l=e[0]/360,d=e[1]/100,u=e[2]/100,h=d+u;switch(h>1&&(d/=h,u/=h),n=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(n=1-n),o=d+n*((i=1-u)-d),t){default:case 6:case 0:a=i,r=o,s=d;break;case 1:a=o,r=i,s=d;break;case 2:a=d,r=i,s=o;break;case 3:a=d,r=o,s=i;break;case 4:a=o,r=d,s=i;break;case 5:a=i,r=d,s=o}return[255*a,255*r,255*s]},o.cmyk.rgb=function(e){var t=e[0]/100,i=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},o.xyz.rgb=function(e){var t,i,n,o=e[0]/100,a=e[1]/100,r=e[2]/100;return i=-.9689*o+1.8758*a+.0415*r,n=.0557*o+-.204*a+1.057*r,t=(t=3.2406*o+-1.5372*a+-.4986*r)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(e){var t,i,n,o=e[0];t=e[1]/500+(i=(o+16)/116),n=i-e[2]/200;var a=Math.pow(i,3),r=Math.pow(t,3),s=Math.pow(n,3);return i=a>.008856?a:(i-16/116)/7.787,t=r>.008856?r:(t-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[t*=95.047,i*=100,n*=108.883]},o.lab.lch=function(e){var t,i=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+o*o),t]},o.lch.lab=function(e){var t,i=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[i,n*Math.cos(t),n*Math.sin(t)]},o.rgb.ansi16=function(e){var t=e[0],i=e[1],n=e[2],a=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(a=Math.round(a/50)))return 30;var r=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return 2===a&&(r+=60),r},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var t=e[0],i=e[1],n=e[2];return t===i&&i===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var i=.5*(1+~~(e>50));return[(1&t)*i*255,(t>>1&1)*i*255,(t>>2&1)*i*255]},o.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var i;return e-=16,[Math.floor(e/36)/5*255,Math.floor((i=e%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var i=t[0];3===t[0].length&&(i=i.split("").map(function(e){return e+e}).join(""));var n=parseInt(i,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(e){var t,i=e[0]/255,n=e[1]/255,o=e[2]/255,a=Math.max(Math.max(i,n),o),r=Math.min(Math.min(i,n),o),s=a-r;return t=s<=0?0:a===i?(n-o)/s%6:a===n?2+(o-i)/s:4+(i-n)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?r/(1-s):0)]},o.hsl.hcg=function(e){var t=e[1]/100,i=e[2]/100,n=1,o=0;return(n=i<.5?2*t*i:2*t*(1-i))<1&&(o=(i-.5*n)/(1-n)),[e[0],100*n,100*o]},o.hsv.hcg=function(e){var t=e[1]/100,i=e[2]/100,n=t*i,o=0;return n<1&&(o=(i-n)/(1-n)),[e[0],100*n,100*o]},o.hcg.rgb=function(e){var t=e[0]/360,i=e[1]/100,n=e[2]/100;if(0===i)return[255*n,255*n,255*n];var o,a=[0,0,0],r=t%1*6,s=r%1,l=1-s;switch(Math.floor(r)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=l,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=l,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=l}return o=(1-i)*n,[255*(i*a[0]+o),255*(i*a[1]+o),255*(i*a[2]+o)]},o.hcg.hsv=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t),n=0;return i>0&&(n=t/i),[e[0],100*n,100*i]},o.hcg.hsl=function(e){var t=e[1]/100,i=e[2]/100*(1-t)+.5*t,n=0;return i>0&&i<.5?n=t/(2*i):i>=.5&&i<1&&(n=t/(2*(1-i))),[e[0],100*n,100*i]},o.hcg.hwb=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t);return[e[0],100*(i-t),100*(1-i)]},o.hwb.hcg=function(e){var t=e[1]/100,i=1-e[2]/100,n=i-t,o=0;return n<1&&(o=(i-n)/(1-n)),[e[0],100*n,100*o]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}(t={exports:{}},t.exports),t.exports}();Be.rgb,Be.hsl,Be.hsv,Be.hwb,Be.cmyk,Be.xyz,Be.lab,Be.lch,Be.hex,Be.keyword,Be.ansi16,Be.ansi256,Be.hcg,Be.apple,Be.gray;var je={};Object.keys(Be).forEach(function(e){je[e]={},Object.defineProperty(je[e],"channels",{value:Be[e].channels}),Object.defineProperty(je[e],"labels",{value:Be[e].labels});var i=function(e){for(var i=t(e),o={},a=Object.keys(i),r=a.length,s=0;s<r;s++){var l=a[s];null!==i[l].parent&&(o[l]=n(l,i))}return o}(e);Object.keys(i).forEach(function(t){var n=i[t];je[e][t]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var i=e(t);if("object"==typeof i)for(var n=i.length,o=0;o<n;o++)i[o]=Math.round(i[o]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(n),je[e][t].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)})});var We=je,He={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ue={getRgba:o,getHsla:a,getRgb:function(e){var t=o(e);return t&&t.slice(0,3)},getHsl:function(e){var t=a(e);return t&&t.slice(0,3)},getHwb:r,getAlpha:function(e){var t=o(e);return t?t[3]:(t=a(e))?t[3]:(t=r(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+h(e[0])+h(e[1])+h(e[2])+(t>=0&&t<1?h(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?s(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:s,percentString:function(e,t){return t<1||e[3]&&e[3]<1?l(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:l,hslString:function(e,t){return t<1||e[3]&&e[3]<1?d(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:d,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return qe[e.slice(0,3)]}},qe={};for(var Ge in He)qe[He[Ge]]=Ge;var Ye=function(e){return e instanceof Ye?e:this instanceof Ye?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=Ue.getRgba(e))?this.setValues("rgb",t):(t=Ue.getHsla(e))?this.setValues("hsl",t):(t=Ue.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new Ye(e);var t};Ye.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return Ue.hexString(this.values.rgb)},rgbString:function(){return Ue.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Ue.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Ue.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Ue.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Ue.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Ue.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Ue.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,i=(t[0]+e)%360;return t[0]=i<0?360+i:i,this.setValues("hsl",t),this},mix:function(e,t){var i=e,n=void 0===t?.5:t,o=2*n-1,a=this.alpha()-i.alpha(),r=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,s=1-r;return this.rgb(r*this.red()+s*i.red(),r*this.green()+s*i.green(),r*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,i=new Ye,n=this.values,o=i.values;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],"[object Array]"===(t={}.toString.call(e))?o[a]=e.slice(0):"[object Number]"===t?o[a]=e:console.error("unexpected color value:",e));return i}},Ye.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Ye.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Ye.prototype.getValues=function(e){for(var t=this.values,i={},n=0;n<e.length;n++)i[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(i.a=t.alpha),i},Ye.prototype.setValues=function(e,t){var i,n,o=this.values,a=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)o[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(i=0;i<e.length;i++)o[e][i]=t[e.charAt(i)];s=t.a}else if(void 0!==t[a[e][0]]){var l=a[e];for(i=0;i<e.length;i++)o[e][i]=t[l[i]];s=t.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===s?o.alpha:s)),"alpha"===e)return!1;for(i=0;i<e.length;i++)n=Math.max(0,Math.min(r[e][i],o[e][i])),o[e][i]=Math.round(n);for(var d in a)d!==e&&(o[d]=We[e][d](o[e]));return!0},Ye.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},Ye.prototype.setChannel=function(e,t,i){var n=this.values[e];return void 0===i?n[t]:i===n[t]?this:(n[t]=i,this.setValues(e,n),this)},"undefined"!=typeof window&&(window.Color=Ye);var Qe,Ke=Ye,Xe={noop:function(){},uid:(Qe=0,function(){return Qe++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,i){return Xe.valueOrDefault(Xe.isArray(e)?e[t]:e,i)},callback:function(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)},each:function(e,t,i,n){var o,a,r;if(Xe.isArray(e))if(a=e.length,n)for(o=a-1;o>=0;o--)t.call(i,e[o],o);else for(o=0;o<a;o++)t.call(i,e[o],o);else if(Xe.isObject(e))for(a=(r=Object.keys(e)).length,o=0;o<a;o++)t.call(i,e[r[o]],r[o])},arrayEquals:function(e,t){var i,n,o,a;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(o=e[i],a=t[i],o instanceof Array&&a instanceof Array){if(!Xe.arrayEquals(o,a))return!1}else if(o!==a)return!1;return!0},clone:function(e){if(Xe.isArray(e))return e.map(Xe.clone);if(Xe.isObject(e)){for(var t=Object.create(e),i=Object.keys(e),n=i.length,o=0;o<n;++o)t[i[o]]=Xe.clone(e[i[o]]);return t}return e},_merger:function(e,t,i,n){if(c(e)){var o=t[e],a=i[e];Xe.isObject(o)&&Xe.isObject(a)?Xe.merge(o,a,n):t[e]=Xe.clone(a)}},_mergerIf:function(e,t,i){if(c(e)){var n=t[e],o=i[e];Xe.isObject(n)&&Xe.isObject(o)?Xe.mergeIf(n,o):t.hasOwnProperty(e)||(t[e]=Xe.clone(o))}},merge:function(e,t,i){var n,o,a,r,s,l=Xe.isArray(t)?t:[t],d=l.length;if(!Xe.isObject(e))return e;for(n=(i=i||{}).merger||Xe._merger,o=0;o<d;++o)if(t=l[o],Xe.isObject(t))for(s=0,r=(a=Object.keys(t)).length;s<r;++s)n(a[s],e,t,i);return e},mergeIf:function(e,t){return Xe.merge(e,t,{merger:Xe._mergerIf})},extend:Object.assign||function(e){return Xe.merge(e,[].slice.call(arguments,1),{merger:function(e,t,i){t[e]=i[e]}})},inherits:function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=t.prototype,i.prototype=new n,i.extend=Xe.inherits,e&&Xe.extend(i.prototype,e),i.__super__=t.prototype,i},_deprecated:function(e,t,i,n){void 0!==t&&console.warn(e+': "'+i+'" is deprecated. Please use "'+n+'" instead')}},Ze=Xe;Xe.callCallback=Xe.callback,Xe.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)},Xe.getValueOrDefault=Xe.valueOrDefault,Xe.getValueAtIndexOrDefault=Xe.valueAtIndexOrDefault;var Je={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i||(i=.45),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-Je.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*Je.easeInBounce(2*e):.5*Je.easeOutBounce(2*e-1)+.5}},et={effects:Je};Ze.easingEffects=Je;var tt=Math.PI,it=tt/180,nt=2*tt,ot=tt/2,at=tt/4,rt=2*tt/3,st={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,i,n,o,a){if(a){var r=Math.min(a,o/2,n/2),s=t+r,l=i+r,d=t+n-r,u=i+o-r;e.moveTo(t,l),s<d&&l<u?(e.arc(s,l,r,-tt,-ot),e.arc(d,l,r,-ot,0),e.arc(d,u,r,0,ot),e.arc(s,u,r,ot,tt)):s<d?(e.moveTo(s,i),e.arc(d,l,r,-ot,ot),e.arc(s,l,r,ot,tt+ot)):l<u?(e.arc(s,l,r,-tt,0),e.arc(s,u,r,0,tt)):e.arc(s,l,r,-tt,tt),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,o)},drawPoint:function(e,t,i,n,o,a){var r,s,l,d,u,h=(a||0)*it;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(r=t.toString())||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(n,o),e.rotate(h),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(i)||i<=0)){switch(e.beginPath(),t){default:e.arc(n,o,i,0,nt),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=rt,e.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=rt,e.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),e.closePath();break;case"rectRounded":d=i-(u=.516*i),s=Math.cos(h+at)*d,l=Math.sin(h+at)*d,e.arc(n-s,o-l,u,h-tt,h-ot),e.arc(n+l,o-s,u,h-ot,h),e.arc(n+s,o+l,u,h,h+ot),e.arc(n-l,o+s,u,h+ot,h+tt),e.closePath();break;case"rect":if(!a){d=Math.SQRT1_2*i,e.rect(n-d,o-d,2*d,2*d);break}h+=at;case"rectRot":s=Math.cos(h)*i,l=Math.sin(h)*i,e.moveTo(n-s,o-l),e.lineTo(n+l,o-s),e.lineTo(n+s,o+l),e.lineTo(n-l,o+s),e.closePath();break;case"crossRot":h+=at;case"cross":s=Math.cos(h)*i,l=Math.sin(h)*i,e.moveTo(n-s,o-l),e.lineTo(n+s,o+l),e.moveTo(n+l,o-s),e.lineTo(n-l,o+s);break;case"star":s=Math.cos(h)*i,l=Math.sin(h)*i,e.moveTo(n-s,o-l),e.lineTo(n+s,o+l),e.moveTo(n+l,o-s),e.lineTo(n-l,o+s),h+=at,s=Math.cos(h)*i,l=Math.sin(h)*i,e.moveTo(n-s,o-l),e.lineTo(n+s,o+l),e.moveTo(n+l,o-s),e.lineTo(n-l,o+s);break;case"line":s=Math.cos(h)*i,l=Math.sin(h)*i,e.moveTo(n-s,o-l),e.lineTo(n+s,o+l);break;case"dash":e.moveTo(n,o),e.lineTo(n+Math.cos(h)*i,o+Math.sin(h)*i)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,i,n){var o=i.steppedLine;if(o){if("middle"===o){var a=(t.x+i.x)/2;e.lineTo(a,n?i.y:t.y),e.lineTo(a,n?t.y:i.y)}else"after"===o&&!n||"after"!==o&&n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}else i.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):e.lineTo(i.x,i.y)}},lt=st;Ze.clear=st.clear,Ze.drawRoundedRectangle=function(e){e.beginPath(),st.roundedRect.apply(st,arguments)};var dt={_set:function(e,t){return Ze.merge(this[e]||(this[e]={}),t)}};dt._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ut=dt,ht=Ze.valueOrDefault,ct={toLineHeight:function(e,t){var i=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,i,n,o;return Ze.isObject(e)?(t=+e.top||0,i=+e.right||0,n=+e.bottom||0,o=+e.left||0):t=i=n=o=+e||0,{top:t,right:i,bottom:n,left:o,height:t+n,width:o+i}},_parseFont:function(e){var t=ut.global,i=ht(e.fontSize,t.defaultFontSize),n={family:ht(e.fontFamily,t.defaultFontFamily),lineHeight:Ze.options.toLineHeight(ht(e.lineHeight,t.defaultLineHeight),i),size:i,style:ht(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=function(e){return!e||Ze.isNullOrUndef(e.size)||Ze.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n},resolve:function(e,t,i,n){var o,a,r,s=!0;for(o=0,a=e.length;o<a;++o)if(void 0!==(r=e[o])&&(void 0!==t&&"function"==typeof r&&(r=r(t),s=!1),void 0!==i&&Ze.isArray(r)&&(r=r[i],s=!1),void 0!==r))return n&&!s&&(n.cacheable=!1),r}},ft={_factorize:function(e){var t,i=[],n=Math.sqrt(e);for(t=1;t<n;t++)e%t==0&&(i.push(t),i.push(e/t));return n===(0|n)&&i.push(n),i.sort(function(e,t){return e-t}).pop(),i},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,i=Math.round(t);return e===Math.pow(10,i)?i:t}},gt=ft;Ze.log10=ft.log10;var pt=Ze,mt=et,vt=lt,bt=ct,yt=gt,xt={getRtlAdapter:function(e,t,i){return e?function(e,t){return{x:function(i){return e+e+t-i},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},
xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,i):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var i,n;"ltr"!==t&&"rtl"!==t||(n=[(i=e.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};pt.easing=mt,pt.canvas=vt,pt.options=bt,pt.math=yt,pt.rtl=xt;var wt=function(e){pt.extend(this,e),this.initialize.apply(this,arguments)};pt.extend(wt.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=pt.extend({},e._model)),e._start={},e},transition:function(e){var t=this,i=t._model,n=t._start,o=t._view;return i&&1!==e?(o||(o=t._view={}),n||(n=t._start={}),function(e,t,i,n){var o,a,r,s,l,d,u,h,c,f=Object.keys(i);for(o=0,a=f.length;o<a;++o)if(d=i[r=f[o]],t.hasOwnProperty(r)||(t[r]=d),(s=t[r])!==d&&"_"!==r[0]){if(e.hasOwnProperty(r)||(e[r]=s),(u=typeof d)==typeof(l=e[r]))if("string"===u){if((h=Ke(l)).valid&&(c=Ke(d)).valid){t[r]=c.mix(h,n).rgbString();continue}}else if(pt.isFinite(l)&&pt.isFinite(d)){t[r]=l+(d-l)*n;continue}t[r]=d}}(n,o,i,e),t):(t._view=pt.extend({},i),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return pt.isNumber(this._model.x)&&pt.isNumber(this._model.y)}}),wt.extend=pt.inherits;var kt=wt,_t=kt.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Ct=_t;Object.defineProperty(_t.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(_t.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),ut._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:pt.noop,onComplete:pt.noop}});var St={animations:[],request:null,addAnimation:function(e,t,i,n){var o,a,r=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=i,n||(e.animating=!0),o=0,a=r.length;o<a;++o)if(r[o].chart===e)return void(r[o]=t);r.push(t),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=pt.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=pt.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,i,n,o=this.animations,a=0;a<o.length;)t=(e=o[a]).chart,i=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*i)+1,e.currentStep=Math.min(n,i),pt.callback(e.render,[t,e],t),pt.callback(e.onAnimationProgress,[e],t),e.currentStep>=i?(pt.callback(e.onAnimationComplete,[e],t),t.animating=!1,o.splice(a,1)):++a}},Mt=pt.options.resolve,Tt=["push","pop","shift","splice","unshift"],At=function(e,t){this.initialize(e,t)};pt.extend(At.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var i=this;i.chart=e,i.index=t,i.linkScales(),i.addElements(),i._type=i.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this.getMeta(),t=this.chart,i=t.scales,n=this.getDataset(),o=t.options.scales;null!==e.xAxisID&&e.xAxisID in i&&!n.xAxisID||(e.xAxisID=n.xAxisID||o.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in i&&!n.yAxisID||(e.yAxisID=n.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&f(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,i=this.getMeta(),n=this.getDataset().data||[],o=i.data;for(e=0,t=n.length;e<t;++e)o[e]=o[e]||this.createMetaData(e);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,i=this,n=i.getDataset(),o=n.data||(n.data=[]);i._data!==o&&(i._data&&f(i._data,i),o&&Object.isExtensible(o)&&(t=i,(e=o)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Tt.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),o=n.apply(this,t);return pt.each(e._chartjs.listeners,function(e){"function"==typeof e[i]&&e[i].apply(e,t)}),o}})}))),i._data=o),i.resyncElements()},_configure:function(){this._config=pt.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(e,t,i){"_meta"!==e&&"data"!==e&&pt._merger(e,t,i)}})},_update:function(e){this._configure(),this._cachedDataOpts=null,this.update(e)},update:pt.noop,transition:function(e){for(var t=this.getMeta(),i=t.data||[],n=i.length,o=0;o<n;++o)i[o].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],i=t.length,n=0;for(e.dataset&&e.dataset.draw();n<i;++n)t[n].draw()},getStyle:function(e){var t,i=this.getMeta(),n=i.dataset;return this._configure(),n&&void 0===e?t=this._resolveDatasetElementOptions(n||{}):(e=e||0,t=this._resolveDataElementOptions(i.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var i,n,o,a,r=this,s=r.chart,l=r._config,d=e.custom||{},u=s.options.elements[r.datasetElementType.prototype._type]||{},h=r._datasetElementOptions,c={},f={chart:s,dataset:r.getDataset(),datasetIndex:r.index,hover:t};for(i=0,n=h.length;i<n;++i)o=h[i],a=t?"hover"+o.charAt(0).toUpperCase()+o.slice(1):o,c[o]=Mt([d[a],l[a],u[a]],f);return c},_resolveDataElementOptions:function(e,t){var i=this,n=e&&e.custom,o=i._cachedDataOpts;if(o&&!n)return o;var a,r,s,l,d=i.chart,u=i._config,h=d.options.elements[i.dataElementType.prototype._type]||{},c=i._dataElementOptions,f={},g={chart:d,dataIndex:t,dataset:i.getDataset(),datasetIndex:i.index},p={cacheable:!n};if(n=n||{},pt.isArray(c))for(r=0,s=c.length;r<s;++r)f[l=c[r]]=Mt([n[l],u[l],h[l]],g,t,p);else for(r=0,s=(a=Object.keys(c)).length;r<s;++r)f[l=a[r]]=Mt([n[l],u[c[l]],u[l],h[l]],g,t,p);return p.cacheable&&(i._cachedDataOpts=Object.freeze(f)),f},removeHoverStyle:function(e){pt.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],i=e._index,n=e.custom||{},o=e._model,a=pt.getHoverColor;e.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=Mt([n.hoverBackgroundColor,t.hoverBackgroundColor,a(o.backgroundColor)],void 0,i),o.borderColor=Mt([n.hoverBorderColor,t.hoverBorderColor,a(o.borderColor)],void 0,i),o.borderWidth=Mt([n.hoverBorderWidth,t.hoverBorderWidth,o.borderWidth],void 0,i)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,i,n,o,a,r=this.getMeta().dataset,s={};if(r){for(a=r._model,o=this._resolveDatasetElementOptions(r,!0),e=0,t=(n=Object.keys(o)).length;e<t;++e)s[i=n[e]]=a[i],a[i]=o[i];r.$previousStyle=s}},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,i=e.data.length,n=t.length;n<i?e.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(e,t){for(var i=0;i<t;++i)this.addElementAndReset(e+i)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),At.extend=pt.inherits;var Dt=At,Pt=2*Math.PI;ut._set("global",{elements:{arc:{backgroundColor:ut.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var It=kt.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var i=this._view;if(i){for(var n=pt.getAngleFromPoint(i,{x:e,y:t}),o=n.angle,a=n.distance,r=i.startAngle,s=i.endAngle;s<r;)s+=Pt;for(;o>s;)o-=Pt;for(;o<r;)o+=Pt;var l=o>=r&&o<=s,d=a>=i.innerRadius&&a<=i.outerRadius;return l&&d}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,i=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e,t=this._chart.ctx,i=this._view,n="inner"===i.borderAlign?.33:0,o={x:i.x,y:i.y,innerRadius:i.innerRadius,outerRadius:Math.max(i.outerRadius-n,0),pixelMargin:n,startAngle:i.startAngle,endAngle:i.endAngle,fullCircles:Math.floor(i.circumference/Pt)};if(t.save(),t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,o.fullCircles){for(o.endAngle=o.startAngle+Pt,t.beginPath(),t.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),t.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),t.closePath(),e=0;e<o.fullCircles;++e)t.fill();o.endAngle=o.startAngle+i.circumference%Pt}t.beginPath(),t.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),t.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),t.closePath(),t.fill(),i.borderWidth&&p(t,i,o),t.restore()}}),$t=pt.valueOrDefault,Ft=ut.global.defaultColor;ut._set("global",{elements:{line:{tension:.4,backgroundColor:Ft,borderWidth:3,borderColor:Ft,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Ot=kt.extend({_type:"line",draw:function(){var e,t,i,n=this,o=n._view,a=n._chart.ctx,r=o.spanGaps,s=n._children.slice(),l=ut.global,d=l.elements.line,u=-1,h=n._loop;if(s.length){if(n._loop){for(e=0;e<s.length;++e)if(t=pt.previousItem(s,e),!s[e]._view.skip&&t._view.skip){s=s.slice(e).concat(s.slice(0,e)),h=r;break}h&&s.push(s[0])}for(a.save(),a.lineCap=o.borderCapStyle||d.borderCapStyle,a.setLineDash&&a.setLineDash(o.borderDash||d.borderDash),a.lineDashOffset=$t(o.borderDashOffset,d.borderDashOffset),a.lineJoin=o.borderJoinStyle||d.borderJoinStyle,a.lineWidth=$t(o.borderWidth,d.borderWidth),a.strokeStyle=o.borderColor||l.defaultColor,a.beginPath(),(i=s[0]._view).skip||(a.moveTo(i.x,i.y),u=0),e=1;e<s.length;++e)i=s[e]._view,t=-1===u?pt.previousItem(s,e):s[u],i.skip||(u!==e-1&&!r||-1===u?a.moveTo(i.x,i.y):pt.canvas.lineTo(a,t._view,i),u=e);h&&a.closePath(),a.stroke(),a.restore()}}}),Lt=pt.valueOrDefault,Nt=ut.global.defaultColor;ut._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Nt,borderColor:Nt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Rt=kt.extend({_type:"point",inRange:function(e,t){var i=this._view;return!!i&&Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:m,inXRange:m,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,i=this._chart.ctx,n=t.pointStyle,o=t.rotation,a=t.radius,r=t.x,s=t.y,l=ut.global,d=l.defaultColor;t.skip||(void 0===e||pt.canvas._isPointInArea(t,e))&&(i.strokeStyle=t.borderColor||d,i.lineWidth=Lt(t.borderWidth,l.elements.point.borderWidth),i.fillStyle=t.backgroundColor||d,pt.canvas.drawPoint(i,n,a,r,s,o))}}),Et=ut.global.defaultColor;ut._set("global",{elements:{rectangle:{backgroundColor:Et,borderColor:Et,borderSkipped:"bottom",borderWidth:0}}});var Vt=kt.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,i=function(e){var t=b(e),i=t.right-t.left,n=t.bottom-t.top,o=x(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n},inner:{x:t.left+o.l,y:t.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}(t),n=i.outer,o=i.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===o.w&&n.h===o.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(o.x,o.y,o.w,o.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return w(this._view,e,t)},inLabelRange:function(e,t){var i=this._view;return v(i)?w(i,e,null):w(i,null,t)},inXRange:function(e){return w(this._view,e,null)},inYRange:function(e){return w(this._view,null,e)},getCenterPoint:function(){var e,t,i=this._view;return v(i)?(e=i.x,t=(i.y+i.base)/2):(e=(i.x+i.base)/2,t=i.y),{x:e,y:t}},getArea:function(){var e=this._view;return v(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),zt={},Bt=It,jt=Ot,Wt=Rt,Ht=Vt;zt.Arc=Bt,zt.Line=jt,zt.Point=Wt,zt.Rectangle=Ht;var Ut=pt._deprecated,qt=pt.valueOrDefault;ut._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),ut._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Gt=Dt.extend({dataElementType:zt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,i=this;Dt.prototype.initialize.apply(i,arguments),(e=i.getMeta()).stack=i.getDataset().stack,e.bar=!0,t=i._getIndexScale().options,Ut("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Ut("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Ut("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Ut("bar chart",i._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Ut("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,i=n.length;t<i;++t)this.updateElement(n[t],t,e)},updateElement:function(e,t,i){var n=this,o=n.getMeta(),a=n.getDataset(),r=n._resolveDataElementOptions(e,t);e._xScale=n.getScaleForId(o.xAxisID),e._yScale=n.getScaleForId(o.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:a.label,label:n.chart.data.labels[t]},pt.isArray(a.data[t])&&(e._model.borderSkipped=null),n._updateElementGeometry(e,t,i,r),e.pivot()},_updateElementGeometry:function(e,t,i,n){var o=this,a=e._model,r=o._getValueScale(),s=r.getBasePixel(),l=r.isHorizontal(),d=o._ruler||o.getRuler(),u=o.calculateBarValuePixels(o.index,t,n),h=o.calculateBarIndexPixels(o.index,t,d,n);a.horizontal=l,a.base=i?s:u.base,a.x=l?i?s:u.head:h.center,a.y=l?h.center:i?s:u.head,a.height=l?h.size:void 0,a.width=l?void 0:h.size},_getStacks:function(e){var t,i,n=this._getIndexScale(),o=n._getMatchingVisibleMetas(this._type),a=n.options.stacked,r=o.length,s=[];for(t=0;t<r&&(i=o[t],(!1===a||-1===s.indexOf(i.stack)||void 0===a&&void 0===i.stack)&&s.push(i.stack),i.index!==e);++t);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var i=this._getStacks(e),n=void 0!==t?i.indexOf(t):-1;return-1===n?i.length-1:n},getRuler:function(){var e,t,i=this._getIndexScale(),n=[];for(e=0,t=this.getMeta().data.length;e<t;++e)n.push(i.getPixelForValue(null,e,this.index));return{pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this.getStackCount(),scale:i}},calculateBarValuePixels:function(e,t,i){var n,o,a,r,s,l,d,u=this.chart,h=this._getValueScale(),c=h.isHorizontal(),f=u.data.datasets,g=h._getMatchingVisibleMetas(this._type),p=h._parseValue(f[e].data[t]),m=i.minBarLength,v=h.options.stacked,b=this.getMeta().stack,y=void 0===p.start?0:p.max>=0&&p.min>=0?p.min:p.max,x=void 0===p.start?p.end:p.max>=0&&p.min>=0?p.max-p.min:p.min-p.max,w=g.length;if(v||void 0===v&&void 0!==b)for(n=0;n<w&&(o=g[n]).index!==e;++n)o.stack===b&&(a=void 0===(d=h._parseValue(f[o.index].data[t])).start?d.end:d.min>=0&&d.max>=0?d.max:d.min,(p.min<0&&a<0||p.max>=0&&a>0)&&(y+=a));return r=h.getPixelForValue(y),l=(s=h.getPixelForValue(y+x))-r,void 0!==m&&Math.abs(l)<m&&(l=m,s=x>=0&&!c||x<0&&c?r-m:r+m),{size:l,base:r,head:s,center:s+l/2}},calculateBarIndexPixels:function(e,t,i,n){var o="flex"===n.barThickness?function(e,t,i){var n,o=t.pixels,a=o[e],r=e>0?o[e-1]:null,s=e<o.length-1?o[e+1]:null,l=i.categoryPercentage;return null===r&&(r=a-(null===s?t.end-t.start:s-a)),null===s&&(s=a+a-r),n=a-(a-Math.min(r,s))/2*l,{chunk:Math.abs(s-r)/2*l/t.stackCount,ratio:i.barPercentage,start:n}}(t,i,n):k(t,i,n),a=this.getStackIndex(e,this.getMeta().stack),r=o.start+o.chunk*a+o.chunk/2,s=Math.min(qt(n.maxBarThickness,1/0),o.chunk*o.ratio);return{base:r-s/2,head:r+s/2,center:r,size:s}},draw:function(){var e=this.chart,t=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),o=i.length,a=0;for(pt.canvas.clipArea(e.ctx,e.chartArea);a<o;++a){var r=t._parseValue(n.data[a]);isNaN(r.min)||isNaN(r.max)||i[a].draw()}pt.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var e=this,t=pt.extend({},Dt.prototype._resolveDataElementOptions.apply(e,arguments)),i=e._getIndexScale().options,n=e._getValueScale().options;return t.barPercentage=qt(i.barPercentage,t.barPercentage),t.barThickness=qt(i.barThickness,t.barThickness),t.categoryPercentage=qt(i.categoryPercentage,t.categoryPercentage),t.maxBarThickness=qt(i.maxBarThickness,t.maxBarThickness),t.minBarLength=qt(n.minBarLength,t.minBarLength),t}}),Yt=pt.valueOrDefault,Qt=pt.options.resolve;ut._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.datasets[e.datasetIndex].label||"",n=t.datasets[e.datasetIndex].data[e.index];return i+": ("+e.xLabel+", "+e.yLabel+", "+n.r+")"}}}});var Kt=Dt.extend({dataElementType:zt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,i=t.getMeta().data;pt.each(i,function(i,n){t.updateElement(i,n,e)})},updateElement:function(e,t,i){var n=this,o=n.getMeta(),a=e.custom||{},r=n.getScaleForId(o.xAxisID),s=n.getScaleForId(o.yAxisID),l=n._resolveDataElementOptions(e,t),d=n.getDataset().data[t],u=n.index,h=i?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof d?d:NaN,t,u),c=i?s.getBasePixel():s.getPixelForValue(d,t,u);e._xScale=r,e._yScale=s,e._options=l,e._datasetIndex=u,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:a.skip||isNaN(h)||isNaN(c),x:h,y:c},e.pivot()},setHoverStyle:function(e){var t=e._model,i=e._options,n=pt.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Yt(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Yt(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Yt(i.hoverBorderWidth,i.borderWidth),t.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(e,t){var i=this,n=i.chart,o=i.getDataset(),a=e.custom||{},r=o.data[t]||{},s=Dt.prototype._resolveDataElementOptions.apply(i,arguments),l={chart:n,dataIndex:t,dataset:o,datasetIndex:i.index};return i._cachedDataOpts===s&&(s=pt.extend({},s)),s.radius=Qt([a.radius,r.r,i._config.radius,n.options.elements.point.radius],l,t),s}}),Xt=pt.valueOrDefault,Zt=Math.PI,Jt=2*Zt,ei=Zt/2;ut._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,i,n,o=document.createElement("ul"),a=e.data,r=a.datasets,s=a.labels;if(o.setAttribute("class",e.id+"-legend"),r.length)for(t=0,i=r[0].data.length;t<i;++t)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[t],s[t]&&n.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(i,n){var o=e.getDatasetMeta(0),a=o.controller.getStyle(n);return{text:i,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(t.datasets[0].data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(e,t){var i,n,o,a=t.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(o=r.getDatasetMeta(i)).data[a]&&(o.data[a].hidden=!o.data[a].hidden);r.update()}},cutoutPercentage:50,rotation:-ei,circumference:Jt,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return pt.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var ti=Dt.extend({dataElementType:zt.Arc,linkScales:pt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&++t;return t},update:function(e){var t,i,n,o,a=this,r=a.chart,s=r.chartArea,l=r.options,d=1,u=1,h=0,c=0,f=a.getMeta(),g=f.data,p=l.cutoutPercentage/100||0,m=l.circumference,v=a._getRingWeight(a.index);if(m<Jt){var b=l.rotation%Jt,y=(b+=b>=Zt?-Jt:b<-Zt?Jt:0)+m,x=Math.cos(b),w=Math.sin(b),k=Math.cos(y),_=Math.sin(y),C=b<=0&&y>=0||y>=Jt,S=b<=ei&&y>=ei||y>=Jt+ei,M=b<=-ei&&y>=-ei||y>=Zt+ei,T=b===-Zt||y>=Zt?-1:Math.min(x,x*p,k,k*p),A=M?-1:Math.min(w,w*p,_,_*p),D=C?1:Math.max(x,x*p,k,k*p),P=S?1:Math.max(w,w*p,_,_*p);d=(D-T)/2,u=(P-A)/2,h=-(D+T)/2,c=-(P+A)/2}for(n=0,o=g.length;n<o;++n)g[n]._options=a._resolveDataElementOptions(g[n],n);for(r.borderWidth=a.getMaxBorderWidth(),t=(s.right-s.left-r.borderWidth)/d,i=(s.bottom-s.top-r.borderWidth)/u,r.outerRadius=Math.max(Math.min(t,i)/2,0),r.innerRadius=Math.max(r.outerRadius*p,0),r.radiusLength=(r.outerRadius-r.innerRadius)/(a._getVisibleDatasetWeightTotal()||1),r.offsetX=h*r.outerRadius,r.offsetY=c*r.outerRadius,f.total=a.calculateTotal(),a.outerRadius=r.outerRadius-r.radiusLength*a._getRingWeightOffset(a.index),a.innerRadius=Math.max(a.outerRadius-r.radiusLength*v,0),n=0,o=g.length;n<o;++n)a.updateElement(g[n],n,e)},updateElement:function(e,t,i){var n=this,o=n.chart,a=o.chartArea,r=o.options,s=r.animation,l=(a.left+a.right)/2,d=(a.top+a.bottom)/2,u=r.rotation,h=r.rotation,c=n.getDataset(),f=i&&s.animateRotate?0:e.hidden?0:n.calculateCircumference(c.data[t])*(r.circumference/Jt),g=i&&s.animateScale?0:n.innerRadius,p=i&&s.animateScale?0:n.outerRadius,m=e._options||{};pt.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+o.offsetX,y:d+o.offsetY,startAngle:u,endAngle:h,circumference:f,outerRadius:p,innerRadius:g,label:pt.valueAtIndexOrDefault(c.label,t,o.data.labels[t])}});var v=e._model;i&&s.animateRotate||(v.startAngle=0===t?r.rotation:n.getMeta().data[t-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),i=this.getMeta(),n=0;return pt.each(i.data,function(i,o){e=t.data[o],isNaN(e)||i.hidden||(n+=Math.abs(e))}),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?Jt*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,i,n,o,a,r,s,l,d=0,u=this.chart;if(!e)for(t=0,i=u.data.datasets.length;t<i;++t)if(u.isDatasetVisible(t)){e=(n=u.getDatasetMeta(t)).data,t!==this.index&&(a=n.controller);break}if(!e)return 0;for(t=0,i=e.length;t<i;++t)o=e[t],a?(a._configure(),r=a._resolveDataElementOptions(o,t)):r=o._options,"inner"!==r.borderAlign&&(s=r.borderWidth,d=(l=r.hoverBorderWidth)>(d=s>d?s:d)?l:d);return d},setHoverStyle:function(e){var t=e._model,i=e._options,n=pt.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Xt(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Xt(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Xt(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t},_getRingWeight:function(e){return Math.max(Xt(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ut._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),ut._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ii=Gt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),ni=pt.valueOrDefault,oi=pt.options.resolve,ai=pt.canvas._isPointInArea;ut._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ri=Dt.extend({datasetElementType:zt.Line,dataElementType:zt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,i,n=this,o=n.getMeta(),a=o.dataset,r=o.data||[],s=n.chart.options,l=n._config,d=n._showLine=ni(l.showLine,s.showLines);for(n._xScale=n.getScaleForId(o.xAxisID),n._yScale=n.getScaleForId(o.yAxisID),d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=n._yScale,a._datasetIndex=n.index,a._children=r,a._model=n._resolveDatasetElementOptions(a),a.pivot()),t=0,i=r.length;t<i;++t)n.updateElement(r[t],t,e);for(d&&0!==a._model.tension&&n.updateBezierControlPoints(),t=0,i=r.length;t<i;++t)r[t].pivot()},updateElement:function(e,t,i){var n,o,a=this,r=a.getMeta(),s=e.custom||{},l=a.getDataset(),d=a.index,u=l.data[t],h=a._xScale,c=a._yScale,f=r.dataset._model,g=a._resolveDataElementOptions(e,t);n=h.getPixelForValue("object"==typeof u?u:NaN,t,d),o=i?c.getBasePixel():a.calculatePointY(u,t,d),e._xScale=h,e._yScale=c,e._options=g,e._datasetIndex=d,e._index=t,e._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:ni(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,i=t._config,n=e.custom||{},o=t.chart.options,a=o.elements.line,r=Dt.prototype._resolveDatasetElementOptions.apply(t,arguments);return r.spanGaps=ni(i.spanGaps,o.spanGaps),r.tension=ni(i.lineTension,a.tension),r.steppedLine=oi([n.steppedLine,i.steppedLine,a.stepped]),r.clip=S(ni(i.clip,C(t._xScale,t._yScale,r.borderWidth))),r},calculatePointY:function(e,t,i){var n,o,a,r,s,l,d,u=this.chart,h=this._yScale,c=0,f=0;if(h.options.stacked){for(s=+h.getRightValue(e),d=(l=u._getSortedVisibleDatasetMetas()).length,n=0;n<d&&(a=l[n]).index!==i;++n)o=u.data.datasets[a.index],"line"===a.type&&a.yAxisID===h.id&&((r=+h.getRightValue(o.data[t]))<0?f+=r||0:c+=r||0);return s<0?h.getPixelForValue(f+s):h.getPixelForValue(c+s)}return h.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,i){return Math.max(Math.min(e,i),t)}var t,i,n,o,a=this.chart,r=this.getMeta(),s=r.dataset._model,l=a.chartArea,d=r.data||[];if(s.spanGaps&&(d=d.filter(function(e){return!e._model.skip})),"monotone"===s.cubicInterpolationMode)pt.splineCurveMonotone(d);else for(t=0,i=d.length;t<i;++t)n=d[t]._model,o=pt.splineCurve(pt.previousItem(d,t)._model,n,pt.nextItem(d,t)._model,s.tension),n.controlPointPreviousX=o.previous.x,n.controlPointPreviousY=o.previous.y,n.controlPointNextX=o.next.x,n.controlPointNextY=o.next.y;if(a.options.elements.line.capBezierPoints)for(t=0,i=d.length;t<i;++t)n=d[t]._model,ai(n,l)&&(t>0&&ai(d[t-1]._model,l)&&(n.controlPointPreviousX=e(n.controlPointPreviousX,l.left,l.right),n.controlPointPreviousY=e(n.controlPointPreviousY,l.top,l.bottom)),t<d.length-1&&ai(d[t+1]._model,l)&&(n.controlPointNextX=e(n.controlPointNextX,l.left,l.right),n.controlPointNextY=e(n.controlPointNextY,l.top,l.bottom)))},draw:function(){var e,t=this.chart,i=this.getMeta(),n=i.data||[],o=t.chartArea,a=t.canvas,r=0,s=n.length;for(this._showLine&&(e=i.dataset._model.clip,pt.canvas.clipArea(t.ctx,{left:!1===e.left?0:o.left-e.left,right:!1===e.right?a.width:o.right+e.right,top:!1===e.top?0:o.top-e.top,bottom:!1===e.bottom?a.height:o.bottom+e.bottom}),i.dataset.draw(),pt.canvas.unclipArea(t.ctx));r<s;++r)n[r].draw(o)},setHoverStyle:function(e){var t=e._model,i=e._options,n=pt.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ni(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=ni(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=ni(i.hoverBorderWidth,i.borderWidth),t.radius=ni(i.hoverRadius,i.radius)}}),si=pt.options.resolve;ut._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,i,n,o=document.createElement("ul"),a=e.data,r=a.datasets,s=a.labels;if(o.setAttribute("class",e.id+"-legend"),r.length)for(t=0,i=r[0].data.length;t<i;++t)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[t],s[t]&&n.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data
;return t.labels.length&&t.datasets.length?t.labels.map(function(i,n){var o=e.getDatasetMeta(0),a=o.controller.getStyle(n);return{text:i,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(t.datasets[0].data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(e,t){var i,n,o,a=t.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(o=r.getDatasetMeta(i)).data[a].hidden=!o.data[a].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var li=Dt.extend({dataElementType:zt.Arc,linkScales:pt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,i,n,o=this,a=o.getDataset(),r=o.getMeta(),s=o.chart.options.startAngle||0,l=o._starts=[],d=o._angles=[],u=r.data;for(o._updateRadius(),r.count=o.countVisibleElements(),t=0,i=a.data.length;t<i;t++)l[t]=s,n=o._computeAngle(t),d[t]=n,s+=n;for(t=0,i=u.length;t<i;++t)u[t]._options=o._resolveDataElementOptions(u[t],t),o.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,i=t.chartArea,n=t.options,o=Math.min(i.right-i.left,i.bottom-i.top);t.outerRadius=Math.max(o/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,i){var n=this,o=n.chart,a=n.getDataset(),r=o.options,s=r.animation,l=o.scale,d=o.data.labels,u=l.xCenter,h=l.yCenter,c=r.startAngle,f=e.hidden?0:l.getDistanceFromCenterForValue(a.data[t]),g=n._starts[t],p=g+(e.hidden?0:n._angles[t]),m=s.animateScale?0:l.getDistanceFromCenterForValue(a.data[t]),v=e._options||{};pt.extend(e,{_datasetIndex:n.index,_index:t,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?m:f,startAngle:i&&s.animateRotate?c:g,endAngle:i&&s.animateRotate?c:p,label:pt.valueAtIndexOrDefault(d,t,d[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),i=0;return pt.each(t.data,function(t,n){isNaN(e.data[n])||t.hidden||i++}),i},setHoverStyle:function(e){var t=e._model,i=e._options,n=pt.getHoverColor,o=pt.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=o(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(e){var t=this,i=this.getMeta().count,n=t.getDataset(),o=t.getMeta();if(isNaN(n.data[e])||o.data[e].hidden)return 0;var a={chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index};return si([t.chart.options.elements.arc.angle,2*Math.PI/i],a,e)}});ut._set("pie",pt.clone(ut.doughnut)),ut._set("pie",{cutoutPercentage:0});var di=ti,ui=pt.valueOrDefault;ut._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var hi=Dt.extend({datasetElementType:zt.Line,dataElementType:zt.Point,linkScales:pt.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,i,n=this,o=n.getMeta(),a=o.dataset,r=o.data||[],s=n.chart.scale,l=n._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=s,a._datasetIndex=n.index,a._children=r,a._loop=!0,a._model=n._resolveDatasetElementOptions(a),a.pivot(),t=0,i=r.length;t<i;++t)n.updateElement(r[t],t,e);for(n.updateBezierControlPoints(),t=0,i=r.length;t<i;++t)r[t].pivot()},updateElement:function(e,t,i){var n=this,o=e.custom||{},a=n.getDataset(),r=n.chart.scale,s=r.getPointPositionForValue(t,a.data[t]),l=n._resolveDataElementOptions(e,t),d=n.getMeta().dataset._model,u=i?r.xCenter:s.x,h=i?r.yCenter:s.y;e._scale=r,e._options=l,e._datasetIndex=n.index,e._index=t,e._model={x:u,y:h,skip:o.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:ui(o.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,i=e.chart.options,n=Dt.prototype._resolveDatasetElementOptions.apply(e,arguments);return n.spanGaps=ui(t.spanGaps,i.spanGaps),n.tension=ui(t.lineTension,i.elements.line.tension),n},updateBezierControlPoints:function(){function e(e,t,i){return Math.max(Math.min(e,i),t)}var t,i,n,o,a=this.getMeta(),r=this.chart.chartArea,s=a.data||[];for(a.dataset._model.spanGaps&&(s=s.filter(function(e){return!e._model.skip})),t=0,i=s.length;t<i;++t)n=s[t]._model,o=pt.splineCurve(pt.previousItem(s,t,!0)._model,n,pt.nextItem(s,t,!0)._model,n.tension),n.controlPointPreviousX=e(o.previous.x,r.left,r.right),n.controlPointPreviousY=e(o.previous.y,r.top,r.bottom),n.controlPointNextX=e(o.next.x,r.left,r.right),n.controlPointNextY=e(o.next.y,r.top,r.bottom)},setHoverStyle:function(e){var t=e._model,i=e._options,n=pt.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ui(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=ui(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=ui(i.hoverBorderWidth,i.borderWidth),t.radius=ui(i.hoverRadius,i.radius)}});ut._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),ut._set("global",{datasets:{scatter:{showLine:!1}}});var ci={bar:Gt,bubble:Kt,doughnut:ti,horizontalBar:ii,line:ri,polarArea:li,pie:di,radar:hi,scatter:ri},fi={modes:{single:function(e,t){var i=M(t,e),n=[];return T(e,function(e){if(e.inRange(i.x,i.y))return n.push(e),n}),n.slice(0,1)},label:I,index:I,dataset:function(e,t,i){var n=M(t,e);i.axis=i.axis||"xy";var o=P(i.axis),a=i.intersect?A(e,n):D(e,n,!1,o);return a.length>0&&(a=e.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(e,t){return I(e,t,{intersect:!1})},point:function(e,t){return A(e,M(t,e))},nearest:function(e,t,i){var n=M(t,e);i.axis=i.axis||"xy";var o=P(i.axis);return D(e,n,i.intersect,o)},x:function(e,t,i){var n=M(t,e),o=[],a=!1;return T(e,function(e){e.inXRange(n.x)&&o.push(e),e.inRange(n.x,n.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o},y:function(e,t,i){var n=M(t,e),o=[],a=!1;return T(e,function(e){e.inYRange(n.y)&&o.push(e),e.inRange(n.x,n.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o}}},gi=pt.extend;ut._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var pi,mi={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure:function(e,t,i){for(var n,o=["fullWidth","position","weight"],a=o.length,r=0;r<a;++r)n=o[r],i.hasOwnProperty(n)&&(t[n]=i[n])},update:function(e,t,i){if(e){var n=e.options.layout||{},o=pt.options.toPadding(n.padding),a=t-o.width,r=i-o.height,s=function(e){var t=function(e){var t,i,n,o=[];for(t=0,i=(e||[]).length;t<i;++t)n=e[t],o.push({index:t,box:n,pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return o}(e),i=F($(t,"left"),!0),n=F($(t,"right")),o=F($(t,"top"),!0),a=F($(t,"bottom"));return{leftAndTop:i.concat(o),rightAndBottom:n.concat(a),chartArea:$(t,"chartArea"),vertical:i.concat(n),horizontal:o.concat(a)}}(e.boxes),l=s.vertical,d=s.horizontal,u=Object.freeze({outerWidth:t,outerHeight:i,padding:o,availableWidth:a,vBoxMaxWidth:a/2/l.length,hBoxMaxHeight:r/2}),h=gi({maxPadding:gi({},o),w:a,h:r,x:o.left,y:o.top},o);!function(e,t){var i,n,o;for(i=0,n=e.length;i<n;++i)(o=e[i]).width=o.horizontal?o.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,o.height=o.horizontal&&t.hBoxMaxHeight}(l.concat(d),u),R(l,h,u),R(d,h,u)&&R(l,h,u),function(e){function t(t){var n=Math.max(i[t]-e[t],0);return e[t]+=n,n}var i=e.maxPadding;e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}(h),E(s.leftAndTop,h,u),h.x+=h.w,h.y+=h.h,E(s.rightAndBottom,h,u),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h},pt.each(s.chartArea,function(t){var i=t.box;gi(i,e.chartArea),i.update(h.w,h.h)})}}},vi=(pi=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&pi.default||pi,bi="$chartjs",yi="chartjs-size-monitor",xi="chartjs-render-monitor",wi="chartjs-render-animation",ki=["animationstart","webkitAnimationStart"],_i={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ci=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0},Si={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function(e,t){var i=e[bi]||(e[bi]={});if(!i.containsStyles){i.containsStyles=!0,t="/* Chart.js */\n"+t;var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(t)),e.appendChild(n)}}(t.host?t:document.head,vi)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(this._ensureLoaded(e),function(e,t){var i=e.style,n=e.getAttribute("height"),o=e.getAttribute("width");if(e[bi]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===o||""===o){var a=V(e,"width");void 0!==a&&(e.width=a)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var r=V(e,"height");void 0!==a&&(e.height=r)}}(e,t),i):null},releaseContext:function(e){var t=e.canvas;if(t[bi]){var i=t[bi].initial;["height","width"].forEach(function(e){var n=i[e];pt.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)}),pt.each(i.style||{},function(e,i){t.style[i]=e}),t.width=t.width,delete t[bi]}},addEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var o=i[bi]||(i[bi]={});z(n,t,(o.proxies||(o.proxies={}))[e.id+"_"+t]=function(t){i(function(e,t){var i=_i[e.type]||e.type,n=pt.getRelativePosition(e,t);return j(i,t,n.x,n.y,e)}(t,e))})}else H(n,i,e)},removeEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var o=((i[bi]||{}).proxies||{})[e.id+"_"+t];o&&B(n,t,o)}else U(n)}};pt.addEvent=z,pt.removeEvent=B;var Mi=Si._enabled?Si:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Ti=pt.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Mi);ut._set("global",{plugins:{}});var Ai={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,i){var n,o,a,r,s,l=this.descriptors(e),d=l.length;for(n=0;n<d;++n)if("function"==typeof(s=(a=(o=l[n]).plugin)[t])&&((r=[e].concat(i||[])).push(o.options),!1===s.apply(a,r)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var i=[],n=[],o=e&&e.config||{},a=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach(function(e){if(-1===i.indexOf(e)){var t=e.id,o=a[t];!1!==o&&(!0===o&&(o=pt.clone(ut.global.plugins[t])),i.push(e),n.push({plugin:e,options:o||{}}))}}),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},Di={constructors:{},defaults:{},registerScaleType:function(e,t,i){this.constructors[e]=t,this.defaults[e]=pt.clone(i)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?pt.merge(Object.create(null),[ut.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=pt.extend(this.defaults[e],t))},addScalesToLayout:function(e){pt.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,mi.addBox(e,t)})}},Pi=pt.valueOrDefault,Ii=pt.rtl.getRtlAdapter;ut._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:pt.noop,title:function(e,t){var i="",n=t.labels,o=n?n.length:0;if(e.length>0){var a=e[0];a.label?i=a.label:a.xLabel?i=a.xLabel:o>0&&a.index<o&&(i=n[a.index])}return i},afterTitle:pt.noop,beforeBody:pt.noop,beforeLabel:pt.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i&&(i+=": "),pt.isNullOrUndef(e.value)?i+=e.yLabel:i+=e.value,i},labelColor:function(e,t){var i=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:pt.noop,afterBody:pt.noop,beforeFooter:pt.noop,footer:pt.noop,afterFooter:pt.noop}}});var $i={average:function(e){if(!e.length)return!1;var t,i,n=0,o=0,a=0;for(t=0,i=e.length;t<i;++t){var r=e[t];if(r&&r.hasValue()){var s=r.tooltipPosition();n+=s.x,o+=s.y,++a}}return{x:n/a,y:o/a}},nearest:function(e,t){var i,n,o,a=t.x,r=t.y,s=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){var l=e[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),u=pt.distanceBetweenPoints(t,d);u<s&&(s=u,o=l)}}if(o){var h=o.tooltipPosition();a=h.x,r=h.y}return{x:a,y:r}}},Fi=kt.extend({initialize:function(){this._model=Y(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,i=t.callbacks,n=i.beforeTitle.apply(e,arguments),o=i.title.apply(e,arguments),a=i.afterTitle.apply(e,arguments),r=[];return r=q(r,G(n)),r=q(r,G(o)),r=q(r,G(a))},getBeforeBody:function(){return K(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var i=this,n=i._options.callbacks,o=[];return pt.each(e,function(e){var a={before:[],lines:[],after:[]};q(a.before,G(n.beforeLabel.call(i,e,t))),q(a.lines,n.label.call(i,e,t)),q(a.after,G(n.afterLabel.call(i,e,t))),o.push(a)}),o},getAfterBody:function(){return K(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,i=t.beforeFooter.apply(e,arguments),n=t.footer.apply(e,arguments),o=t.afterFooter.apply(e,arguments),a=[];return a=q(a,G(i)),a=q(a,G(n)),a=q(a,G(o))},update:function(e){var t,i,n,o,a,r,s,l,d,u,h=this,c=h._options,f=h._model,g=h._model=Y(c),p=h._active,m=h._data,v={xAlign:f.xAlign,yAlign:f.yAlign},b={x:f.x,y:f.y},y={width:f.width,height:f.height},x={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var w=[],k=[];x=$i[c.position].call(h,p,h._eventPosition);var _=[];for(t=0,i=p.length;t<i;++t)_.push((n=p[t],o=void 0,a=void 0,r=void 0,s=void 0,l=void 0,d=void 0,u=void 0,o=n._xScale,a=n._yScale||n._scale,r=n._index,s=n._datasetIndex,l=n._chart.getDatasetMeta(s).controller,d=l._getIndexScale(),u=l._getValueScale(),{xLabel:o?o.getLabelForIndex(r,s):"",yLabel:a?a.getLabelForIndex(r,s):"",label:d?""+d.getLabelForIndex(r,s):"",value:u?""+u.getLabelForIndex(r,s):"",index:r,datasetIndex:s,x:n._model.x,y:n._model.y}));c.filter&&(_=_.filter(function(e){return c.filter(e,m)})),c.itemSort&&(_=_.sort(function(e,t){return c.itemSort(e,t,m)})),pt.each(_,function(e){w.push(c.callbacks.labelColor.call(h,e,h._chart)),k.push(c.callbacks.labelTextColor.call(h,e,h._chart))}),g.title=h.getTitle(_,m),g.beforeBody=h.getBeforeBody(_,m),g.body=h.getBody(_,m),g.afterBody=h.getAfterBody(_,m),g.footer=h.getFooter(_,m),g.x=x.x,g.y=x.y,g.caretPadding=c.caretPadding,g.labelColors=w,g.labelTextColors=k,g.dataPoints=_,y=function(e,t){var i=e._chart.ctx,n=2*t.yPadding,o=0,a=t.body,r=a.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);r+=t.beforeBody.length+t.afterBody.length;var s=t.title.length,l=t.footer.length,d=t.titleFontSize,u=t.bodyFontSize,h=t.footerFontSize;n+=s*d,n+=s?(s-1)*t.titleSpacing:0,n+=s?t.titleMarginBottom:0,n+=r*u,n+=r?(r-1)*t.bodySpacing:0,n+=l?t.footerMarginTop:0,n+=l*h,n+=l?(l-1)*t.footerSpacing:0;var c=0,f=function(e){o=Math.max(o,i.measureText(e).width+c)};return i.font=pt.fontString(d,t._titleFontStyle,t._titleFontFamily),pt.each(t.title,f),i.font=pt.fontString(u,t._bodyFontStyle,t._bodyFontFamily),pt.each(t.beforeBody.concat(t.afterBody),f),c=t.displayColors?u+2:0,pt.each(a,function(e){pt.each(e.before,f),pt.each(e.lines,f),pt.each(e.after,f)}),c=0,i.font=pt.fontString(h,t._footerFontStyle,t._footerFontFamily),pt.each(t.footer,f),{width:o+=2*t.xPadding,height:n}}(this,g),b=function(e,t,i,n){var o=e.x,a=e.y,r=e.caretSize,s=e.caretPadding,l=e.cornerRadius,d=i.xAlign,u=i.yAlign,h=r+s,c=l+s;return"right"===d?o-=t.width:"center"===d&&((o-=t.width/2)+t.width>n.width&&(o=n.width-t.width),o<0&&(o=0)),"top"===u?a+=h:a-="bottom"===u?t.height+h:t.height/2,"center"===u?"left"===d?o+=h:"right"===d&&(o-=h):"left"===d?o-=c:"right"===d&&(o+=c),{x:o,y:a}}(g,y,v=function(e,t){var i,n,o,a,r,s=e._model,l=e._chart,d=e._chart.chartArea,u="center",h="center";s.y<t.height?h="top":s.y>l.height-t.height&&(h="bottom");var c=(d.left+d.right)/2,f=(d.top+d.bottom)/2;"center"===h?(i=function(e){return e<=c},n=function(e){return e>c}):(i=function(e){return e<=t.width/2},n=function(e){return e>=l.width-t.width/2}),o=function(e){return e+t.width+s.caretSize+s.caretPadding>l.width},a=function(e){return e-t.width-s.caretSize-s.caretPadding<0},r=function(e){return e<=f?"top":"bottom"},i(s.x)?(u="left",o(s.x)&&(u="center",h=r(s.y))):n(s.x)&&(u="right",a(s.x)&&(u="center",h=r(s.y)));var g=e._options;return{xAlign:g.xAlign?g.xAlign:u,yAlign:g.yAlign?g.yAlign:h}}(this,y),h._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=b.x,g.y=b.y,g.width=y.width,g.height=y.height,g.caretX=x.x,g.caretY=x.y,h._model=g,e&&c.custom&&c.custom.call(h,g),h},drawCaret:function(e,t){var i=this._chart.ctx,n=this._view,o=this.getCaretPosition(e,t,n);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)},getCaretPosition:function(e,t,i){var n,o,a,r,s,l,d=i.caretSize,u=i.cornerRadius,h=i.xAlign,c=i.yAlign,f=e.x,g=e.y,p=t.width,m=t.height;if("center"===c)s=g+m/2,"left"===h?(o=(n=f)-d,a=n,r=s+d,l=s-d):(o=(n=f+p)+d,a=n,r=s-d,l=s+d);else if("left"===h?(n=(o=f+u+d)-d,a=o+d):"right"===h?(n=(o=f+p-u-d)-d,a=o+d):(n=(o=i.caretX)-d,a=o+d),"top"===c)s=(r=g)-d,l=r;else{s=(r=g+m)+d,l=r;var v=a;a=n,n=v}return{x1:n,x2:o,x3:a,y1:r,y2:s,y3:l}},drawTitle:function(e,t,i){var n,o,a,r=t.title,s=r.length;if(s){var l=Ii(t.rtl,t.x,t.width);for(e.x=Q(t,t._titleAlign),i.textAlign=l.textAlign(t._titleAlign),i.textBaseline="middle",n=t.titleFontSize,o=t.titleSpacing,i.fillStyle=t.titleFontColor,i.font=pt.fontString(n,t._titleFontStyle,t._titleFontFamily),a=0;a<s;++a)i.fillText(r[a],l.x(e.x),e.y+n/2),e.y+=n+o,a+1===s&&(e.y+=t.titleMarginBottom-o)}},drawBody:function(e,t,i){var n,o,a,r,s,l,d,u,h=t.bodyFontSize,c=t.bodySpacing,f=t._bodyAlign,g=t.body,p=t.displayColors,m=0,v=p?Q(t,"left"):0,b=Ii(t.rtl,t.x,t.width),y=function(t){i.fillText(t,b.x(e.x+m),e.y+h/2),e.y+=h+c},x=b.textAlign(f);for(i.textAlign=f,i.textBaseline="middle",i.font=pt.fontString(h,t._bodyFontStyle,t._bodyFontFamily),e.x=Q(t,x),i.fillStyle=t.bodyFontColor,pt.each(t.beforeBody,y),m=p&&"right"!==x?"center"===f?h/2+1:h+2:0,s=0,d=g.length;s<d;++s){for(n=g[s],o=t.labelTextColors[s],a=t.labelColors[s],i.fillStyle=o,pt.each(n.before,y),l=0,u=(r=n.lines).length;l<u;++l){if(p){var w=b.x(v);i.fillStyle=t.legendColorBackground,i.fillRect(b.leftForLtr(w,h),e.y,h,h),i.lineWidth=1,i.strokeStyle=a.borderColor,i.strokeRect(b.leftForLtr(w,h),e.y,h,h),i.fillStyle=a.backgroundColor,i.fillRect(b.leftForLtr(b.xPlus(w,1),h-2),e.y+1,h-2,h-2),i.fillStyle=o}y(r[l])}pt.each(n.after,y)}m=0,pt.each(t.afterBody,y),e.y-=c},drawFooter:function(e,t,i){var n,o,a=t.footer,r=a.length;if(r){var s=Ii(t.rtl,t.x,t.width);for(e.x=Q(t,t._footerAlign),e.y+=t.footerMarginTop,i.textAlign=s.textAlign(t._footerAlign),i.textBaseline="middle",n=t.footerFontSize,i.fillStyle=t.footerFontColor,i.font=pt.fontString(n,t._footerFontStyle,t._footerFontFamily),o=0;o<r;++o)i.fillText(a[o],s.x(e.x),e.y+n/2),e.y+=n+t.footerSpacing}},drawBackground:function(e,t,i,n){i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth;var o=t.xAlign,a=t.yAlign,r=e.x,s=e.y,l=n.width,d=n.height,u=t.cornerRadius;i.beginPath(),i.moveTo(r+u,s),"top"===a&&this.drawCaret(e,n),i.lineTo(r+l-u,s),i.quadraticCurveTo(r+l,s,r+l,s+u),"center"===a&&"right"===o&&this.drawCaret(e,n),i.lineTo(r+l,s+d-u),i.quadraticCurveTo(r+l,s+d,r+l-u,s+d),"bottom"===a&&this.drawCaret(e,n),i.lineTo(r+u,s+d),i.quadraticCurveTo(r,s+d,r,s+d-u),"center"===a&&"left"===o&&this.drawCaret(e,n),i.lineTo(r,s+u),i.quadraticCurveTo(r,s,r+u,s),i.closePath(),i.fill(),t.borderWidth>0&&i.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var i={width:t.width,height:t.height},n={x:t.x,y:t.y},o=Math.abs(t.opacity<.001)?0:t.opacity,a=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&a&&(e.save(),e.globalAlpha=o,this.drawBackground(n,t,e,i),n.y+=t.yPadding,pt.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),pt.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===e.type?i._active=[]:(i._active=i._chart.getElementsAtEventForMode(e,n.mode,n),n.reverse&&i._active.reverse()),(t=!pt.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:e.x,y:e.y},i.update(!0),i.pivot())),t}}),Oi=$i,Li=Fi;Li.positioners=Oi;var Ni=pt.valueOrDefault;ut._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Ri=function(e,t){return this.construct(e,t),this};pt.extend(Ri.prototype,{construct:function(e,t){var i=this;t=function(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Z(ut.global,ut[e.type],e.options||{}),e}(t);var n=Ti.acquireContext(e,t),o=n&&n.canvas,a=o&&o.height,r=o&&o.width;i.id=pt.uid(),i.ctx=n,i.canvas=o,i.config=t,i.width=r,i.height=a,i.aspectRatio=a?r/a:null,i.options=t.options,i._bufferedRender=!1,i._layers=[],i.chart=i,i.controller=i,Ri.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(e){i.config.data=e}}),n&&o?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Ai.notify(e,"beforeInit"),pt.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),Ai.notify(e,"afterInit"),e},clear:function(){return pt.canvas.clear(this),this},stop:function(){return St.cancelAnimation(this),this},resize:function(e){var t=this,i=t.options,n=t.canvas,o=i.maintainAspectRatio&&t.aspectRatio||null,a=Math.max(0,Math.floor(pt.getMaximumWidth(n))),r=Math.max(0,Math.floor(o?a/o:pt.getMaximumHeight(n)));if((t.width!==a||t.height!==r)&&(n.width=t.width=a,n.height=t.height=r,n.style.width=a+"px",n.style.height=r+"px",pt.retinaScale(t,i.devicePixelRatio),!e)){var s={width:a,height:r};Ai.notify(t,"resize",[s]),i.onResize&&i.onResize(t,s),t.stop(),t.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},i=e.scale;pt.each(t.xAxes,function(e,i){e.id||(e.id=ee(t.xAxes,"x-axis-",i))}),pt.each(t.yAxes,function(e,i){e.id||(e.id=ee(t.yAxes,"y-axis-",i))}),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,i=e.scales||{},n=[],o=Object.keys(i).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),pt.each(n,function(t){var n=t.options,a=n.id,r=Ni(n.type,t.dtype);te(n.position)!==te(t.dposition)&&(n.position=t.dposition),o[a]=!0;var s=null;if(a in i&&i[a].type===r)(s=i[a]).options=n,s.ctx=e.ctx,s.chart=e;else{var l=Di.getScaleConstructor(r);if(!l)return;s=new l({id:a,type:r,options:n,ctx:e.ctx,chart:e}),i[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)}),pt.each(o,function(e,t){e||delete i[t]}),e.scales=i,Di.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,i=this,n=[],o=i.data.datasets;for(e=0,t=o.length;e<t;e++){var a=o[e],r=i.getDatasetMeta(e),s=a.type||i.config.type;if(r.type&&r.type!==s&&(i.destroyDatasetMeta(e),r=i.getDatasetMeta(e)),r.type=s,r.order=a.order||0,r.index=e,r.controller)r.controller.updateIndex(e),r.controller.linkScales();else{var l=ci[r.type];if(void 0===l)throw new Error('"'+r.type+'" is not a chart type.');r.controller=new l(i,e),n.push(r.controller)}}return n},resetElements:function(){var e=this;pt.each(e.data.datasets,function(t,i){e.getDatasetMeta(i).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,i,n=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),J(n),Ai._invalidate(n),!1!==Ai.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var o=n.buildOrUpdateControllers();for(t=0,i=n.data.datasets.length;t<i;t++)n.getDatasetMeta(t).controller.buildOrUpdateElements();n.updateLayout(),n.options.animation&&n.options.animation.duration&&pt.each(o,function(e){e.reset()}),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],Ai.notify(n,"afterUpdate"),n._layers.sort(ie("z","_idx")),n._bufferedRender?n._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:n.render(e)}},updateLayout:function(){var e=this;!1!==Ai.notify(e,"beforeLayout")&&(mi.update(this,this.width,this.height),e._layers=[],pt.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(e,t){e._idx=t}),Ai.notify(e,"afterScaleUpdate"),Ai.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==Ai.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Ai.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),i={meta:t,index:e};!1!==Ai.notify(this,"beforeDatasetUpdate",[i])&&(t.controller._update(),Ai.notify(this,"afterDatasetUpdate",[i]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var i=t.options.animation,n=Ni(e.duration,i&&i.duration),o=e.lazy;if(!1!==Ai.notify(t,"beforeRender")){var a=function(e){Ai.notify(t,"afterRender"),pt.callback(i&&i.onComplete,[e],t)};if(i&&n){var r=new Ct({numSteps:n/16.66,easing:e.easing||i.easing,render:function(e,t){var i=pt.easing.effects[t.easing],n=t.currentStep,o=n/t.numSteps;e.draw(i(o),o,n)},onAnimationProgress:i.onProgress,onAnimationComplete:a});St.addAnimation(t,r,n,o)}else t.draw(),a(new Ct({numSteps:0,chart:t}));return t}},draw:function(e){var t,i,n=this;if(n.clear(),pt.isNullOrUndef(e)&&(e=1),n.transition(e),!(n.width<=0||n.height<=0)&&!1!==Ai.notify(n,"beforeDraw",[e])){for(i=n._layers,t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(n.chartArea);for(n.drawDatasets(e);t<i.length;++t)i[t].draw(n.chartArea);n._drawTooltip(e),Ai.notify(n,"afterDraw",[e])}},transition:function(e){for(var t=0,i=(this.data.datasets||[]).length;t<i;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,i,n=[];for(t=0,i=(this.data.datasets||[]).length;t<i;++t)e&&!this.isDatasetVisible(t)||n.push(this.getDatasetMeta(t));return n.sort(ie("order","index")),n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,i;if(!1!==Ai.notify(this,"beforeDatasetsDraw",[e])){for(i=(t=this._getSortedVisibleDatasetMetas()).length-1;i>=0;--i)this.drawDataset(t[i],e);Ai.notify(this,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var i={meta:e,index:e.index,easingValue:t};!1!==Ai.notify(this,"beforeDatasetDraw",[i])&&(e.controller.draw(t),Ai.notify(this,"afterDatasetDraw",[i]))},_drawTooltip:function(e){var t=this.tooltip,i={tooltip:t,easingValue:e};!1!==Ai.notify(this,"beforeTooltipDraw",[i])&&(t.draw(),Ai.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return fi.modes.single(this,e)},getElementsAtEvent:function(e){return fi.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return fi.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,i){var n=fi.modes[t];return"function"==typeof n?n(this,e,i):[]},getDatasetAtEvent:function(e){return fi.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var i=t._meta[this.id];return i||(i=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t.order||0,index:e}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,i=this.data.datasets.length;t<i;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},
generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,i=this.data.datasets[e],n=i._meta&&i._meta[t];n&&(n.controller.destroy(),delete i._meta[t])},destroy:function(){var e,t,i=this,n=i.canvas;for(i.stop(),e=0,t=i.data.datasets.length;e<t;++e)i.destroyDatasetMeta(e);n&&(i.unbindEvents(),pt.canvas.clear(i),Ti.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Ai.notify(i,"destroy"),delete Ri.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Li({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},i=function(){e.eventHandler.apply(e,arguments)};pt.each(e.options.events,function(n){Ti.addEventListener(e,n,i),t[n]=i}),e.options.responsive&&(i=function(){e.resize()},Ti.addEventListener(e,"resize",i),t.resize=i)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,pt.each(t,function(t,i){Ti.removeEventListener(e,i,t)}))},updateHoverStyle:function(e,t,i){var n,o,a,r=i?"set":"remove";for(o=0,a=e.length;o<a;++o)(n=e[o])&&this.getDatasetMeta(n._datasetIndex).controller[r+"HoverStyle"](n);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+r+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,i=t.tooltip;if(!1!==Ai.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);i&&(n=i._start?i.handleEvent(e):n|i.handleEvent(e)),Ai.notify(t,"afterEvent",[e]);var o=t._bufferedRequest;return o?t.render(o):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,i=this,n=i.options||{},o=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===e.type?i.active=[]:i.active=i.getElementsAtEventForMode(e,o.mode,o),pt.callback(n.onHover||n.hover.onHover,[e.native,i.active],i),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(i,e.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,o.mode,!1),i.active.length&&o.mode&&i.updateHoverStyle(i.active,o.mode,!0),t=!pt.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,t}}),Ri.instances={};var Ei=Ri;Ri.Controller=Ri,Ri.types={},pt.configMerge=Z,pt.scaleMerge=X,pt.extend(oe.prototype,{formats:ne,parse:ne,format:ne,add:ne,diff:ne,startOf:ne,endOf:ne,_create:function(e){return e}}),oe.override=function(e){pt.extend(oe.prototype,e)};var Vi={_date:oe},zi={formatters:{values:function(e){return pt.isArray(e)?e:""+e},linear:function(e,t,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var o=pt.log10(Math.abs(n)),a="";if(0!==e)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var r=pt.log10(Math.abs(e)),s=Math.floor(r)-Math.floor(o);s=Math.max(Math.min(s,20),0),a=e.toExponential(s)}else{var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),a=e.toFixed(l)}else a="0";return a},logarithmic:function(e,t,i){var n=e/Math.pow(10,Math.floor(pt.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===i.length-1?e.toExponential():""}}},Bi=pt.isArray,ji=pt.isNullOrUndef,Wi=pt.valueOrDefault,Hi=pt.valueAtIndexOrDefault;ut._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:zi.formatters.values,minor:{},major:{}}});var Ui=kt.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){pt.callback(this.options.beforeUpdate,[this])},update:function(e,t,i){var n,o,a,r,s,l=this,d=l.options.ticks,u=d.sampleSize;if(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=pt.extend({left:0,right:0,top:0,bottom:0},i),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),r=l.buildTicks()||[],(!(r=l.afterBuildTicks(r)||r)||!r.length)&&l.ticks)for(r=[],n=0,o=l.ticks.length;n<o;++n)r.push({value:l.ticks[n],major:!1});return l._ticks=r,s=u<r.length,a=l._convertTicksToLabels(s?function(e,t){for(var i=[],n=e.length/t,o=0,a=e.length;o<a;o+=n)i.push(e[Math.floor(o)]);return i}(r,u):r),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=d.display&&(d.autoSkip||"auto"===d.source)?l._autoSkip(r):r,s&&(a=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=a,l.afterUpdate(),l.minSize},_configure:function(){var e,t,i=this,n=i.options.ticks.reverse;i.isHorizontal()?(e=i.left,t=i.right):(e=i.top,t=i.bottom,n=!n),i._startPixel=e,i._endPixel=t,i._reversePixels=n,i._length=t-e},afterUpdate:function(){pt.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){pt.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){pt.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){pt.callback(this.options.beforeDataLimits,[this])},determineDataLimits:pt.noop,afterDataLimits:function(){pt.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){pt.callback(this.options.beforeBuildTicks,[this])},buildTicks:pt.noop,afterBuildTicks:function(e){var t=this;return Bi(e)&&e.length?pt.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=pt.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){pt.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){pt.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){pt.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,i,n,o,a,r,s=this,l=s.options,d=l.ticks,u=s.getTicks().length,h=d.minRotation||0,c=d.maxRotation,f=h;!s._isVisible()||!d.display||h>=c||u<=1||!s.isHorizontal()?s.labelRotation=h:(t=(e=s._getLabelSizes()).widest.width,i=e.highest.height-e.highest.offset,n=Math.min(s.maxWidth,s.chart.width-t),t+6>(o=l.offset?s.maxWidth/u:n/(u-1))&&(o=n/(u-(l.offset?.5:1)),a=s.maxHeight-se(l.gridLines)-d.padding-le(l.scaleLabel),r=Math.sqrt(t*t+i*i),f=pt.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/o,1)),Math.asin(Math.min(a/r,1))-Math.asin(i/r))),f=Math.max(h,Math.min(c,f))),s.labelRotation=f)},afterCalculateTickRotation:function(){pt.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){pt.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},i=e.chart,n=e.options,o=n.ticks,a=n.scaleLabel,r=n.gridLines,s=e._isVisible(),l="bottom"===n.position,d=e.isHorizontal();if(d?t.width=e.maxWidth:s&&(t.width=se(r)+le(a)),d?s&&(t.height=se(r)+le(a)):t.height=e.maxHeight,o.display&&s){var u=ue(o),h=e._getLabelSizes(),c=h.first,f=h.last,g=h.widest,p=h.highest,m=.4*u.minor.lineHeight,v=o.padding;if(d){var b=0!==e.labelRotation,y=pt.toRadians(e.labelRotation),x=Math.cos(y),w=Math.sin(y),k=w*g.width+x*(p.height-(b?p.offset:0))+(b?0:m);t.height=Math.min(e.maxHeight,t.height+k+v);var _,C,S=e.getPixelForTick(0)-e.left,M=e.right-e.getPixelForTick(e.getTicks().length-1);b?(_=l?x*c.width+w*c.offset:w*(c.height-c.offset),C=l?w*(f.height-f.offset):x*f.width+w*f.offset):(_=c.width/2,C=f.width/2),e.paddingLeft=Math.max((_-S)*e.width/(e.width-S),0)+3,e.paddingRight=Math.max((C-M)*e.width/(e.width-M),0)+3}else{var T=o.mirror?0:g.width+v+m;t.width=Math.min(e.maxWidth,t.width+T),e.paddingTop=c.height/2,e.paddingBottom=f.height/2}}e.handleMargins(),d?(e.width=e._length=i.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=i.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){pt.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ji(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,i,n,o=this;for(o.ticks=e.map(function(e){return e.value}),o.beforeTickToLabelConversion(),t=o.convertTicksToLabels(e)||o.ticks,o.afterTickToLabelConversion(),i=0,n=e.length;i<n;++i)e[i].label=t[i];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=re(e.ctx,ue(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,i,n,o;return Bi(e)?(t=+this.getRightValue(e[0]),i=+this.getRightValue(e[1]),n=Math.min(t,i),o=Math.max(t,i)):(t=void 0,i=e=+this.getRightValue(e),n=e,o=e),{min:n,max:o,start:t,end:i}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:pt.noop,getPixelForValue:pt.noop,getValueForPixel:pt.noop,getPixelForTick:function(e){var t=this.options.offset,i=this._ticks.length,n=1/Math.max(i-(t?0:1),1);return e<0||e>i-1?null:this.getPixelForDecimal(e*n+(t?n/2:0))},getPixelForDecimal:function(e){return this._reversePixels&&(e=1-e),this._startPixel+e*this._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,i,n,o,a=this.options.ticks,r=this._length,s=a.maxTicksLimit||r/this._tickSize()+1,l=a.major.enabled?function(e){var t,i,n=[];for(t=0,i=e.length;t<i;t++)e[t].major&&n.push(t);return n}(e):[],d=l.length,u=l[0],h=l[d-1];if(d>s)return function(e,t,i){var n,o,a=0,r=t[0];for(i=Math.ceil(i),n=0;n<e.length;n++)o=e[n],n===r?(o._index=n,r=t[++a*i]):delete o.label}(e,l,d/s),he(e);if(n=function(e,t,i,n){var o,a,r,s,l=function(e){var t,i,n=e.length;if(n<2)return!1;for(i=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==i)return!1;return i}(e),d=(t.length-1)/n;if(!l)return Math.max(d,1);for(r=0,s=(o=pt.math._factorize(l)).length-1;r<s;r++)if((a=o[r])>d)return a;return Math.max(d,1)}(l,e,0,s),d>0){for(t=0,i=d-1;t<i;t++)ce(e,n,l[t],l[t+1]);return o=d>1?(h-u)/(d-1):null,ce(e,n,pt.isNullOrUndef(o)?0:u-o,u),ce(e,n,h,pt.isNullOrUndef(o)?e.length:h+o),he(e)}return ce(e,n),he(e)},_tickSize:function(){var e=this.options.ticks,t=pt.toRadians(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),o=this._getLabelSizes(),a=e.autoSkipPadding||0,r=o?o.widest.width+a:0,s=o?o.highest.height+a:0;return this.isHorizontal()?s*i>r*n?r/i:s/n:s*n<r*i?s/i:r/n},_isVisible:function(){var e,t,i,n=this.chart,o=this.options.display;if("auto"!==o)return!!o;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&((i=n.getDatasetMeta(e)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(e){var t,i,n,o,a,r,s,l,d,u,h,c,f,g,p,m,v,b=this,y=b.chart,x=b.options,w=x.gridLines,k=x.position,_=w.offsetGridLines,C=b.isHorizontal(),S=b._ticksToDraw,M=S.length+(_?1:0),T=se(w),A=[],D=w.drawBorder?Hi(w.lineWidth,0,0):0,P=D/2,I=pt._alignPixel,$=function(e){return I(y,e,D)};for("top"===k?(t=$(b.bottom),s=b.bottom-T,d=t-P,h=$(e.top)+P,f=e.bottom):"bottom"===k?(t=$(b.top),h=e.top,f=$(e.bottom)-P,s=t+P,d=b.top+T):"left"===k?(t=$(b.right),r=b.right-T,l=t-P,u=$(e.left)+P,c=e.right):(t=$(b.left),u=e.left,c=$(e.right)-P,r=t+P,l=b.left+T),i=0;i<M;++i)n=S[i]||{},ji(n.label)&&i<S.length||(i===b.zeroLineIndex&&x.offset===_?(g=w.zeroLineWidth,p=w.zeroLineColor,m=w.zeroLineBorderDash||[],v=w.zeroLineBorderDashOffset||0):(g=Hi(w.lineWidth,i,1),p=Hi(w.color,i,"rgba(0,0,0,0.1)"),m=w.borderDash||[],v=w.borderDashOffset||0),void 0!==(o=ae(b,n._index||i,_))&&(a=I(y,o,g),C?r=l=u=c=a:s=d=h=f=a,A.push({tx1:r,ty1:s,tx2:l,ty2:d,x1:u,y1:h,x2:c,y2:f,width:g,color:p,borderDash:m,borderDashOffset:v})));return A.ticksLength=M,A.borderValue=t,A},_computeLabelItems:function(){var e,t,i,n,o,a,r,s,l,d,u,h,c=this,f=c.options,g=f.ticks,p=f.position,m=g.mirror,v=c.isHorizontal(),b=c._ticksToDraw,y=ue(g),x=g.padding,w=se(f.gridLines),k=-pt.toRadians(c.labelRotation),_=[];for("top"===p?(a=c.bottom-w-x,r=k?"left":"center"):"bottom"===p?(a=c.top+w+x,r=k?"right":"center"):"left"===p?(o=c.right-(m?0:w)-x,r=m?"left":"right"):(o=c.left+(m?0:w)+x,r=m?"right":"left"),e=0,t=b.length;e<t;++e)n=(i=b[e]).label,ji(n)||(s=c.getPixelForTick(i._index||e)+g.labelOffset,d=(l=i.major?y.major:y.minor).lineHeight,u=Bi(n)?n.length:1,v?(o=s,h="top"===p?((k?1:.5)-u)*d:(k?0:.5)*d):(a=s,h=(1-u)*d/2),_.push({x:o,y:a,rotation:k,label:n,font:l,textOffset:h,textAlign:r}));return _},_drawGrid:function(e){var t=this,i=t.options.gridLines;if(i.display){var n,o,a,r,s,l=t.ctx,d=t.chart,u=pt._alignPixel,h=i.drawBorder?Hi(i.lineWidth,0,0):0,c=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(a=0,r=c.length;a<r;++a)n=(s=c[a]).width,o=s.color,n&&o&&(l.save(),l.lineWidth=n,l.strokeStyle=o,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),i.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),i.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(h){var f,g,p,m,v=h,b=Hi(i.lineWidth,c.ticksLength-1,1),y=c.borderValue;t.isHorizontal()?(f=u(d,t.left,v)-v/2,g=u(d,t.right,b)+b/2,p=m=y):(p=u(d,t.top,v)-v/2,m=u(d,t.bottom,b)+b/2,f=g=y),l.lineWidth=h,l.strokeStyle=Hi(i.color,0),l.beginPath(),l.moveTo(f,p),l.lineTo(g,m),l.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,i,n,o,a,r,s,l,d=e.ctx,u=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,n=u.length;t<n;++t){if(r=(a=u[t]).font,d.save(),d.translate(a.x,a.y),d.rotate(a.rotation),d.font=r.string,d.fillStyle=r.color,d.textBaseline="middle",d.textAlign=a.textAlign,s=a.label,l=a.textOffset,Bi(s))for(i=0,o=s.length;i<o;++i)d.fillText(""+s[i],0,l),l+=r.lineHeight;else d.fillText(s,0,l);d.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,i=e.options,n=i.scaleLabel;if(n.display){var o,a,r=Wi(n.fontColor,ut.global.defaultFontColor),s=pt.options._parseFont(n),l=pt.options.toPadding(n.padding),d=s.lineHeight/2,u=i.position,h=0;if(e.isHorizontal())o=e.left+e.width/2,a="bottom"===u?e.bottom-d-l.bottom:e.top+d+l.top;else{var c="left"===u;o=c?e.left+d+l.top:e.right-d-l.top,a=e.top+e.height/2,h=c?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(o,a),t.rotate(h),t.textAlign="center",t.textBaseline="middle",t.fillStyle=r,t.font=s.string,t.fillText(n.labelString,0,0),t.restore()}},draw:function(e){this._isVisible()&&(this._drawGrid(e),this._drawTitle(),this._drawLabels())},_layers:function(){var e=this,t=e.options,i=t.ticks&&t.ticks.z||0,n=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&i!==n&&e.draw===e._draw?[{z:n,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:i,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:i,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,i=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(n){return(!e||n.type===e)&&(i?n.xAxisID===t.id:n.yAxisID===t.id)})}});Ui.prototype._draw=Ui.prototype.draw;var qi=Ui,Gi=pt.isNullOrUndef,Yi=qi.extend({determineDataLimits:function(){var e,t=this,i=t._getLabels(),n=t.options.ticks,o=n.min,a=n.max,r=0,s=i.length-1;void 0!==o&&(e=i.indexOf(o))>=0&&(r=e),void 0!==a&&(e=i.indexOf(a))>=0&&(s=e),t.minIndex=r,t.maxIndex=s,t.min=i[r],t.max=i[s]},buildTicks:function(){var e=this._getLabels(),t=this.minIndex,i=this.maxIndex;this.ticks=0===t&&i===e.length-1?e:e.slice(t,i+1)},getLabelForIndex:function(e,t){var i=this.chart;return i.getDatasetMeta(t).controller._getValueScaleId()===this.id?this.getRightValue(i.data.datasets[t].data[e]):this._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,i=e.ticks;qi.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),i&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(i.length-(t?0:1),1))},getPixelForValue:function(e,t,i){var n,o,a,r=this;return Gi(t)||Gi(i)||(e=r.chart.data.datasets[i].data[t]),Gi(e)||(n=r.isHorizontal()?e.x:e.y),(void 0!==n||void 0!==e&&isNaN(t))&&(o=r._getLabels(),e=pt.valueOrDefault(n,e),t=-1!==(a=o.indexOf(e))?a:t,isNaN(t)&&(t=e)),r.getPixelForDecimal((t-r._startValue)/r._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange);return Math.min(Math.max(t,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Qi={position:"bottom"};Yi._defaults=Qi;var Ki=pt.noop,Xi=pt.isNullOrUndef,Zi=qi.extend({getRightValue:function(e){return"string"==typeof e?+e:qi.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var i=pt.sign(e.min),n=pt.sign(e.max);i<0&&n<0?e.max=0:i>0&&n>0&&(e.min=0)}var o=void 0!==t.min||void 0!==t.suggestedMin,a=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),o!==a&&e.min>=e.max&&(o?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,i=t.stepSize,n=t.maxTicksLimit;return i?e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(e=this._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Ki,buildTicks:function(){var e=this,t=e.options.ticks,i=e.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:t.min,max:t.max,precision:t.precision,stepSize:pt.valueOrDefault(t.fixedStepSize,t.stepSize)},o=e.ticks=function(e,t){var i,n,o,a,r=[],s=e.stepSize,l=s||1,d=e.maxTicks-1,u=e.min,h=e.max,c=e.precision,f=t.min,g=t.max,p=pt.niceNum((g-f)/d/l)*l;if(p<1e-14&&Xi(u)&&Xi(h))return[f,g];(a=Math.ceil(g/p)-Math.floor(f/p))>d&&(p=pt.niceNum(a*p/d/l)*l),s||Xi(c)?i=Math.pow(10,pt._decimalPlaces(p)):(i=Math.pow(10,c),p=Math.ceil(p*i)/i),n=Math.floor(f/p)*p,o=Math.ceil(g/p)*p,s&&(!Xi(u)&&pt.almostWhole(u/p,p/1e3)&&(n=u),!Xi(h)&&pt.almostWhole(h/p,p/1e3)&&(o=h)),a=(o-n)/p,a=pt.almostEquals(a,Math.round(a),p/1e3)?Math.round(a):Math.ceil(a),n=Math.round(n*i)/i,o=Math.round(o*i)/i,r.push(Xi(u)?n:u);for(var m=1;m<a;++m)r.push(Math.round((n+m*p)*i)/i);return r.push(Xi(h)?o:h),r}(n,e);e.handleDirectionalChanges(),e.max=pt.max(o),e.min=pt.min(o),t.reverse?(o.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),qi.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,i=t.getTicks(),n=t.min,o=t.max;qi.prototype._configure.call(t),t.options.offset&&i.length&&(n-=e=(o-n)/Math.max(i.length-1,1)/2,o+=e),t._startValue=n,t._endValue=o,t._valueRange=o-n}}),Ji={position:"left",ticks:{callback:zi.formatters.linear}},en=Zi.extend({determineDataLimits:function(){var e,t,i,n,o=this,a=o.options,r=o.chart.data.datasets,s=o._getMatchingVisibleMetas(),l=a.stacked,d={},u=s.length;if(o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,void 0===l)for(e=0;!l&&e<u;++e)l=void 0!==(t=s[e]).stack;for(e=0;e<u;++e)i=r[(t=s[e]).index].data,l?fe(o,d,t,i):ge(o,t,i);pt.each(d,function(e){n=e.pos.concat(e.neg),o.min=Math.min(o.min,pt.min(n)),o.max=Math.max(o.max,pt.max(n))}),o.min=pt.isFinite(o.min)&&!isNaN(o.min)?o.min:0,o.max=pt.isFinite(o.max)&&!isNaN(o.max)?o.max:1,o.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=pt.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){return this.getPixelForDecimal((+this.getRightValue(e)-this._startValue)/this._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),tn=Ji;en._defaults=tn;var nn=pt.valueOrDefault,on=pt.math.log10,an={position:"left",ticks:{callback:zi.formatters.logarithmic}},rn=qi.extend({determineDataLimits:function(){function e(e){return h?e.xAxisID===s.id:e.yAxisID===s.id}var t,i,n,o,a,r,s=this,l=s.options,d=s.chart,u=d.data.datasets,h=s.isHorizontal();s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,s.minNotZero=Number.POSITIVE_INFINITY;var c=l.stacked;if(void 0===c)for(t=0;t<u.length;t++)if(i=d.getDatasetMeta(t),d.isDatasetVisible(t)&&e(i)&&void 0!==i.stack){c=!0;break}if(l.stacked||c){var f={};for(t=0;t<u.length;t++){var g=[(i=d.getDatasetMeta(t)).type,void 0===l.stacked&&void 0===i.stack?t:"",i.stack].join(".");if(d.isDatasetVisible(t)&&e(i))for(void 0===f[g]&&(f[g]=[]),a=0,r=(o=u[t].data).length;a<r;a++){var p=f[g];n=s._parseValue(o[a]),isNaN(n.min)||isNaN(n.max)||i.data[a].hidden||n.min<0||n.max<0||(p[a]=p[a]||0,p[a]+=n.max)}}pt.each(f,function(e){if(e.length>0){var t=pt.min(e),i=pt.max(e);s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)}})}else for(t=0;t<u.length;t++)if(i=d.getDatasetMeta(t),d.isDatasetVisible(t)&&e(i))for(a=0,r=(o=u[t].data).length;a<r;a++)n=s._parseValue(o[a]),isNaN(n.min)||isNaN(n.max)||i.data[a].hidden||n.min<0||n.max<0||(s.min=Math.min(n.min,s.min),s.max=Math.max(n.max,s.max),0!==n.min&&(s.minNotZero=Math.min(n.min,s.minNotZero)));s.min=pt.isFinite(s.min)?s.min:null,s.max=pt.isFinite(s.max)?s.max:null,s.minNotZero=pt.isFinite(s.minNotZero)?s.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=pe(t.min,e.min),e.max=pe(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(on(e.min))-1),e.max=Math.pow(10,Math.floor(on(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(on(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(on(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(on(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,i=!e.isHorizontal(),n={min:pe(t.min),max:pe(t.max)},o=e.ticks=function(e,t){var i,n,o=[],a=nn(e.min,Math.pow(10,Math.floor(on(t.min)))),r=Math.floor(on(t.max)),s=Math.ceil(t.max/Math.pow(10,r));0===a?(i=Math.floor(on(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,i)),o.push(a),a=n*Math.pow(10,i)):(i=Math.floor(on(a)),n=Math.floor(a/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{o.push(a),10==++n&&(n=1,l=++i>=0?1:l),a=Math.round(n*Math.pow(10,i)*l)/l}while(i<r||i===r&&n<s);var d=nn(e.max,a);return o.push(d),o}(n,e);e.max=pt.max(o),e.min=pt.min(o),t.reverse?(i=!i,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),i&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),qi.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(on(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,i=0;qi.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),i=nn(e.options.ticks.fontSize,ut.global.defaultFontSize)/e._length),e._startValue=on(t),e._valueOffset=i,e._valueRange=(on(e.max)-on(t))/(1-i)},getPixelForValue:function(e){var t=this,i=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(i=(on(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(i)},getValueForPixel:function(e){var t=this,i=t.getDecimalForPixel(e);return 0===i&&0===t.min?0:Math.pow(10,t._startValue+(i-t._valueOffset)*t._valueRange)}}),sn=an;rn._defaults=sn;var ln=pt.valueOrDefault,dn=pt.valueAtIndexOrDefault,un=pt.options.resolve,hn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:zi.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}},cn=Zi.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=me(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;pt.each(t.data.datasets,function(o,a){if(t.isDatasetVisible(a)){var r=t.getDatasetMeta(a);pt.each(o.data,function(t,o){var a=+e.getRightValue(t);isNaN(a)||r.data[o].hidden||(i=Math.min(a,i),n=Math.max(a,n))})}}),e.min=i===Number.POSITIVE_INFINITY?0:i,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/me(this.options))},convertTicksToLabels:function(){var e=this;Zi.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=pt.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,i,n,o=pt.options._parseFont(e.options.pointLabels),a={l:0,r:e.width,t:0,b:e.height-e.paddingTop},r={};e.ctx.font=o.string,e._pointLabelSizes=[];var s,l,d,u=e.chart.data.labels.length;for(t=0;t<u;t++){n=e.getPointPosition(t,e.drawingArea+5),s=e.ctx,l=o.lineHeight,d=e.pointLabels[t],i=pt.isArray(d)?{w:pt.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},e._pointLabelSizes[t]=i;var h=e.getIndexAngle(t),c=pt.toDegrees(h)%360,f=ve(c,n.x,i.w,0,180),g=ve(c,n.y,i.h,90,270);f.start<a.l&&(a.l=f.start,r.l=h),f.end>a.r&&(a.r=f.end,r.r=h),g.start<a.t&&(a.t=g.start,r.t=h),g.end>a.b&&(a.b=g.end,r.b=h)}e.setReductions(e.drawingArea,a,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,i){var n=this,o=t.l/Math.sin(i.l),a=Math.max(t.r-n.width,0)/Math.sin(i.r),r=-t.t/Math.cos(i.t),s=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=we(o),a=we(a),r=we(r),s=we(s),n.drawingArea=Math.min(Math.floor(e-(o+a)/2),Math.floor(e-(r+s)/2)),n.setCenterPoint(o,a,r,s)},setCenterPoint:function(e,t,i,n){var o=this,a=o.width-t-o.drawingArea,r=e+o.drawingArea,s=i+o.drawingArea,l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((r+a)/2+o.left),o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(e){var t=this.chart,i=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(i<0?i+360:i)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(pt.isNullOrUndef(e))return NaN;var i=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*i:(e-t.min)*i},getPointPosition:function(e,t){var i=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this.min,i=this.max;return this.getPointPositionForValue(e||0,this.beginAtZero?0:t<0&&i<0?i:t>0&&i>0?t:0)},_drawGrid:function(){var e,t,i,n=this,o=n.ctx,a=n.options,r=a.gridLines,s=a.angleLines,l=ln(s.lineWidth,r.lineWidth),d=ln(s.color,r.color);if(a.pointLabels.display&&function(e){var t=e.ctx,i=e.options,n=i.pointLabels,o=me(i),a=e.getDistanceFromCenterForValue(i.ticks.reverse?e.min:e.max),r=pt.options._parseFont(n);t.save(),t.font=r.string,t.textBaseline="middle";for(var s=e.chart.data.labels.length-1;s>=0;s--){var l=0===s?o/2:0,d=e.getPointPosition(s,a+l+5),u=dn(n.fontColor,s,ut.global.defaultFontColor);t.fillStyle=u;var h=e.getIndexAngle(s),c=pt.toDegrees(h);t.textAlign=be(c),xe(c,e._pointLabelSizes[s],d),ye(t,e.pointLabels[s],d,r.lineHeight)}t.restore()}(n),r.display&&pt.each(n.ticks,function(e,i){0!==i&&(t=n.getDistanceFromCenterForValue(n.ticksAsNumbers[i]),function(e,t,i,n){var o,a=e.ctx,r=t.circular,s=e.chart.data.labels.length,l=dn(t.color,n-1),d=dn(t.lineWidth,n-1);if((r||s)&&l&&d){if(a.save(),a.strokeStyle=l,a.lineWidth=d,a.setLineDash&&(a.setLineDash(t.borderDash||[]),a.lineDashOffset=t.borderDashOffset||0),a.beginPath(),r)a.arc(e.xCenter,e.yCenter,i,0,2*Math.PI);else{o=e.getPointPosition(0,i),a.moveTo(o.x,o.y);for(var u=1;u<s;u++)o=e.getPointPosition(u,i),a.lineTo(o.x,o.y)}a.closePath(),a.stroke(),a.restore()}}(n,r,t,i))}),s.display&&l&&d){for(o.save(),o.lineWidth=l,o.strokeStyle=d,o.setLineDash&&(o.setLineDash(un([s.borderDash,r.borderDash,[]])),o.lineDashOffset=un([s.borderDashOffset,r.borderDashOffset,0])),e=n.chart.data.labels.length-1;e>=0;e--)t=n.getDistanceFromCenterForValue(a.ticks.reverse?n.min:n.max),i=n.getPointPosition(e,t),o.beginPath(),o.moveTo(n.xCenter,n.yCenter),o.lineTo(i.x,i.y),o.stroke();o.restore()}},_drawLabels:function(){var e=this,t=e.ctx,i=e.options.ticks;if(i.display){var n,o,a=e.getIndexAngle(0),r=pt.options._parseFont(i),s=ln(i.fontColor,ut.global.defaultFontColor);t.save(),t.font=r.string,t.translate(e.xCenter,e.yCenter),t.rotate(a),t.textAlign="center",t.textBaseline="middle",pt.each(e.ticks,function(a,l){(0!==l||i.reverse)&&(n=e.getDistanceFromCenterForValue(e.ticksAsNumbers[l]),i.showLabelBackdrop&&(o=t.measureText(a).width,t.fillStyle=i.backdropColor,t.fillRect(-o/2-i.backdropPaddingX,-n-r.size/2-i.backdropPaddingY,o+2*i.backdropPaddingX,r.size+2*i.backdropPaddingY)),t.fillStyle=s,t.fillText(a,0,-n))}),t.restore()}},_drawTitle:pt.noop}),fn=hn;cn._defaults=fn;var gn=pt._deprecated,pn=pt.options.resolve,mn=pt.valueOrDefault,vn=Number.MIN_SAFE_INTEGER||-9007199254740991,bn=Number.MAX_SAFE_INTEGER||9007199254740991,yn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,
size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xn=Object.keys(yn),wn=qi.extend({initialize:function(){this.mergeTicksOptions(),qi.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,i=t.time||(t.time={}),n=e._adapter=new Vi._date(t.adapters.date);return gn("time scale",i.format,"time.format","time.parser"),gn("time scale",i.min,"time.min","ticks.min"),gn("time scale",i.max,"time.max","ticks.max"),pt.mergeIf(i.displayFormats,n.formats()),qi.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),qi.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,i,n,o,a,r,s=this,l=s.chart,d=s._adapter,u=s.options,h=u.time.unit||"day",c=bn,f=vn,g=[],p=[],m=[],v=s._getLabels();for(e=0,i=v.length;e<i;++e)m.push(Te(s,v[e]));for(e=0,i=(l.data.datasets||[]).length;e<i;++e)if(l.isDatasetVisible(e))if(o=l.data.datasets[e].data,pt.isObject(o[0]))for(p[e]=[],t=0,n=o.length;t<n;++t)a=Te(s,o[t]),g.push(a),p[e][t]=a;else p[e]=m.slice(0),r||(g=g.concat(m),r=!0);else p[e]=[];m.length&&(c=Math.min(c,m[0]),f=Math.max(f,m[m.length-1])),g.length&&(g=i>1?function(e){var t,i,n,o={},a=[];for(t=0,i=e.length;t<i;++t)o[n=e[t]]||(o[n]=!0,a.push(n));return a}(g).sort(ke):g.sort(ke),c=Math.min(c,g[0]),f=Math.max(f,g[g.length-1])),c=Te(s,_e(u))||c,f=Te(s,Ce(u))||f,c=c===bn?+d.startOf(Date.now(),h):c,f=f===vn?+d.endOf(Date.now(),h)+1:f,s.min=Math.min(c,f),s.max=Math.max(c+1,f),s._table=[],s._timestamps={data:g,datasets:p,labels:m}},buildTicks:function(){var e,t,i,n=this,o=n.min,a=n.max,r=n.options,s=r.ticks,l=r.time,d=n._timestamps,u=[],h=n.getLabelCapacity(o),c=s.source,f=r.distribution;for(d="data"===c||"auto"===c&&"series"===f?d.data:"labels"===c?d.labels:function(e,t,i,n){var o,a=e._adapter,r=e.options,s=r.time,l=s.unit||Ae(s.minUnit,t,i,n),d=pn([s.stepSize,s.unitStepSize,1]),u="week"===l&&s.isoWeekday,h=t,c=[];if(u&&(h=+a.startOf(h,"isoWeek",u)),h=+a.startOf(h,u?"day":l),a.diff(i,t,l)>1e5*d)throw t+" and "+i+" are too far apart with stepSize of "+d+" "+l;for(o=h;o<i;o=+a.add(o,d,l))c.push(o);return o!==i&&"ticks"!==r.bounds||c.push(o),c}(n,o,a,h),"ticks"===r.bounds&&d.length&&(o=d[0],a=d[d.length-1]),o=Te(n,_e(r))||o,a=Te(n,Ce(r))||a,e=0,t=d.length;e<t;++e)(i=d[e])>=o&&i<=a&&u.push(i);return n.min=o,n.max=a,n._unit=l.unit||(s.autoSkip?Ae(l.minUnit,n.min,n.max,h):function(e,t,i,n,o){var a,r;for(a=xn.length-1;a>=xn.indexOf(i);a--)if(r=xn[a],yn[r].common&&e._adapter.diff(o,n,r)>=t-1)return r;return xn[i?xn.indexOf(i):0]}(n,u.length,l.minUnit,n.min,n.max)),n._majorUnit=s.major.enabled&&"year"!==n._unit?function(e){for(var t=xn.indexOf(e)+1,i=xn.length;t<i;++t)if(yn[xn[t]].common)return xn[t]}(n._unit):void 0,n._table=function(e,t,i,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:i,pos:1}];var o,a,r,s,l,d=[],u=[t];for(o=0,a=e.length;o<a;++o)(s=e[o])>t&&s<i&&u.push(s);for(u.push(i),o=0,a=u.length;o<a;++o)l=u[o+1],r=u[o-1],s=u[o],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===s||d.push({time:s,pos:o/(a-1)});return d}(n._timestamps.data,o,a,f),n._offsets=function(e,t,i,n,o){var a,r,s=0,l=0;return o.offset&&t.length&&(a=Se(e,"time",t[0],"pos"),s=1===t.length?1-a:(Se(e,"time",t[1],"pos")-a)/2,r=Se(e,"time",t[t.length-1],"pos"),l=1===t.length?r:(r-Se(e,"time",t[t.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(n._table,u,0,0,r),s.reverse&&u.reverse(),De(n,u,n._majorUnit)},getLabelForIndex:function(e,t){var i=this,n=i._adapter,o=i.chart.data,a=i.options.time,r=o.labels&&e<o.labels.length?o.labels[e]:"",s=o.datasets[t].data[e];return pt.isObject(s)&&(r=i.getRightValue(s)),a.tooltipFormat?n.format(Me(i,r),a.tooltipFormat):"string"==typeof r?r:n.format(Me(i,r),a.displayFormats.datetime)},tickFormatFunction:function(e,t,i,n){var o=this._adapter,a=this.options,r=a.time.displayFormats,s=r[this._unit],l=this._majorUnit,d=r[l],u=i[t],h=a.ticks,c=l&&d&&u&&u.major,f=o.format(e,n||(c?d:s)),g=c?h.major:h.minor,p=pn([g.callback,g.userCallback,h.callback,h.userCallback]);return p?p(f,t,i):f},convertTicksToLabels:function(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this._offsets,i=Se(this._table,"time",e,"pos");return this.getPixelForDecimal((t.start+i)*t.factor)},getPixelForValue:function(e,t,i){var n=null;if(void 0!==t&&void 0!==i&&(n=this._timestamps.datasets[i][t]),null===n&&(n=Te(this,e)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end,n=Se(this._table,"pos",i,"time");return this._adapter._create(n)},_getLabelSize:function(e){var t=this.options.ticks,i=this.ctx.measureText(e).width,n=pt.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(n),a=Math.sin(n),r=mn(t.fontSize,ut.global.defaultFontSize);return{w:i*o+r*a,h:i*a+r*o}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,i=t.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,a=t.tickFormatFunction(e,0,De(t,[e],t._majorUnit),o),r=t._getLabelSize(a),s=Math.floor(t.isHorizontal()?t.width/r.w:t.height/r.h);return t.options.offset&&s--,s>0?s:1}}),kn={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};wn._defaults=kn;var _n={category:Yi,linear:en,logarithmic:rn,radialLinear:cn,time:wn},Cn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Vi._date.override("function"==typeof e?{_id:"moment",formats:function(){return Cn},parse:function(t,i){return"string"==typeof t&&"string"==typeof i?t=e(t,i):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,i){return e(t).format(i)},add:function(t,i,n){return e(t).add(i,n).valueOf()},diff:function(t,i,n){return e(t).diff(e(i),n)},startOf:function(t,i,n){return t=e(t),"isoWeek"===i?t.isoWeekday(n).valueOf():t.startOf(i).valueOf()},endOf:function(t,i){return e(t).endOf(i).valueOf()},_create:function(t){return e(t)}}:{}),ut._set("global",{plugins:{filler:{propagate:!0}}});var Sn={dataset:function(e){var t=e.fill,i=e.chart,n=i.getDatasetMeta(t),o=n&&i.isDatasetVisible(t)&&n.dataset._children||[],a=o.length||0;return a?function(e,t){return t<a&&o[t]._view||null}:null},boundary:function(e){var t=e.boundary,i=t?t.x:null,n=t?t.y:null;return pt.isArray(t)?function(e,i){return t[i]}:function(e){return{x:null===i?e.x:i,y:null===n?e.y:n}}}},Mn={id:"filler",afterDatasetsUpdate:function(e,t){var i,n,o,a,r=(e.data.datasets||[]).length,s=t.propagate,l=[];for(n=0;n<r;++n)a=null,(o=(i=e.getDatasetMeta(n)).dataset)&&o._model&&o instanceof zt.Line&&(a={visible:e.isDatasetVisible(n),fill:Pe(o,n,r),chart:e,el:o}),i.$filler=a,l.push(a);for(n=0;n<r;++n)(a=l[n])&&(a.fill=$e(l,n,s),a.boundary=Ie(a),a.mapper=Fe(a))},beforeDatasetsDraw:function(e){var t,i,n,o,a,r,s,l=e._getSortedVisibleDatasetMetas(),d=e.ctx;for(i=l.length-1;i>=0;--i)(t=l[i].$filler)&&t.visible&&(o=(n=t.el)._view,a=n._children||[],r=t.mapper,s=o.backgroundColor||ut.global.defaultColor,r&&s&&a.length&&(pt.canvas.clipArea(d,e.chartArea),Ne(d,a,r,o,s,n._loop),pt.canvas.unclipArea(d)))}},Tn=pt.rtl.getRtlAdapter,An=pt.noop,Dn=pt.valueOrDefault;ut._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var i=t.datasetIndex,n=this.chart,o=n.getDatasetMeta(i);o.hidden=null===o.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,i=e.options.legend||{},n=i.labels&&i.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(i){var o=i.controller.getStyle(n?0:void 0);return{text:t[i.index].label,fillStyle:o.backgroundColor,hidden:!e.isDatasetVisible(i.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:i.index}},this)}}},legendCallback:function(e){var t,i,n,o=document.createElement("ul"),a=e.data.datasets;for(o.setAttribute("class",e.id+"-legend"),t=0,i=a.length;t<i;t++)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[t].backgroundColor,a[t].label&&n.appendChild(document.createTextNode(a[t].label));return o.outerHTML}});var Pn=kt.extend({initialize:function(e){pt.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:An,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:An,beforeSetDimensions:An,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:An,beforeBuildLabels:An,buildLabels:function(){var e=this,t=e.options.labels||{},i=pt.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(i=i.filter(function(i){return t.filter(i,e.chart.data)})),e.options.reverse&&i.reverse(),e.legendItems=i},afterBuildLabels:An,beforeFit:An,fit:function(){var e=this,t=e.options,i=t.labels,n=t.display,o=e.ctx,a=pt.options._parseFont(i),r=a.size,s=e.legendHitBoxes=[],l=e.minSize,d=e.isHorizontal();if(d?(l.width=e.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=e.maxHeight),n){if(o.font=a.string,d){var u=e.lineWidths=[0],h=0;o.textAlign="left",o.textBaseline="middle",pt.each(e.legendItems,function(e,t){var n=Re(i,r)+r/2+o.measureText(e.text).width;(0===t||u[u.length-1]+n+2*i.padding>l.width)&&(h+=r+i.padding,u[u.length-(t>0?0:1)]=0),s[t]={left:0,top:0,width:n,height:r},u[u.length-1]+=n+i.padding}),l.height+=h}else{var c=i.padding,f=e.columnWidths=[],g=e.columnHeights=[],p=i.padding,m=0,v=0;pt.each(e.legendItems,function(e,t){var n=Re(i,r)+r/2+o.measureText(e.text).width;t>0&&v+r+2*c>l.height&&(p+=m+i.padding,f.push(m),g.push(v),m=0,v=0),m=Math.max(m,n),v+=r+c,s[t]={left:0,top:0,width:n,height:r}}),p+=m,f.push(m),g.push(v),l.width+=p}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:An,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,i=t.labels,n=ut.global,o=n.defaultColor,a=n.elements.line,r=e.height,s=e.columnHeights,l=e.width,d=e.lineWidths;if(t.display){var u,h=Tn(t.rtl,e.left,e.minSize.width),c=e.ctx,f=Dn(i.fontColor,n.defaultFontColor),g=pt.options._parseFont(i),p=g.size;c.textAlign=h.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.strokeStyle=f,c.fillStyle=f,c.font=g.string;var m=Re(i,p),v=e.legendHitBoxes,b=function(e,n){switch(t.align){case"start":return i.padding;case"end":return e-n;default:return(e-n+i.padding)/2}},y=e.isHorizontal();u=y?{x:e.left+b(l,d[0]),y:e.top+i.padding,line:0}:{x:e.left+i.padding,y:e.top+b(r,s[0]),line:0},pt.rtl.overrideTextDirection(e.ctx,t.textDirection);var x=p+i.padding;pt.each(e.legendItems,function(t,n){var f=c.measureText(t.text).width,g=m+p/2+f,w=u.x,k=u.y;h.setWidth(e.minSize.width),y?n>0&&w+g+i.padding>e.left+e.minSize.width&&(k=u.y+=x,u.line++,w=u.x=e.left+b(l,d[u.line])):n>0&&k+x>e.top+e.minSize.height&&(w=u.x=w+e.columnWidths[u.line]+i.padding,u.line++,k=u.y=e.top+b(r,s[u.line]));var _=h.x(w);!function(e,t,n){if(!(isNaN(m)||m<=0)){c.save();var r=Dn(n.lineWidth,a.borderWidth);if(c.fillStyle=Dn(n.fillStyle,o),c.lineCap=Dn(n.lineCap,a.borderCapStyle),c.lineDashOffset=Dn(n.lineDashOffset,a.borderDashOffset),c.lineJoin=Dn(n.lineJoin,a.borderJoinStyle),c.lineWidth=r,c.strokeStyle=Dn(n.strokeStyle,o),c.setLineDash&&c.setLineDash(Dn(n.lineDash,a.borderDash)),i&&i.usePointStyle){var s=m*Math.SQRT2/2,l=h.xPlus(e,m/2),d=t+p/2;pt.canvas.drawPoint(c,n.pointStyle,s,l,d,n.rotation)}else c.fillRect(h.leftForLtr(e,m),t,m,p),0!==r&&c.strokeRect(h.leftForLtr(e,m),t,m,p);c.restore()}}(_,k,t),v[n].left=h.leftForLtr(_,v[n].width),v[n].top=k,function(e,t,i,n){var o=p/2,a=h.xPlus(e,m+o),r=t+o;c.fillText(i.text,a,r),i.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(a,r),c.lineTo(h.xPlus(a,n),r),c.stroke())}(_,k,t,f),y?u.x+=g+i.padding:u.y+=x}),pt.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var i,n,o,a=this;if(e>=a.left&&e<=a.right&&t>=a.top&&t<=a.bottom)for(o=a.legendHitBoxes,i=0;i<o.length;++i)if(e>=(n=o[i]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return a.legendItems[i];return null},handleEvent:function(e){var t,i=this,n=i.options,o="mouseup"===e.type?"click":e.type;if("mousemove"===o){if(!n.onHover&&!n.onLeave)return}else{if("click"!==o)return;if(!n.onClick)return}t=i._getLegendItemAt(e.x,e.y),"click"===o?t&&n.onClick&&n.onClick.call(i,e.native,t):(n.onLeave&&t!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,e.native,i._hoveredItem),i._hoveredItem=t),n.onHover&&t&&n.onHover.call(i,e.native,t))}}),In={id:"legend",_element:Pn,beforeInit:function(e){var t=e.options.legend;t&&Ee(e,t)},beforeUpdate:function(e){var t=e.options.legend,i=e.legend;t?(pt.mergeIf(t,ut.global.legend),i?(mi.configure(e,i,t),i.options=t):Ee(e,t)):i&&(mi.removeBox(e,i),delete e.legend)},afterEvent:function(e,t){var i=e.legend;i&&i.handleEvent(t)}},$n=pt.noop;ut._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Fn=kt.extend({initialize:function(e){pt.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:$n,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:$n,beforeSetDimensions:$n,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:$n,beforeBuildLabels:$n,buildLabels:$n,afterBuildLabels:$n,beforeFit:$n,fit:function(){var e,t=this,i=t.options,n=t.minSize={},o=t.isHorizontal();i.display?(e=(pt.isArray(i.text)?i.text.length:1)*pt.options._parseFont(i).lineHeight+2*i.padding,t.width=n.width=o?t.maxWidth:e,t.height=n.height=o?e:t.maxHeight):t.width=n.width=t.height=n.height=0},afterFit:$n,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,i=e.options;if(i.display){var n,o,a,r=pt.options._parseFont(i),s=r.lineHeight,l=s/2+i.padding,d=0,u=e.top,h=e.left,c=e.bottom,f=e.right;t.fillStyle=pt.valueOrDefault(i.fontColor,ut.global.defaultFontColor),t.font=r.string,e.isHorizontal()?(o=h+(f-h)/2,a=u+l,n=f-h):(o="left"===i.position?h+l:f-l,a=u+(c-u)/2,n=c-u,d=Math.PI*("left"===i.position?-.5:.5)),t.save(),t.translate(o,a),t.rotate(d),t.textAlign="center",t.textBaseline="middle";var g=i.text;if(pt.isArray(g))for(var p=0,m=0;m<g.length;++m)t.fillText(g[m],0,p,n),p+=s;else t.fillText(g,0,0,n);t.restore()}}}),On={},Ln=Mn,Nn=In,Rn={id:"title",_element:Fn,beforeInit:function(e){var t=e.options.title;t&&Ve(e,t)},beforeUpdate:function(e){var t=e.options.title,i=e.titleBlock;t?(pt.mergeIf(t,ut.global.title),i?(mi.configure(e,i,t),i.options=t):Ve(e,t)):i&&(mi.removeBox(e,i),delete e.titleBlock)}};for(var En in On.filler=Ln,On.legend=Nn,On.title=Rn,Ei.helpers=pt,function(){function e(e,t,i){var n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}function t(e){return null!=e&&"none"!==e}function i(i,n,o){var a=document.defaultView,r=pt._getParentNode(i),s=a.getComputedStyle(i)[n],l=a.getComputedStyle(r)[n],d=t(s),u=t(l),h=Number.POSITIVE_INFINITY;return d||u?Math.min(d?e(s,i,o):h,u?e(l,r,o):h):"none"}pt.where=function(e,t){if(pt.isArray(e)&&Array.prototype.filter)return e.filter(t);var i=[];return pt.each(e,function(e){t(e)&&i.push(e)}),i},pt.findIndex=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){i=void 0===i?e:i;for(var n=0,o=e.length;n<o;++n)if(t.call(i,e[n],n,e))return n;return-1},pt.findNextWhere=function(e,t,i){pt.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<e.length;n++){var o=e[n];if(t(o))return o}},pt.findPreviousWhere=function(e,t,i){pt.isNullOrUndef(i)&&(i=e.length);for(var n=i-1;n>=0;n--){var o=e[n];if(t(o))return o}},pt.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},pt.almostEquals=function(e,t,i){return Math.abs(e-t)<i},pt.almostWhole=function(e,t){var i=Math.round(e);return i-t<=e&&i+t>=e},pt.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},pt.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},pt.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},pt.toRadians=function(e){return e*(Math.PI/180)},pt.toDegrees=function(e){return e*(180/Math.PI)},pt._decimalPlaces=function(e){if(pt.isFinite(e)){for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}},pt.getAngleFromPoint=function(e,t){var i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n),a=Math.atan2(n,i);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:o}},pt.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},pt.aliasPixel=function(e){return e%2==0?0:.5},pt._alignPixel=function(e,t,i){var n=e.currentDevicePixelRatio,o=i/2;return Math.round((t-o)*n)/n+o},pt.splineCurve=function(e,t,i,n){var o=e.skip?t:e,a=t,r=i.skip?t:i,s=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),l=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)),d=s/(s+l),u=l/(s+l),h=n*(d=isNaN(d)?0:d),c=n*(u=isNaN(u)?0:u);return{previous:{x:a.x-h*(r.x-o.x),y:a.y-h*(r.y-o.y)},next:{x:a.x+c*(r.x-o.x),y:a.y+c*(r.y-o.y)}}},pt.EPSILON=Number.EPSILON||1e-14,pt.splineCurveMonotone=function(e){var t,i,n,o,a,r,s,l,d,u=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),h=u.length;for(t=0;t<h;++t)if(!(n=u[t]).model.skip){if(i=t>0?u[t-1]:null,(o=t<h-1?u[t+1]:null)&&!o.model.skip){var c=o.model.x-n.model.x;n.deltaK=0!==c?(o.model.y-n.model.y)/c:0}!i||i.model.skip?n.mK=n.deltaK:!o||o.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(t=0;t<h-1;++t)n=u[t],o=u[t+1],n.model.skip||o.model.skip||(pt.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=o.mK=0:(a=n.mK/n.deltaK,r=o.mK/n.deltaK,(l=Math.pow(a,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),n.mK=a*s*n.deltaK,o.mK=r*s*n.deltaK)));for(t=0;t<h;++t)(n=u[t]).model.skip||(i=t>0?u[t-1]:null,o=t<h-1?u[t+1]:null,i&&!i.model.skip&&(d=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-d,n.model.controlPointPreviousY=n.model.y-d*n.mK),o&&!o.model.skip&&(d=(o.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+d,n.model.controlPointNextY=n.model.y+d*n.mK))},pt.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},pt.previousItem=function(e,t,i){return i?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},pt.niceNum=function(e,t){var i=Math.floor(pt.log10(e)),n=e/Math.pow(10,i);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},pt.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},pt.getRelativePosition=function(e,t){var i,n,o=e.originalEvent||e,a=e.target||e.srcElement,r=a.getBoundingClientRect(),s=o.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=o.clientX,n=o.clientY);var l=parseFloat(pt.getStyle(a,"padding-left")),d=parseFloat(pt.getStyle(a,"padding-top")),u=parseFloat(pt.getStyle(a,"padding-right")),h=parseFloat(pt.getStyle(a,"padding-bottom")),c=r.right-r.left-l-u,f=r.bottom-r.top-d-h;return{x:i=Math.round((i-r.left-l)/c*a.width/t.currentDevicePixelRatio),y:n=Math.round((n-r.top-d)/f*a.height/t.currentDevicePixelRatio)}},pt.getConstraintWidth=function(e){return i(e,"max-width","clientWidth")},pt.getConstraintHeight=function(e){return i(e,"max-height","clientHeight")},pt._calculatePadding=function(e,t,i){return(t=pt.getStyle(e,t)).indexOf("%")>-1?i*parseInt(t,10)/100:parseInt(t,10)},pt._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},pt.getMaximumWidth=function(e){var t=pt._getParentNode(e);if(!t)return e.clientWidth;var i=t.clientWidth,n=i-pt._calculatePadding(t,"padding-left",i)-pt._calculatePadding(t,"padding-right",i),o=pt.getConstraintWidth(e);return isNaN(o)?n:Math.min(n,o)},pt.getMaximumHeight=function(e){var t=pt._getParentNode(e);if(!t)return e.clientHeight;var i=t.clientHeight,n=i-pt._calculatePadding(t,"padding-top",i)-pt._calculatePadding(t,"padding-bottom",i),o=pt.getConstraintHeight(e);return isNaN(o)?n:Math.min(n,o)},pt.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},pt.retinaScale=function(e,t){var i=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=e.canvas,o=e.height,a=e.width;n.height=o*i,n.width=a*i,e.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=o+"px",n.style.width=a+"px")}},pt.fontString=function(e,t,i){return t+" "+e+"px "+i},pt.longestText=function(e,t,i,n){var o=(n=n||{}).data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(o=n.data={},a=n.garbageCollect=[],n.font=t),e.font=t;var r,s,l,d,u,h=0,c=i.length;for(r=0;r<c;r++)if(null!=(d=i[r])&&!0!==pt.isArray(d))h=pt.measureText(e,o,a,h,d);else if(pt.isArray(d))for(s=0,l=d.length;s<l;s++)null==(u=d[s])||pt.isArray(u)||(h=pt.measureText(e,o,a,h,u));var f=a.length/2;if(f>i.length){for(r=0;r<f;r++)delete o[a[r]];a.splice(0,f)}return h},pt.measureText=function(e,t,i,n,o){var a=t[o];return a||(a=t[o]=e.measureText(o).width,i.push(o)),a>n&&(n=a),n},pt.numberOfLabelLines=function(e){var t=1;return pt.each(e,function(e){pt.isArray(e)&&e.length>t&&(t=e.length)}),t},pt.color=Ke?function(e){return e instanceof CanvasGradient&&(e=ut.global.defaultColor),Ke(e)}:function(e){return console.error("Color.js not found!"),e},pt.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:pt.color(e).saturate(.5).darken(.1).rgbString()}}(),Ei._adapters=Vi,Ei.Animation=Ct,Ei.animationService=St,Ei.controllers=ci,Ei.DatasetController=Dt,Ei.defaults=ut,Ei.Element=kt,Ei.elements=zt,Ei.Interaction=fi,Ei.layouts=mi,Ei.platform=Ti,Ei.plugins=Ai,Ei.Scale=qi,Ei.scaleService=Di,Ei.Ticks=zi,Ei.Tooltip=Li,Ei.helpers.each(_n,function(e,t){Ei.scaleService.registerScaleType(t,e,e._defaults)}),On)On.hasOwnProperty(En)&&Ei.plugins.register(On[En]);Ei.platform.initialize();var Vn=Ei;return"undefined"!=typeof window&&(window.Chart=Ei),Ei.Chart=Ei,Ei.Legend=On.legend._element,Ei.Title=On.title._element,Ei.pluginService=Ei.plugins,Ei.PluginBase=Ei.Element.extend({}),Ei.canvasHelpers=Ei.helpers.canvas,Ei.layoutService=Ei.layouts,Ei.LinearScaleBase=Zi,Ei.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Ei[e]=function(t,i){return new Ei(t,Ei.helpers.merge(i||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),Vn}),define("views/StatisticsView",["jquery","backbone","underscore","chart"],function(e,t,i,n){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"displayChart",keyup:"keyPressHandler"},initialize:function(e){this.render()},displayChart:function(){e.ajax({url:ajaxurl,data:{action:"oplb_statistics",chart_type:"line_chart",gbid:this.model.get("gbid"),uid:this.model.get("id"),nonce:oplbGradebook.nonce},dataType:"json",success:function(t){var i=e("#myChart").get(0).getContext("2d"),o={legend:{display:!0,labels:{fontColor:"rgb(0, 0, 0)"}}};new n(i,{type:"line",data:t,options:o})}})},render:function(){var t=this,n=this.model,o=i.template(e("#stats-student-template").html()),a=o({student:n});e("body").append(t.$el.html(a).el),this.$el.modal("show")},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},keyPressHandler:function(e){return 27==e.keyCode&&this.editCancel(),this}})}),define("models/UserList",["backbone","models/User"],function(e,t){return e.Collection.extend({model:t,search:"",sort_direction:"asc",sort_key:"last_name",comparator:function(e,t){var i=e.get(this.sort_key),n=t.get(this.sort_key);return"asc"===this.sort_direction?n.localeCompare(i):i.localeCompare(n)},url:function(){return ajaxurl+"?action=oplb_user_list"}})}),function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("bootstrap3-typeahead",["jquery"],function(e){return t(e)}):t(e.jQuery)}(this,function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=e(this.options.menu),this.$appendTo=this.options.appendTo?e(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").data("value");if(this.$element.data("active",e),this.autoSelect||e){var t=this.updater(e);this.$element.val(this.displayText(t)||t).change(),this.afterSelect(t)}return this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var t,i=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return t="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:i.top+i.height+t,left:i.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){if(this.query=void 0!==t&&null!==t?t:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var i=e.proxy(function(){e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(i,this.delay)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length||this.options.addItem?(t.length>0?this.$element.data("active",t[0]):this.$element.data("active",null),this.options.addItem&&t.push(this.options.addItem),"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(e){return~this.displayText(e).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],o=[];t=e.shift();){var a=this.displayText(t);a.toLowerCase().indexOf(this.query.toLowerCase())?~a.indexOf(this.query)?n.push(t):o.push(t):i.push(t)}return i.concat(n,o)},highlighter:function(t){var i,n,o,a,r,s=e("<div></div>"),l=this.query,d=t.toLowerCase().indexOf(l.toLowerCase());if(0===(i=l.length))return s.text(t).html();for(;d>-1;)n=t.substr(0,d),o=t.substr(d,i),a=t.substr(d+i),r=e("<strong></strong>").text(o),s.append(document.createTextNode(n)).append(r),t=a,d=t.toLowerCase().indexOf(l.toLowerCase());return s.append(document.createTextNode(t)).html()},render:function(t){var i=this,n=this,o=!1;return t=e(t).map(function(t,a){var r=n.displayText(a);return t=e(i.options.item).data("value",a),t.find("a").html(i.highlighter(r)),r==n.$element.val()&&(t.addClass("active"),n.$element.data("active",a),o=!0),t[0]}),this.autoSelect&&!o&&(t.first().addClass("active"),this.$element.data("active",t.first().data("value"))),this.$menu.html(t),this},displayText:function(e){return e.name||e},next:function(t){var i=this.$menu.find(".active").removeClass("active"),n=i.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup()},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){var n=arguments;return"string"==typeof i&&"getActive"==i?this.data("active"):this.each(function(){var o=e(this),a=o.data("typeahead"),r="object"==typeof i&&i;a||o.data("typeahead",a=new t(this,r)),"string"==typeof i&&(n.length>1?a[i].apply(a,Array.prototype.slice.call(n,1)):a[i]())})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,
afterSelect:e.noop,addItem:!1,delay:0},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}),define("views/EditStudentView",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(e,t,i,n,o,a){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"populateStudentDropdown","click #edit-student-save":"submitForm","submit #edit-student-form":"editSave","change #selectStudentRange":"handleStudentRangeSelection"},initialize:function(t){return this.course=t.course,this.gradebook=t.gradebook,this.minLength=2,this.student=this.model||null,this.userList=new o,e("body").append(this.render().el),this},render:function(){var t=this,n=i.template(e("#edit-student-template").html()),o=n({student:this.student,course:this.course});return t.$el.html(o),this.$el.modal("show"),t.el},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#edit-student-form").submit()},editSave:function(t){var o=this,a=e(t.currentTarget).serializeObject();return delete a.id,new n(a).save(a,{success:function(e){if(i.each(e.get("cells"),function(e){o.gradebook.cells.add(e)}),"all"===e.get("type"))i.each(e.get("students"),function(e){o.gradebook.students.add(e)});else{var t=new n(e.get("student"));o.gradebook.students.add(t)}o.$el.modal("hide")}}),!1},handleStudentRangeSelection:function(){e("#studentAddWrapper").toggleClass("add-all add-single")},populateStudentDropdown:function(){var e=this;this.$el.find("#studentRangeAll").focus(),this.userList.fetch({success:function(t,n,o){if(void 0!==n.error){var a="Problem retrieving student list";switch(n.error){case"no_bp":;return e.$el.find("#user_login_wrapper").html('<input class="form-control" type="text" name="id-exists" id="user_login"/>'),e.$el.find("#edit-student-save").removeAttr("disabled").text("Add"),!1;case"no_site":a="Unable to find site",e.$el.closest(".modal-content").find("#edit-student-save").text("No Site");break;case"no_students":a="No students have joined this course.",e.$el.find("#user_login_wrapper select").attr("disabled","disabled"),e.$el.find("#edit-student-save").text("No Students")}var r='<option value="0">'+a+"</option>";return e.$el.find("#user_login").html(r),!1}e.$el.find("#user_login").html(""),i(e.userList.models).each(function(t){var i=t.get("user_login");""!==t.get("first_name")&&""!==t.get("last_name")&&(i=t.get("first_name")+" "+t.get("last_name"));var n='<option value="'+t.get("user_login")+'">'+i+"</option>";e.$el.find("#user_login").append(n)}),e.$el.find("#user_login_wrapper select").removeAttr("disabled"),e.$el.find("#edit-student-save").removeAttr("disabled").text("Add")}})}})}),define("views/DeleteStudentView",["jquery","backbone","underscore"],function(e,t,i){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-student-delete":"submitForm","submit #delete-student-form":"deleteSave"},initialize:function(t){return this.gradebook=t.gradebook,this.course=t.course,this.student=this.model,e("body").append(this.render().el),this},render:function(){if(this.student){var t=i.template(e("#delete-student-template").html()),n=t({student:this.student,course:this.course});this.$el.html(n)}return this.$el.modal("show"),this},keyPressHandler:function(e){return 27==e.keyCode&&this.deleteCancel(),13==e.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#delete-student-form").submit()},deleteSave:function(t){t.preventDefault();var n=this,o=e(t.currentTarget).serializeObject(),a=(o.id,this.model),n=this;a.destroy({success:function(e,t){var o=n.gradebook.cells;i.each(o.models,function(e,t){void 0!==e&&e.get("uid")===n.model.get("id")&&o.models.splice(t,1)}),n.$el.modal("hide")}})}})}),define("views/CommentModalView",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(e,t,i,n,o,a){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","click #edit-comment":"editSave","click #clear-comment":"clearComment","shown.bs.modal":"focusInput"},initialize:function(e){this.model=e.model,this.gradebook=e.gradebook,this.type=e.type,this.name=e.name,this.username=e.username,this.gbid=parseInt(this.gradebook.get("gbid"))},render:function(){var t=this,n=i.template(e("#comment-modal-template").html());this.comment=t.model.get("comments"),"mid_semester"===this.type?this.comment=t.model.get("mid_semester_comments"):"final"===this.type&&(this.comment=t.model.get("final_comments"));var o=n({comments:this.comment,gradebook:t.gradebook,username:this.username,name:this.name});return this.$el.html(o),this.$el.modal("show"),this.el},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},editSave:function(i){i.preventDefault();var n=this,o=e(i.srcElement),a=o.closest(".btn"),r="Saving",s="Save";console.log("parent.attr",a.attr("id")),"clear-comment"===a.attr("id")&&(r="Clearing",s="Clear"),a.find(".dashicons-image-rotate").removeClass("hidden"),a.find(".button-text").text(r+"..."),a.attr("disabled","disabled");var l=e("#comment").val(),d=this.model.attributes;if(console.log("cell",d),this.comments!==l&&(d.commentsUpdate=!0),d.comments=l,"cell"===this.type)e.ajax({url:ajaxurl+"?action=cell&id="+this.model.get("id")+"&comment_edit=1&nonce="+oplbGradebook.nonce,method:"POST",data:d,dataType:"json"}).done(function(e,t,i){a.find(".dashicons-image-rotate").addClass("hidden"),a.find(".button-text").text(s),a.removeAttr("disabled","disabled"),n.updateModel()}).fail(function(e,t,i){console.log("error",e,t,i)});else{var u=this.model.get("mid_semester_grade");"final"===this.type&&(u=this.model.get("final_grade")),console.log("this.cell.id",d.id);var h=parseInt(d.id);console.log("uid",h);var l=this.model.get("comments");e.ajax({url:ajaxurl+"?action=oplb_student_grades&comment_edit=1&nonce="+oplbGradebook.nonce,method:"POST",data:{grade:u,type:this.type,gbid:this.gbid,uid:h,comments:l},dataType:"json"}).done(function(e,i,o){a.find(".dashicons-image-rotate").addClass("hidden"),a.find(".button-text").text(s),a.removeAttr("disabled","disabled"),n.updateModel(),t.pubSub.trigger("editSuccess",e)}).fail(function(e,t,i){n.trigger("editError")})}},clearComment:function(e){this.$el.find("textarea").val(""),this.editSave(e)},updateModel:function(){var t=e("#comment").val();"mid_semester"===this.type?this.model.set({comments:t,mid_semester_comments:t,commentsUpdate:!1}):"final"===this.type?this.model.set({comments:t,final_comments:t,commentsUpdate:!1}):this.model.set({comments:t,commentsUpdate:!1})},focusInput:function(){this.$el.find("#comment").focus()}})}),define("views/CommentView",["jquery","backbone","underscore","views/CommentModalView","models/User","models/UserList","bootstrap3-typeahead"],function(e,t,i,n,o,a,r){return t.View.extend({tagName:"span",className:"comment-icon",events:{"click button.add-comment":"addComment"},initialize:function(e){this.model=e.model,this.gradebook=e.gradebook,this.type=e.type,this.name=e.name,this.username=e.username},render:function(t){void 0!==t&&(this.model=t);var n=this.model.get("comments")?"active":"inactive";"mid_semester"===this.type?n=this.model.get("mid_semester_comments")?"active":"inactive":"final"===this.type&&(n=this.model.get("final_comments")?"active":"inactive"),this.$el.removeClass("active inactive"),this.$el.addClass(n);var o=i.template(e("#comment-icon-template").html()),a=o({});return this.$el.html(a),this.el},addComment:function(t){if(e("body").find("#modalDialogComments").length)return!1;var i=new n({model:this.model,gradebook:this.gradebook,name:this.name,username:this.username,type:this.type});e("body").append(i.render()),this.listenTo(i.model,"change",this.render,{newModal:i.model})}})}),define("views/CellView",["jquery","backbone","underscore","views/CommentView"],function(e,t,i,n){var o=[];return t.View.extend({tagName:"td",className:"cell",events:{"focus .grade-numeric":"maybeClear","blur .grade-numeric":"edit","keypress .grade-numeric":"updateOnEnter"},initialize:function(e){this.course=e.course,this.gradebook=e.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell)},render:function(){var t=this;this.$el.attr("data-id",this.model.get("amid"));var o=this.gradebook.assignments.findWhere({id:this.model.get("amid")});o&&this.$el.toggleClass("hidden",!o.get("visibility"));var a=i.template(e("#edit-cell-template").html()),r=a({cell:this.model,gradebook:this.gradebook});if(this.$el.html(r),"instructor"===t.gradebook.role||"student"===t.gradebook.role&&this.model.get("comments")){var s=new n({model:this.model,gradebook:t.gradebook,name:o.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.$el},shiftCell:function(e){this.remove(),e.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(e.get("assign_order"))})},updateOnEnter:function(e){13==e.keyCode&&this.$el.find(".grade-numeric").blur()},hideInput:function(e){var i=this;parseFloat(e)!=this.model.get("assign_points_earned")||0===parseInt(e)&&(this.model.get("is_null")||1===this.model.get("is_null"))?(this.$el.find(".grade-numeric").attr("contenteditable","false").css("opacity","0.42"),this.model.save({assign_points_earned:parseFloat(e)},{wait:!0,success:function(e,n){i.render(),t.pubSub.trigger("updateAverageGrade",n)}})):this.$el.find(".grade-numeric").attr("contenteditable","true")},maybeClear:function(){var e=this.$el.find(".grade-numeric").html().trim(),t=this.$el.find(".grade-numeric").data("id");o[t]=e,"--"===e&&(this.$el.find(".grade-numeric").html(""),o[t]="")},edit:function(){var e=this.$el.find(".grade-numeric").html();console.log("cell input current raw incoming: ",e),e=this.cleanWord(e),e=e.replace(/(<([^>]+)>)/gi,""),e=e.replace(/\s+/g," "),e=e.trim(),console.log("cell input current processed including clean: ",e);var t=this.$el.find(".grade-numeric").data("id"),i=o[t];void 0!==i&&i!==e?this.hideInput(e):""===i&&this.$el.find(".grade-numeric").html("--")},hoverCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({hover:e.get("hover")}),this.$el.find(".grade-numeric").toggleClass("hover",e.get("hover")))},visibilityCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({visibility:e.get("visibility")}),this.render())},close:function(e){this.remove()},cleanWord:function(e){var t=/(\n|\r| class=(")?Mso[a-zA-Z]+(")? ^p)/g,i=e.replace(t," "),n=new RegExp("\x3c!--(.*?)--\x3e","g"),i=i.replace(n,""),o=new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>","gi");i=i.replace(o,"");for(var a=["style","script","applet","embed","noframes","noscript"],r=0;r<a.length;r++)o=new RegExp("<"+a[r]+".*?"+a[r]+"(.*?)>","gi"),i=i.replace(o,"");for(var s=["style","start"],r=0;r<s.length;r++){var l=new RegExp(" "+s[r]+'="(.*?)"',"gi");i=i.replace(l,"")}return i}})}),define("models/letterGrade",["backbone"],function(e){return e.Model.extend({defaults:{label:"A+",value:100}})}),define("models/letterGrades",["backbone","models/letterGrade"],function(e,t){return e.Collection.extend({model:t})}),define("views/CellDropdown",["jquery","backbone","underscore","models/letterGrades","views/CommentView"],function(e,t,i,n,o){return t.View.extend({tagName:"td",className:"cell",events:{"change select.grade-selector":"edit"},initialize:function(e){this.course=e.course,this.gradebook=e.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell),this.thisLetterGrades=new n([{label:"--",value:"--",range_low:0,range_high:0},{label:"A+",value:100,range_low:100,range_high:101},{label:"A",value:96,range_low:93,range_high:100},{label:"A-",value:91.5,range_low:90,range_high:93},{label:"B+",value:88.5,range_low:87,range_high:90},{label:"B",value:85,range_low:83,range_high:87},{label:"B-",value:81.5,range_low:80,range_high:83},{label:"C+",value:78.5,range_low:77,range_high:80},{label:"C",value:75,range_low:73,range_high:77},{label:"C-",value:71.5,range_low:70,range_high:73},{label:"D+",value:68.5,range_low:67,range_high:70},{label:"D",value:65,range_low:63,range_high:67},{label:"D-",value:61.5,range_low:60,range_high:63},{label:"F",value:50,range_low:1,range_high:60}])},render:function(){var t=this;this.$el.attr("data-id",this.model.get("amid"));var n=this.gradebook.assignments.findWhere({id:this.model.get("amid")});n&&this.$el.toggleClass("hidden",!n.get("visibility"));var a=i.template(e("#edit-cell-dropdown-template").html()),r=a({cell:this.model,assignment:n,grades:this.thisLetterGrades,role:this.gradebook.role});if(this.$el.html(r),"instructor"===t.gradebook.role||"student"===t.gradebook.role&&this.model.get("comments")){var s=new o({model:this.model,gradebook:t.gradebook,name:n.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.el},shiftCell:function(e){this.remove(),e.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(e.get("assign_order"))})},updateOnEnter:function(e){13==e.keyCode&&this.$el.blur()},hideInput:function(e){var i=this;this.model.save({assign_points_earned:e},{wait:!0,success:function(e,n){i.render(),t.pubSub.trigger("updateAverageGrade",n)}})},edit:function(){this.$el.attr("contenteditable","false"),this.$el.find(".grade-selector").attr("disabled","disabled"),this.hideInput(this.$el.find(".grade-selector").val())},hoverCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({hover:e.get("hover")}),this.$el.toggleClass("hover",e.get("hover")))},visibilityCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({visibility:e.get("visibility")}),this.render())},close:function(e){this.remove()}})}),define("views/CellCheckmark",["jquery","backbone","underscore","models/letterGrades","views/CommentView"],function(e,t,i,n,o){return t.View.extend({tagName:"td",className:"cell",events:{"change input.grade-checkmark":"edit"},initialize:function(e){this.course=e.course,this.gradebook=e.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell)},render:function(){var t=this;this.$el.attr("data-id",this.model.get("amid"));var n=this.gradebook.assignments.findWhere({id:this.model.get("amid")});n&&this.$el.toggleClass("hidden",!n.get("visibility"));var a=i.template(e("#edit-cell-checkmark-template").html()),r=a({cell:this.model,assignment:n,role:this.gradebook.role});if(this.$el.html(r),"instructor"===t.gradebook.role||"student"===t.gradebook.role&&this.model.get("comments")){var s=new o({model:this.model,gradebook:t.gradebook,name:n.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.el},shiftCell:function(e){this.remove(),e.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(e.get("assign_order"))})},updateOnEnter:function(e){13==e.keyCode&&this.$el.blur()},hideInput:function(e){var i=this;this.model.save({assign_points_earned:parseFloat(e)},{wait:!0,success:function(e,n){i.render(),t.pubSub.trigger("updateAverageGrade",n)}})},edit:function(){this.$el.attr("contenteditable","false");var e=0;this.$el.find(".grade-checkmark").is(":checked")&&(e=100),this.$el.find(".grade-checkmark").attr("disabled","disabled"),this.hideInput(e)},hoverCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({hover:e.get("hover")}),this.$el.toggleClass("hover",e.get("hover")))},visibilityCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({visibility:e.get("visibility")}),this.render())},close:function(e){this.remove()}})}),define("views/CellMidFinal",["jquery","backbone","underscore","models/letterGrades","views/CommentView","models/User"],function(e,t,i,n,o,a){return t.View.extend({tagName:"span",events:{"change select.grade-selector.mid":"editMid","change select.grade-selector.final":"editFinal"},initialize:function(e){t.pubSub.on("editSuccess",this.editSuccess,this),this.course=e.course,this.gradebook=e.gradebook,this.grades=e.grades,this.type=e.type,this.model=e.model,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.midGrades=new n([{label:"--",value:"--",type:"none"},{label:"P = Making Satisfactory Progress",value:"passing_display",type:"display_item"},{label:"P",value:"passing",type:"display_value"},{label:"N = Needs Improvement",value:"needs_improvement_display",type:"display_item"},{label:"N",value:"needs_improvement",type:"display_value"},{label:"SA = Stopped Attending",value:"stopped_attending_display",type:"display_item"},{label:"SA",value:"stopped_attending",type:"display_value"}]),this.finalGrades=new n([{label:"--",value:"--",type:"none"},{label:"A",value:"a",type:"none"},{label:"A-",value:"a_minus",type:"none"},{label:"B+",value:"b_plus",type:"none"},{label:"B",value:"b",type:"none"},{label:"B-",value:"b_minus",type:"none"},{label:"C+",value:"c_plus",type:"none"},{label:"C",value:"c",type:"none"},{label:"D",value:"d",type:"none"},{label:"F",value:"f",type:"none"},{label:"WF = withdrew, failing",value:"wf_display",type:"display_item"},{label:"WF",value:"wf",type:"display_value"},{label:"WN = withdrew, never attended (academic penalty)",value:"wn_display",type:"display_item"},{label:"WN",value:"wn",type:"display_value"},{label:"*WN = administrative withdrawl, never attended",value:"wn_admin_display",type:"display_item"},{label:"*WN",value:"wn_admin",type:"display_value"},{label:"WU = Unofficial Withdrawl",value:"wu_display",type:"display_item"},{label:"WU",value:"wu",type:"display_value"}]),this.studentGradeLabels("mid"),this.studentGradeLabels("final")},render:function(){var t=this,n=i.template(e("#edit-cell-dropdown-mid-final-template").html()),a=n({student:this.model,grades:this.grades,role:this.gradebook.role,type:this.type});this.$el.html(a);var r=this.model.get("mid_semester_comments");if("final"===this.type&&(r=this.model.get("final_comments")),"instructor"===t.gradebook.role||"student"===t.gradebook.role&&r){var s="Mid-semester Grade";"final"===this.type&&(s="Final Grade");var l=new o({model:this.model,gradebook:t.gradebook,name:s,username:this.model.get("user_login"),type:this.type});this.$el.find(".cell-wrapper").append(l.render())}return this.el},updateOnEnter:function(e){13==e.keyCode&&this.$el.blur()},hideInput:function(e){var i=this;this.model.save({assign_points_earned:e},{wait:!0,success:function(e,n){i.render(),t.pubSub.trigger("updateAverageGrade",n)}})},editMid:function(){this.edit("mid")},editFinal:function(){this.edit("final")},edit:function(e){this.$el.attr("contenteditable","false"),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var t=".grade-selector."+e;this.$el.find(t).attr("disabled","disabled");var i=this.$el.find(t).val();-1!==i.indexOf("_display")&&(i=i.replace(/_display/,""),this.$el.find(t).val(i));var n=this.$el.find(t).data("type"),o=this.$el.find(t).data("uid"),r=parseInt(this.course.get("id"));(new a).updateStudentGrade(i,n,o,r),i&&void 0!==i&&("mid"===n?this.model.attributes.mid_semester_grade=i:this.model.attributes.final_grade=i),this.handleTooltips(e)},handleTooltips:function(e){var t=".grade-selector."+e,i=this.$el.find(t).val(),n=this.midGrades;"final"===e&&(n=this.finalGrades);var o="";n.each(function(e){e.get("value")===i+"_display"&&""===o?o=e.get("label"):e.get("value")===i&&""===o&&(o=e.get("label"))}),this.$el.find(t).closest(".student-grades").find(".fa-info-circle").attr("title",o).tooltip("fixTitle")},editSuccess:function(){this.$el.closest("#gradebookWrapper").find("#savingStatus").addClass("hidden"),this.$el.find(".grade-selector").removeAttr("disabled")},editError:function(){this.$el.find(".grade-selector").removeAttr("disabled")},studentGradeLabels:function(e){var t=this.midGrades,n=this.model.get("mid_semester_grade"),o="";"final"===e&&(t=this.finalGrades,n=this.model.get("final_grade")),i.each(t.models,function(e){e.get("value")===n+"_display"&&""===o?o=e.get("label"):e.get("value")===n&&""===o&&(o=e.get("label"))}),""===o&&(o="--"),"final"===e?this.model.set("tool_tip_final",o):this.model.set("tool_tip_mid",o)},hoverCell:function(e){this.model.get("amid")===e.get("id")&&(this.model.set({hover:e.get("hover")}),this.$el.toggleClass("hover",e.get("hover")))},close:function(e){this.remove()}})}),define("views/StudentView",["jquery","backbone","underscore","views/StatisticsView","views/EditStudentView","views/DeleteStudentView","views/CellView","views/CellDropdown","views/CellCheckmark","views/CellMidFinal","models/letterGrades","models/User"],function(e,t,i,n,o,a,r,s,l,d,u,h){return t.View.extend({tagName:"tr",events:{"click a.delete-student":"deleteStudent","click a.student-statistics":"studentStatistics","click .dashicons-menu":"toggleStudentMenu","click li.student-submenu-delete":"deleteStudent","click li.student-submenu-stats":"studentStatistics"},initialize:function(e){this._subviews=[],this.gradebook=e.gradebook,this.course=e.course,this.student=this.model,this.midGrades=new u([{label:"--",value:"--",type:"none"},{label:"P = Making Satisfactory Progress",value:"passing_display",type:"display_item"},{label:"P",value:"passing",type:"display_value"},{label:"N = Needs Improvement",value:"needs_improvement_display",type:"display_item"},{label:"N",value:"needs_improvement",type:"display_value"},{label:"SA = Stopped Attending",value:"stopped_attending_display",type:"display_item"},{label:"SA",value:"stopped_attending",type:"display_value"}]),this.finalGrades=new u([{label:"--",value:"--",type:"none"},{label:"A",value:"a",type:"none"},{label:"A-",value:"a_minus",type:"none"},{label:"B+",value:"b_plus",type:"none"},{label:"B",value:"b",type:"none"},{label:"B-",value:"b_minus",type:"none"},{label:"C+",value:"c_plus",type:"none"},{label:"C",value:"c",type:"none"},{label:"D",value:"d",type:"none"},{label:"F",value:"f",type:"none"},{label:"WF = withdrew, failing",value:"wf_display",type:"display_item"},{label:"WF",value:"wf",type:"display_value"},{label:"WN = withdrew, never attended (academic penalty)",value:"wn_display",type:"display_item"},{label:"WN",value:"wn",type:"display_value"},{label:"*WN = administrative withdrawl, never attended",value:"wn_admin_display",type:"display_item"},{label:"*WN",value:"wn_admin",type:"display_value"},{label:"WU = Unofficial Withdrawl",value:"wu_display",type:"display_item"},{label:"WU",value:"wu",type:"display_value"}]),this.listenTo(this.model,"change",this.render),this.listenTo(this.gradebook,"change:assignments",this.render)},render:function(t,n){void 0===t&&(t="none");var o="";"pinned"===t&&(o=" visible-xs visible-sm");var a=this,u=i.template(e("#student-view-template").html()),h=u({student:this.model,role:this.gradebook.role,mobile_styles:o,midGrades:this.midGrades,finalGrades:this.finalGrades});this.$el.find(".student-tools").length||this.$el.html(h);var c=new d({model:this.model,course:this.course,gradebook:a.gradebook,role:this.gradebook.role,grades:this.midGrades,type:"mid_semester"});this.$el.find(".student-grades.mid-semester-grade .cell-wrapper").length||this.$el.find(".student-grades.mid-semester-grade").append(c.render());var f=new d({model:this.model,course:this.course,gradebook:a.gradebook,role:this.gradebook.role,grades:this.finalGrades,type:"final"});if(this.$el.find(".student-grades.final-grade .cell-wrapper").length||this.$el.find(".student-grades.final-grade").append(f.render()),"pinned"===t||"none"===t){var g=parseInt(a.course.get("id")),p=this.gradebook.cells.where({uid:parseInt(this.model.get("id")),gbid:g});p=i.sortBy(p,function(e){return e.get("assign_order")});var a=this;i.each(p,function(e){var t=n.findWhere({id:e.get("amid")});if(void 0!==t){if("checkmark"===t.get("assign_grade_type"))var i=new l({course:a.course,gradebook:a.gradebook,model:e,options:a.options});else if("letter"===t.get("assign_grade_type"))var i=new s({course:a.course,gradebook:a.gradebook,model:e,options:a.options});else var i=new r({course:a.course,gradebook:a.gradebook,model:e,options:a.options});a._subviews.push(i),a.$el.append(i.render())}})}return this.postLoadActions(),this.el},postLoadActions:function(){e('[data-toggle="tooltip"]').tooltip()},clearSubViews:function(){var e=this;i.each(e._subviews,function(e){e.close()}),this._subviews=[]},toggleStudentMenu:function(){var t=e("#row-student-id-"+this.model.get("id"));if("none"===t.css("display")){t.toggle(1,function(){var t=this;e(document).one("click",function(){e(t).hide()})})}},selectAllStudents:function(){e("#cb-select-all-1").is(":checked")?e("#cb-select-"+this.model.get("id")).prop("checked",!0):e("#cb-select-"+this.model.get("id")).prop("checked",!1)},selectStudent:function(t){var i=e("#cb-select-"+this.model.get("id")).is(":checked");this.model.set({selected:i});var n=AN.GlobalVars.assignments.findWhere({selected:!0});i?e("#cb-select-"+this.model.get("id")).prop("checked",!0):e("#cb-select-"+this.model.get("id")).prop("checked",!1),n&&n.set({selected:!1})},studentStatistics:function(e){e.preventDefault();new n({model:this.model,options:this.options})},deleteStudent:function(e){e.preventDefault();new a({model:this.model,gradebook:this.gradebook,course:this.course})},close:function(e){this.clearSubViews(),this.remove()}})}),define("views/AssignmentStatisticsView",["jquery","backbone","underscore","chart"],function(e,t,i,n){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"displayChart",keyup:"keyPressHandler"},initialize:function(){this.render()},displayChart:function(){e.ajax({url:ajaxurl,data:{action:"oplb_statistics",chart_type:"pie_chart",gbid:this.model.get("gbid"),amid:this.model.get("id"),nonce:oplbGradebook.nonce},dataType:"json",success:function(t){var i=e("#myChart").get(0).getContext("2d");new n(i,{type:"pie",data:t})}})},render:function(t){var n=this,o=this.model,a=i.template(e("#stats-assignment-template").html()),r=a({assignment:o});e("body").append(n.$el.html(r).el),this.$el.modal("show")},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},keyPressHandler:function(e){return 27==e.keyCode&&this.editCancel(),this}})}),define("models/Assignment",["backbone","underscore"],function(e,t){return e.Model.extend({defaults:{assign_category:"",assign_name:"",assign_due:"",assign_date:"",assign_grade_type:"numeric",assign_weight:0,gbid:null,sorted:"",visibility:!0,publish:!0,selected:!1},url:function(){return this.get("id")?ajaxurl+"?action=assignment&id="+this.get("id")+"&gbid="+this.get("gbid"):ajaxurl+"?action=assignment"}})}),define("views/EditAssignmentView",["jquery","backbone","underscore","models/Assignment","views/StudentView","views/GradeBookView","jquery-ui"],function(e,t,i,n,o,a){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"focusInput",keyup:"keyPressHandler","click #edit-assignment-save":"submitForm","submit #edit-assignment-form":"editSave"},initialize:function(t){return this.options=t.options,this.gradebook=t.gradebook,this.course=t.course,this.assignment=this.model||null,e("body").append(this.render().el),e("#assign-date-datepicker, #assign-due-datepicker").datepicker(),e("#assign-date-datepicker, #assign-due-datepicker").datepicker("option","dateFormat","yy-mm-dd"),this.assignment&&(e("#assign-date-datepicker").datepicker("setDate",this.assignment.get("assign_date")),e("#assign-due-datepicker").datepicker("setDate",this.assignment.get("assign_due"))),this},render:function(){var t=i.template(e("#edit-assignment-template").html());this.assignment||(this.assignment=new n);var o=t({assignment:this.assignment,course:this.course,role:this.role});this.$el.html(o),this.$el.modal("show");var a=this;return i.defer(function(){this.inputName=a.$('input[name="assign_name"]');this.inputName.val().length;a.assignment&&e("#assign_visibility option[value='"+a.assignment.get("assign_visibility")+"']").attr("selected","selected")}),this},keyPressHandler:function(e){return 27==e.keyCode&&this.editCancel(),13==e.keyCode&&this.submitForm(),this},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#edit-assignment-form").submit()},editSave:function(t){t.preventDefault();var o=this,a=e(t.currentTarget).serializeObject(),r=e(t.currentTarget).serializeObject().id,s=this.gradebook.assignments.findWhere({id:parseInt(r)});if(s)s.save(a,{wait:!0,success:function(e,t){o.checkForAverageGradeUpdates(t)}});else{delete a.id;new n(a).save(a,{success:function(e,t){o.gradebook.assignments.add(t.assignment),i.each(t.cells,function(e){o.gradebook.cells.add(e)}),window.oplbGlobals.total_weight=e.attributes.total_weight,o.checkForAverageGradeUpdates(t.assignment)}})}return this.$el.modal("hide"),!1},checkForAverageGradeUpdates:function(e){if(void 0===e.student_grade_update||e.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=e.distributed_weight,i.each(e.student_grade_update,function(e){t.pubSub.trigger("updateAverageGrade",e)})},focusInput:function(){this.$el.find("#assign_name").focus()}})}),define("views/DetailsAssignmentView",["jquery","backbone","underscore"],function(e,t,i){return t.View.extend({id:"base-modal",className:"modal fade",initialize:function(t){return this.options=t.options,this.course=t.course,e("body").append(this.render().el),this},render:function(t){var n=this,o=this.model,a=i.template(e("#details-assignment-template").html()),r=a({assignment:o});return n.$el.html(r),this.$el.modal("show"),this}})}),define("views/DeleteAssignmentView",["jquery","backbone","underscore"],function(e,t,n){return t.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-assignment-delete":"submitForm","submit #delete-assignment-form":"deleteSave"},initialize:function(t){return this.gradebook=t.gradebook,this.course=t.course,this.assignment=t.assignment,e("body").append(this.render().el),this},render:function(){if(this.assignment){var t=n.template(e("#delete-assignment-template").html()),i=t({assignment:this.assignment,course:this.course});this.$el.html(i)}return this.$el.modal("show"),this},keyPressHandler:function(e){return 27==e.keyCode&&this.deleteCancel(),13==e.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){e("#delete-assignment-form").submit()},deleteSave:function(e){e.preventDefault(),console.log("go deleteSave",this.assignment);var t=this;this.assignment.destroy({success:function(e,o){var a=t.gradebook.cells.where({amid:e.get("id")});t.gradebook.cells.remove(a);var r=e.get("assign_order");if(t.gradebook.assignments.models.length){var s=n.max(t.gradebook.assignments.models,function(e){return e.get("assign_order")});for(i=r;i<s.get("assign_order");i++){var l=t.gradebook.assignments.findWhere({assign_order:i+1});void 0!==l&&l.save({assign_order:i})}}t.checkForAverageGradeUpdates(o),t.$el.modal("hide")}})},checkForAverageGradeUpdates:function(e){if(void 0===e.student_grade_update||e.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=e.distributed_weight,
n.each(e.student_grade_update,function(e){t.pubSub.trigger("updateAverageGrade",e)})}})}),define("views/AssignmentView",["jquery","backbone","underscore","views/AssignmentStatisticsView","views/EditAssignmentView","views/DetailsAssignmentView","views/DeleteAssignmentView","views/GradeBookView","jquery-ui"],function(e,t,i,n,o,a,r,s){return t.View.extend({tagName:"th",className:"assignment-tools assignment",events:{"click li.assign-submenu-sort":"sortColumn","click .dashicons-menu":"toggleAssignmentMenu","click li.assign-submenu-details":"detailsAssignment","click li.assign-submenu-delete":"deleteAssignment","click li.assign-submenu-edit":"editAssignment","click li.assign-submenu-left":"shiftAssignmentLeft","click li.assign-submenu-right":"shiftAssignmentRight","click li.assign-submenu-stats":"statsAssignment","mouseenter div.column-frame":"mouseEnter","mouseleave div.column-frame":"mouseLeave"},initialize:function(e){this.gradebook=e.gradebook,this.course=e.course,this.assignment=this.model,this.listenTo(this.assignment,"change:assign_name",this.render),this.listenTo(this.assignment,"change:sorted",this.sortColumnCSS),this.listenTo(this.assignment,"change:visibility",this.visibilityColumnCSS),this.listenTo(this.gradebook.students,"add remove",this.close),this.listenTo(this.gradebook.assignments,"add remove change:sorted change:assign_order",this.close),this.render()},mouseEnter:function(){this.$el.addClass("hover"),this.assignment.set({hover:!0})},mouseLeave:function(){this.$el.removeClass("hover"),this.assignment.set({hover:!1})},detailsAssignment:function(e){e.preventDefault();new a({model:this.assignment,course:this.course})},shiftAssignmentLeft:function(e){e.preventDefault(),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var t=this.gradebook.assignments.findWhere({assign_order:this.model.get("assign_order")-1});t.save({assign_order:this.model.get("assign_order"),assign_visibility:t.get("assign_visibility")}),this.assignment.save({assign_order:this.model.get("assign_order")-1,assign_visibility:this.model.get("assign_visibility")})},shiftAssignmentRight:function(e){e.preventDefault(),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var t=this.gradebook.assignments.findWhere({assign_order:this.model.get("assign_order")+1});t.save({assign_order:this.model.get("assign_order"),assign_visibility:t.get("assign_visibility")}),this.assignment.save({assign_order:this.model.get("assign_order")+1,assign_visibility:this.model.get("assign_visibility")})},toggleAssignmentMenu:function(){var t=e("#column-assign-id-"+this.model.get("id"));if("none"===t.css("display")){var i=this;t.toggle(1,function(){var t=this;e(document).one("click",function(){e(t).hide(),i.model.set({hover:!1})})})}},render:function(){this.visibilityColumnCSS();var t=(this.assignment.get("sorted"),i.template(e("#assignment-view-template").html())),n=t({assignment:this.assignment,role:this.role,min:i.min(this.gradebook.assignments.models,function(e){return e.get("assign_order")}),max:i.max(this.gradebook.assignments.models,function(e){return e.get("assign_order")})});return this.$el.html(n),this.el},sortColumn:function(e){if(e.preventDefault(),this.assignment.get("sorted"))"desc"===this.assignment.get("sorted")?this.assignment.set({sorted:"asc"}):this.assignment.set({sorted:"desc"});else{var t=this.gradebook.assignments.find(function(e){return e.get("sorted").length>0});t&&t.set({sorted:""}),this.assignment.set({sorted:"asc"})}},sortColumnCSS:function(){if(this.assignment.get("sorted")){var e=this.$el.hasClass("desc");this.$el.toggleClass("desc",!e).toggleClass("asc",e)}else this.$el.removeClass("asc desc"),this.$el.addClass("asc")},visibilityColumnCSS:function(e){this.assignment.get("visibility")?this.$el.removeClass("hidden"):this.$el.addClass("hidden")},statsAssignment:function(e){e.preventDefault();new n({model:this.assignment,options:this.options})},editAssignment:function(e){e.preventDefault();new o({model:this.assignment,gradebook:this.gradebook,course:this.course})},deleteAssignment:function(e){e.preventDefault();new r({gradebook:this.gradebook,course:this.course,assignment:this.assignment})},close:function(e){this.remove()},checkForAverageGradeUpdates:function(e){if(void 0===e.student_grade_update||e.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=e.distributed_weight,i.each(e.student_grade_update,function(e){t.pubSub.trigger("updateAverageGrade",e)})}})}),define("views/uploadCSV",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(e,t,i,n,o,a){var r={},s="";return t.View.extend({id:"upload-csv",className:"modal fade",events:{"shown.bs.modal":"renderUploader","hidden.bs.modal":"editCancel","click #uploadExternal":"uploadFile"},initialize:function(e){return this.course=e.course,this.gradebook=e.gradebook,this},render:function(){var t=this,n=i.template(e("#upload-csv").html()),o=n({});return t.$el.html(o),this.$el.modal("show"),t.el},renderUploader:function(){var t=this;e("#upload-csv-input").fileinput({uploadUrl:oplbGradebook.ajaxURL+"?action=oplb_gradebook_upload_csv&nonce="+oplbGradebook.nonce+"&gbid="+this.course.get("id"),maxFileCount:1,hideThumbnailContent:!0,showClose:!1,msgUploadThreshold:"Adding to Gradebook...",layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {pause}\n      {browse}\n    </div>\n</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',indicator:""}}).on("fileselect",function(i,n,o){console.log("fileselect"),s="",t.$el.find("#upload-csv-error-message").remove(),e("#upload-csv .modal-content").addClass("upload-active")}).on("fileuploaded",function(i,n){e(".file-input").html(n.response.message),r=n.response.content,e("#upload-csv-input").fileinput("clear"),e("#upload-csv .modal-content").addClass("upload-successful"),t.updateGradebook()}).on("filecleared",function(i){console.log("filecleared"),e("#upload-csv .modal-content").removeClass("upload-active"),""!==s&&t.$el.find(".file-input .kv-fileinput-error").after(s)}).on("fileuploaderror",function(t,i){s=i.response.error,e("#upload-csv-input").fileinput("clear")})},editCancel:function(){return this.$el.data("modal",null),this.remove(),t.pubSub.trigger("closeUploadCSV",r),!1},updateGradebook:function(){console.log("self.newGradebook in updateGradebook",r),t.pubSub.trigger("newGradebookCSV",r)},uploadFile:function(){console.log("go uploadFile"),e("#upload-csv-input").fileinput("upload")}})}),define("views/uploadModal",["jquery","backbone","underscore","models/User","models/UserList","views/uploadCSV","bootstrap3-typeahead"],function(e,t,i,n,o,a,r){return t.View.extend({id:"upload-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","click button#modal-download-csv":"downloadCSV","click button#modal-upload-csv":"uploadCSV"},initialize:function(e){return this.model=e.model,this.course=e.course,this.gradebook=e.gradebook,t.pubSub.on("closeUploadCSV",this.removeSecondary,this),this},render:function(t){console.log("newGradebook",t),void 0!==t&&(this.model=t);var n=this,o=i.template(e("#upload-modal").html()),a=o({});return n.$el.html(a),this.$el.modal("show"),console.log("this.$el in uploadModal",this.$el),n.el},downloadCSV:function(t){t.preventDefault(),e(".download-buttons").addClass("success").find("#modal-download-csv").text("Download Again"),this.course.export2csv()},uploadCSV:function(t){t.preventDefault();var i=this;setTimeout(function(){i.$el.addClass("secondary-modal")},10,i);var n=new a({course:this.course,gradebook:this.gradebook});e("body").append(n.render())},removeSecondary:function(){var t=this;e("body").addClass("modal-open"),console.log("removeSecondary"),setTimeout(function(){t.$el.removeClass("secondary-modal")},10,t)},editCancel:function(){return console.log("editCancel"),this.$el.data("modal",null),this.remove(),!1}})}),define("views/GradeBookView",["jquery","backbone","underscore","views/StudentView","views/AssignmentView","views/EditStudentView","views/EditAssignmentView","views/uploadModal","models/Course"],function(e,t,i,n,o,a,r,s,l){return t.pubSub=i.extend({},t.Events),t.View.extend({initialize:function(n){var o=this;return this.studentHeader,this.scrollSize=0,this.resizeTimer,this.xhrs=[],this._subviews=[],this.scrollObj={},this.options=n,this.filter_option="default",this.course=n.course,this.renderControl=0,this.gradebook=n.gradebook,this.listenTo(o.gradebook.students,"add remove",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.cells,"add remove",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.cells,"change:assign_order",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.assignments,"add",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"remove",i.debounce(i.bind(this.handleDelete,this),128)),this.listenTo(o.gradebook.assignments,"remove",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"change:assign_grade_type change:assign_weight",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.assignments,"change:sorted",o.sortByAssignment),this.listenTo(o.gradebook.assignments,"change:assign_category",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"change:assign_order",this.render),t.pubSub.on("updateAverageGrade",this.updateAverageGrade,this),t.pubSub.on("newGradebookCSV",this.initRender,this),this.render(),this.initRender(),e(window).on("resize",function(e){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){o.handleTableResize(!0)},250)}),this},clearSubViews:function(){var e=this;i.each(e._subviews,function(e){e.close()}),this._subviews=[]},events:{"click button#add-student":"addStudent","click button#upload-modal":"uploadModal","click button#download-csv":"downloadCSV","click button#download-csv-mobile":"downloadCSV","click button#add-assignment":"addAssignment","click button#filter-assignments":"filterAssignments","click [class^=gradebook-student-column-]":"sortGradebookBy","click [class^=gradebook-student-column-] span":"sortGradebookBy"},initRender:function(t){this.scrollSize=0;var n=this;this.clearSubViews(),this.renderControl=0,console.log("ev on initRender",t),void 0!==t&&(console.log("ev, self.gradebook",t,n.gradebook),void 0!==t.cells&&this.gradebook.cells.set(t.cells),void 0!==t.students&&this.gradebook.students.set(t.students),void 0!==t.assignments&&this.gradebook.assignments.set(t.assignments));var o=i.map(n.gradebook.assignments.models,function(e){return e.get("assign_category").trim()}),a=i.without(i.uniq(o),"")||null,r=i.template(e("#gradebook-interface-template").html()),s=n.getTotalWeight(),l=r({course:n.course,assign_categories:a,role:this.gradebook.role,total_weight:s,assign_length:n.gradebook.assignments.length});e("#wpbody-content").append(n.$el.html(l));var d=i.template(e("#gradebook-interface-template-student-header").html()),u=d({role:this.gradebook.role});return n.$el.find("#students-header tr").append(u),this.studentHeader=u,void 0===this.filter_option&&(this.filter_option="default"),e("#filter-assignments-select").val(this.filter_option),this.render(),this},handleTableResize:function(t){if(void 0===t&&(t=!1),this.adjustCellWidths(),void 0!==this.scrollObj.data){var i=this.scrollObj.data("jsp");if(void 0!==i)if(currentScrollSize=e("#an-gradebook-container").width(),parseInt(this.scrollSize)!==parseInt(currentScrollSize)||t)this.scrollSize=currentScrollSize,i.destroy(),this.scrollObj=e(".table-wrapper .scrollable").bind("jsp-initialised",this.calculateScrollBarPosition).jScrollPane();else{var n=e("#an-gradebook-container").closest(".jspContainer"),o={height:n.height()};n.css({"max-height":o.height+29+"px"})}}},render:function(){var t=this;switch(this.gradebook.sort_key){case"cell":e("#students").html(""),e("#students-pinned").html(""),e("#students-header tr").html(this.studentHeader),i.each(this.sort_column,function(i){var o=new n({model:t.gradebook.students.get(i.get("uid")),course:t.course,gradebook:t.gradebook,options:t.options});t._subviews.push(o),e("#students").append(o.render("pinned",t.gradebook.assignments))});var a=t.gradebook.assignments.models;a=i.sortBy(a,function(e){return e.get("assign_order")}),i.each(this.sort_column,function(i){var o=new n({model:t.gradebook.students.get(i.get("uid")),course:t.course,gradebook:t.gradebook,options:t.options});t._subviews.push(o),e("#students-pinned").append(o.render("static",t.gradebook.assignments))});var a=t.gradebook.assignments.models;a=i.sortBy(a,function(e){return e.get("assign_order")}),i.each(a,function(i){var n=new o({model:i,course:t.course,gradebook:t.gradebook});t._subviews.push(n),e("#students-header tr").append(n.render())});break;case"student":e("#students").html(""),e("#students-pinned").html(""),e("#students-header tr").html(this.studentHeader),i.each(this.gradebook.sort_column.models,function(i){var o=new n({model:i,course:t.course,gradebook:t.gradebook,options:t.options});t._subviews.push(o),e("#students").append(o.render("pinned",t.gradebook.assignments))}),i.each(this.gradebook.sort_column.models,function(i){var o=new n({model:i,course:t.course,gradebook:t.gradebook,options:t.options});t._subviews.push(o),e("#students-pinned").append(o.render("static",t.gradebook.assignments))});var a=t.gradebook.assignments;a=i.sortBy(a.models,function(e){return e.get("assign_order")}),i.each(a,function(i){var n=new o({model:i,course:t.course,gradebook:t.gradebook});t._subviews.push(n),e("#students-header tr").append(n.render())})}return this.filterAssignments(),0===this.scrollSize&&(this.scrollSize=this.$el.find("#an-gradebook-container").width(),this.gradebook.sort_key="student",this.gradebook.students.sort_key="last_name",this.gradebook.students.sort_direction="desc",this.gradebook.students.sort(),this.render(),this.scrollObj=e(".table-wrapper .scrollable").bind("jsp-initialised",this.calculateScrollBarPosition).jScrollPane(),e('[data-toggle="tooltip"]').tooltip(),new ResizeSensor(jQuery("#an-gradebook-container"),function(){t.handleTableResize()})),this},filterAssignments:function(){if("instructor"!==this.gradebook.role)return!1;var t=e("#filter-assignments-select").val();this.filter_option=t;var n=this.gradebook.assignments.filter(function(e){return e.get("assign_category")!==t}),o=this.gradebook.assignments.filter(function(e){return e.get("assign_category")===t});if("default"===t?this.gradebook.assignments.each(function(e){e.set({visibility:!0})}):(i.each(n,function(e){e.set({visibility:!1})}),i.each(o,function(e){e.set({visibility:!0})})),void 0!==this.scrollObj.data){var a=this.scrollObj.data("jsp");void 0!==a&&a.reinitialise()}},adjustCellWidths:function(){var t=e(".pinned .table"),i=t.find(".adjust-widths");if(i.lenght<1)return!1;var n=t.width();i.each(function(){var t=e(this),i=t.data("targetwidth"),o=i/n*100;t.css({width:o+"%"})})},calculateScrollBarPosition:function(t,i){var n=e("#an-gradebook-container"),o=n.closest(".jspContainer");if(e("#an-gradebook-container").css("width","auto"),n.height()<500){o.css({"padding-bottom":"500px"}),o.find(".jspHorizontalBar").css({bottom:"500px"})}var a={height:o.height()};o.css({height:a.height+29+"px"});var r=e("#an-gradebook-container").offset();o.find(".jspHorizontalBar").css({position:"fixed",left:r.left-16+"px"});new Waypoint({element:document.getElementById("an-gradebook-container"),handler:function(e){var t=o.find(".jspHorizontalBar");"up"===e?t.css({position:"fixed",left:r.left-16+"px"}):t.css({position:"absolute",left:"-16px"})},offset:"bottom-in-view"})},addAssignment:function(t){if(e("body").find("#modalDialogEditAssignment").length)return!1;new r({course:this.course,gradebook:this.gradebook})},addStudent:function(t){if(e("body").find("#modalDialogEditStudent").length)return!1;var i=new a({course:this.course,gradebook:this.gradebook});e("body").append(i.render())},downloadCSV:function(e){e.preventDefault(),this.course.export2csv()},uploadModal:function(t){if(e("body").find("#modalDialogUpload").length)return!1;var i=new s({course:this.course,gradebook:this.gradebook,model:this.model});e("body").append(i.render())},checkStudentSortDirection:function(){"asc"===this.gradebook.students.sort_direction?this.gradebook.students.sort_direction="desc":this.gradebook.students.sort_direction="asc"},sortGradebookBy:function(t){t.stopPropagation();var i=e(t.target),n=i.closest("th");"TH"===t.target.nodeName&&(n=i);var o=n.find(".tooltip-wrapper"),a=o.data("target"),r=n.find(".header-wrapper"),s=r.attr("class"),l="sort-up";-1!==s.indexOf("sort-up")&&(l="sort-down"),this.gradebook.sort_key="student",this.gradebook.students.sort_key=a,this.checkStudentSortDirection(),this.gradebook.students.sort(),this.render(),e(".header-wrapper").removeClass("sort-up sort-down"),e(".gradebook-student-column-"+a).find(".header-wrapper").addClass(l)},sortByAssignment:function(e){var t=this.gradebook.cells.where({amid:parseInt(e.get("id"))});this.sort_column=i.sortBy(t,function(t){return"asc"===e.get("sorted")?t.get("assign_points_earned"):-1*t.get("assign_points_earned")}),this.gradebook.sort_key="cell",this.render()},handleDelete:function(e){this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden")},close:function(){this.clearSubViews(),i.map(this.xhrs,function(e){e.abort()}),this.remove()},getTotalWeight:function(){var e=this,t=0;i.each(e.gradebook.assignments.models,function(e){t+=parseFloat(e.get("assign_weight"))});var n="";return t>=100?n+="<strong>Percentage of Total Grade:</strong> "+t+"% of the total grade has been designated. Any assignments that do not have a set percentage will not be included in the average calculation.":t<100&&(n+="<strong>Percentage of Total Grade:</strong> "+t+"% of the total grade has been designated. The rest of the grade average will be calculated evenly."),"instructor"===e.gradebook.role&&(n+=" Percentages can be edited in the dropdown menus."),n},updateAverageGrade:function(t){var n=parseInt(t.uid),o=e("#average"+n);o.html(t.current_grade_average);var a=0;i.each(this.gradebook.students.models,function(e){parseInt(e.get("id"))===n&&e.set({current_grade_average:t.current_grade_average},{silent:!0}),a++}),o.attr("title",t.current_grade_average).tooltip("fixTitle")}})}),define("models/CourseList",["backbone","models/Course"],function(e,t){return e.Collection.extend({model:t,fetchCourses:function(){var e=this;return new Promise(function(t,i){e.url()?e.fetch({success:function(){t(e)}}):(e.set([{id:1,name:"Blah",school:"Blah",semester:"Blah",year:2010},{id:2,name:"Calc I",school:"BCC",semester:"Fall",year:2015}]),t(e))})},url:function(){return ajaxurl+"?action=course_list"},sort_key:"year",comparator:function(e,t){var i=e.get(this.sort_key),n=t.get(this.sort_key);return"year"!=this.sort_key&&"id"!=this.sort_key?"asc"===this.sort_direction?n.localeCompare(i):i.localeCompare(n):"asc"===this.sort_direction?n-i:i-n},parse:function(e){return this.gbRole=e.role,e.course_list}})}),define("models/AssignmentList",["backbone","models/Assignment"],function(e,t){return e.Collection.extend({model:t})}),define("models/Cell",["backbone"],function(e){return e.Model.extend({defaults:{uid:null,username:null,gbid:null,assign_order:null,amid:null,assign_points_earned:0,selected:!1,hover:!1,visibility:!0,display:!1,comments:null,commentsUpdate:!1},url:function(){return this.get("id")?ajaxurl+"?action=cell&id="+this.get("id"):ajaxurl+"?action=cell"}})}),define("models/CellList",["backbone","models/Cell"],function(e,t){return e.Collection.extend({model:t})}),define("models/CourseGradebook",["backbone","models/AssignmentList","models/UserList","models/CellList"],function(e,t,i,n){return e.Model.extend({fetchCourseGradebook:function(){var e=this;return new Promise(function(t,i){e.url()?e.fetch({success:function(){t(e)}}):(e.set(e.parse({assignments:[{id:1,gbid:1,assign_order:1,assign_name:"Cal",assign_category:"HW",assign_visibility:"Students",assign_date:"2015-11-11",assign_due:"2015-11-25"}],cells:[{id:1,uid:2,gbid:1,amid:1,assign_order:1,assign_points_earned:100}],students:[{first_name:"Aori",last_name:"Nevo",user_login:"anevo",id:2,gbid:1}],role:"instructor"})),t(e))})},url:function(){return ajaxurl+"?action=gradebook&gbid="+parseInt(this.get("gbid"))},sort_key:"student",parse:function(e){return this.assignments=new t(e.assignments),this.cells=new n(e.cells),this.students=new i(e.students),this.sort_column=this.students,this.role=e.role,e}})}),define("router/GradeBookRouter",["jquery","underscore","backbone","views/CourseListView","views/GradeBookView","models/CourseList","models/Course","models/CourseGradebook"],function(e,t,i,n,o,a,r,s){return i.emulateHTTP=!0,i.Router.extend({initialize:function(){return this._views=[],this.courseList=new a,i.history.start(),this},routes:{courses:"courses","gradebook/:id":"show-gradebook"},initPage:function(){e("#wpcontent").css("padding-left","0px")},clearViews:function(){var e=this;this.initPage(),t.each(e._views,function(e){e.close()}),this._views=[]},courses:function(){var t=this;this.clearViews(),e("#wpbody-content").prepend(e("#ajax-template").html()),this.courseList.fetchCourses().then(function(i){e(".ajax-loader-container").remove();var o=new n({collection:t.courseList});t._views.push(o)})},"show-gradebook":function(t){var i=this;this.clearViews(),this.course=new r({id:parseInt(t)}),this.gradebook=new s({gbid:parseInt(t)}),e("#wpbody-content").prepend(e("#ajax-template").html()),Promise.all([this.course.fetchCourse(),this.gradebook.fetchCourseGradebook()]).then(function(t){e(".ajax-loader-container").remove();var n=new o({gradebook:i.gradebook,course:i.course});i._views.push(n)})}})}),oplbgb_require_config={paths:{models:"app/models",views:"app/views",router:"app/router",jquery:oplbGradebook.depLocations.jquery,"jquery-ui":oplbGradebook.depLocations.jqueryui,backbone:oplbGradebook.depLocations.backbone,underscore:oplbGradebook.depLocations.underscore,bootstrap:"lib/bootstrap/js/bootstrap.min",chart:"lib/chart/Chart.min","bootstrap3-typeahead":"lib/bootstrap3-typeahead/bootstrap3-typeahead.min",jscrollpane:"lib/jscrollpane/jscrollpane.dist",bootstrapfileinput:"lib/bootstrap-fileinput/bootstrap-fileinput.dist",waypoints:"lib/bootstrap-fileinput/bootstrap-fileinput.dist.js",csselementqueries:"lib/css-element-queries/css.element.queries.dist"},shim:{bootstrap:{deps:["jquery"]}}},require.config(oplbgb_require_config),define("jquery",[],function(){return jQuery}),define("jquery-ui",[],function(){return jQuery}),define("backbone",[],function(){return Backbone}),define("underscore",[],function(){return _}),window.oplbGlobals=window.oplbGlobals||{},window.oplbGlobals.total_weight=0;var oldBackboneSync=Backbone.sync,savingStatus;Backbone.sync=function(e,t,i){return savingStatus=jQuery("#savingStatus"),savingStatus.length&&savingStatus.removeClass("hidden"),i.url=t.url()+"&nonce="+oplbGradebook.nonce,oldBackboneSync.apply(this,[e,t,i])};var currentSync=Backbone.sync,loggingSync=function(e,t,i){var n=currentSync(e,t,i);return savingStatus=jQuery("#savingStatus"),n.done(function(){savingStatus.length&&savingStatus.addClass("hidden")}),n.fail(function(){savingStatus.length&&savingStatus.addClass("hidden")}),n};Backbone.sync=loggingSync,require(["jquery","router/GradeBookRouter","bootstrap"],function(e,t,i){e.fn.serializeObject=function(){var t={},i=this.serializeArray();return e.each(i,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t};new t}),define("oplb-gradebook-app",function(){});