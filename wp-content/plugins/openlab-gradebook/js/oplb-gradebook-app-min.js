/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=4fa65a685c8626c7304a)
 * Config saved to config.json and https://gist.github.com/4fa65a685c8626c7304a
 */

/*!
 * Chart.js v2.8.0
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */

if(define("models/User",["backbone","jquery"],function(t,e){return t.Model.extend({defaults:{first_name:"john",last_name:"doe",selected:!1,user_login:null},url:function(){return this.get("id")?ajaxurl+"?action=oplb_user&id="+this.get("id")+"&gbid="+this.get("gbid"):ajaxurl+"?action=oplb_user"},updateStudentGrade:function(i,n,o,a){var r=this;e.post(ajaxurl+"?action=oplb_student_grades&nonce="+oplbGradebook.nonce,{grade:i,type:n,gbid:a,uid:o},function(e){t.pubSub.trigger("editSuccess",e)},"json").error(r.trigger("editError"))}})}),define("models/Course",["backbone"],function(t){return t.Model.extend({defaults:{name:"Needs Name",school:"",semester:"",year:oplbGradebook.currentYear},fetchCourse:function(){var t=this;return new Promise(function(e,i){t.url()?t.fetch({success:function(){e(t)}}):(t.set(t.parse({id:"1",name:"Calculus I",school:"Bergen Community College",semester:"Fall",year:"2010"})),e(t))})},parse:function(t){return t.id=parseInt(t.id),t.year=parseInt(t.year),t},url:function(){return this.get("id")?ajaxurl+"?action=course&gbid="+this.get("id"):ajaxurl+"?action=course"},export2csv:function(){window.location.assign(ajaxurl+"?action=get_csv&nonce="+oplbGradebook.nonce+"&gbid="+this.get("id"))}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var r=t(a);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),a="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,a)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",a=n.data();e+="Text",null==a.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:a.slide;o||n.data("bs.carousel",o=new i(this,a)),"number"==typeof e?o.to(e):r?o[r]():a.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n="prev"==t?-1:1,o=(i+n)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),a=n||this.getItemForDirection(e,o),r=this.interval,s="next"==e?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var d=a[0],u=t.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(a)]);h&&h.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([e,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(c)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),a=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var r=t.extend({},a.data(),o.data()),s=o.attr("data-slide-to");s&&(r.interval=!1),e.call(a,r),s&&a.data("bs.carousel").to(s),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(a).each(function(){var n=t(this),o=e(n),a={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.5",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var a=e(o),r=a.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var s={relatedTarget:this};if(a.trigger(n=t.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),r=o.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&o.find(a).trigger("focus"),n.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,r.prototype.toggle).on("keydown.bs.dropdown.data-api",a,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),a=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);a||o.data("bs.modal",a=new i(this,r)),"string"==typeof e?a[e](n):r.show&&a.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),a=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},a.data(),n.data());n.is("a")&&i.preventDefault(),a.one("show.bs.modal",function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(a,r,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.tooltip",o=new i(this,a)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,a=this.tip(),r=this.getUID(this.type);this.setContent(),a.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),h=a[0].offsetWidth,c=a[0].offsetHeight;if(d){var f=s,g=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+c>g.bottom?"top":"top"==s&&u.top-c<g.top?"bottom":"right"==s&&u.right+h>g.width?"left":"left"==s&&u.left-h<g.left?"right":s,a.removeClass(f).addClass(s)}var p=this.getCalculatedOffset(s,u,h,c);this.applyPlacement(p,s);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,a=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top+=r,e.left+=s,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=a&&(e.top=e.top+a-d);var u=this.getViewportAdjustedDelta(i,e,l,d);u.left?e.left+=u.left:e.top+=u.top;var h=/top|bottom/.test(i),c=h?2*u.left-o+l:2*u.top-a+d,f=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(c,n[0][f],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&a.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,a=t(this.$tip),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=n?{top:0,left:0}:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,s,a)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-r.scroll,l=e.top+a-r.scroll+n;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var d=e.left-a,u=e.left+a+i;d<r.left?o.left=r.left-d:u>r.right&&(o.left=r.left+r.width-u)}return o},i.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},i.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.popover",o=new i(this,a)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),a=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),e.trigger(r),!r.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=t(n);this.activate(e.closest("li"),i),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(i.TRANSITION_DURATION):a(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),a="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,a)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=a.top)&&"bottom":!(t-n>=o+r)&&"bottom";var s=null==this.affixed,l=s?o:a.top,d=s?r:e;return null!=i&&i>=o?"top":null!=n&&l+d>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,a=n.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(a=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var s=this.getState(r,e,o,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=t.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-e-a})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),o||i.data("bs.collapse",o=new n(this,a)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,
this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var a=t.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var a=e(o),r=a.data("bs.collapse"),s=r?"toggle":o.data();i.call(a,s)})}(jQuery),function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),a="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,a)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),a=/^#./.test(o)&&t(o);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=a[a.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=a[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(a[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("bootstrap",["jquery"],function(){}),define("views/EditCourseView",["jquery","backbone","underscore","models/User","models/Course","bootstrap"],function(t,e,i,n,o){return EditCourseView=e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel",keyup:"keyPressHandler","click #edit-course-save":"submitForm","submit #edit-course-form":"editSave"},initialize:function(e){return this.course=this.model||null,this.initvals={},e.isInit?(this.initvals.name=oplbGradebook.initName,this.initvals.goInit=!0):(this.initvals.name=!1,this.initvals.goInit=!1),this.courseList=this.collection,t("body").append(this.render().el),this},render:function(){var e=this,n=i.template(t("#edit-course-template").html()),o=n({course:this.course,initvals:this.initvals});return e.$el.html(o),this.$el.modal("show"),i.defer(function(){this.inputName=e.$('input[name="name"]');inputName.val().length}),this},keyPressHandler:function(t){var e=this;switch(t.keyCode){case 27:e.$el.modal("hide");break;case 13:e.submitForm()}return this},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#edit-course-form").submit()},editSave:function(e){var i=this,a=t(e.currentTarget).serializeObject();if(this.course)this.model.save(a,{wait:!0}),this.$el.modal("hide");else{delete a.id;new o(a).save(a,{success:function(t){var e=(new n(t.get("user")),new o(t.get("course")));i.courseList.add(e),i.$el.modal("hide")}})}return!1}}),EditCourseView}),define("views/DeleteGradebookView",["jquery","backbone","underscore"],function(t,e,i){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-gradebook-delete":"submitForm","submit #delete-gradebook-form":"deleteSave"},initialize:function(e){return this.gradebook=e.gradebook,this.course=e.course,t("body").append(this.render().el),this},render:function(){if(this.course){var e=i.template(t("#delete-gradebook-template").html()),n=e({course:this.course});this.$el.html(n)}return this.$el.modal("show"),this},keyPressHandler:function(t){return 27==t.keyCode&&this.deleteCancel(),13==t.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#delete-gradebook-form").submit()},deleteSave:function(t){t.preventDefault(),this.model.set({selected:!1}),this.model.destroy()}})}),define("views/CourseView",["jquery","backbone","underscore","views/EditCourseView","views/DeleteGradebookView"],function(t,e,i,n,o){return e.View.extend({initialize:function(t){this.options=t.options,this.course=this.model,this.courseList=this.collection,this.listenTo(this.model,"change",this.render)},tagName:"tr",events:{"click li.course-submenu-delete":"deleteCourse","click li.course-submenu-export2csv":"exportToCSV","click li.course-submenu-edit":"editCourse"},exportToCSV:function(t){t.preventDefault(),this.model.export2csv()},deleteCourse:function(t){t.preventDefault();new o({model:this.model,gradebook:this.gradebook,course:this.course})},editCourse:function(){new n({model:this.course,collection:this.courseList,options:this.options});return!1},render:function(){var e=i.template(t("#course-view-template").html()),n=e({course:this.course});return this.$el.html(n)},close:function(){this.remove()}})}),define("views/CourseListView",["jquery","backbone","underscore","views/EditCourseView","views/CourseView"],function(t,e,i,n,o){return e.View.extend({initialize:function(){var t=this;this._subviews=[],this.courseList=this.collection,this.listenTo(t.courseList,"add",t.render),this.listenTo(t.courseList,"remove",t.render),this.render()},loadingData:function(){},events:{"click a#add-course":"editCourse","click [class^=course-column-]":"sortCourseList"},checkStudentSortDirection:function(){"asc"===this.courseList.sort_direction?this.courseList.sort_direction="desc":this.courseList.sort_direction="asc"},sortCourseList:function(t){var e=t.target.className.replace("course-column-","");this.courseList.sort_key=e,this.checkStudentSortDirection(),this.courseList.sort(),this.render()},clearSubViews:function(){var t=this;i.each(t._subviews,function(t){t.close()}),this._subviews=[]},render:function(){var e=this,n=i.template(t("#course-list-template").html()),a=n({});return t("#wpbody-content").prepend(this.$el.html(a)),e.courseList.models.length?i.each(e.courseList.models,function(i){var n=new o({model:i,collection:e.courseList});t(".angb-course-list-tbody").append(n.render())}):"instructor"===e.courseList.gbRole&&this.editCourse(!0),this},editCourse:function(t){void 0===t&&(t=!1);new n({collection:this.courseList,isInit:t});return!1},addCourse:function(e){var i=new o({model:e,collection:this.courseList,options:this.options});t("#courses").append(i.render().el)},close:function(){this.clearSubViews(),this.remove()}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define("chart",["require"],function(t){return e(function(){try{return t("moment")}catch(t){}}())}):t.Chart=e(t.moment)}(this,function(t){"use strict";function e(t){var e,i,n=t[0]/255,o=t[1]/255,a=t[2]/255,r=Math.min(n,o,a),s=Math.max(n,o,a),l=s-r;return s==r?e=0:n==s?e=(o-a)/l:o==s?e=2+(a-n)/l:a==s&&(e=4+(n-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(r+s)/2,[e,100*(s==r?0:i<=.5?l/(s+r):l/(2-s-r)),100*i]}function i(t){var e,i,n=t[0],o=t[1],a=t[2],r=Math.min(n,o,a),s=Math.max(n,o,a),l=s-r;return i=0==s?0:l/s*1e3/10,s==r?e=0:n==s?e=(o-a)/l:o==s?e=2+(a-n)/l:a==s&&(e=4+(n-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,s/255*1e3/10]}function n(t){var i=t[0],n=t[1],o=t[2];return[e(t)[0],1/255*Math.min(i,Math.min(n,o))*100,100*(o=1-1/255*Math.max(i,Math.max(n,o)))]}function o(t){var e,i=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]}function a(t){return Et[JSON.stringify(t)]}function s(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]}function l(t){var e=s(t),i=e[0],n=e[1],o=e[2];return n/=100,o/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]}function d(t){var e,i,n,o,a,r=t[0]/360,s=t[1]/100,l=t[2]/100;if(0==s)return[a=255*l,a,a];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var d=0;d<3;d++)(n=r+1/3*-(d-1))<0&&n++,n>1&&n--,a=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,o[d]=255*a;return o}function u(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,a=e-Math.floor(e),r=255*n*(1-i),s=255*n*(1-i*a),l=255*n*(1-i*(1-a));switch(n*=255,o){case 0:return[n,l,r];case 1:return[s,n,r];case 2:return[r,n,l];case 3:return[r,s,n];case 4:return[l,r,n];case 5:return[n,r,s]}}function h(t){var e,i,n,o,a=t[0]/360,s=t[1]/100,l=t[2]/100,d=s+l;switch(d>1&&(s/=d,l/=d),n=6*a-(e=Math.floor(6*a)),0!=(1&e)&&(n=1-n),o=s+n*((i=1-l)-s),e){default:case 6:case 0:r=i,g=o,b=s;break;case 1:r=o,g=i,b=s;break;case 2:r=s,g=i,b=o;break;case 3:r=s,g=o,b=i;break;case 4:r=o,g=s,b=i;break;case 5:r=i,g=s,b=o}return[255*r,255*g,255*b]}function c(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]}function f(t){var e,i,n,o=t[0]/100,a=t[1]/100,r=t[2]/100;return i=-.9689*o+1.8758*a+.0415*r,n=.0557*o+-.204*a+1.057*r,e=(e=3.2406*o+-1.5372*a+-.4986*r)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function p(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function m(t){var e,i,n,o,a=t[0],r=t[1],s=t[2];return a<=8?o=(i=100*a/903.3)/100*7.787+16/116:(i=100*Math.pow((a+16)/116,3),o=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(r/500+o-16/116)/7.787:95.047*Math.pow(r/500+o,3),i,n=n/108.883<=.008859?n=108.883*(o-s/200-16/116)/7.787:108.883*Math.pow(o-s/200,3)]}function v(t){var e,i=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+o*o),e]}function y(t){return f(m(t))}function x(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]}function k(t){return Nt[t]}function w(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3,4})$/i),o="";if(n){o=(n=n[1])[3];for(var a=0;a<e.length;a++)e[a]=parseInt(n[a]+n[a],16);o&&(i=Math.round(parseInt(o+o,16)/255*100)/100)}else if(n=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(o=n[2],n=n[1],a=0;a<e.length;a++)e[a]=parseInt(n.slice(2*a,2*a+2),16);o&&(i=Math.round(parseInt(o,16)/255*100)/100)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(n[a+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(n[a+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=Gt[n[1]]))return}for(a=0;a<e.length;a++)e[a]=A(e[a],0,255);return i=i||0==i?A(i,0,1):1,e[3]=i,e}}function _(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[A(parseInt(e[1]),0,360),A(parseFloat(e[2]),0,100),A(parseFloat(e[3]),0,100),A(isNaN(i)?1:i,0,1)]}}}function C(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[A(parseInt(e[1]),0,360),A(parseFloat(e[2]),0,100),A(parseFloat(e[3]),0,100),A(isNaN(i)?1:i,0,1)]}}}function S(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function M(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function T(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function A(t,e,i){return Math.min(Math.max(e,t),i)}function I(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}function D(t,e){var i=t._chartjs;if(i){var n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(Me.forEach(function(e){delete t[e]}),delete t._chartjs)}}function P(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}function $(t){return t&&void 0!==t.width}function F(t){var e,i,n,o,a;return $(t)?(a=t.width/2,e=t.x-a,i=t.x+a,n=Math.min(t.y,t.base),o=Math.max(t.y,t.base)):(a=t.height/2,e=Math.min(t.x,t.base),i=Math.max(t.x,t.base),n=t.y-a,o=t.y+a),{left:e,top:n,right:i,bottom:o}}function L(t,e,i){return t===e?i:t===i?e:t}function O(t,e,i){var n,o,a,r,s=t.borderWidth,l=function(t){var e=t.borderSkipped,i={};return e?(t.horizontal?t.base>t.x&&(e=L(e,"left","right")):t.base<t.y&&(e=L(e,"bottom","top")),i[e]=!0,i):i}(t);return me.isObject(s)?(n=+s.top||0,o=+s.right||0,a=+s.bottom||0,r=+s.left||0):n=o=a=r=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||o<0?0:o>e?e:o,b:l.bottom||a<0?0:a>i?i:a,l:l.left||r<0?0:r>e?e:r}}function R(t,e,i){var n=null===e,o=null===i,a=!(!t||n&&o)&&F(t);return a&&(n||e>=a.left&&e<=a.right)&&(o||i>=a.top&&i<=a.bottom)}function N(t,e){return Ze(t.showLine,e.showLines)}function E(t,e){return t.native?{x:t.x,y:t.y}:me.getRelativePosition(t,e)}function z(t,e){var i,n,o,a,r;for(n=0,a=t.data.datasets.length;n<a;++n)if(t.isDatasetVisible(n))for(o=0,r=(i=t.getDatasetMeta(n)).data.length;o<r;++o){var s=i.data[o];s._view.skip||e(s)}}function V(t,e){var i=[];return z(t,function(t){t.inRange(e.x,e.y)&&i.push(t)}),i}function B(t,e,i,n){var o=Number.POSITIVE_INFINITY,a=[];return z(t,function(t){if(!i||t.inRange(e.x,e.y)){var r=t.getCenterPoint(),s=n(e,r);s<o?(a=[t],o=s):s===o&&a.push(t)}}),a}function W(t){var e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){var o=e?Math.abs(t.x-n.x):0,a=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function j(t,e,i){var n=E(e,t);i.axis=i.axis||"x";var o=W(i.axis),a=i.intersect?V(t,n):B(t,n,!1,o),r=[];return a.length?(t.data.datasets.forEach(function(e,i){if(t.isDatasetVisible(i)){var n=t.getDatasetMeta(i).data[a[0]._index];n&&!n._view.skip&&r.push(n)}}),r):[]}function H(t,e){return me.where(t,function(t){return t.position===e})}function U(t,e){t.forEach(function(t,e){return t._tmpIndex_=e,t}),t.sort(function(t,i){var n=e?i:t,o=e?t:i;return n.weight===o.weight?n._tmpIndex_-o._tmpIndex_:n.weight-o.weight}),t.forEach(function(t){delete t._tmpIndex_})}function q(t,e){me.each(t,function(t){e[t.position]+=t.isHorizontal()?t.height:t.width})}function G(t,e){var i=me.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}function Y(t,e,i){t.addEventListener(e,i,yi)}function Q(t,e,i){t.removeEventListener(e,i,yi)}function K(t,e,i,n,o){return{type:t,chart:e,native:o||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function X(t){var e=document.createElement("div");return e.className=t||"",e}function Z(t,e,i){var n,o,a,r,s=t[fi]||(t[fi]={}),l=s.resizer=function(t){var e=X(gi),i=X(gi+"-expand"),n=X(gi+"-shrink");i.appendChild(X()),n.appendChild(X()),e.appendChild(i),e.appendChild(n),e._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var o=function(){e._reset(),t()};return Y(i,"scroll",o.bind(i,"expand")),Y(n,"scroll",o.bind(n,"shrink")),e}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&t.parentNode,o=n?n.clientWidth:0;e(K("resize",i)),n&&n.clientWidth<o&&i.canvas&&e(K("resize",i))}},a=!1,r=[],function(){r=Array.prototype.slice.call(arguments),o=o||this,a||(a=!0,me.requestAnimFrame.call(window,function(){a=!1,n.apply(o,r)}))}));!function(t,e){var i=t[fi]||(t[fi]={}),n=i.renderProxy=function(t){t.animationName===mi&&e()};me.each(vi,function(e){Y(t,e,n)}),i.reflow=!!t.offsetParent,t.classList.add(pi)}(t,function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}})}function J(t){var e=t[fi]||{},i=e.resizer;delete e.resizer,function(t){var e=t[fi]||{},i=e.renderProxy;i&&(me.each(vi,function(e){Q(t,e,i)}),delete e.renderProxy),t.classList.remove(pi)}(t),i&&i.parentNode&&i.parentNode.removeChild(i)}function tt(t,e){return e&&(me.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function et(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function it(t){var e=fe.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Si(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Si(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Si(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Si(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Si(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Si(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Si(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Si(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Si(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function nt(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function ot(t){return tt([],et(t))}function at(){return me.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var o,a,r,s=i[t].length;for(e[t]||(e[t]=[]),o=0;o<s;++o)r=i[t][o],a=Di(r.type,"xAxes"===t?"category":"linear"),o>=e[t].length&&e[t].push({}),!e[t][o].type||r.type&&r.type!==e[t][o].type?me.merge(e[t][o],[Ci.getScaleDefaults(a),r]):me.merge(e[t][o],r)}else me._merger(t,e,i,n)}})}function rt(){return me.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var o=e[t]||{},a=i[t];"scales"===t?e[t]=at(o,a):"scale"===t?e[t]=me.merge(o,[Ci.getScaleDefaults(a.type),a]):me._merger(t,e,i,n)}})}function st(t){return"top"===t||"bottom"===t}function lt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function dt(t){this.options=t||{}}function ut(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].label);return n}function ht(t,e,i){return me.isArray(e)?me.longestText(t,i,e):t.measureText(e).width}function ct(t,e){return me.isFinite(t)&&t>=0?t:e}function ft(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function gt(t){var e=t.ticks;return e.display&&t.display?Ki(e.fontSize,fe.global.defaultFontSize)+2*e.backdropPaddingY:0}function pt(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function mt(t){return 0===t||180===t?"center":t<180?"left":"right"}function vt(t,e,i,n){var o,a,r=i.y+n/2;if(me.isArray(e))for(o=0,a=e.length;o<a;++o)t.fillText(e[o],i.x,r),r+=n;else t.fillText(e,i.x,r)}function bt(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function yt(t){return me.isNumber(t)?t:0}function xt(t,e){return t-e}function kt(t){var e,i,n,o={},a=[];for(e=0,i=t.length;e<i;++e)o[n=t[e]]||(o[n]=!0,a.push(n));return a}function wt(t,e,i,n){var o=function(t,e,i){for(var n,o,a,r=0,s=t.length-1;r>=0&&r<=s;){if(o=t[(n=r+s>>1)-1]||null,a=t[n],!o)return{lo:null,hi:a};if(a[e]<i)r=n+1;else{if(!(o[e]>i))return{lo:o,hi:a};s=n-1}}return{lo:a,hi:null}}(t,e,i),a=o.lo?o.hi?o.lo:t[t.length-2]:t[0],r=o.lo?o.hi?o.hi:t[t.length-1]:t[1],s=r[e]-a[e],l=s?(i-a[e])/s:0,d=(r[n]-a[n])*l;return a[n]+d}function _t(t,e){var i=t._adapter,n=t.options.time,o=n.parser,a=o||n.format,r=e;return"function"==typeof o&&(r=o(r)),me.isFinite(r)||(r="string"==typeof a?i.parse(r,a):i.parse(r)),null!==r?+r:(o||"function"!=typeof a||(r=a(e),me.isFinite(r)||(r=i.parse(r))),r)}function Ct(t,e){if(me.isNullOrUndef(e))return null;var i=t.options.time,n=_t(t,t.getRightValue(e));return null===n?n:(i.round&&(n=+t._adapter.startOf(n,i.round)),n)}function St(t){for(var e=sn.indexOf(t)+1,i=sn.length;e<i;++e)if(rn[sn[e]].common)return sn[e]}function Mt(t,e,i,n){var o,a=t._adapter,r=t.options,s=r.time,l=s.unit||function(t,e,i,n){var o,a,r,s=sn.length;for(o=sn.indexOf(t);o<s-1;++o)if(r=(a=rn[sn[o]]).steps?a.steps[a.steps.length-1]:an,a.common&&Math.ceil((i-e)/(r*a.size))<=n)return sn[o];return sn[s-1]}(s.minUnit,e,i,n),d=St(l),u=nn(s.stepSize,s.unitStepSize),h="week"===l&&s.isoWeekday,c=r.ticks.major.enabled,f=rn[l],g=e,p=i,m=[];for(u||(u=function(t,e,i,n){var o,a,r,s=e-t,l=rn[i],d=l.size,u=l.steps;if(!u)return Math.ceil(s/(n*d));for(o=0,a=u.length;o<a&&(r=u[o],!(Math.ceil(s/(d*r))<=n));++o);return r}(e,i,l,n)),h&&(g=+a.startOf(g,"isoWeek",h),p=+a.startOf(p,"isoWeek",h)),g=+a.startOf(g,h?"day":l),(p=+a.startOf(p,h?"day":l))<i&&(p=+a.add(p,1,l)),o=g,c&&d&&!h&&!s.round&&(o=+a.startOf(o,d),o=+a.add(o,~~((g-o)/(f.size*u))*u,l));o<p;o=+a.add(o,u,l))m.push(+o);return m.push(+o),m}function Tt(t,e,i){var n,o=t._model||{},a=o.fill;if(void 0===a&&(a=!!o.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(n=parseFloat(a,10),isFinite(n)&&Math.floor(n)===n)return"-"!==a[0]&&"+"!==a[0]||(n=e+n),!(n===e||n<0||n>=i)&&n;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function At(t){var e,i=t.el._model||{},n=t.el._scale||{},o=t.fill,a=null;if(isFinite(o))return null;if("start"===o?a=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===o?a=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?a=i.scaleZero:n.getBasePosition?a=n.getBasePosition():n.getBasePixel&&(a=n.getBasePixel()),null!=a){if(void 0!==a.x&&void 0!==a.y)return a;if(me.isFinite(a))return{x:(e=n.isHorizontal())?a:null,y:e?null:a}}return null}function It(t,e,i){var n,o=t[e].fill,a=[e];if(!i)return o;for(;!1!==o&&-1===a.indexOf(o);){if(!isFinite(o))return o;if(!(n=t[o]))return!1;if(n.visible)return o;a.push(o),o=n.fill}return!1}function Dt(t){var e=t.fill,i="dataset";return!1===e?null:(isFinite(e)||(i="boundary"),cn[i](t))}function Pt(t){return t&&!t.skip}function $t(t,e,i,n,o){var a;if(n&&o){for(t.moveTo(e[0].x,e[0].y),a=1;a<n;++a)me.canvas.lineTo(t,e[a-1],e[a]);for(t.lineTo(i[o-1].x,i[o-1].y),a=o-1;a>0;--a)me.canvas.lineTo(t,i[a],i[a-1],!0)}}function Ft(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}function Lt(t,e){var i=new mn({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e),hi.addBox(t,i),t.legend=i}function Ot(t,e){var i=new yn({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e),hi.addBox(t,i),t.titleBlock=i}t=t&&t.hasOwnProperty("default")?t.default:t;var Rt={rgb2hsl:e,rgb2hsv:i,rgb2hwb:n,rgb2cmyk:o,rgb2keyword:a,rgb2xyz:s,rgb2lab:l,rgb2lch:function(t){return v(l(t))},hsl2rgb:d,hsl2hsv:function(t){var e=t[0],i=t[1]/100,n=t[2]/100;return 0===n?[0,0,0]:[e,2*(i*=(n*=2)<=1?n:2-n)/(n+i)*100,(n+i)/2*100]},hsl2hwb:function(t){return n(d(t))},hsl2cmyk:function(t){return o(d(t))},hsl2keyword:function(t){return a(d(t))},hsv2rgb:u,hsv2hsl:function(t){var e,i,n=t[0],o=t[1]/100,a=t[2]/100;return e=o*a,[n,100*(e=(e/=(i=(2-o)*a)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(t){return n(u(t))},hsv2cmyk:function(t){return o(u(t))},hsv2keyword:function(t){return a(u(t))},hwb2rgb:h,hwb2hsl:function(t){return e(h(t))},hwb2hsv:function(t){return i(h(t))},hwb2cmyk:function(t){return o(h(t))},hwb2keyword:function(t){return a(h(t))},cmyk2rgb:c,cmyk2hsl:function(t){return e(c(t))},cmyk2hsv:function(t){return i(c(t))},cmyk2hwb:function(t){return n(c(t))},cmyk2keyword:function(t){return a(c(t))},keyword2rgb:k,keyword2hsl:function(t){return e(k(t))},keyword2hsv:function(t){return i(k(t))},keyword2hwb:function(t){return n(k(t))},keyword2cmyk:function(t){return o(k(t))},keyword2lab:function(t){return l(k(t))},keyword2xyz:function(t){return s(k(t))},xyz2rgb:f,xyz2lab:p,xyz2lch:function(t){return v(p(t))},lab2xyz:m,lab2rgb:y,lab2lch:v,lch2lab:x,lch2xyz:function(t){return m(x(t))},lch2rgb:function(t){return y(x(t))}},Nt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],
springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Et={};for(var zt in Nt)Et[JSON.stringify(Nt[zt])]=zt;var Vt=function(){return new Ut};for(var Bt in Rt){Vt[Bt+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),Rt[t](e)}}(Bt);var Wt=/(\w+)2(\w+)/.exec(Bt),jt=Wt[1],Ht=Wt[2];(Vt[jt]=Vt[jt]||{})[Ht]=Vt[Bt]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var i=Rt[t](e);if("string"==typeof i||void 0===i)return i;for(var n=0;n<i.length;n++)i[n]=Math.round(i[n]);return i}}(Bt)}var Ut=function(){this.convs={}};Ut.prototype.routeSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))},Ut.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},Ut.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,n=this.convs[i];e=Vt[i][t](n),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){Ut.prototype[t]=function(e){return this.routeSpace(t,arguments)}});var qt=Vt,Gt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yt={getRgba:w,getHsla:_,getRgb:function(t){var e=w(t);return e&&e.slice(0,3)},getHsl:function(t){var e=_(t);return e&&e.slice(0,3)},getHwb:C,getAlpha:function(t){var e=w(t);return e?e[3]:(e=_(t))?e[3]:(e=C(t))?e[3]:void 0},hexString:function(t,e){var e=void 0!==e&&3===t.length?e:t[3];return"#"+I(t[0])+I(t[1])+I(t[2])+(e>=0&&e<1?I(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?S(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:S,percentString:function(t,e){return e<1||t[3]&&t[3]<1?M(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:M,hslString:function(t,e){return e<1||t[3]&&t[3]<1?T(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:T,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return Qt[t.slice(0,3)]}},Qt={};for(var Kt in Gt)Qt[Gt[Kt]]=Kt;var Xt=function(t){return t instanceof Xt?t:this instanceof Xt?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=Yt.getRgba(t))?this.setValues("rgb",e):(e=Yt.getHsla(t))?this.setValues("hsl",e):(e=Yt.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new Xt(t);var e};Xt.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return Yt.hexString(this.values.rgb)},rgbString:function(){return Yt.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Yt.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Yt.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Yt.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Yt.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Yt.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Yt.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=t,n=void 0===e?.5:e,o=2*n-1,a=this.alpha()-i.alpha(),r=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,s=1-r;return this.rgb(r*this.red()+s*i.red(),r*this.green()+s*i.green(),r*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new Xt,n=this.values,o=i.values;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],"[object Array]"===(e={}.toString.call(t))?o[a]=t.slice(0):"[object Number]"===e?o[a]=t:console.error("unexpected color value:",t));return i}},Xt.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Xt.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Xt.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},Xt.prototype.setValues=function(t,e){var i,n,o=this.values,a=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)o[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)o[t][i]=e[t.charAt(i)];s=e.a}else if(void 0!==e[a[t][0]]){var l=a[t];for(i=0;i<t.length;i++)o[t][i]=e[l[i]];s=e.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===s?o.alpha:s)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(r[t][i],o[t][i])),o[t][i]=Math.round(n);for(var d in a)d!==t&&(o[d]=qt[t][d](o[t]));return!0},Xt.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},Xt.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:i===n[e]?this:(n[e]=i,this.setValues(t,n),this)},"undefined"!=typeof window&&(window.Color=Xt);var Zt,Jt=Xt,te={noop:function(){},uid:(Zt=0,function(){return Zt++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,i){return te.valueOrDefault(te.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var o,a,r;if(te.isArray(t))if(a=t.length,n)for(o=a-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<a;o++)e.call(i,t[o],o);else if(te.isObject(t))for(a=(r=Object.keys(t)).length,o=0;o<a;o++)e.call(i,t[r[o]],r[o])},arrayEquals:function(t,e){var i,n,o,a;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],a=e[i],o instanceof Array&&a instanceof Array){if(!te.arrayEquals(o,a))return!1}else if(o!==a)return!1;return!0},clone:function(t){if(te.isArray(t))return t.map(te.clone);if(te.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,o=0;o<n;++o)e[i[o]]=te.clone(t[i[o]]);return e}return t},_merger:function(t,e,i,n){var o=e[t],a=i[t];te.isObject(o)&&te.isObject(a)?te.merge(o,a,n):e[t]=te.clone(a)},_mergerIf:function(t,e,i){var n=e[t],o=i[t];te.isObject(n)&&te.isObject(o)?te.mergeIf(n,o):e.hasOwnProperty(t)||(e[t]=te.clone(o))},merge:function(t,e,i){var n,o,a,r,s,l=te.isArray(e)?e:[e],d=l.length;if(!te.isObject(t))return t;for(n=(i=i||{}).merger||te._merger,o=0;o<d;++o)if(e=l[o],te.isObject(e))for(s=0,r=(a=Object.keys(e)).length;s<r;++s)n(a[s],t,e,i);return t},mergeIf:function(t,e){return te.merge(t,e,{merger:te._mergerIf})},extend:function(t){for(var e=function(e,i){t[i]=e},i=1,n=arguments.length;i<n;++i)te.each(arguments[i],e);return t},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=te.inherits,t&&te.extend(i.prototype,t),i.__super__=e.prototype,i}},ee=te;te.callCallback=te.callback,te.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},te.getValueOrDefault=te.valueOrDefault,te.getValueAtIndexOrDefault=te.valueAtIndexOrDefault;var ie={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-ie.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*ie.easeInBounce(2*t):.5*ie.easeOutBounce(2*t-1)+.5}},ne={effects:ie};ee.easingEffects=ie;var oe=Math.PI,ae=oe/180,re=2*oe,se=oe/2,le=oe/4,de=2*oe/3,ue={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,o,a){if(a){var r=Math.min(a,o/2,n/2),s=e+r,l=i+r,d=e+n-r,u=i+o-r;t.moveTo(e,l),s<d&&l<u?(t.arc(s,l,r,-oe,-se),t.arc(d,l,r,-se,0),t.arc(d,u,r,0,se),t.arc(s,u,r,se,oe)):s<d?(t.moveTo(s,i),t.arc(d,l,r,-se,se),t.arc(s,l,r,se,oe+se)):l<u?(t.arc(s,l,r,-oe,0),t.arc(s,u,r,0,oe)):t.arc(s,l,r,-oe,oe),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,o)},drawPoint:function(t,e,i,n,o,a){var r,s,l,d,u,h=(a||0)*ae;if(!e||"object"!=typeof e||"[object HTMLImageElement]"!==(r=e.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(i)||i<=0)){switch(t.beginPath(),e){default:t.arc(n,o,i,0,re),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=de,t.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=de,t.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),t.closePath();break;case"rectRounded":d=i-(u=.516*i),s=Math.cos(h+le)*d,l=Math.sin(h+le)*d,t.arc(n-s,o-l,u,h-oe,h-se),t.arc(n+l,o-s,u,h-se,h),t.arc(n+s,o+l,u,h,h+se),t.arc(n-l,o+s,u,h+se,h+oe),t.closePath();break;case"rect":if(!a){d=Math.SQRT1_2*i,t.rect(n-d,o-d,2*d,2*d);break}h+=le;case"rectRot":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+l,o-s),t.lineTo(n+s,o+l),t.lineTo(n-l,o+s),t.closePath();break;case"crossRot":h+=le;case"cross":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"star":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s),h+=le,s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"line":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l);break;case"dash":t.moveTo(n,o),t.lineTo(n+Math.cos(h)*i,o+Math.sin(h)*i)}t.fill(),t.stroke()}}else t.drawImage(e,n-e.width/2,o-e.height/2,e.width,e.height)},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var o=i.steppedLine;if(o){if("middle"===o){var a=(e.x+i.x)/2;t.lineTo(a,n?i.y:e.y),t.lineTo(a,n?e.y:i.y)}else"after"===o&&!n||"after"!==o&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}else i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}},he=ue;ee.clear=ue.clear,ee.drawRoundedRectangle=function(t){t.beginPath(),ue.roundedRect.apply(ue,arguments)};var ce={_set:function(t,e){return ee.merge(this[t]||(this[t]={}),e)}};ce._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var fe=ce,ge=ee.valueOrDefault,pe={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,o;return ee.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,o=+t.left||0):e=i=n=o=+t||0,{top:e,right:i,bottom:n,left:o,height:e+n,width:o+i}},_parseFont:function(t){var e=fe.global,i=ge(t.fontSize,e.defaultFontSize),n={family:ge(t.fontFamily,e.defaultFontFamily),lineHeight:ee.options.toLineHeight(ge(t.lineHeight,e.defaultLineHeight),i),size:i,style:ge(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=function(t){return!t||ee.isNullOrUndef(t.size)||ee.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n},resolve:function(t,e,i){var n,o,a;for(n=0,o=t.length;n<o;++n)if(void 0!==(a=t[n])&&(void 0!==e&&"function"==typeof a&&(a=a(e)),void 0!==i&&ee.isArray(a)&&(a=a[i]),void 0!==a))return a}},me=ee,ve=ne,be=he,ye=pe;me.easing=ve,me.canvas=be,me.options=ye;var xe=function(t){me.extend(this,t),this.initialize.apply(this,arguments)};me.extend(xe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=me.clone(t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,o=e._view;return i&&1!==t?(o||(o=e._view={}),n||(n=e._start={}),function(t,e,i,n){var o,a,r,s,l,d,u,h,c,f=Object.keys(i);for(o=0,a=f.length;o<a;++o)if(d=i[r=f[o]],e.hasOwnProperty(r)||(e[r]=d),(s=e[r])!==d&&"_"!==r[0]){if(t.hasOwnProperty(r)||(t[r]=s),(u=typeof d)==typeof(l=t[r]))if("string"===u){if((h=Jt(l)).valid&&(c=Jt(d)).valid){e[r]=c.mix(h,n).rgbString();continue}}else if(me.isFinite(l)&&me.isFinite(d)){e[r]=l+(d-l)*n;continue}e[r]=d}}(n,o,i,t),e):(e._view=i,e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return me.isNumber(this._model.x)&&me.isNumber(this._model.y)}}),xe.extend=me.inherits;var ke=xe,we=ke.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),_e=we;Object.defineProperty(we.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(we.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),fe._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:me.noop,onComplete:me.noop}});var Ce={animations:[],request:null,addAnimation:function(t,e,i,n){var o,a,r=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=i,n||(t.animating=!0),o=0,a=r.length;o<a;++o)if(r[o].chart===t)return void(r[o]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=me.findIndex(this.animations,function(e){return e.chart===t});-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=me.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,i,n,o=this.animations,a=0;a<o.length;)e=(t=o[a]).chart,i=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*i)+1,t.currentStep=Math.min(n,i),me.callback(t.render,[e,t],e),me.callback(t.onAnimationProgress,[t],e),t.currentStep>=i?(me.callback(t.onAnimationComplete,[t],e),e.animating=!1,o.splice(a,1)):++a}},Se=me.options.resolve,Me=["push","pop","shift","splice","unshift"],Te=function(t,e){this.initialize(t,e)};me.extend(Te.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){this.chart=t,this.index=e,this.linkScales(),this.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),i=t.getDataset();null!==e.xAxisID&&e.xAxisID in t.chart.scales||(e.xAxisID=i.xAxisID||t.chart.options.scales.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in t.chart.scales||(e.yAxisID=i.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&D(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],o=i.data;for(t=0,e=n.length;t<e;++t)o[t]=o[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,i=this,n=i.getDataset(),o=n.data||(n.data=[]);i._data!==o&&(i._data&&D(i._data,i),o&&Object.isExtensible(o)&&(e=i,(t=o)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Me.forEach(function(e){var i="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=n.apply(this,e);return me.each(t._chartjs.listeners,function(t){"function"==typeof t[i]&&t[i].apply(t,e)}),o}})}))),i._data=o),i.resyncElements()},update:me.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,o=0;o<n;++o)i[o].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},removeHoverStyle:function(t){me.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model,a=me.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=Se([n.hoverBackgroundColor,e.hoverBackgroundColor,a(o.backgroundColor)],void 0,i),o.borderColor=Se([n.hoverBorderColor,e.hoverBorderColor,a(o.borderColor)],void 0,i),o.borderWidth=Se([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],void 0,i)},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Te.extend=me.inherits;var Ae=Te;fe._set("global",{elements:{arc:{backgroundColor:fe.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Ie=ke.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=me.getAngleFromPoint(i,{x:t,y:e}),o=n.angle,a=n.distance,r=i.startAngle,s=i.endAngle;s<r;)s+=2*Math.PI;for(;o>s;)o-=2*Math.PI;for(;o<r;)o+=2*Math.PI;var l=o>=r&&o<=s,d=a>=i.innerRadius&&a<=i.outerRadius;return l&&d}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t,e=this._chart.ctx,i=this._view,n=i.startAngle,o=i.endAngle,a="inner"===i.borderAlign?.33:0;e.save(),e.beginPath(),e.arc(i.x,i.y,Math.max(i.outerRadius-a,0),n,o),e.arc(i.x,i.y,i.innerRadius,o,n,!0),e.closePath(),e.fillStyle=i.backgroundColor,e.fill(),i.borderWidth&&("inner"===i.borderAlign?(e.beginPath(),t=a/i.outerRadius,e.arc(i.x,i.y,i.outerRadius,n-t,o+t),i.innerRadius>a?(t=a/i.innerRadius,e.arc(i.x,i.y,i.innerRadius-a,o+t,n-t,!0)):e.arc(i.x,i.y,a,o+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip(),e.beginPath(),e.arc(i.x,i.y,i.outerRadius,n,o),e.arc(i.x,i.y,i.innerRadius,o,n,!0),e.closePath(),e.lineWidth=2*i.borderWidth,e.lineJoin="round"):(e.lineWidth=i.borderWidth,e.lineJoin="bevel"),e.strokeStyle=i.borderColor,e.stroke()),e.restore()}}),De=me.valueOrDefault,Pe=fe.global.defaultColor;fe._set("global",{elements:{line:{tension:.4,backgroundColor:Pe,borderWidth:3,borderColor:Pe,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var $e=ke.extend({draw:function(){var t,e,i,n,o=this._view,a=this._chart.ctx,r=o.spanGaps,s=this._children.slice(),l=fe.global,d=l.elements.line,u=-1;for(this._loop&&s.length&&s.push(s[0]),a.save(),a.lineCap=o.borderCapStyle||d.borderCapStyle,a.setLineDash&&a.setLineDash(o.borderDash||d.borderDash),a.lineDashOffset=De(o.borderDashOffset,d.borderDashOffset),a.lineJoin=o.borderJoinStyle||d.borderJoinStyle,a.lineWidth=De(o.borderWidth,d.borderWidth),a.strokeStyle=o.borderColor||l.defaultColor,a.beginPath(),u=-1,t=0;t<s.length;++t)e=s[t],i=me.previousItem(s,t),n=e._view,0===t?n.skip||(a.moveTo(n.x,n.y),u=t):(i=-1===u?i:s[u],n.skip||(u!==t-1&&!r||-1===u?a.moveTo(n.x,n.y):me.canvas.lineTo(a,i._view,e._view),u=t));a.stroke(),a.restore()}}),Fe=me.valueOrDefault,Le=fe.global.defaultColor;fe._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Le,borderColor:Le,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Oe=ke.extend({inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:P,inXRange:P,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._chart.ctx,n=e.pointStyle,o=e.rotation,a=e.radius,r=e.x,s=e.y,l=fe.global,d=l.defaultColor;e.skip||(void 0===t||me.canvas._isPointInArea(e,t))&&(i.strokeStyle=e.borderColor||d,i.lineWidth=Fe(e.borderWidth,l.elements.point.borderWidth),i.fillStyle=e.backgroundColor||d,me.canvas.drawPoint(i,n,a,r,s,o))}}),Re=fe.global.defaultColor;fe._set("global",{elements:{rectangle:{backgroundColor:Re,borderColor:Re,borderSkipped:"bottom",borderWidth:0}}});var Ne=ke.extend({draw:function(){var t=this._chart.ctx,e=this._view,i=function(t){var e=F(t),i=e.right-e.left,n=e.bottom-e.top,o=O(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}(e),n=i.outer,o=i.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===o.w&&n.h===o.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(o.x,o.y,o.w,o.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return R(this._view,t,e)},
inLabelRange:function(t,e){var i=this._view;return $(i)?R(i,t,null):R(i,null,e)},inXRange:function(t){return R(this._view,t,null)},inYRange:function(t){return R(this._view,null,t)},getCenterPoint:function(){var t,e,i=this._view;return $(i)?(t=i.x,e=(i.y+i.base)/2):(t=(i.x+i.base)/2,e=i.y),{x:t,y:e}},getArea:function(){var t=this._view;return $(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),Ee={},ze=Ie,Ve=$e,Be=Oe,We=Ne;Ee.Arc=ze,Ee.Line=Ve,Ee.Point=Be,Ee.Rectangle=We;var je=me.options.resolve;fe._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var He=Ae.extend({dataElementType:Ee.Rectangle,initialize:function(){var t;Ae.prototype.initialize.apply(this,arguments),(t=this.getMeta()).stack=this.getDataset().stack,t.bar=!0},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,o=n.getMeta(),a=n.getDataset(),r=n._resolveElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID),t._yScale=n.getScaleForId(o.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:a.label,label:n.chart.data.labels[e]},n._updateElementGeometry(t,e,i),t.pivot()},_updateElementGeometry:function(t,e,i){var n=this,o=t._model,a=n._getValueScale(),r=a.getBasePixel(),s=a.isHorizontal(),l=n._ruler||n.getRuler(),d=n.calculateBarValuePixels(n.index,e),u=n.calculateBarIndexPixels(n.index,e,l);o.horizontal=s,o.base=i?r:d.base,o.x=s?i?r:d.head:u.center,o.y=s?u.center:i?r:d.head,o.height=s?u.size:void 0,o.width=s?void 0:u.size},_getStacks:function(t){var e,i,n=this.chart,o=this._getIndexScale().options.stacked,a=void 0===t?n.data.datasets.length:t+1,r=[];for(e=0;e<a;++e)(i=n.getDatasetMeta(e)).bar&&n.isDatasetVisible(e)&&(!1===o||!0===o&&-1===r.indexOf(i.stack)||void 0===o&&(void 0===i.stack||-1===r.indexOf(i.stack)))&&r.push(i.stack);return r},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this._getIndexScale(),n=this.getStackCount(),o=this.index,a=i.isHorizontal(),r=a?i.left:i.top,s=r+(a?i.width:i.height),l=[];for(t=0,e=this.getMeta().data.length;t<e;++t)l.push(i.getPixelForValue(null,t,o));return{min:me.isNullOrUndef(i.options.barThickness)?function(t,e){var i,n,o,a,r=t.isHorizontal()?t.width:t.height,s=t.getTicks();for(o=1,a=e.length;o<a;++o)r=Math.min(r,Math.abs(e[o]-e[o-1]));for(o=0,a=s.length;o<a;++o)n=t.getPixelForTick(o),r=o>0?Math.min(r,n-i):r,i=n;return r}(i,l):-1,pixels:l,start:r,end:s,stackCount:n,scale:i}},calculateBarValuePixels:function(t,e){var i,n,o,a,r,s,l=this.chart,d=this.getMeta(),u=this._getValueScale(),h=u.isHorizontal(),c=l.data.datasets,f=+u.getRightValue(c[t].data[e]),g=u.options.minBarLength,p=u.options.stacked,m=d.stack,v=0;if(p||void 0===p&&void 0!==m)for(i=0;i<t;++i)(n=l.getDatasetMeta(i)).bar&&n.stack===m&&n.controller._getValueScaleId()===u.id&&l.isDatasetVisible(i)&&(o=+u.getRightValue(c[i].data[e]),(f<0&&o<0||f>=0&&o>0)&&(v+=o));return a=u.getPixelForValue(v),s=(r=u.getPixelForValue(v+f))-a,void 0!==g&&Math.abs(s)<g&&(s=g,r=f>=0&&!h||f<0&&h?a-g:a+g),{size:s,base:a,head:r,center:r+s/2}},calculateBarIndexPixels:function(t,e,i){var n=i.scale.options,o="flex"===n.barThickness?function(t,e,i){var n,o=e.pixels,a=o[t],r=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null,l=i.categoryPercentage;return null===r&&(r=a-(null===s?e.end-e.start:s-a)),null===s&&(s=a+a-r),n=a-(a-Math.min(r,s))/2*l,{chunk:Math.abs(s-r)/2*l/e.stackCount,ratio:i.barPercentage,start:n}}(e,i,n):function(t,e,i){var n,o,a=i.barThickness,r=e.stackCount,s=e.pixels[t];return me.isNullOrUndef(a)?(n=e.min*i.categoryPercentage,o=i.barPercentage):(n=a*r,o=1),{chunk:n/r,ratio:o,start:s-n/2}}(e,i,n),a=this.getStackIndex(t,this.getMeta().stack),r=o.start+o.chunk*a+o.chunk/2,s=Math.min(me.valueOrDefault(n.maxBarThickness,1/0),o.chunk*o.ratio);return{base:r-s/2,head:r+s/2,center:r,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),o=i.length,a=0;for(me.canvas.clipArea(t.ctx,t.chartArea);a<o;++a)isNaN(e.getRightValue(n.data[a]))||i[a].draw();me.canvas.unclipArea(t.ctx)},_resolveElementOptions:function(t,e){var i,n,o,a=this.chart,r=a.data.datasets[this.index],s=t.custom||{},l=a.options.elements.rectangle,d={},u={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=h.length;i<n;++i)d[o=h[i]]=je([s[o],r[o],l[o]],u,e);return d}}),Ue=me.valueOrDefault,qe=me.options.resolve;fe._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Ge=Ae.extend({dataElementType:Ee.Point,update:function(t){var e=this,i=e.getMeta().data;me.each(i,function(i,n){e.updateElement(i,n,t)})},updateElement:function(t,e,i){var n=this,o=n.getMeta(),a=t.custom||{},r=n.getScaleForId(o.xAxisID),s=n.getScaleForId(o.yAxisID),l=n._resolveElementOptions(t,e),d=n.getDataset().data[e],u=n.index,h=i?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof d?d:NaN,e,u),c=i?s.getBasePixel():s.getPixelForValue(d,e,u);t._xScale=r,t._yScale=s,t._options=l,t._datasetIndex=u,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:a.skip||isNaN(h)||isNaN(c),x:h,y:c},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options,n=me.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ue(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Ue(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Ue(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(t,e){var i,n,o,a=this.chart,r=a.data.datasets[this.index],s=t.custom||{},l=a.options.elements.point,d=r.data[e],u={},h={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},c=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=c.length;i<n;++i)u[o=c[i]]=qe([s[o],r[o],l[o]],h,e);return u.radius=qe([s.radius,d?d.r:void 0,r.radius,l.radius],h,e),u}}),Ye=me.options.resolve,Qe=me.valueOrDefault;fe._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,o=i.labels;if(n.length)for(var a=0;a<n[0].data.length;++a)e.push('<li><span style="background-color:'+n[0].backgroundColor[a]+'"></span>'),o[a]&&e.push(o[a]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var o=t.getDatasetMeta(0),a=e.datasets[0],r=o.data[n],s=r&&r.custom||{},l=t.options.elements.arc;return{text:i,fillStyle:Ye([s.backgroundColor,a.backgroundColor,l.backgroundColor],void 0,n),strokeStyle:Ye([s.borderColor,a.borderColor,l.borderColor],void 0,n),lineWidth:Ye([s.borderWidth,a.borderWidth,l.borderWidth],void 0,n),hidden:isNaN(a.data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,o,a=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(o=r.getDatasetMeta(i)).data[a]&&(o.data[a].hidden=!o.data[a].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return me.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var Ke=Ae.extend({dataElementType:Ee.Arc,linkScales:me.noop,getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(t){var e,i,n=this,o=n.chart,a=o.chartArea,r=o.options,s=a.right-a.left,l=a.bottom-a.top,d=Math.min(s,l),u={x:0,y:0},h=n.getMeta(),c=h.data,f=r.cutoutPercentage,g=r.circumference,p=n._getRingWeight(n.index);if(g<2*Math.PI){var m=r.rotation%(2*Math.PI),v=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+g,b={x:Math.cos(m),y:Math.sin(m)},y={x:Math.cos(v),y:Math.sin(v)},x=m<=0&&v>=0||m<=2*Math.PI&&2*Math.PI<=v,k=m<=.5*Math.PI&&.5*Math.PI<=v||m<=2.5*Math.PI&&2.5*Math.PI<=v,w=m<=-Math.PI&&-Math.PI<=v||m<=Math.PI&&Math.PI<=v,_=m<=.5*-Math.PI&&.5*-Math.PI<=v||m<=1.5*Math.PI&&1.5*Math.PI<=v,C=f/100,S={x:w?-1:Math.min(b.x*(b.x<0?1:C),y.x*(y.x<0?1:C)),y:_?-1:Math.min(b.y*(b.y<0?1:C),y.y*(y.y<0?1:C))},M={x:x?1:Math.max(b.x*(b.x>0?1:C),y.x*(y.x>0?1:C)),y:k?1:Math.max(b.y*(b.y>0?1:C),y.y*(y.y>0?1:C))},T={width:.5*(M.x-S.x),height:.5*(M.y-S.y)};d=Math.min(s/T.width,l/T.height),u={x:-.5*(M.x+S.x),y:-.5*(M.y+S.y)}}for(e=0,i=c.length;e<i;++e)c[e]._options=n._resolveElementOptions(c[e],e);for(o.borderWidth=n.getMaxBorderWidth(),o.outerRadius=Math.max((d-o.borderWidth)/2,0),o.innerRadius=Math.max(f?o.outerRadius/100*f:0,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),o.offsetX=u.x*o.outerRadius,o.offsetY=u.y*o.outerRadius,h.total=n.calculateTotal(),n.outerRadius=o.outerRadius-o.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-o.radiusLength*p,0),e=0,i=c.length;e<i;++e)n.updateElement(c[e],e,t)},updateElement:function(t,e,i){var n=this,o=n.chart,a=o.chartArea,r=o.options,s=r.animation,l=(a.left+a.right)/2,d=(a.top+a.bottom)/2,u=r.rotation,h=r.rotation,c=n.getDataset(),f=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(c.data[e])*(r.circumference/(2*Math.PI)),g=i&&s.animateScale?0:n.innerRadius,p=i&&s.animateScale?0:n.outerRadius,m=t._options||{};me.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+o.offsetX,y:d+o.offsetY,startAngle:u,endAngle:h,circumference:f,outerRadius:p,innerRadius:g,label:me.valueAtIndexOrDefault(c.label,e,o.data.labels[e])}});var v=t._model;i&&s.animateRotate||(v.startAngle=0===e?r.rotation:n.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),i=this.getMeta(),n=0;return me.each(i.data,function(i,o){t=e.data[o],isNaN(t)||i.hidden||(n+=Math.abs(t))}),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,i,n,o,a,r,s,l,d=0,u=this.chart;if(!t)for(e=0,i=u.data.datasets.length;e<i;++e)if(u.isDatasetVisible(e)){t=(n=u.getDatasetMeta(e)).data,e!==this.index&&(a=n.controller);break}if(!t)return 0;for(e=0,i=t.length;e<i;++e)o=t[e],"inner"!==(r=a?a._resolveElementOptions(o,e):o._options).borderAlign&&(s=r.borderWidth,d=(l=r.hoverBorderWidth)>(d=s>d?s:d)?l:d);return d},setHoverStyle:function(t){var e=t._model,i=t._options,n=me.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Qe(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Qe(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Qe(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,o,a=this.chart,r=this.getDataset(),s=t.custom||{},l=a.options.elements.arc,d={},u={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[o=h[i]]=Ye([s[o],r[o],l[o]],u,e);return d},_getRingWeightOffset:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e},_getRingWeight:function(t){return Math.max(Qe(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});fe._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Xe=He.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ze=me.valueOrDefault,Je=me.options.resolve,ti=me.canvas._isPointInArea;fe._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ei=Ae.extend({datasetElementType:Ee.Line,dataElementType:Ee.Point,update:function(t){var e,i,n=this,o=n.getMeta(),a=o.dataset,r=o.data||[],s=n.getScaleForId(o.yAxisID),l=n.getDataset(),d=N(l,n.chart.options);for(d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=s,a._datasetIndex=n.index,a._children=r,a._model=n._resolveLineOptions(a),a.pivot()),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(d&&0!==a._model.tension&&n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n,o,a=this,r=a.getMeta(),s=t.custom||{},l=a.getDataset(),d=a.index,u=l.data[e],h=a.getScaleForId(r.yAxisID),c=a.getScaleForId(r.xAxisID),f=r.dataset._model,g=a._resolvePointOptions(t,e);n=c.getPixelForValue("object"==typeof u?u:NaN,e,d),o=i?h.getBasePixel():a.calculatePointY(u,e,d),t._xScale=c,t._yScale=h,t._options=g,t._datasetIndex=d,t._index=e,t._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:Ze(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolvePointOptions:function(t,e){var i,n,o,a=this.chart,r=a.data.datasets[this.index],s=t.custom||{},l=a.options.elements.point,d={},u={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[o=c[i]]=Je([s[o],r[h[o]],r[o],l[o]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,o=this.chart,a=o.data.datasets[this.index],r=t.custom||{},s=o.options,l=s.elements.line,d={},u=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(e=0,i=u.length;e<i;++e)d[n=u[e]]=Je([r[n],a[n],l[n]]);return d.spanGaps=Ze(a.spanGaps,s.spanGaps),d.tension=Ze(a.lineTension,l.tension),d.steppedLine=Je([r.steppedLine,a.steppedLine,l.stepped]),d},calculatePointY:function(t,e,i){var n,o,a,r=this.chart,s=this.getMeta(),l=this.getScaleForId(s.yAxisID),d=0,u=0;if(l.options.stacked){for(n=0;n<i;n++)if(o=r.data.datasets[n],"line"===(a=r.getDatasetMeta(n)).type&&a.yAxisID===l.id&&r.isDatasetVisible(n)){var h=Number(l.getRightValue(o.data[e]));h<0?u+=h||0:d+=h||0}var c=Number(l.getRightValue(t));return c<0?l.getPixelForValue(u+c):l.getPixelForValue(d+c)}return l.getPixelForValue(t)},updateBezierControlPoints:function(){function t(t,e,i){return Math.max(Math.min(t,i),e)}var e,i,n,o,a=this.chart,r=this.getMeta(),s=r.dataset._model,l=a.chartArea,d=r.data||[];if(s.spanGaps&&(d=d.filter(function(t){return!t._model.skip})),"monotone"===s.cubicInterpolationMode)me.splineCurveMonotone(d);else for(e=0,i=d.length;e<i;++e)n=d[e]._model,o=me.splineCurve(me.previousItem(d,e)._model,n,me.nextItem(d,e)._model,s.tension),n.controlPointPreviousX=o.previous.x,n.controlPointPreviousY=o.previous.y,n.controlPointNextX=o.next.x,n.controlPointNextY=o.next.y;if(a.options.elements.line.capBezierPoints)for(e=0,i=d.length;e<i;++e)n=d[e]._model,ti(n,l)&&(e>0&&ti(d[e-1]._model,l)&&(n.controlPointPreviousX=t(n.controlPointPreviousX,l.left,l.right),n.controlPointPreviousY=t(n.controlPointPreviousY,l.top,l.bottom)),e<d.length-1&&ti(d[e+1]._model,l)&&(n.controlPointNextX=t(n.controlPointNextX,l.left,l.right),n.controlPointNextY=t(n.controlPointNextY,l.top,l.bottom)))},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],o=e.chartArea,a=n.length,r=0;for(N(this.getDataset(),e.options)&&(t=(i.dataset._model.borderWidth||0)/2,me.canvas.clipArea(e.ctx,{left:o.left,right:o.right,top:o.top-t,bottom:o.bottom+t}),i.dataset.draw(),me.canvas.unclipArea(e.ctx));r<a;++r)n[r].draw(o)},setHoverStyle:function(t){var e=t._model,i=t._options,n=me.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ze(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Ze(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Ze(i.hoverBorderWidth,i.borderWidth),e.radius=Ze(i.hoverRadius,i.radius)}}),ii=me.options.resolve;fe._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,o=i.labels;if(n.length)for(var a=0;a<n[0].data.length;++a)e.push('<li><span style="background-color:'+n[0].backgroundColor[a]+'"></span>'),o[a]&&e.push(o[a]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var o=t.getDatasetMeta(0),a=e.datasets[0],r=o.data[n].custom||{},s=t.options.elements.arc;return{text:i,fillStyle:ii([r.backgroundColor,a.backgroundColor,s.backgroundColor],void 0,n),strokeStyle:ii([r.borderColor,a.borderColor,s.borderColor],void 0,n),lineWidth:ii([r.borderWidth,a.borderWidth,s.borderWidth],void 0,n),hidden:isNaN(a.data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,o,a=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(o=r.getDatasetMeta(i)).data[a].hidden=!o.data[a].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var ni=Ae.extend({dataElementType:Ee.Arc,linkScales:me.noop,update:function(t){var e,i,n,o=this,a=o.getDataset(),r=o.getMeta(),s=o.chart.options.startAngle||0,l=o._starts=[],d=o._angles=[],u=r.data;for(o._updateRadius(),r.count=o.countVisibleElements(),e=0,i=a.data.length;e<i;e++)l[e]=s,n=o._computeAngle(e),d[e]=n,s+=n;for(e=0,i=u.length;e<i;++e)u[e]._options=o._resolveElementOptions(u[e],e),o.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(o/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,o=n.chart,a=n.getDataset(),r=o.options,s=r.animation,l=o.scale,d=o.data.labels,u=l.xCenter,h=l.yCenter,c=r.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(a.data[e]),g=n._starts[e],p=g+(t.hidden?0:n._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(a.data[e]),v=t._options||{};me.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?m:f,startAngle:i&&s.animateRotate?c:g,endAngle:i&&s.animateRotate?c:p,label:me.valueAtIndexOrDefault(d,e,d[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),i=0;return me.each(e.data,function(e,n){isNaN(t.data[n])||e.hidden||i++}),i},setHoverStyle:function(t){var e=t._model,i=t._options,n=me.getHoverColor,o=me.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=o(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,o,a=this.chart,r=this.getDataset(),s=t.custom||{},l=a.options.elements.arc,d={},u={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[o=h[i]]=ii([s[o],r[o],l[o]],u,e);return d},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),o=e.getMeta();if(isNaN(n.data[t])||o.data[t].hidden)return 0;var a={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return ii([e.chart.options.elements.arc.angle,2*Math.PI/i],a,t)}});fe._set("pie",me.clone(fe.doughnut)),fe._set("pie",{cutoutPercentage:0});var oi=Ke,ai=me.valueOrDefault,ri=me.options.resolve;fe._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var si=Ae.extend({datasetElementType:Ee.Line,dataElementType:Ee.Point,linkScales:me.noop,update:function(t){var e,i,n=this,o=n.getMeta(),a=o.dataset,r=o.data||[],s=n.chart.scale,l=n.getDataset();for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=s,a._datasetIndex=n.index,a._children=r,a._loop=!0,a._model=n._resolveLineOptions(a),a.pivot(),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n=this,o=t.custom||{},a=n.getDataset(),r=n.chart.scale,s=r.getPointPositionForValue(e,a.data[e]),l=n._resolvePointOptions(t,e),d=n.getMeta().dataset._model,u=i?r.xCenter:s.x,h=i?r.yCenter:s.y;t._scale=r,t._options=l,t._datasetIndex=n.index,t._index=e,t._model={x:u,y:h,skip:o.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:ai(o.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolvePointOptions:function(t,e){var i,n,o,a=this.chart,r=a.data.datasets[this.index],s=t.custom||{},l=a.options.elements.point,d={},u={chart:a,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[o=c[i]]=ri([s[o],r[h[o]],r[o],l[o]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,o=this.chart,a=o.data.datasets[this.index],r=t.custom||{},s=o.options.elements.line,l={},d=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(e=0,i=d.length;e<i;++e)l[n=d[e]]=ri([r[n],a[n],s[n]]);return l.tension=ai(a.lineTension,s.tension),l},updateBezierControlPoints:function(){function t(t,e,i){return Math.max(Math.min(t,i),e)}var e,i,n,o,a=this.getMeta(),r=this.chart.chartArea,s=a.data||[];for(e=0,i=s.length;e<i;++e)n=s[e]._model,o=me.splineCurve(me.previousItem(s,e,!0)._model,n,me.nextItem(s,e,!0)._model,n.tension),n.controlPointPreviousX=t(o.previous.x,r.left,r.right),n.controlPointPreviousY=t(o.previous.y,r.top,r.bottom),n.controlPointNextX=t(o.next.x,r.left,r.right),n.controlPointNextY=t(o.next.y,r.top,r.bottom)},setHoverStyle:function(t){var e=t._model,i=t._options,n=me.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=ai(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=ai(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=ai(i.hoverBorderWidth,i.borderWidth),e.radius=ai(i.hoverRadius,i.radius)}});fe._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}});var li={bar:He,bubble:Ge,doughnut:Ke,horizontalBar:Xe,line:ei,polarArea:ni,pie:oi,radar:si,scatter:ei},di={modes:{single:function(t,e){var i=E(e,t),n=[];return z(t,function(t){if(t.inRange(i.x,i.y))return n.push(t),n}),n.slice(0,1)},label:j,index:j,dataset:function(t,e,i){var n=E(e,t);i.axis=i.axis||"xy";var o=W(i.axis),a=i.intersect?V(t,n):B(t,n,!1,o);return a.length>0&&(a=t.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(t,e){return j(t,e,{intersect:!1})},point:function(t,e){return V(t,E(e,t))},nearest:function(t,e,i){var n=E(e,t);i.axis=i.axis||"xy";var o=W(i.axis);return B(t,n,i.intersect,o)},x:function(t,e,i){var n=E(e,t),o=[],a=!1;return z(t,function(t){t.inXRange(n.x)&&o.push(t),t.inRange(n.x,n.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o},y:function(t,e,i){var n=E(e,t),o=[],a=!1;return z(t,function(t){t.inYRange(n.y)&&o.push(t),t.inRange(n.x,n.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o}}};fe._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ui,hi={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,o=["fullWidth","position","weight"],a=o.length,r=0;r<a;++r)n=o[r],i.hasOwnProperty(n)&&(e[n]=i[n])},update:function(t,e,i){function n(t){var e=me.findNextWhere(M,function(e){return e.box===t});if(e)if(e.horizontal){var i={left:Math.max(S.left,m.left),right:Math.max(S.right,m.right),top:0,bottom:0};t.update(t.fullWidth?x:_,k/2,i)}else t.update(e.width,C)}function o(t){t.isHorizontal()?(t.left=t.fullWidth?s:S.left,t.right=t.fullWidth?e-l:S.left+_,t.top=$,t.bottom=$+t.height,$=t.bottom):(t.left=P,t.right=P+t.width,t.top=S.top,t.bottom=S.top+C,P=t.right)}if(t){var a=t.options.layout||{},r=me.options.toPadding(a.padding),s=r.left,l=r.right,d=r.top,u=r.bottom,h=H(t.boxes,"left"),c=H(t.boxes,"right"),f=H(t.boxes,"top"),g=H(t.boxes,"bottom"),p=H(t.boxes,"chartArea");U(h,!0),U(c,!1),U(f,!0),U(g,!1);var m,v=h.concat(c),b=f.concat(g),y=v.concat(b),x=e-s-l,k=i-d-u,w=(e-x/2)/v.length,_=x,C=k,S={top:d,left:s,bottom:u,right:l},M=[];me.each(y,function(t){var e,i=t.isHorizontal();i?(e=t.update(t.fullWidth?x:_,k/2),C-=e.height):(e=t.update(w,C),_-=e.width),M.push({horizontal:i,width:e.width,box:t})}),m=function(t){var e=0,i=0,n=0,o=0;return me.each(t,function(t){if(t.getPadding){var a=t.getPadding();e=Math.max(e,a.top),i=Math.max(i,a.left),n=Math.max(n,a.bottom),o=Math.max(o,a.right)}}),{top:e,left:i,bottom:n,right:o}}(y),me.each(v,n),q(v,S),me.each(b,n),q(b,S),me.each(v,function(t){var e=me.findNextWhere(M,function(e){return e.box===t}),i={left:0,right:0,top:S.top,bottom:S.bottom};e&&t.update(e.width,C,i)}),q(y,S={top:d,left:s,bottom:u,right:l});var T=Math.max(m.left-S.left,0);S.left+=T,S.right+=Math.max(m.right-S.right,0);var A=Math.max(m.top-S.top,0);S.top+=A,S.bottom+=Math.max(m.bottom-S.bottom,0);var I=i-S.top-S.bottom,D=e-S.left-S.right;D===_&&I===C||(me.each(v,function(t){t.height=I}),me.each(b,function(t){t.fullWidth||(t.width=D)}),C=I,_=D);var P=s+T,$=d+A;me.each(h.concat(f),o),P+=_,$+=C,me.each(c,o),me.each(g,o),t.chartArea={left:S.left,top:S.top,right:S.left+_,bottom:S.top+C},me.each(p,function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(_,C)})}}},ci=(ui=Object.freeze({default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&ui.default||ui,fi="$chartjs",gi="chartjs-size-monitor",pi="chartjs-render-monitor",mi="chartjs-render-animation",vi=["animationstart","webkitAnimationStart"],bi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yi=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0},xi={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){var t,e,i;this._loaded||(this._loaded=!0,this.disableCSSInjection||(e=ci,i=(t=this)._style||document.createElement("style"),t._style||(t._style=i,e="/* Chart.js */\n"+e,i.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(e))))},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return this._ensureLoaded(),i&&i.canvas===t?(function(t,e){var i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t[fi]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===o||""===o){var a=G(t,"width");void 0!==a&&(t.width=a)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var r=G(t,"height");void 0!==a&&(t.height=r)}}(t,e),i):null},releaseContext:function(t){var e=t.canvas;if(e[fi]){var i=e[fi].initial;["height","width"].forEach(function(t){var n=i[t];me.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)}),me.each(i.style||{},function(t,i){e.style[i]=t}),e.width=e.width,delete e[fi]}},addEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var o=i[fi]||(i[fi]={});Y(n,e,(o.proxies||(o.proxies={}))[t.id+"_"+e]=function(e){i(function(t,e){var i=bi[t.type]||t.type,n=me.getRelativePosition(t,e);return K(i,e,n.x,n.y,t)}(e,t))})}else Z(n,i,t)},removeEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var o=((i[fi]||{}).proxies||{})[t.id+"_"+e];o&&Q(n,e,o)}else J(n)}};me.addEvent=Y,me.removeEvent=Q;var ki=xi._enabled?xi:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},wi=me.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},ki);fe._set("global",{plugins:{}});var _i={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},
count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,o,a,r,s,l=this.descriptors(t),d=l.length;for(n=0;n<d;++n)if("function"==typeof(s=(a=(o=l[n]).plugin)[e])&&((r=[t].concat(i||[])).push(o.options),!1===s.apply(a,r)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],n=[],o=t&&t.config||{},a=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach(function(t){if(-1===i.indexOf(t)){var e=t.id,o=a[e];!1!==o&&(!0===o&&(o=me.clone(fe.global.plugins[e])),i.push(t),n.push({plugin:t,options:o||{}}))}}),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},Ci={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=me.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?me.merge({},[fe.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=me.extend(this.defaults[t],e))},addScalesToLayout:function(t){me.each(t.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,hi.addBox(t,e)})}},Si=me.valueOrDefault;fe._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:me.noop,title:function(t,e){var i="",n=e.labels,o=n?n.length:0;if(t.length>0){var a=t[0];a.label?i=a.label:a.xLabel?i=a.xLabel:o>0&&a.index<o&&(i=n[a.index])}return i},afterTitle:me.noop,beforeBody:me.noop,beforeLabel:me.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),me.isNullOrUndef(t.value)?i+=t.yLabel:i+=t.value,i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:me.noop,afterBody:me.noop,beforeFooter:me.noop,footer:me.noop,afterFooter:me.noop}}});var Mi={average:function(t){if(!t.length)return!1;var e,i,n=0,o=0,a=0;for(e=0,i=t.length;e<i;++e){var r=t[e];if(r&&r.hasValue()){var s=r.tooltipPosition();n+=s.x,o+=s.y,++a}}return{x:n/a,y:o/a}},nearest:function(t,e){var i,n,o,a=e.x,r=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),u=me.distanceBetweenPoints(e,d);u<s&&(s=u,o=l)}}if(o){var h=o.tooltipPosition();a=h.x,r=h.y}return{x:a,y:r}}},Ti=ke.extend({initialize:function(){this._model=it(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),i=t.title.apply(this,arguments),n=t.afterTitle.apply(this,arguments),o=[];return o=tt(o,et(e)),o=tt(o,et(i)),o=tt(o,et(n))},getBeforeBody:function(){return ot(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var i=this,n=i._options.callbacks,o=[];return me.each(t,function(t){var a={before:[],lines:[],after:[]};tt(a.before,et(n.beforeLabel.call(i,t,e))),tt(a.lines,n.label.call(i,t,e)),tt(a.after,et(n.afterLabel.call(i,t,e))),o.push(a)}),o},getAfterBody:function(){return ot(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),i=t.footer.apply(this,arguments),n=t.afterFooter.apply(this,arguments),o=[];return o=tt(o,et(e)),o=tt(o,et(i)),o=tt(o,et(n))},update:function(t){var e,i,n,o,a,r,s,l,d,u,h=this,c=h._options,f=h._model,g=h._model=it(c),p=h._active,m=h._data,v={xAlign:f.xAlign,yAlign:f.yAlign},b={x:f.x,y:f.y},y={width:f.width,height:f.height},x={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var k=[],w=[];x=Mi[c.position].call(h,p,h._eventPosition);var _=[];for(e=0,i=p.length;e<i;++e)_.push((n=p[e],o=void 0,a=void 0,r=void 0,s=void 0,l=void 0,d=void 0,u=void 0,o=n._xScale,a=n._yScale||n._scale,r=n._index,s=n._datasetIndex,l=n._chart.getDatasetMeta(s).controller,d=l._getIndexScale(),u=l._getValueScale(),{xLabel:o?o.getLabelForIndex(r,s):"",yLabel:a?a.getLabelForIndex(r,s):"",label:d?""+d.getLabelForIndex(r,s):"",value:u?""+u.getLabelForIndex(r,s):"",index:r,datasetIndex:s,x:n._model.x,y:n._model.y}));c.filter&&(_=_.filter(function(t){return c.filter(t,m)})),c.itemSort&&(_=_.sort(function(t,e){return c.itemSort(t,e,m)})),me.each(_,function(t){k.push(c.callbacks.labelColor.call(h,t,h._chart)),w.push(c.callbacks.labelTextColor.call(h,t,h._chart))}),g.title=h.getTitle(_,m),g.beforeBody=h.getBeforeBody(_,m),g.body=h.getBody(_,m),g.afterBody=h.getAfterBody(_,m),g.footer=h.getFooter(_,m),g.x=x.x,g.y=x.y,g.caretPadding=c.caretPadding,g.labelColors=k,g.labelTextColors=w,g.dataPoints=_,y=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,o=0,a=e.body,r=a.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);r+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,d=e.titleFontSize,u=e.bodyFontSize,h=e.footerFontSize;n+=s*d,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=r*u,n+=r?(r-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*h,n+=l?(l-1)*e.footerSpacing:0;var c=0,f=function(t){o=Math.max(o,i.measureText(t).width+c)};return i.font=me.fontString(d,e._titleFontStyle,e._titleFontFamily),me.each(e.title,f),i.font=me.fontString(u,e._bodyFontStyle,e._bodyFontFamily),me.each(e.beforeBody.concat(e.afterBody),f),c=e.displayColors?u+2:0,me.each(a,function(t){me.each(t.before,f),me.each(t.lines,f),me.each(t.after,f)}),c=0,i.font=me.fontString(h,e._footerFontStyle,e._footerFontFamily),me.each(e.footer,f),{width:o+=2*e.xPadding,height:n}}(this,g),b=function(t,e,i,n){var o=t.x,a=t.y,r=t.caretSize,s=t.caretPadding,l=t.cornerRadius,d=i.xAlign,u=i.yAlign,h=r+s,c=l+s;return"right"===d?o-=e.width:"center"===d&&((o-=e.width/2)+e.width>n.width&&(o=n.width-e.width),o<0&&(o=0)),"top"===u?a+=h:a-="bottom"===u?e.height+h:e.height/2,"center"===u?"left"===d?o+=h:"right"===d&&(o-=h):"left"===d?o-=c:"right"===d&&(o+=c),{x:o,y:a}}(g,y,v=function(t,e){var i,n,o,a,r,s=t._model,l=t._chart,d=t._chart.chartArea,u="center",h="center";s.y<e.height?h="top":s.y>l.height-e.height&&(h="bottom");var c=(d.left+d.right)/2,f=(d.top+d.bottom)/2;"center"===h?(i=function(t){return t<=c},n=function(t){return t>c}):(i=function(t){return t<=e.width/2},n=function(t){return t>=l.width-e.width/2}),o=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},a=function(t){return t-e.width-s.caretSize-s.caretPadding<0},r=function(t){return t<=f?"top":"bottom"},i(s.x)?(u="left",o(s.x)&&(u="center",h=r(s.y))):n(s.x)&&(u="right",a(s.x)&&(u="center",h=r(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:u,yAlign:g.yAlign?g.yAlign:h}}(this,y),h._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=b.x,g.y=b.y,g.width=y.width,g.height=y.height,g.caretX=x.x,g.caretY=x.y,h._model=g,t&&c.custom&&c.custom.call(h,g),h},drawCaret:function(t,e){var i=this._chart.ctx,n=this._view,o=this.getCaretPosition(t,e,n);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)},getCaretPosition:function(t,e,i){var n,o,a,r,s,l,d=i.caretSize,u=i.cornerRadius,h=i.xAlign,c=i.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===c)s=g+m/2,"left"===h?(o=(n=f)-d,a=n,r=s+d,l=s-d):(o=(n=f+p)+d,a=n,r=s-d,l=s+d);else if("left"===h?(n=(o=f+u+d)-d,a=o+d):"right"===h?(n=(o=f+p-u-d)-d,a=o+d):(n=(o=i.caretX)-d,a=o+d),"top"===c)s=(r=g)-d,l=r;else{s=(r=g+m)+d,l=r;var v=a;a=n,n=v}return{x1:n,x2:o,x3:a,y1:r,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;if(n.length){t.x=nt(e,e._titleAlign),i.textAlign=e._titleAlign,i.textBaseline="top";var o,a,r=e.titleFontSize,s=e.titleSpacing;for(i.fillStyle=e.titleFontColor,i.font=me.fontString(r,e._titleFontStyle,e._titleFontFamily),o=0,a=n.length;o<a;++o)i.fillText(n[o],t.x,t.y),t.y+=r+s,o+1===n.length&&(t.y+=e.titleMarginBottom-s)}},drawBody:function(t,e,i){var n,o=e.bodyFontSize,a=e.bodySpacing,r=e._bodyAlign,s=e.body,l=e.displayColors,d=e.labelColors,u=0,h=l?nt(e,"left"):0;i.textAlign=r,i.textBaseline="top",i.font=me.fontString(o,e._bodyFontStyle,e._bodyFontFamily),t.x=nt(e,r);var c=function(e){i.fillText(e,t.x+u,t.y),t.y+=o+a};i.fillStyle=e.bodyFontColor,me.each(e.beforeBody,c),u=l&&"right"!==r?"center"===r?o/2+1:o+2:0,me.each(s,function(a,r){n=e.labelTextColors[r],i.fillStyle=n,me.each(a.before,c),me.each(a.lines,function(a){l&&(i.fillStyle=e.legendColorBackground,i.fillRect(h,t.y,o,o),i.lineWidth=1,i.strokeStyle=d[r].borderColor,i.strokeRect(h,t.y,o,o),i.fillStyle=d[r].backgroundColor,i.fillRect(h+1,t.y+1,o-2,o-2),i.fillStyle=n),c(a)}),me.each(a.after,c)}),u=0,me.each(e.afterBody,c),t.y-=a},drawFooter:function(t,e,i){var n=e.footer;n.length&&(t.x=nt(e,e._footerAlign),t.y+=e.footerMarginTop,i.textAlign=e._footerAlign,i.textBaseline="top",i.fillStyle=e.footerFontColor,i.font=me.fontString(e.footerFontSize,e._footerFontStyle,e._footerFontFamily),me.each(n,function(n){i.fillText(n,t.x,t.y),t.y+=e.footerFontSize+e.footerSpacing}))},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth;var o=e.xAlign,a=e.yAlign,r=t.x,s=t.y,l=n.width,d=n.height,u=e.cornerRadius;i.beginPath(),i.moveTo(r+u,s),"top"===a&&this.drawCaret(t,n),i.lineTo(r+l-u,s),i.quadraticCurveTo(r+l,s,r+l,s+u),"center"===a&&"right"===o&&this.drawCaret(t,n),i.lineTo(r+l,s+d-u),i.quadraticCurveTo(r+l,s+d,r+l-u,s+d),"bottom"===a&&this.drawCaret(t,n),i.lineTo(r+u,s+d),i.quadraticCurveTo(r,s+d,r,s+d-u),"center"===a&&"left"===o&&this.drawCaret(t,n),i.lineTo(r,s+u),i.quadraticCurveTo(r,s,r+u,s),i.closePath(),i.fill(),e.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},o=Math.abs(e.opacity<.001)?0:e.opacity,a=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&a&&(t.save(),t.globalAlpha=o,this.drawBackground(n,e,t,i),n.y+=e.yPadding,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),t.restore())}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),(e=!me.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}}),Ai=Mi,Ii=Ti;Ii.positioners=Ai;var Di=me.valueOrDefault;fe._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Pi=function(t,e){return this.construct(t,e),this};me.extend(Pi.prototype,{construct:function(t,e){var i=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=rt(fe.global,fe[t.type],t.options||{}),t}(e);var n=wi.acquireContext(t,e),o=n&&n.canvas,a=o&&o.height,r=o&&o.width;i.id=me.uid(),i.ctx=n,i.canvas=o,i.config=e,i.width=r,i.height=a,i.aspectRatio=a?r/a:null,i.options=e.options,i._bufferedRender=!1,i.chart=i,i.controller=i,Pi.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}}),n&&o?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return _i.notify(t,"beforeInit"),me.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.initToolTip(),_i.notify(t,"afterInit"),t},clear:function(){return me.canvas.clear(this),this},stop:function(){return Ce.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,o=i.maintainAspectRatio&&e.aspectRatio||null,a=Math.max(0,Math.floor(me.getMaximumWidth(n))),r=Math.max(0,Math.floor(o?a/o:me.getMaximumHeight(n)));if((e.width!==a||e.height!==r)&&(n.width=e.width=a,n.height=e.height=r,n.style.width=a+"px",n.style.height=r+"px",me.retinaScale(e,i.devicePixelRatio),!t)){var s={width:a,height:r};_i.notify(e,"resize",[s]),i.onResize&&i.onResize(e,s),e.stop(),e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;me.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),me.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,i=t.scales||{},n=[],o=Object.keys(i).reduce(function(t,e){return t[e]=!1,t},{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),me.each(n,function(e){var n=e.options,a=n.id,r=Di(n.type,e.dtype);st(n.position)!==st(e.dposition)&&(n.position=e.dposition),o[a]=!0;var s=null;if(a in i&&i[a].type===r)(s=i[a]).options=n,s.ctx=t.ctx,s.chart=t;else{var l=Ci.getScaleConstructor(r);if(!l)return;s=new l({id:a,type:r,options:n,ctx:t.ctx,chart:t}),i[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)}),me.each(o,function(t,e){t||delete i[e]}),t.scales=i,Ci.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,e=[];return me.each(t.data.datasets,function(i,n){var o=t.getDatasetMeta(n),a=i.type||t.config.type;if(o.type&&o.type!==a&&(t.destroyDatasetMeta(n),o=t.getDatasetMeta(n)),o.type=a,o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{var r=li[o.type];if(void 0===r)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new r(t,n),e.push(o.controller)}},t),e},resetElements:function(){var t=this;me.each(t.data.datasets,function(e,i){t.getDatasetMeta(i).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),i=(e=n).options,me.each(e.scales,function(t){hi.removeBox(e,t)}),i=rt(fe.global,fe[e.config.type],i),e.options=e.config.options=i,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=i.tooltips,e.tooltip.initialize(),_i._invalidate(n),!1!==_i.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var o=n.buildOrUpdateControllers();me.each(n.data.datasets,function(t,e){n.getDatasetMeta(e).controller.buildOrUpdateElements()},n),n.updateLayout(),n.options.animation&&n.options.animation.duration&&me.each(o,function(t){t.reset()}),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],_i.notify(n,"afterUpdate"),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){!1!==_i.notify(this,"beforeLayout")&&(hi.update(this,this.width,this.height),_i.notify(this,"afterScaleUpdate"),_i.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==_i.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);_i.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==_i.notify(this,"beforeDatasetUpdate",[i])&&(e.controller.update(),_i.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=e.options.animation,n=Di(t.duration,i&&i.duration),o=t.lazy;if(!1!==_i.notify(e,"beforeRender")){var a=function(t){_i.notify(e,"afterRender"),me.callback(i&&i.onComplete,[t],e)};if(i&&n){var r=new _e({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=me.easing.effects[e.easing],n=e.currentStep,o=n/e.numSteps;t.draw(i(o),o,n)},onAnimationProgress:i.onProgress,onAnimationComplete:a});Ce.addAnimation(e,r,n,o)}else e.draw(),a(new _e({numSteps:0,chart:e}));return e}},draw:function(t){var e=this;e.clear(),me.isNullOrUndef(t)&&(t=1),e.transition(t),e.width<=0||e.height<=0||!1!==_i.notify(e,"beforeDraw",[t])&&(me.each(e.boxes,function(t){t.draw(e.chartArea)},e),e.drawDatasets(t),e._drawTooltip(t),_i.notify(e,"afterDraw",[t]))},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},drawDatasets:function(t){var e=this;if(!1!==_i.notify(e,"beforeDatasetsDraw",[t])){for(var i=(e.data.datasets||[]).length-1;i>=0;--i)e.isDatasetVisible(i)&&e.drawDataset(i,t);_i.notify(e,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i=this.getDatasetMeta(t),n={meta:i,index:t,easingValue:e};!1!==_i.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(e),_i.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==_i.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),_i.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return di.modes.single(this,t)},getElementsAtEvent:function(t){return di.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return di.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=di.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return di.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),me.canvas.clear(i),wi.releaseContext(i.ctx),i.canvas=null,i.ctx=null),_i.notify(i,"destroy"),delete Pi.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ii({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},i=function(){t.eventHandler.apply(t,arguments)};me.each(t.options.events,function(n){wi.addEventListener(t,n,i),e[n]=i}),t.options.responsive&&(i=function(){t.resize()},wi.addEventListener(t,"resize",i),e.resize=i)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,me.each(e,function(e,i){wi.removeEventListener(t,i,e)}))},updateHoverStyle:function(t,e,i){var n,o,a,r=i?"setHoverStyle":"removeHoverStyle";for(o=0,a=t.length;o<a;++o)(n=t[o])&&this.getDatasetMeta(n._datasetIndex).controller[r](n)},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==_i.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),_i.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;return o?e.render(o):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},o=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,o.mode,o),me.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,o.mode,!1),i.active.length&&o.mode&&i.updateHoverStyle(i.active,o.mode,!0),e=!me.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),Pi.instances={};var $i=Pi;Pi.Controller=Pi,Pi.types={},me.configMerge=rt,me.scaleMerge=at,me.extend(dt.prototype,{formats:lt,parse:lt,format:lt,add:lt,diff:lt,startOf:lt,endOf:lt,_create:function(t){return t}}),dt.override=function(t){me.extend(dt.prototype,t)};var Fi={_date:dt},Li={formatters:{values:function(t){return me.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var o=me.log10(Math.abs(n)),a="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var r=me.log10(Math.abs(t));a=t.toExponential(Math.floor(r)-Math.floor(o))}else{var s=-1*Math.floor(o);s=Math.max(Math.min(s,20),0),a=t.toFixed(s)}else a="0";return a},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(me.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}},Oi=me.valueOrDefault,Ri=me.valueAtIndexOrDefault;fe._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Li.formatters.values,minor:{},major:{}}});var Ni=ke.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;for(var e in!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1}),t)"major"!==e&&"minor"!==e&&(void 0===t.minor[e]&&(t.minor[e]=t[e]),void 0===t.major[e]&&(t.major[e]=t[e]))},beforeUpdate:function(){me.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,o,a,r,s,l,d=this;for(d.beforeUpdate(),d.maxWidth=t,d.maxHeight=e,d.margins=me.extend({left:0,right:0,top:0,bottom:0},i),d._maxLabelLines=0,d.longestLabelWidth=0,d.longestTextCache=d.longestTextCache||{},d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeDataLimits(),d.determineDataLimits(),d.afterDataLimits(),d.beforeBuildTicks(),s=d.buildTicks()||[],s=d.afterBuildTicks(s)||s,d.beforeTickToLabelConversion(),a=d.convertTicksToLabels(s)||d.ticks,d.afterTickToLabelConversion(),d.ticks=a,n=0,o=a.length;n<o;++n)r=a[n],(l=s[n])?l.label=r:s.push(l={label:r,major:!1});return d._ticks=s,d.beforeCalculateTickRotation(),d.calculateTickRotation(),d.afterCalculateTickRotation(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:function(){me.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){me.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){me.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){me.callback(this.options.beforeDataLimits,[this])},determineDataLimits:me.noop,afterDataLimits:function(){me.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){me.callback(this.options.beforeBuildTicks,[this])},buildTicks:me.noop,afterBuildTicks:function(t){var e=this;return me.isArray(t)&&t.length?me.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=me.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){me.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){me.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){me.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this,e=t.ctx,i=t.options.ticks,n=ut(t._ticks),o=me.options._parseFont(i);e.font=o.string;var a=i.minRotation||0;if(n.length&&t.options.display&&t.isHorizontal())for(var r,s=me.longestText(e,o.string,n,t.longestTextCache),l=s,d=t.getPixelForTick(1)-t.getPixelForTick(0)-6;l>d&&a<i.maxRotation;){var u=me.toRadians(a);if(r=Math.cos(u),Math.sin(u)*s>t.maxHeight){a--;break}a++,l=r*s}t.labelRotation=a},afterCalculateTickRotation:function(){me.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){me.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=ut(t._ticks),n=t.options,o=n.ticks,a=n.scaleLabel,r=n.gridLines,s=t._isVisible(),l=n.position,d=t.isHorizontal(),u=me.options._parseFont,h=u(o),c=n.gridLines.tickMarkLength;if(e.width=d?t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:s&&r.drawTicks?c:0,e.height=d?s&&r.drawTicks?c:0:t.maxHeight,a.display&&s){var f=u(a),g=me.options.toPadding(a.padding),p=f.lineHeight+g.height;d?e.height+=p:e.width+=p}if(o.display&&s){var m=me.longestText(t.ctx,h.string,i,t.longestTextCache),v=me.numberOfLabelLines(i),b=.5*h.size,y=t.options.ticks.padding;if(t._maxLabelLines=v,t.longestLabelWidth=m,d){var x=me.toRadians(t.labelRotation),k=Math.cos(x),w=Math.sin(x)*m+h.lineHeight*v+b;e.height=Math.min(t.maxHeight,e.height+w+y),t.ctx.font=h.string;var _,C,S=ht(t.ctx,i[0],h.string),M=ht(t.ctx,i[i.length-1],h.string),T=t.getPixelForTick(0)-t.left,A=t.right-t.getPixelForTick(i.length-1);0!==t.labelRotation?(_="bottom"===l?k*S:k*b,C="bottom"===l?k*b:k*M):(_=S/2,C=M/2),t.paddingLeft=Math.max(_-T,0)+3,t.paddingRight=Math.max(C-A,0)+3}else o.mirror?m=0:m+=y+b,e.width=Math.min(t.maxWidth,e.width+m),t.paddingTop=h.size/2,t.paddingBottom=h.size/2}t.handleMargins(),t.width=e.width,t.height=e.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))},afterFit:function(){me.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(me.isNullOrUndef(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:me.noop,getPixelForValue:me.noop,getValueForPixel:me.noop,getPixelForTick:function(t){var e=this,i=e.options.offset;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))/Math.max(e._ticks.length-(i?0:1),1),o=n*t+e.paddingLeft;i&&(o+=n/2);var a=e.left+o;return a+=e.isFullWidth()?e.margins.left:0}var r=e.height-(e.paddingTop+e.paddingBottom);return e.top+t*(r/(e._ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var i=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft,n=e.left+i;return n+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,i,n=this,o=n.isHorizontal(),a=n.options.ticks.minor,r=t.length,s=!1,l=a.maxTicksLimit,d=n._tickSize()*(r-1),u=o?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),h=[];for(d>u&&(s=1+Math.floor(d/u)),r>l&&(s=Math.max(s,1+Math.floor(r/l))),e=0;e<r;e++)i=t[e],s>1&&e%s>0&&delete i.label,h.push(i);return h},_tickSize:function(){var t=this,e=t.isHorizontal(),i=t.options.ticks.minor,n=me.toRadians(t.labelRotation),o=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),r=i.autoSkipPadding||0,s=t.longestLabelWidth+r||0,l=me.options._parseFont(i),d=t._maxLabelLines*l.lineHeight+r||0;return e?d*o>s*a?s/o:d/a:d*a<s*o?d/o:s/a},_isVisible:function(){var t,e,i,n=this.chart,o=this.options.display;if("auto"!==o)return!!o;for(t=0,e=n.data.datasets.length;t<e;++t)if(n.isDatasetVisible(t)&&((i=n.getDatasetMeta(t)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(t){var e=this,i=e.options;if(e._isVisible()){var n,o,a,r=e.chart,s=e.ctx,l=fe.global.defaultFontColor,d=i.ticks.minor,u=i.ticks.major||d,h=i.gridLines,c=i.scaleLabel,f=i.position,g=0!==e.labelRotation,p=d.mirror,m=e.isHorizontal(),v=me.options._parseFont,b=d.display&&d.autoSkip?e._autoSkip(e.getTicks()):e.getTicks(),y=Oi(d.fontColor,l),x=v(d),k=x.lineHeight,w=Oi(u.fontColor,l),_=v(u),C=d.padding,S=d.labelOffset,M=h.drawTicks?h.tickMarkLength:0,T=Oi(c.fontColor,l),A=v(c),I=me.options.toPadding(c.padding),D=me.toRadians(e.labelRotation),P=[],$=h.drawBorder?Ri(h.lineWidth,0,0):0,F=me._alignPixel;if("top"===f?(n=F(r,e.bottom,$),o=e.bottom-M,a=n-$/2):"bottom"===f?(n=F(r,e.top,$),o=n+$/2,a=e.top+M):"left"===f?(n=F(r,e.right,$),o=e.right-M,a=n-$/2):(n=F(r,e.left,$),o=n+$/2,a=e.left+M),me.each(b,function(n,s){if(!me.isNullOrUndef(n.label)){var l,d,u,c,v,b,y,x,w,_,T,A,I,L,O,R,N=n.label;s===e.zeroLineIndex&&i.offset===h.offsetGridLines?(l=h.zeroLineWidth,d=h.zeroLineColor,u=h.zeroLineBorderDash||[],c=h.zeroLineBorderDashOffset||0):(l=Ri(h.lineWidth,s),d=Ri(h.color,s),u=h.borderDash||[],c=h.borderDashOffset||0);var E=me.isArray(N)?N.length:1,z=function(t,e,i){var n=t.getPixelForTick(e);return i&&(1===t.getTicks().length?n-=t.isHorizontal()?Math.max(n-t.left,t.right-n):Math.max(n-t.top,t.bottom-n):n-=0===e?(t.getPixelForTick(1)-n)/2:(n-t.getPixelForTick(e-1))/2),n}(e,s,h.offsetGridLines);if(m){var V=M+C;z<e.left-1e-7&&(d="rgba(0,0,0,0)"),v=y=w=T=F(r,z,l),b=o,x=a,I=e.getPixelForTick(s)+S,"top"===f?(_=F(r,t.top,$)+$/2,A=t.bottom,O=((g?1:.5)-E)*k,R=g?"left":"center",L=e.bottom-V):(_=t.top,A=F(r,t.bottom,$)-$/2,O=(g?0:.5)*k,R=g?"right":"center",L=e.top+V)}else{var B=(p?0:M)+C;z<e.top-1e-7&&(d="rgba(0,0,0,0)"),v=o,y=a,b=x=_=A=F(r,z,l),L=e.getPixelForTick(s)+S,O=(1-E)*k/2,"left"===f?(w=F(r,t.left,$)+$/2,T=t.right,R=p?"left":"right",I=e.right-B):(w=t.left,T=F(r,t.right,$)-$/2,R=p?"right":"left",I=e.left+B)}P.push({tx1:v,ty1:b,tx2:y,ty2:x,x1:w,y1:_,x2:T,y2:A,labelX:I,labelY:L,glWidth:l,glColor:d,glBorderDash:u,glBorderDashOffset:c,rotation:-1*D,label:N,major:n.major,textOffset:O,textAlign:R})}}),me.each(P,function(t){var e=t.glWidth,i=t.glColor;if(h.display&&e&&i&&(s.save(),s.lineWidth=e,s.strokeStyle=i,s.setLineDash&&(s.setLineDash(t.glBorderDash),s.lineDashOffset=t.glBorderDashOffset),s.beginPath(),h.drawTicks&&(s.moveTo(t.tx1,t.ty1),s.lineTo(t.tx2,t.ty2)),h.drawOnChartArea&&(s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2)),s.stroke(),s.restore()),d.display){s.save(),s.translate(t.labelX,t.labelY),s.rotate(t.rotation),s.font=t.major?_.string:x.string,s.fillStyle=t.major?w:y,s.textBaseline="middle",s.textAlign=t.textAlign;var n=t.label,o=t.textOffset;if(me.isArray(n))for(var a=0;a<n.length;++a)s.fillText(""+n[a],0,o),o+=k;else s.fillText(n,0,o);s.restore()}}),c.display){var L,O,R=0,N=A.lineHeight/2;if(m)L=e.left+(e.right-e.left)/2,
O="bottom"===f?e.bottom-N-I.bottom:e.top+N+I.top;else{var E="left"===f;L=E?e.left+N+I.top:e.right-N-I.top,O=e.top+(e.bottom-e.top)/2,R=E?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(L,O),s.rotate(R),s.textAlign="center",s.textBaseline="middle",s.fillStyle=T,s.font=A.string,s.fillText(c.labelString,0,0),s.restore()}if($){var z,V,B,W,j=$,H=Ri(h.lineWidth,b.length-1,0);m?(z=F(r,e.left,j)-j/2,V=F(r,e.right,H)+H/2,B=W=n):(B=F(r,e.top,j)-j/2,W=F(r,e.bottom,H)+H/2,z=V=n),s.lineWidth=$,s.strokeStyle=Ri(h.color,0),s.beginPath(),s.moveTo(z,B),s.lineTo(V,W),s.stroke()}}}}),Ei=Ni.extend({getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t,e=this,i=e.getLabels();e.minIndex=0,e.maxIndex=i.length-1,void 0!==e.options.ticks.min&&(t=i.indexOf(e.options.ticks.min),e.minIndex=-1!==t?t:e.minIndex),void 0!==e.options.ticks.max&&(t=i.indexOf(e.options.ticks.max),e.maxIndex=-1!==t?t:e.maxIndex),e.min=i[e.minIndex],e.max=i[e.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var i=this,n=i.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[e].data[t]):i.ticks[t-i.minIndex]},getPixelForValue:function(t,e){var i,n=this,o=n.options.offset,a=Math.max(n.maxIndex+1-n.minIndex-(o?0:1),1);if(null!=t&&(i=n.isHorizontal()?t.x:t.y),void 0!==i||void 0!==t&&isNaN(e)){t=i||t;var r=n.getLabels().indexOf(t);e=-1!==r?r:e}if(n.isHorizontal()){var s=n.width/a,l=s*(e-n.minIndex);return o&&(l+=s/2),n.left+l}var d=n.height/a,u=d*(e-n.minIndex);return o&&(u+=d/2),n.top+u},getPixelForTick:function(t){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null)},getValueForPixel:function(t){var e=this,i=e.options.offset,n=Math.max(e._ticks.length-(i?0:1),1),o=e.isHorizontal(),a=(o?e.width:e.height)/n;return t-=o?e.left:e.top,i&&(t-=a/2),(t<=0?0:Math.round(t/a))+e.minIndex},getBasePixel:function(){return this.bottom}}),zi={position:"bottom"};Ei._defaults=zi;var Vi=me.noop,Bi=me.isNullOrUndef,Wi=Ni.extend({getRightValue:function(t){return"string"==typeof t?+t:Ni.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=me.sign(t.min),n=me.sign(t.max);i<0&&n<0?t.max=0:i>0&&n>0&&(t.min=0)}var o=void 0!==e.min||void 0!==e.suggestedMin,a=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),o!==a&&t.min>=t.max&&(o?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,i=e.stepSize,n=e.maxTicksLimit;return i?t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(t=this._computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Vi,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:me.valueOrDefault(e.fixedStepSize,e.stepSize)},o=t.ticks=function(t,e){var i,n,o,a,r=[],s=t.stepSize,l=s||1,d=t.maxTicks-1,u=t.min,h=t.max,c=t.precision,f=e.min,g=e.max,p=me.niceNum((g-f)/d/l)*l;if(p<1e-14&&Bi(u)&&Bi(h))return[f,g];(a=Math.ceil(g/p)-Math.floor(f/p))>d&&(p=me.niceNum(a*p/d/l)*l),s||Bi(c)?i=Math.pow(10,me._decimalPlaces(p)):(i=Math.pow(10,c),p=Math.ceil(p*i)/i),n=Math.floor(f/p)*p,o=Math.ceil(g/p)*p,s&&(!Bi(u)&&me.almostWhole(u/p,p/1e3)&&(n=u),!Bi(h)&&me.almostWhole(h/p,p/1e3)&&(o=h)),a=(o-n)/p,a=me.almostEquals(a,Math.round(a),p/1e3)?Math.round(a):Math.ceil(a),n=Math.round(n*i)/i,o=Math.round(o*i)/i,r.push(Bi(u)?n:u);for(var m=1;m<a;++m)r.push(Math.round((n+m*p)*i)/i);return r.push(Bi(h)?o:h),r}(n,t);t.handleDirectionalChanges(),t.max=me.max(o),t.min=me.min(o),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),Ni.prototype.convertTicksToLabels.call(t)}}),ji={position:"left",ticks:{callback:Li.formatters.linear}},Hi=Wi.extend({determineDataLimits:function(){function t(t){return a?t.xAxisID===e.id:t.yAxisID===e.id}var e=this,i=e.options,n=e.chart,o=n.data.datasets,a=e.isHorizontal();e.min=null,e.max=null;var r=i.stacked;if(void 0===r&&me.each(o,function(e,i){if(!r){var o=n.getDatasetMeta(i);n.isDatasetVisible(i)&&t(o)&&void 0!==o.stack&&(r=!0)}}),i.stacked||r){var s={};me.each(o,function(o,a){var r=n.getDatasetMeta(a),l=[r.type,void 0===i.stacked&&void 0===r.stack?a:"",r.stack].join(".");void 0===s[l]&&(s[l]={positiveValues:[],negativeValues:[]});var d=s[l].positiveValues,u=s[l].negativeValues;n.isDatasetVisible(a)&&t(r)&&me.each(o.data,function(t,n){var o=+e.getRightValue(t);isNaN(o)||r.data[n].hidden||(d[n]=d[n]||0,u[n]=u[n]||0,i.relativePoints?d[n]=100:o<0?u[n]+=o:d[n]+=o)})}),me.each(s,function(t){var i=t.positiveValues.concat(t.negativeValues),n=me.min(i),o=me.max(i);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?o:Math.max(e.max,o)})}else me.each(o,function(i,o){var a=n.getDatasetMeta(o);n.isDatasetVisible(o)&&t(a)&&me.each(i.data,function(t,i){var n=+e.getRightValue(t);isNaN(n)||a.data[i].hidden||(null===e.min?e.min=n:n<e.min&&(e.min=n),null===e.max?e.max=n:n>e.max&&(e.max=n))})});e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=me.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this,i=e.start,n=+e.getRightValue(t),o=e.end-i;return e.isHorizontal()?e.left+e.width/o*(n-i):e.bottom-e.height/o*(n-i)},getValueForPixel:function(t){var e=this,i=e.isHorizontal(),n=i?e.width:e.height,o=(i?t-e.left:e.bottom-t)/n;return e.start+(e.end-e.start)*o},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}}),Ui=ji;Hi._defaults=Ui;var qi=me.valueOrDefault,Gi={position:"left",ticks:{callback:Li.formatters.logarithmic}},Yi=Ni.extend({determineDataLimits:function(){function t(t){return a?t.xAxisID===e.id:t.yAxisID===e.id}var e=this,i=e.options,n=e.chart,o=n.data.datasets,a=e.isHorizontal();e.min=null,e.max=null,e.minNotZero=null;var r=i.stacked;if(void 0===r&&me.each(o,function(e,i){if(!r){var o=n.getDatasetMeta(i);n.isDatasetVisible(i)&&t(o)&&void 0!==o.stack&&(r=!0)}}),i.stacked||r){var s={};me.each(o,function(o,a){var r=n.getDatasetMeta(a),l=[r.type,void 0===i.stacked&&void 0===r.stack?a:"",r.stack].join(".");n.isDatasetVisible(a)&&t(r)&&(void 0===s[l]&&(s[l]=[]),me.each(o.data,function(t,i){var n=s[l],o=+e.getRightValue(t);isNaN(o)||r.data[i].hidden||o<0||(n[i]=n[i]||0,n[i]+=o)}))}),me.each(s,function(t){if(t.length>0){var i=me.min(t),n=me.max(t);e.min=null===e.min?i:Math.min(e.min,i),e.max=null===e.max?n:Math.max(e.max,n)}})}else me.each(o,function(i,o){var a=n.getDatasetMeta(o);n.isDatasetVisible(o)&&t(a)&&me.each(i.data,function(t,i){var n=+e.getRightValue(t);isNaN(n)||a.data[i].hidden||n<0||(null===e.min?e.min=n:n<e.min&&(e.min=n),null===e.max?e.max=n:n>e.max&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))})});this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=ct(e.min,t.min),t.max=ct(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(me.log10(t.min))-1),t.max=Math.pow(10,Math.floor(me.log10(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(me.log10(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(me.log10(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(me.log10(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:ct(e.min),max:ct(e.max)},o=t.ticks=function(t,e){var i,n,o=[],a=qi(t.min,Math.pow(10,Math.floor(me.log10(e.min)))),r=Math.floor(me.log10(e.max)),s=Math.ceil(e.max/Math.pow(10,r));0===a?(i=Math.floor(me.log10(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),o.push(a),a=n*Math.pow(10,i)):(i=Math.floor(me.log10(a)),n=Math.floor(a/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{o.push(a),10==++n&&(n=1,l=++i>=0?1:l),a=Math.round(n*Math.pow(10,i)*l)/l}while(i<r||i===r&&n<s);var d=qi(t.max,a);return o.push(d),o}(n,t);t.max=me.max(o),t.min=me.min(o),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Ni.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},_getFirstTickValue:function(t){var e=Math.floor(me.log10(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},getPixelForValue:function(t){var e,i,n,o,a,r=this,s=r.options.ticks,l=s.reverse,d=me.log10,u=r._getFirstTickValue(r.minNotZero),h=0;return t=+r.getRightValue(t),l?(n=r.end,o=r.start,a=-1):(n=r.start,o=r.end,a=1),r.isHorizontal()?(e=r.width,i=l?r.right:r.left):(e=r.height,a*=-1,i=l?r.top:r.bottom),t!==n&&(0===n&&(e-=h=qi(s.fontSize,fe.global.defaultFontSize),n=u),0!==t&&(h+=e/(d(o)-d(n))*(d(t)-d(n))),i+=a*h),i},getValueForPixel:function(t){var e,i,n,o,a=this,r=a.options.ticks,s=r.reverse,l=me.log10,d=a._getFirstTickValue(a.minNotZero);if(s?(i=a.end,n=a.start):(i=a.start,n=a.end),a.isHorizontal()?(e=a.width,o=s?a.right-t:t-a.left):(e=a.height,o=s?t-a.top:a.bottom-t),o!==i){if(0===i){var u=qi(r.fontSize,fe.global.defaultFontSize);o-=u,e-=u,i=d}o*=l(n)-l(i),o/=e,o=Math.pow(10,l(i)+o)}return o}}),Qi=Gi;Yi._defaults=Qi;var Ki=me.valueOrDefault,Xi=me.valueAtIndexOrDefault,Zi=me.options.resolve,Ji={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Li.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}},tn=Wi.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=gt(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;me.each(e.data.datasets,function(o,a){if(e.isDatasetVisible(a)){var r=e.getDatasetMeta(a);me.each(o.data,function(e,o){var a=+t.getRightValue(e);isNaN(a)||r.data[o].hidden||(i=Math.min(a,i),n=Math.max(a,n))})}}),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gt(this.options))},convertTicksToLabels:function(){var t=this;Wi.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,i,n,o=me.options._parseFont(t.options.pointLabels),a={l:0,r:t.width,t:0,b:t.height-t.paddingTop},r={};t.ctx.font=o.string,t._pointLabelSizes=[];var s,l,d,u=ft(t);for(e=0;e<u;e++){n=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=o.lineHeight,d=t.pointLabels[e]||"",i=me.isArray(d)?{w:me.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},t._pointLabelSizes[e]=i;var h=t.getIndexAngle(e),c=me.toDegrees(h)%360,f=pt(c,n.x,i.w,0,180),g=pt(c,n.y,i.h,90,270);f.start<a.l&&(a.l=f.start,r.l=h),f.end>a.r&&(a.r=f.end,r.r=h),g.start<a.t&&(a.t=g.start,r.t=h),g.end>a.b&&(a.b=g.end,r.b=h)}t.setReductions(t.drawingArea,a,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this,o=e.l/Math.sin(i.l),a=Math.max(e.r-n.width,0)/Math.sin(i.r),r=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=yt(o),a=yt(a),r=yt(r),s=yt(s),n.drawingArea=Math.min(Math.floor(t-(o+a)/2),Math.floor(t-(r+s)/2)),n.setCenterPoint(o,a,r,s)},setCenterPoint:function(t,e,i,n){var o=this,a=o.width-e-o.drawingArea,r=t+o.drawingArea,s=i+o.drawingArea,l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((r+a)/2+o.left),o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(t){return t*(2*Math.PI/ft(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this.min,e=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0)},draw:function(){var t=this,e=t.options,i=e.gridLines,n=e.ticks;if(e.display){var o=t.ctx,a=this.getIndexAngle(0),r=me.options._parseFont(n);(e.angleLines.display||e.pointLabels.display)&&function(t){var e=t.ctx,i=t.options,n=i.angleLines,o=i.gridLines,a=i.pointLabels,r=Ki(n.lineWidth,o.lineWidth),s=Ki(n.color,o.color),l=gt(i);e.save(),e.lineWidth=r,e.strokeStyle=s,e.setLineDash&&(e.setLineDash(Zi([n.borderDash,o.borderDash,[]])),e.lineDashOffset=Zi([n.borderDashOffset,o.borderDashOffset,0]));var d=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),u=me.options._parseFont(a);e.font=u.string,e.textBaseline="middle";for(var h=ft(t)-1;h>=0;h--){if(n.display&&r&&s){var c=t.getPointPosition(h,d);e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(c.x,c.y),e.stroke()}if(a.display){var f=0===h?l/2:0,g=t.getPointPosition(h,d+f+5),p=Xi(a.fontColor,h,fe.global.defaultFontColor);e.fillStyle=p;var m=t.getIndexAngle(h),v=me.toDegrees(m);e.textAlign=mt(v),bt(v,t._pointLabelSizes[h],g),vt(e,t.pointLabels[h]||"",g,u.lineHeight)}}e.restore()}(t),me.each(t.ticks,function(e,s){if(s>0||n.reverse){var l=t.getDistanceFromCenterForValue(t.ticksAsNumbers[s]);if(i.display&&0!==s&&function(t,e,i,n){var o,a=t.ctx,r=e.circular,s=ft(t),l=Xi(e.color,n-1),d=Xi(e.lineWidth,n-1);if((r||s)&&l&&d){if(a.save(),a.strokeStyle=l,a.lineWidth=d,a.setLineDash&&(a.setLineDash(e.borderDash||[]),a.lineDashOffset=e.borderDashOffset||0),a.beginPath(),r)a.arc(t.xCenter,t.yCenter,i,0,2*Math.PI);else{o=t.getPointPosition(0,i),a.moveTo(o.x,o.y);for(var u=1;u<s;u++)o=t.getPointPosition(u,i),a.lineTo(o.x,o.y)}a.closePath(),a.stroke(),a.restore()}}(t,i,l,s),n.display){var d=Ki(n.fontColor,fe.global.defaultFontColor);if(o.font=r.string,o.save(),o.translate(t.xCenter,t.yCenter),o.rotate(a),n.showLabelBackdrop){var u=o.measureText(e).width;o.fillStyle=n.backdropColor,o.fillRect(-u/2-n.backdropPaddingX,-l-r.size/2-n.backdropPaddingY,u+2*n.backdropPaddingX,r.size+2*n.backdropPaddingY)}o.textAlign="center",o.textBaseline="middle",o.fillStyle=d,o.fillText(e,0,-l),o.restore()}}})}}}),en=Ji;tn._defaults=en;var nn=me.valueOrDefault,on=Number.MIN_SAFE_INTEGER||-9007199254740991,an=Number.MAX_SAFE_INTEGER||9007199254740991,rn={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},sn=Object.keys(rn),ln=Ni.extend({initialize:function(){this.mergeTicksOptions(),Ni.prototype.initialize.call(this)},update:function(){var t=this.options,e=t.time||(t.time={}),i=this._adapter=new Fi._date(t.adapters.date);return e.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),me.mergeIf(e.displayFormats,i.formats()),Ni.prototype.update.apply(this,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),Ni.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,o,a,r=this,s=r.chart,l=r._adapter,d=r.options.time,u=d.unit||"day",h=an,c=on,f=[],g=[],p=[],m=s.data.labels||[];for(t=0,i=m.length;t<i;++t)p.push(Ct(r,m[t]));for(t=0,i=(s.data.datasets||[]).length;t<i;++t)if(s.isDatasetVisible(t))if(o=s.data.datasets[t].data,me.isObject(o[0]))for(g[t]=[],e=0,n=o.length;e<n;++e)a=Ct(r,o[e]),f.push(a),g[t][e]=a;else{for(e=0,n=p.length;e<n;++e)f.push(p[e]);g[t]=p.slice(0)}else g[t]=[];p.length&&(p=kt(p).sort(xt),h=Math.min(h,p[0]),c=Math.max(c,p[p.length-1])),f.length&&(f=kt(f).sort(xt),h=Math.min(h,f[0]),c=Math.max(c,f[f.length-1])),h=Ct(r,d.min)||h,c=Ct(r,d.max)||c,h=h===an?+l.startOf(Date.now(),u):h,c=c===on?+l.endOf(Date.now(),u)+1:c,r.min=Math.min(h,c),r.max=Math.max(h+1,c),r._horizontal=r.isHorizontal(),r._table=[],r._timestamps={data:f,datasets:g,labels:p}},buildTicks:function(){var t,e,i,n=this,o=n.min,a=n.max,r=n.options,s=r.time,l=[],d=[];switch(r.ticks.source){case"data":l=n._timestamps.data;break;case"labels":l=n._timestamps.labels;break;case"auto":default:l=Mt(n,o,a,n.getLabelCapacity(o))}for("ticks"===r.bounds&&l.length&&(o=l[0],a=l[l.length-1]),o=Ct(n,s.min)||o,a=Ct(n,s.max)||a,t=0,e=l.length;t<e;++t)(i=l[t])>=o&&i<=a&&d.push(i);return n.min=o,n.max=a,n._unit=s.unit||function(t,e,i,n,o){var a,r;for(a=sn.length-1;a>=sn.indexOf(i);a--)if(r=sn[a],rn[r].common&&t._adapter.diff(o,n,r)>=e.length)return r;return sn[i?sn.indexOf(i):0]}(n,d,s.minUnit,n.min,n.max),n._majorUnit=St(n._unit),n._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var o,a,r,s,l,d=[],u=[e];for(o=0,a=t.length;o<a;++o)(s=t[o])>e&&s<i&&u.push(s);for(u.push(i),o=0,a=u.length;o<a;++o)l=u[o+1],r=u[o-1],s=u[o],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===s||d.push({time:s,pos:o/(a-1)});return d}(n._timestamps.data,o,a,r.distribution),n._offsets=function(t,e,i,n,o){var a,r,s=0,l=0;return o.offset&&e.length&&(o.time.min||(a=wt(t,"time",e[0],"pos"),s=1===e.length?1-a:(wt(t,"time",e[1],"pos")-a)/2),o.time.max||(r=wt(t,"time",e[e.length-1],"pos"),l=1===e.length?r:(r-wt(t,"time",e[e.length-2],"pos"))/2)),{start:s,end:l}}(n._table,d,0,0,r),r.ticks.reverse&&d.reverse(),function(t,e,i){var n,o,a,r,s=[];for(n=0,o=e.length;n<o;++n)a=e[n],r=!!i&&a===+t._adapter.startOf(a,i),s.push({value:a,major:r});return s}(n,d,n._majorUnit)},getLabelForIndex:function(t,e){var i=this,n=i._adapter,o=i.chart.data,a=i.options.time,r=o.labels&&t<o.labels.length?o.labels[t]:"",s=o.datasets[e].data[t];return me.isObject(s)&&(r=i.getRightValue(s)),a.tooltipFormat?n.format(_t(i,r),a.tooltipFormat):"string"==typeof r?r:n.format(_t(i,r),a.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var o=this._adapter,a=this.options,r=a.time.displayFormats,s=r[this._unit],l=this._majorUnit,d=r[l],u=+o.startOf(t,l),h=a.ticks.major,c=h.enabled&&l&&d&&t===u,f=o.format(t,n||(c?d:s)),g=c?h:a.ticks.minor,p=nn(g.callback,g.userCallback);return p?p(f,e,i):f},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this,i=e.options.ticks.reverse,n=e._horizontal?e.width:e.height,o=e._horizontal?i?e.right:e.left:i?e.bottom:e.top,a=wt(e._table,"time",t,"pos"),r=n*(e._offsets.start+a)/(e._offsets.start+1+e._offsets.end);return i?o-r:o+r},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=Ct(this,t)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,i=e._horizontal?e.width:e.height,n=e._horizontal?e.left:e.top,o=(i?(t-n)/i:0)*(e._offsets.start+1+e._offsets.start)-e._offsets.end,a=wt(e._table,"pos",o,"time");return e._adapter._create(a)},getLabelWidth:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=me.toRadians(e.maxRotation),o=Math.cos(n),a=Math.sin(n);return i*o+nn(e.fontSize,fe.global.defaultFontSize)*a},getLabelCapacity:function(t){var e=this,i=e.options.time.displayFormats.millisecond,n=e.tickFormatFunction(t,0,[],i),o=e.getLabelWidth(n),a=e.isHorizontal()?e.width:e.height,r=Math.floor(a/o);return r>0?r:1}}),dn={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};ln._defaults=dn;var un={category:Ei,linear:Hi,logarithmic:Yi,radialLinear:tn,time:ln},hn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Fi._date.override("function"==typeof t?{_id:"moment",formats:function(){return hn},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=t(e,i):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,i){return t(e).format(i)},add:function(e,i,n){return t(e).add(i,n).valueOf()},diff:function(e,i,n){return t.duration(t(e).diff(t(i))).as(n)},startOf:function(e,i,n){return e=t(e),"isoWeek"===i?e.isoWeekday(n).valueOf():e.startOf(i).valueOf()},endOf:function(e,i){return t(e).endOf(i).valueOf()},_create:function(e){return t(e)}}:{}),fe._set("global",{plugins:{filler:{propagate:!0}}});var cn={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),o=n&&i.isDatasetVisible(e)&&n.dataset._children||[],a=o.length||0;return a?function(t,e){return e<a&&o[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}},fn={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,o,a,r=(t.data.datasets||[]).length,s=e.propagate,l=[];for(n=0;n<r;++n)a=null,(o=(i=t.getDatasetMeta(n)).dataset)&&o._model&&o instanceof Ee.Line&&(a={visible:t.isDatasetVisible(n),fill:Tt(o,n,r),chart:t,el:o}),i.$filler=a,l.push(a);for(n=0;n<r;++n)(a=l[n])&&(a.fill=It(l,n,s),a.boundary=At(a),a.mapper=Dt(a))},beforeDatasetDraw:function(t,e){var i=e.meta.$filler;if(i){var n=t.ctx,o=i.el,a=o._view,r=o._children||[],s=i.mapper,l=a.backgroundColor||fe.global.defaultColor;s&&l&&r.length&&(me.canvas.clipArea(n,t.chartArea),function(t,e,i,n,o,a){var r,s,l,d,u,h,c,f=e.length,g=n.spanGaps,p=[],m=[],v=0,b=0;for(t.beginPath(),r=0,s=f+!!a;r<s;++r)u=i(d=e[l=r%f]._view,l,n),h=Pt(d),c=Pt(u),h&&c?(v=p.push(d),b=m.push(u)):v&&b&&(g?(h&&p.push(d),c&&m.push(u)):($t(t,p,m,v,b),v=b=0,p=[],m=[]));$t(t,p,m,v,b),t.closePath(),t.fillStyle=o,t.fill()}(n,r,s,a,l,o._loop),me.canvas.unclipArea(n))}}},gn=me.noop,pn=me.valueOrDefault;fe._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,o=n.getDatasetMeta(i);o.hidden=null===o.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return me.isArray(e.datasets)?e.datasets.map(function(e,i){return{text:e.label,fillStyle:me.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(i),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:i}},this):[]}}},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var i=0;i<t.data.datasets.length;i++)e.push('<li><span style="background-color:'+t.data.datasets[i].backgroundColor+'"></span>'),t.data.datasets[i].label&&e.push(t.data.datasets[i].label),e.push("</li>");return e.push("</ul>"),e.join("")}});var mn=ke.extend({initialize:function(t){me.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:gn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:gn,beforeSetDimensions:gn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:gn,beforeBuildLabels:gn,buildLabels:function(){var t=this,e=t.options.labels||{},i=me.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter(function(i){return e.filter(i,t.chart.data)})),t.options.reverse&&i.reverse(),t.legendItems=i},afterBuildLabels:gn,beforeFit:gn,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,o=t.ctx,a=me.options._parseFont(i),r=a.size,s=t.legendHitBoxes=[],l=t.minSize,d=t.isHorizontal();if(d?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n)if(o.font=a.string,d){var u=t.lineWidths=[0],h=0;o.textAlign="left",o.textBaseline="top",me.each(t.legendItems,function(t,e){var n=Ft(i,r)+r/2+o.measureText(t.text).width;(0===e||u[u.length-1]+n+i.padding>l.width)&&(h+=r+i.padding,u[u.length-(e>0?0:1)]=i.padding),s[e]={left:0,top:0,width:n,height:r},u[u.length-1]+=n+i.padding}),l.height+=h}else{var c=i.padding,f=t.columnWidths=[],g=i.padding,p=0,m=0,v=r+c;me.each(t.legendItems,function(t,e){var n=Ft(i,r)+r/2+o.measureText(t.text).width;e>0&&m+v>l.height-c&&(g+=p+i.padding,f.push(p),p=0,m=0),p=Math.max(p,n),m+=v,s[e]={left:0,top:0,width:n,height:r}}),g+=p,f.push(p),l.width+=g}t.width=l.width,t.height=l.height},afterFit:gn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,i=e.labels,n=fe.global,o=n.defaultColor,a=n.elements.line,r=t.width,s=t.lineWidths;if(e.display){var l,d=t.ctx,u=pn(i.fontColor,n.defaultFontColor),h=me.options._parseFont(i),c=h.size;d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=u,d.fillStyle=u,d.font=h.string;var f=Ft(i,c),g=t.legendHitBoxes,p=t.isHorizontal();l=p?{x:t.left+(r-s[0])/2+i.padding,y:t.top+i.padding,line:0}:{x:t.left+i.padding,y:t.top+i.padding,line:0};var m=c+i.padding;me.each(t.legendItems,function(n,u){var h=d.measureText(n.text).width,v=f+c/2+h,b=l.x,y=l.y;p?u>0&&b+v+i.padding>t.left+t.minSize.width&&(y=l.y+=m,l.line++,b=l.x=t.left+(r-s[l.line])/2+i.padding):u>0&&y+m>t.top+t.minSize.height&&(b=l.x=b+t.columnWidths[l.line]+i.padding,y=l.y=t.top+i.padding,l.line++),function(t,i,n){if(!(isNaN(f)||f<=0)){d.save();var r=pn(n.lineWidth,a.borderWidth);if(d.fillStyle=pn(n.fillStyle,o),d.lineCap=pn(n.lineCap,a.borderCapStyle),d.lineDashOffset=pn(n.lineDashOffset,a.borderDashOffset),d.lineJoin=pn(n.lineJoin,a.borderJoinStyle),d.lineWidth=r,d.strokeStyle=pn(n.strokeStyle,o),d.setLineDash&&d.setLineDash(pn(n.lineDash,a.borderDash)),e.labels&&e.labels.usePointStyle){var s=f*Math.SQRT2/2,l=t+f/2,u=i+c/2;me.canvas.drawPoint(d,n.pointStyle,s,l,u)}else 0!==r&&d.strokeRect(t,i,f,c),d.fillRect(t,i,f,c);d.restore()}}(b,y,n),g[u].left=b,g[u].top=y,function(t,e,i,n){var o=c/2,a=f+o+t,r=e+o;d.fillText(i.text,a,r),i.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(a,r),d.lineTo(a+n,r),d.stroke())}(b,y,n,h),p?l.x+=v+i.padding:l.y+=m})}},_getLegendItemAt:function(t,e){var i,n,o,a=this;if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)for(o=a.legendHitBoxes,i=0;i<o.length;++i)if(t>=(n=o[i]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return a.legendItems[i];return null},handleEvent:function(t){var e,i=this,n=i.options,o="mouseup"===t.type?"click":t.type;if("mousemove"===o){if(!n.onHover&&!n.onLeave)return}else{if("click"!==o)return;if(!n.onClick)return}e=i._getLegendItemAt(t.x,t.y),"click"===o?e&&n.onClick&&n.onClick.call(i,t.native,e):(n.onLeave&&e!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,t.native,i._hoveredItem),i._hoveredItem=e),n.onHover&&e&&n.onHover.call(i,t.native,e))}}),vn={id:"legend",_element:mn,beforeInit:function(t){var e=t.options.legend;e&&Lt(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(me.mergeIf(e,fe.global.legend),i?(hi.configure(t,i,e),i.options=e):Lt(t,e)):i&&(hi.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}},bn=me.noop;fe._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var yn=ke.extend({initialize:function(t){me.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:bn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:bn,beforeSetDimensions:bn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:bn,beforeBuildLabels:bn,buildLabels:bn,afterBuildLabels:bn,beforeFit:bn,fit:function(){var t=this,e=t.options,i=e.display,n=t.minSize,o=me.isArray(e.text)?e.text.length:1,a=me.options._parseFont(e),r=i?o*a.lineHeight+2*e.padding:0;t.isHorizontal()?(n.width=t.maxWidth,n.height=r):(n.width=r,n.height=t.maxHeight),t.width=n.width,t.height=n.height},afterFit:bn,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=t.options;if(i.display){var n,o,a,r=me.options._parseFont(i),s=r.lineHeight,l=s/2+i.padding,d=0,u=t.top,h=t.left,c=t.bottom,f=t.right;e.fillStyle=me.valueOrDefault(i.fontColor,fe.global.defaultFontColor),e.font=r.string,t.isHorizontal()?(o=h+(f-h)/2,a=u+l,n=f-h):(o="left"===i.position?h+l:f-l,a=u+(c-u)/2,n=c-u,d=Math.PI*("left"===i.position?-.5:.5)),e.save(),e.translate(o,a),e.rotate(d),e.textAlign="center",e.textBaseline="middle";var g=i.text;if(me.isArray(g))for(var p=0,m=0;m<g.length;++m)e.fillText(g[m],0,p,n),p+=s;else e.fillText(g,0,0,n);e.restore()}}}),xn={},kn=fn,wn=vn,_n={id:"title",_element:yn,beforeInit:function(t){var e=t.options.title;e&&Ot(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(me.mergeIf(e,fe.global.title),i?(hi.configure(t,i,e),i.options=e):Ot(t,e)):i&&(hi.removeBox(t,i),delete t.titleBlock)}};for(var Cn in xn.filler=kn,xn.legend=wn,xn.title=_n,$i.helpers=me,function(){function t(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function e(t){return null!=t&&"none"!==t}function i(i,n,o){var a=document.defaultView,r=me._getParentNode(i),s=a.getComputedStyle(i)[n],l=a.getComputedStyle(r)[n],d=e(s),u=e(l),h=Number.POSITIVE_INFINITY;return d||u?Math.min(d?t(s,i,o):h,u?t(l,r,o):h):"none"}me.where=function(t,e){if(me.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return me.each(t,function(t){e(t)&&i.push(t)}),i},me.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){
i=void 0===i?t:i;for(var n=0,o=t.length;n<o;++n)if(e.call(i,t[n],n,t))return n;return-1},me.findNextWhere=function(t,e,i){me.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var o=t[n];if(e(o))return o}},me.findPreviousWhere=function(t,e,i){me.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;n>=0;n--){var o=t[n];if(e(o))return o}},me.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},me.almostEquals=function(t,e,i){return Math.abs(t-e)<i},me.almostWhole=function(t,e){var i=Math.round(t);return i-e<t&&i+e>t},me.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},me.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},me.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},me.log10=Math.log10?function(t){return Math.log10(t)}:function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e},me.toRadians=function(t){return t*(Math.PI/180)},me.toDegrees=function(t){return t*(180/Math.PI)},me._decimalPlaces=function(t){if(me.isFinite(t)){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}},me.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n),a=Math.atan2(n,i);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:o}},me.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},me.aliasPixel=function(t){return t%2==0?0:.5},me._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio,o=i/2;return Math.round((e-o)*n)/n+o},me.splineCurve=function(t,e,i,n){var o=t.skip?e:t,a=e,r=i.skip?e:i,s=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),l=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)),d=s/(s+l),u=l/(s+l),h=n*(d=isNaN(d)?0:d),c=n*(u=isNaN(u)?0:u);return{previous:{x:a.x-h*(r.x-o.x),y:a.y-h*(r.y-o.y)},next:{x:a.x+c*(r.x-o.x),y:a.y+c*(r.y-o.y)}}},me.EPSILON=Number.EPSILON||1e-14,me.splineCurveMonotone=function(t){var e,i,n,o,a,r,s,l,d,u=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),h=u.length;for(e=0;e<h;++e)if(!(n=u[e]).model.skip){if(i=e>0?u[e-1]:null,(o=e<h-1?u[e+1]:null)&&!o.model.skip){var c=o.model.x-n.model.x;n.deltaK=0!==c?(o.model.y-n.model.y)/c:0}!i||i.model.skip?n.mK=n.deltaK:!o||o.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(e=0;e<h-1;++e)n=u[e],o=u[e+1],n.model.skip||o.model.skip||(me.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=o.mK=0:(a=n.mK/n.deltaK,r=o.mK/n.deltaK,(l=Math.pow(a,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),n.mK=a*s*n.deltaK,o.mK=r*s*n.deltaK)));for(e=0;e<h;++e)(n=u[e]).model.skip||(i=e>0?u[e-1]:null,o=e<h-1?u[e+1]:null,i&&!i.model.skip&&(d=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-d,n.model.controlPointPreviousY=n.model.y-d*n.mK),o&&!o.model.skip&&(d=(o.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+d,n.model.controlPointNextY=n.model.y+d*n.mK))},me.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},me.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},me.niceNum=function(t,e){var i=Math.floor(me.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},me.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},me.getRelativePosition=function(t,e){var i,n,o=t.originalEvent||t,a=t.target||t.srcElement,r=a.getBoundingClientRect(),s=o.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=o.clientX,n=o.clientY);var l=parseFloat(me.getStyle(a,"padding-left")),d=parseFloat(me.getStyle(a,"padding-top")),u=parseFloat(me.getStyle(a,"padding-right")),h=parseFloat(me.getStyle(a,"padding-bottom")),c=r.right-r.left-l-u,f=r.bottom-r.top-d-h;return{x:i=Math.round((i-r.left-l)/c*a.width/e.currentDevicePixelRatio),y:n=Math.round((n-r.top-d)/f*a.height/e.currentDevicePixelRatio)}},me.getConstraintWidth=function(t){return i(t,"max-width","clientWidth")},me.getConstraintHeight=function(t){return i(t,"max-height","clientHeight")},me._calculatePadding=function(t,e,i){return(e=me.getStyle(t,e)).indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)},me._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},me.getMaximumWidth=function(t){var e=me._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-me._calculatePadding(e,"padding-left",i)-me._calculatePadding(e,"padding-right",i),o=me.getConstraintWidth(t);return isNaN(o)?n:Math.min(n,o)},me.getMaximumHeight=function(t){var e=me._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-me._calculatePadding(e,"padding-top",i)-me._calculatePadding(e,"padding-bottom",i),o=me.getConstraintHeight(t);return isNaN(o)?n:Math.min(n,o)},me.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},me.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,o=t.height,a=t.width;n.height=o*i,n.width=a*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=o+"px",n.style.width=a+"px")}},me.fontString=function(t,e,i){return e+" "+t+"px "+i},me.longestText=function(t,e,i,n){var o=(n=n||{}).data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},a=n.garbageCollect=[],n.font=e),t.font=e;var r=0;me.each(i,function(e){null!=e&&!0!==me.isArray(e)?r=me.measureText(t,o,a,r,e):me.isArray(e)&&me.each(e,function(e){null==e||me.isArray(e)||(r=me.measureText(t,o,a,r,e))})});var s=a.length/2;if(s>i.length){for(var l=0;l<s;l++)delete o[a[l]];a.splice(0,s)}return r},me.measureText=function(t,e,i,n,o){var a=e[o];return a||(a=e[o]=t.measureText(o).width,i.push(o)),a>n&&(n=a),n},me.numberOfLabelLines=function(t){var e=1;return me.each(t,function(t){me.isArray(t)&&t.length>e&&(e=t.length)}),e},me.color=Jt?function(t){return t instanceof CanvasGradient&&(t=fe.global.defaultColor),Jt(t)}:function(t){return console.error("Color.js not found!"),t},me.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:me.color(t).saturate(.5).darken(.1).rgbString()}}(),$i._adapters=Fi,$i.Animation=_e,$i.animationService=Ce,$i.controllers=li,$i.DatasetController=Ae,$i.defaults=fe,$i.Element=ke,$i.elements=Ee,$i.Interaction=di,$i.layouts=hi,$i.platform=wi,$i.plugins=_i,$i.Scale=Ni,$i.scaleService=Ci,$i.Ticks=Li,$i.Tooltip=Ii,$i.helpers.each(un,function(t,e){$i.scaleService.registerScaleType(e,t,t._defaults)}),xn)xn.hasOwnProperty(Cn)&&$i.plugins.register(xn[Cn]);$i.platform.initialize();var Sn=$i;return"undefined"!=typeof window&&(window.Chart=$i),$i.Chart=$i,$i.Legend=xn.legend._element,$i.Title=xn.title._element,$i.pluginService=$i.plugins,$i.PluginBase=$i.Element.extend({}),$i.canvasHelpers=$i.helpers.canvas,$i.layoutService=$i.layouts,$i.LinearScaleBase=Wi,$i.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(t){$i[t]=function(e,i){return new $i(e,$i.helpers.merge(i||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}}),Sn}),define("views/StatisticsView",["jquery","backbone","underscore","chart"],function(t,e,i,n){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"displayChart",keyup:"keyPressHandler"},initialize:function(t){this.render()},displayChart:function(){t.ajax({url:ajaxurl,data:{action:"oplb_statistics",chart_type:"line_chart",gbid:this.model.get("gbid"),uid:this.model.get("id"),nonce:oplbGradebook.nonce},dataType:"json",success:function(e){var i=t("#myChart").get(0).getContext("2d"),o={legend:{display:!0,labels:{fontColor:"rgb(0, 0, 0)"}}};new n(i,{type:"line",data:e,options:o})}})},render:function(){var e=this,n=this.model,o=i.template(t("#stats-student-template").html()),a=o({student:n});t("body").append(e.$el.html(a).el),this.$el.modal("show")},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},keyPressHandler:function(t){return 27==t.keyCode&&this.editCancel(),this}})}),define("models/UserList",["backbone","models/User"],function(t,e){return t.Collection.extend({model:e,search:"",sort_direction:"asc",sort_key:"last_name",comparator:function(t,e){var i=t.get(this.sort_key),n=e.get(this.sort_key);return"asc"===this.sort_direction?n.localeCompare(i):i.localeCompare(n)},url:function(){return ajaxurl+"?action=oplb_user_list"}})}),function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("bootstrap3-typeahead",["jquery"],function(t){return e(t)}):e(t.jQuery)}(this,function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=t(this.options.menu),this.$appendTo=this.options.appendTo?t(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");if(this.$element.data("active",t),this.autoSelect||t){var e=this.updater(t);this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e,i=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:i.top+i.height+e,left:i.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){if(this.query=void 0!==e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var i=t.proxy(function(){t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(i,this.delay)},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),e=this.sorter(e),e.length||this.options.addItem?(e.length>0?this.$element.data("active",e[0]):this.$element.data("active",null),this.options.addItem&&e.push(this.options.addItem),"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(t){return~this.displayText(t).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],o=[];e=t.shift();){var a=this.displayText(e);a.toLowerCase().indexOf(this.query.toLowerCase())?~a.indexOf(this.query)?n.push(e):o.push(e):i.push(e)}return i.concat(n,o)},highlighter:function(e){var i,n,o,a,r,s=t("<div></div>"),l=this.query,d=e.toLowerCase().indexOf(l.toLowerCase());if(0===(i=l.length))return s.text(e).html();for(;d>-1;)n=e.substr(0,d),o=e.substr(d,i),a=e.substr(d+i),r=t("<strong></strong>").text(o),s.append(document.createTextNode(n)).append(r),e=a,d=e.toLowerCase().indexOf(l.toLowerCase());return s.append(document.createTextNode(e)).html()},render:function(e){var i=this,n=this,o=!1;return e=t(e).map(function(e,a){var r=n.displayText(a);return e=t(i.options.item).data("value",a),e.find("a").html(i.highlighter(r)),r==n.$element.val()&&(e.addClass("active"),n.$element.data("active",a),o=!0),e[0]}),this.autoSelect&&!o&&(e.first().addClass("active"),this.$element.data("active",e.first().data("value"))),this.$menu.html(e),this},displayText:function(t){return t.name||t},next:function(e){var i=this.$menu.find(".active").removeClass("active"),n=i.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),i=e.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault(),this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup()},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(t){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=t.fn.typeahead;t.fn.typeahead=function(i){var n=arguments;return"string"==typeof i&&"getActive"==i?this.data("active"):this.each(function(){var o=t(this),a=o.data("typeahead"),r="object"==typeof i&&i;a||o.data("typeahead",a=new e(this,r)),"string"==typeof i&&(n.length>1?a[i].apply(a,Array.prototype.slice.call(n,1)):a[i]())})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:t.noop,addItem:!1,delay:0},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var i=t(this);i.data("typeahead")||i.typeahead(i.data())})}),define("views/EditStudentView",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(t,e,i,n,o,a){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"populateStudentDropdown","click #edit-student-save":"submitForm","submit #edit-student-form":"editSave","change #selectStudentRange":"handleStudentRangeSelection"},initialize:function(e){return this.course=e.course,this.gradebook=e.gradebook,this.minLength=2,this.student=this.model||null,this.userList=new o,t("body").append(this.render().el),this},render:function(){var e=this,n=i.template(t("#edit-student-template").html()),o=n({student:this.student,course:this.course});return e.$el.html(o),this.$el.modal("show"),e.el},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#edit-student-form").submit()},editSave:function(e){var o=this,a=t(e.currentTarget).serializeObject();return delete a.id,new n(a).save(a,{success:function(t){if(i.each(t.get("cells"),function(t){o.gradebook.cells.add(t)}),"all"===t.get("type"))i.each(t.get("students"),function(t){o.gradebook.students.add(t)});else{var e=new n(t.get("student"));o.gradebook.students.add(e)}o.$el.modal("hide")}}),!1},handleStudentRangeSelection:function(){t("#studentAddWrapper").toggleClass("add-all add-single")},populateStudentDropdown:function(){var t=this;this.$el.find("#studentRangeAll").focus(),this.userList.fetch({success:function(e,n,o){if(void 0!==n.error){var a="Problem retrieving student list";switch(n.error){case"no_bp":;return t.$el.find("#user_login_wrapper").html('<input class="form-control" type="text" name="id-exists" id="user_login"/>'),t.$el.find("#edit-student-save").removeAttr("disabled").text("Add"),!1;case"no_site":a="Unable to find site",t.$el.closest(".modal-content").find("#edit-student-save").text("No Site");break;case"no_students":a="No students have joined this course.",t.$el.find("#user_login_wrapper select").attr("disabled","disabled"),t.$el.find("#edit-student-save").text("No Students")}var r='<option value="0">'+a+"</option>";return t.$el.find("#user_login").html(r),!1}t.$el.find("#user_login").html(""),i(t.userList.models).each(function(e){var i=e.get("user_login");""!==e.get("first_name")&&""!==e.get("last_name")&&(i=e.get("first_name")+" "+e.get("last_name"));var n='<option value="'+e.get("user_login")+'">'+i+"</option>";t.$el.find("#user_login").append(n)}),t.$el.find("#user_login_wrapper select").removeAttr("disabled"),t.$el.find("#edit-student-save").removeAttr("disabled").text("Add")}})}})}),define("views/DeleteStudentView",["jquery","backbone","underscore"],function(t,e,i){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-student-delete":"submitForm","submit #delete-student-form":"deleteSave"},initialize:function(e){return this.gradebook=e.gradebook,this.course=e.course,this.student=this.model,t("body").append(this.render().el),this},render:function(){if(this.student){var e=i.template(t("#delete-student-template").html()),n=e({student:this.student,course:this.course});this.$el.html(n)}return this.$el.modal("show"),this},keyPressHandler:function(t){return 27==t.keyCode&&this.deleteCancel(),13==t.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#delete-student-form").submit()},deleteSave:function(e){e.preventDefault();var n=this,o=t(e.currentTarget).serializeObject(),a=(o.id,this.model),n=this;a.destroy({success:function(t,e){var o=n.gradebook.cells;i.each(o.models,function(t,e){void 0!==t&&t.get("uid")===n.model.get("id")&&o.models.splice(e,1)}),n.$el.modal("hide")}})}})}),define("views/CommentModalView",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(t,e,i,n,o,a){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","click #edit-comment":"editSave","click #clear-comment":"clearComment","shown.bs.modal":"focusInput"},initialize:function(t){this.model=t.model,this.gradebook=t.gradebook,this.type=t.type,this.name=t.name,this.username=t.username,this.gbid=parseInt(this.gradebook.get("gbid"))},render:function(){var e=this,n=i.template(t("#comment-modal-template").html());this.comment=e.model.get("comments"),"mid_semester"===this.type?this.comment=e.model.get("mid_semester_comments"):"final"===this.type&&(this.comment=e.model.get("final_comments"));var o=n({comments:this.comment,gradebook:e.gradebook,username:this.username,name:this.name});return this.$el.html(o),this.$el.modal("show"),this.el},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},editSave:function(i){i.preventDefault();var n=this,o=t(i.srcElement),a=o.closest(".btn"),r="Saving",s="Save";console.log("parent.attr",a.attr("id")),"clear-comment"===a.attr("id")&&(r="Clearing",s="Clear"),a.find(".dashicons-image-rotate").removeClass("hidden"),a.find(".button-text").text(r+"..."),a.attr("disabled","disabled");var l=t("#comment").val(),d=this.model.attributes;if(console.log("cell",d),this.comments!==l&&(d.commentsUpdate=!0),d.comments=l,"cell"===this.type)t.ajax({url:ajaxurl+"?action=cell&id="+this.model.get("id")+"&comment_edit=1&nonce="+oplbGradebook.nonce,method:"POST",data:d,dataType:"json"}).done(function(t,e,i){a.find(".dashicons-image-rotate").addClass("hidden"),a.find(".button-text").text(s),a.removeAttr("disabled","disabled"),n.updateModel()}).fail(function(t,e,i){console.log("error",t,e,i)});else{var u=this.model.get("mid_semester_grade");"final"===this.type&&(u=this.model.get("final_grade")),console.log("this.cell.id",d.id);var h=parseInt(d.id);console.log("uid",h);var l=this.model.get("comments");t.ajax({url:ajaxurl+"?action=oplb_student_grades&comment_edit=1&nonce="+oplbGradebook.nonce,method:"POST",data:{grade:u,type:this.type,gbid:this.gbid,uid:h,comments:l},dataType:"json"}).done(function(t,i,o){a.find(".dashicons-image-rotate").addClass("hidden"),a.find(".button-text").text(s),a.removeAttr("disabled","disabled"),n.updateModel(),e.pubSub.trigger("editSuccess",t)}).fail(function(t,e,i){n.trigger("editError")})}},clearComment:function(t){this.$el.find("textarea").val(""),this.editSave(t)},updateModel:function(){var e=t("#comment").val();"mid_semester"===this.type?this.model.set({comments:e,mid_semester_comments:e,commentsUpdate:!1}):"final"===this.type?this.model.set({comments:e,final_comments:e,commentsUpdate:!1}):this.model.set({comments:e,commentsUpdate:!1})},focusInput:function(){this.$el.find("#comment").focus()}})}),define("views/CommentView",["jquery","backbone","underscore","views/CommentModalView","models/User","models/UserList","bootstrap3-typeahead"],function(t,e,i,n,o,a,r){return e.View.extend({tagName:"span",className:"comment-icon",events:{"click button.add-comment":"addComment"},initialize:function(t){this.model=t.model,this.gradebook=t.gradebook,this.type=t.type,this.name=t.name,this.username=t.username},render:function(e){void 0!==e&&(this.model=e);var n=this.model.get("comments")?"active":"inactive";"mid_semester"===this.type?n=this.model.get("mid_semester_comments")?"active":"inactive":"final"===this.type&&(n=this.model.get("final_comments")?"active":"inactive"),this.$el.removeClass("active inactive"),this.$el.addClass(n);var o=i.template(t("#comment-icon-template").html()),a=o({});return this.$el.html(a),this.el},addComment:function(e){if(t("body").find("#modalDialogComments").length)return!1;var i=new n({model:this.model,gradebook:this.gradebook,name:this.name,username:this.username,type:this.type});t("body").append(i.render()),this.listenTo(i.model,"change",this.render,{newModal:i.model})}})}),define("views/CellView",["jquery","backbone","underscore","views/CommentView"],function(t,e,i,n){var o=[];return e.View.extend({tagName:"td",className:"cell",events:{"focus .grade-numeric":"maybeClear","blur .grade-numeric":"edit","keypress .grade-numeric":"updateOnEnter"},initialize:function(t){this.course=t.course,this.gradebook=t.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell)},render:function(){var e=this;this.$el.attr("data-id",this.model.get("amid"));var o=this.gradebook.assignments.findWhere({id:this.model.get("amid")});o&&this.$el.toggleClass("hidden",!o.get("visibility"));var a=i.template(t("#edit-cell-template").html()),r=a({cell:this.model,gradebook:this.gradebook});if(this.$el.html(r),"instructor"===e.gradebook.role||"student"===e.gradebook.role&&this.model.get("comments")){var s=new n({model:this.model,gradebook:e.gradebook,name:o.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.$el},shiftCell:function(t){this.remove(),t.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(t.get("assign_order"))})},updateOnEnter:function(t){13==t.keyCode&&this.$el.find(".grade-numeric").blur()},hideInput:function(t){var i=this;parseFloat(t)!=this.model.get("assign_points_earned")||0===parseInt(t)&&(this.model.get("is_null")||1===this.model.get("is_null"))?(this.$el.find(".grade-numeric").attr("contenteditable","false").css("opacity","0.42"),this.model.save({assign_points_earned:parseFloat(t)},{wait:!0,success:function(t,n){i.render(),e.pubSub.trigger("updateAverageGrade",n)}})):this.$el.find(".grade-numeric").attr("contenteditable","true")},maybeClear:function(){var t=this.$el.find(".grade-numeric").html().trim(),e=this.$el.find(".grade-numeric").data("id");o[e]=t,"--"===t&&(this.$el.find(".grade-numeric").html(""),o[e]="")},edit:function(){var t=this.$el.find(".grade-numeric").html();console.log("cell input current raw incoming: ",t),t=this.cleanWord(t),t=t.replace(/(<([^>]+)>)/gi,""),t=t.replace(/\s+/g," "),t=t.trim(),console.log("cell input current processed including clean: ",t);var e=this.$el.find(".grade-numeric").data("id"),i=o[e];void 0!==i&&i!==t?this.hideInput(t):""===i&&this.$el.find(".grade-numeric").html("--")},hoverCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({hover:t.get("hover")}),this.$el.find(".grade-numeric").toggleClass("hover",t.get("hover")))},visibilityCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({visibility:t.get("visibility")}),this.render())},close:function(t){this.remove()},cleanWord:function(t){var e=/(\n|\r| class=(")?Mso[a-zA-Z]+(")? ^p)/g,i=t.replace(e," "),n=new RegExp("\x3c!--(.*?)--\x3e","g"),i=i.replace(n,""),o=new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>","gi");i=i.replace(o,"");for(var a=["style","script","applet","embed","noframes","noscript"],r=0;r<a.length;r++)o=new RegExp("<"+a[r]+".*?"+a[r]+"(.*?)>","gi"),i=i.replace(o,"");for(var s=["style","start"],r=0;r<s.length;r++){var l=new RegExp(" "+s[r]+'="(.*?)"',"gi");i=i.replace(l,"")}return i}})}),define("models/letterGrade",["backbone"],function(t){return t.Model.extend({defaults:{label:"A+",value:100}})}),define("models/letterGrades",["backbone","models/letterGrade"],function(t,e){return t.Collection.extend({model:e})}),define("views/CellDropdown",["jquery","backbone","underscore","models/letterGrades","views/CommentView"],function(t,e,i,n,o){return e.View.extend({tagName:"td",className:"cell",events:{"change select.grade-selector":"edit"},initialize:function(t){this.course=t.course,this.gradebook=t.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell),this.thisLetterGrades=new n([{label:"--",value:"--",range_low:0,range_high:0},{label:"A+",value:100,range_low:100,range_high:101},{label:"A",value:96,range_low:93,range_high:100},{label:"A-",value:91.5,range_low:90,range_high:93},{label:"B+",value:88.5,range_low:87,range_high:90},{label:"B",value:85,range_low:83,range_high:87},{label:"B-",value:81.5,range_low:80,range_high:83},{label:"C+",value:78.5,range_low:77,range_high:80},{label:"C",value:75,range_low:73,range_high:77},{label:"C-",value:71.5,range_low:70,range_high:73},{label:"D+",value:68.5,range_low:67,range_high:70},{label:"D",value:65,range_low:63,range_high:67},{label:"D-",value:61.5,range_low:60,range_high:63},{label:"F",value:50,range_low:1,range_high:60}])},render:function(){var e=this;this.$el.attr("data-id",this.model.get("amid"));var n=this.gradebook.assignments.findWhere({id:this.model.get("amid")});n&&this.$el.toggleClass("hidden",!n.get("visibility"));var a=i.template(t("#edit-cell-dropdown-template").html()),r=a({cell:this.model,assignment:n,grades:this.thisLetterGrades,role:this.gradebook.role});if(this.$el.html(r),"instructor"===e.gradebook.role||"student"===e.gradebook.role&&this.model.get("comments")){var s=new o({model:this.model,gradebook:e.gradebook,name:n.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.el},shiftCell:function(t){this.remove(),t.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(t.get("assign_order"))})},updateOnEnter:function(t){13==t.keyCode&&this.$el.blur()},hideInput:function(t){var i=this;this.model.save({assign_points_earned:t},{wait:!0,success:function(t,n){i.render(),e.pubSub.trigger("updateAverageGrade",n)}})},edit:function(){this.$el.attr("contenteditable","false"),this.$el.find(".grade-selector").attr("disabled","disabled"),this.hideInput(this.$el.find(".grade-selector").val())},hoverCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({hover:t.get("hover")}),this.$el.toggleClass("hover",t.get("hover")))},visibilityCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({visibility:t.get("visibility")}),this.render())},close:function(t){this.remove()}})}),define("views/CellCheckmark",["jquery","backbone","underscore","models/letterGrades","views/CommentView"],function(t,e,i,n,o){return e.View.extend({tagName:"td",className:"cell",events:{"change input.grade-checkmark":"edit"},initialize:function(t){this.course=t.course,this.gradebook=t.gradebook,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.listenTo(this.gradebook.assignments,"change:assign_order",this.shiftCell),this.listenTo(this.gradebook.assignments,"change:visibility",this.visibilityCell)},render:function(){var e=this;this.$el.attr("data-id",this.model.get("amid"));var n=this.gradebook.assignments.findWhere({id:this.model.get("amid")});n&&this.$el.toggleClass("hidden",!n.get("visibility"));var a=i.template(t("#edit-cell-checkmark-template").html()),r=a({cell:this.model,assignment:n,role:this.gradebook.role});if(this.$el.html(r),"instructor"===e.gradebook.role||"student"===e.gradebook.role&&this.model.get("comments")){var s=new o({model:this.model,gradebook:e.gradebook,name:n.get("assign_name"),username:this.model.get("username"),type:"cell"});this.$el.find(".cell-wrapper").append(s.render())}return this.el},shiftCell:function(t){this.remove(),t.get("id")===this.model.get("amid")&&this.model.set({assign_order:parseInt(t.get("assign_order"))})},updateOnEnter:function(t){13==t.keyCode&&this.$el.blur()},hideInput:function(t){var i=this;this.model.save({assign_points_earned:parseFloat(t)},{wait:!0,success:function(t,n){i.render(),e.pubSub.trigger("updateAverageGrade",n)}})},edit:function(){this.$el.attr("contenteditable","false");var t=0;this.$el.find(".grade-checkmark").is(":checked")&&(t=100),this.$el.find(".grade-checkmark").attr("disabled","disabled"),this.hideInput(t)},hoverCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({hover:t.get("hover")}),this.$el.toggleClass("hover",t.get("hover")))},visibilityCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({visibility:t.get("visibility")}),this.render())},close:function(t){this.remove()}})}),define("views/CellMidFinal",["jquery","backbone","underscore","models/letterGrades","views/CommentView","models/User"],function(t,e,i,n,o,a){return e.View.extend({tagName:"span",events:{"change select.grade-selector.mid":"editMid",
"change select.grade-selector.final":"editFinal"},initialize:function(t){e.pubSub.on("editSuccess",this.editSuccess,this),this.course=t.course,this.gradebook=t.gradebook,this.grades=t.grades,this.type=t.type,this.model=t.model,this.listenTo(this.gradebook.assignments,"change:hover",this.hoverCell),this.midGrades=new n([{label:"--",value:"--",type:"none"},{label:"P = Passing Work",value:"passing_display",type:"display_item"},{label:"P",value:"passing",type:"display_value"},{label:"BL = Borderline",value:"borderline_display",type:"display_item"},{label:"BL",value:"borderline",type:"display_value"},{label:"U = Unsatisfactory",value:"unsatisfactory_display",type:"display_item"},{label:"U",value:"unsatisfactory",type:"display_value"},{label:"SA = Stopped Attending",value:"stopped_attending_display",type:"display_item"},{label:"SA",value:"stopped_attending",type:"display_value"}]),this.finalGrades=new n([{label:"--",value:"--",type:"none"},{label:"A",value:"a",type:"none"},{label:"A-",value:"a_minus",type:"none"},{label:"B+",value:"b_plus",type:"none"},{label:"B",value:"b",type:"none"},{label:"B-",value:"b_minus",type:"none"},{label:"C+",value:"c_plus",type:"none"},{label:"C",value:"c",type:"none"},{label:"D",value:"d",type:"none"},{label:"F",value:"f",type:"none"},{label:"WF = withdrew, failing",value:"wf_display",type:"display_item"},{label:"WF",value:"wf",type:"display_value"},{label:"WN = withdrew, never attended (academic penalty)",value:"wn_display",type:"display_item"},{label:"WN",value:"wn",type:"display_value"},{label:"*WN = administrative withdrawl, never attended",value:"wn_admin_display",type:"display_item"},{label:"*WN",value:"wn_admin",type:"display_value"},{label:"WU = Unofficial Withdrawl",value:"wu_display",type:"display_item"},{label:"WU",value:"wu",type:"display_value"}]),this.studentGradeLabels("mid"),this.studentGradeLabels("final")},render:function(){var e=this,n=i.template(t("#edit-cell-dropdown-mid-final-template").html()),a=n({student:this.model,grades:this.grades,role:this.gradebook.role,type:this.type});this.$el.html(a);var r=this.model.get("mid_semester_comments");if("final"===this.type&&(r=this.model.get("final_comments")),"instructor"===e.gradebook.role||"student"===e.gradebook.role&&r){var s="Mid-semester Grade";"final"===this.type&&(s="Final Grade");var l=new o({model:this.model,gradebook:e.gradebook,name:s,username:this.model.get("user_login"),type:this.type});this.$el.find(".cell-wrapper").append(l.render())}return this.el},updateOnEnter:function(t){13==t.keyCode&&this.$el.blur()},hideInput:function(t){var i=this;this.model.save({assign_points_earned:t},{wait:!0,success:function(t,n){i.render(),e.pubSub.trigger("updateAverageGrade",n)}})},editMid:function(){this.edit("mid")},editFinal:function(){this.edit("final")},edit:function(t){this.$el.attr("contenteditable","false"),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var e=".grade-selector."+t;this.$el.find(e).attr("disabled","disabled");var i=this.$el.find(e).val();-1!==i.indexOf("_display")&&(i=i.replace(/_display/,""),this.$el.find(e).val(i));var n=this.$el.find(e).data("type"),o=this.$el.find(e).data("uid"),r=parseInt(this.course.get("id"));(new a).updateStudentGrade(i,n,o,r),i&&void 0!==i&&("mid"===n?this.model.attributes.mid_semester_grade=i:this.model.attributes.final_grade=i),this.handleTooltips(t)},handleTooltips:function(t){var e=".grade-selector."+t,i=this.$el.find(e).val(),n=this.midGrades;"final"===t&&(n=this.finalGrades);var o="";n.each(function(t){t.get("value")===i+"_display"&&""===o?o=t.get("label"):t.get("value")===i&&""===o&&(o=t.get("label"))}),this.$el.find(e).closest(".student-grades").find(".fa-info-circle").attr("title",o).tooltip("fixTitle")},editSuccess:function(){this.$el.closest("#gradebookWrapper").find("#savingStatus").addClass("hidden"),this.$el.find(".grade-selector").removeAttr("disabled")},editError:function(){this.$el.find(".grade-selector").removeAttr("disabled")},studentGradeLabels:function(t){var e=this.midGrades,n=this.model.get("mid_semester_grade"),o="";"final"===t&&(e=this.finalGrades,n=this.model.get("final_grade")),i.each(e.models,function(t){t.get("value")===n+"_display"&&""===o?o=t.get("label"):t.get("value")===n&&""===o&&(o=t.get("label"))}),""===o&&(o="--"),"final"===t?this.model.set("tool_tip_final",o):this.model.set("tool_tip_mid",o)},hoverCell:function(t){this.model.get("amid")===t.get("id")&&(this.model.set({hover:t.get("hover")}),this.$el.toggleClass("hover",t.get("hover")))},close:function(t){this.remove()}})}),define("views/StudentView",["jquery","backbone","underscore","views/StatisticsView","views/EditStudentView","views/DeleteStudentView","views/CellView","views/CellDropdown","views/CellCheckmark","views/CellMidFinal","models/letterGrades","models/User"],function(t,e,i,n,o,a,r,s,l,d,u,h){return e.View.extend({tagName:"tr",events:{"click a.delete-student":"deleteStudent","click a.student-statistics":"studentStatistics","click .dashicons-menu":"toggleStudentMenu","click li.student-submenu-delete":"deleteStudent","click li.student-submenu-stats":"studentStatistics"},initialize:function(t){this._subviews=[],this.gradebook=t.gradebook,this.course=t.course,this.student=this.model,this.midGrades=new u([{label:"--",value:"--",type:"none"},{label:"P = Passing Work",value:"passing_display",type:"display_item"},{label:"P",value:"passing",type:"display_value"},{label:"BL = Borderline",value:"borderline_display",type:"display_item"},{label:"BL",value:"borderline",type:"display_value"},{label:"U = Unsatisfactory",value:"unsatisfactory_display",type:"display_item"},{label:"U",value:"unsatisfactory",type:"display_value"},{label:"SA = Stopped Attending",value:"stopped_attending_display",type:"display_item"},{label:"SA",value:"stopped_attending",type:"display_value"}]),this.finalGrades=new u([{label:"--",value:"--",type:"none"},{label:"A",value:"a",type:"none"},{label:"A-",value:"a_minus",type:"none"},{label:"B+",value:"b_plus",type:"none"},{label:"B",value:"b",type:"none"},{label:"B-",value:"b_minus",type:"none"},{label:"C+",value:"c_plus",type:"none"},{label:"C",value:"c",type:"none"},{label:"D",value:"d",type:"none"},{label:"F",value:"f",type:"none"},{label:"WF = withdrew, failing",value:"wf_display",type:"display_item"},{label:"WF",value:"wf",type:"display_value"},{label:"WN = withdrew, never attended (academic penalty)",value:"wn_display",type:"display_item"},{label:"WN",value:"wn",type:"display_value"},{label:"*WN = administrative withdrawl, never attended",value:"wn_admin_display",type:"display_item"},{label:"*WN",value:"wn_admin",type:"display_value"},{label:"WU = Unofficial Withdrawl",value:"wu_display",type:"display_item"},{label:"WU",value:"wu",type:"display_value"}]),this.listenTo(this.model,"change",this.render),this.listenTo(this.gradebook,"change:assignments",this.render)},render:function(e,n){void 0===e&&(e="none");var o="";"pinned"===e&&(o=" visible-xs visible-sm");var a=this,u=i.template(t("#student-view-template").html()),h=u({student:this.model,role:this.gradebook.role,mobile_styles:o,midGrades:this.midGrades,finalGrades:this.finalGrades});this.$el.find(".student-tools").length||this.$el.html(h);var c=new d({model:this.model,course:this.course,gradebook:a.gradebook,role:this.gradebook.role,grades:this.midGrades,type:"mid_semester"});this.$el.find(".student-grades.mid-semester-grade .cell-wrapper").length||this.$el.find(".student-grades.mid-semester-grade").append(c.render());var f=new d({model:this.model,course:this.course,gradebook:a.gradebook,role:this.gradebook.role,grades:this.finalGrades,type:"final"});if(this.$el.find(".student-grades.final-grade .cell-wrapper").length||this.$el.find(".student-grades.final-grade").append(f.render()),"pinned"===e||"none"===e){var g=parseInt(a.course.get("id")),p=this.gradebook.cells.where({uid:parseInt(this.model.get("id")),gbid:g});p=i.sortBy(p,function(t){return t.get("assign_order")});var a=this;i.each(p,function(t){var e=n.findWhere({id:t.get("amid")});if(void 0!==e){if("checkmark"===e.get("assign_grade_type"))var i=new l({course:a.course,gradebook:a.gradebook,model:t,options:a.options});else if("letter"===e.get("assign_grade_type"))var i=new s({course:a.course,gradebook:a.gradebook,model:t,options:a.options});else var i=new r({course:a.course,gradebook:a.gradebook,model:t,options:a.options});a._subviews.push(i),a.$el.append(i.render())}})}return this.postLoadActions(),this.el},postLoadActions:function(){t('[data-toggle="tooltip"]').tooltip()},clearSubViews:function(){var t=this;i.each(t._subviews,function(t){t.close()}),this._subviews=[]},toggleStudentMenu:function(){var e=t("#row-student-id-"+this.model.get("id"));if("none"===e.css("display")){e.toggle(1,function(){var e=this;t(document).one("click",function(){t(e).hide()})})}},selectAllStudents:function(){t("#cb-select-all-1").is(":checked")?t("#cb-select-"+this.model.get("id")).prop("checked",!0):t("#cb-select-"+this.model.get("id")).prop("checked",!1)},selectStudent:function(e){var i=t("#cb-select-"+this.model.get("id")).is(":checked");this.model.set({selected:i});var n=AN.GlobalVars.assignments.findWhere({selected:!0});i?t("#cb-select-"+this.model.get("id")).prop("checked",!0):t("#cb-select-"+this.model.get("id")).prop("checked",!1),n&&n.set({selected:!1})},studentStatistics:function(t){t.preventDefault();new n({model:this.model,options:this.options})},deleteStudent:function(t){t.preventDefault();new a({model:this.model,gradebook:this.gradebook,course:this.course})},close:function(t){this.clearSubViews(),this.remove()}})}),define("views/AssignmentStatisticsView",["jquery","backbone","underscore","chart"],function(t,e,i,n){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"displayChart",keyup:"keyPressHandler"},initialize:function(){this.render()},displayChart:function(){t.ajax({url:ajaxurl,data:{action:"oplb_statistics",chart_type:"pie_chart",gbid:this.model.get("gbid"),amid:this.model.get("id"),nonce:oplbGradebook.nonce},dataType:"json",success:function(e){var i=t("#myChart").get(0).getContext("2d");new n(i,{type:"pie",data:e})}})},render:function(e){var n=this,o=this.model,a=i.template(t("#stats-assignment-template").html()),r=a({assignment:o});t("body").append(n.$el.html(r).el),this.$el.modal("show")},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},keyPressHandler:function(t){return 27==t.keyCode&&this.editCancel(),this}})}),define("models/Assignment",["backbone","underscore"],function(t,e){return t.Model.extend({defaults:{assign_category:"",assign_name:"",assign_due:"",assign_date:"",assign_grade_type:"numeric",assign_weight:0,gbid:null,sorted:"",visibility:!0,publish:!0,selected:!1},url:function(){return this.get("id")?ajaxurl+"?action=assignment&id="+this.get("id")+"&gbid="+this.get("gbid"):ajaxurl+"?action=assignment"}})}),define("views/EditAssignmentView",["jquery","backbone","underscore","models/Assignment","views/StudentView","views/GradeBookView","jquery-ui"],function(t,e,i,n,o,a){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","shown.bs.modal":"focusInput",keyup:"keyPressHandler","click #edit-assignment-save":"submitForm","submit #edit-assignment-form":"editSave"},initialize:function(e){return this.options=e.options,this.gradebook=e.gradebook,this.course=e.course,this.assignment=this.model||null,t("body").append(this.render().el),t("#assign-date-datepicker, #assign-due-datepicker").datepicker(),t("#assign-date-datepicker, #assign-due-datepicker").datepicker("option","dateFormat","yy-mm-dd"),this.assignment&&(t("#assign-date-datepicker").datepicker("setDate",this.assignment.get("assign_date")),t("#assign-due-datepicker").datepicker("setDate",this.assignment.get("assign_due"))),this},render:function(){var e=i.template(t("#edit-assignment-template").html());this.assignment||(this.assignment=new n);var o=e({assignment:this.assignment,course:this.course,role:this.role});this.$el.html(o),this.$el.modal("show");var a=this;return i.defer(function(){this.inputName=a.$('input[name="assign_name"]');this.inputName.val().length;a.assignment&&t("#assign_visibility option[value='"+a.assignment.get("assign_visibility")+"']").attr("selected","selected")}),this},keyPressHandler:function(t){return 27==t.keyCode&&this.editCancel(),13==t.keyCode&&this.submitForm(),this},editCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#edit-assignment-form").submit()},editSave:function(e){e.preventDefault();var o=this,a=t(e.currentTarget).serializeObject(),r=t(e.currentTarget).serializeObject().id,s=this.gradebook.assignments.findWhere({id:parseInt(r)});if(s)s.save(a,{wait:!0,success:function(t,e){o.checkForAverageGradeUpdates(e)}});else{delete a.id;new n(a).save(a,{success:function(t,e){o.gradebook.assignments.add(e.assignment),i.each(e.cells,function(t){o.gradebook.cells.add(t)}),window.oplbGlobals.total_weight=t.attributes.total_weight,o.checkForAverageGradeUpdates(e.assignment)}})}return this.$el.modal("hide"),!1},checkForAverageGradeUpdates:function(t){if(void 0===t.student_grade_update||t.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=t.distributed_weight,i.each(t.student_grade_update,function(t){e.pubSub.trigger("updateAverageGrade",t)})},focusInput:function(){this.$el.find("#assign_name").focus()}})}),define("views/DetailsAssignmentView",["jquery","backbone","underscore"],function(t,e,i){return e.View.extend({id:"base-modal",className:"modal fade",initialize:function(e){return this.options=e.options,this.course=e.course,t("body").append(this.render().el),this},render:function(e){var n=this,o=this.model,a=i.template(t("#details-assignment-template").html()),r=a({assignment:o});return n.$el.html(r),this.$el.modal("show"),this}})}),define("views/DeleteAssignmentView",["jquery","backbone","underscore"],function(t,e,n){return e.View.extend({id:"base-modal",className:"modal fade",events:{"hidden.bs.modal":"deleteCancel",keyup:"keyPressHandler","click #delete-assignment-delete":"submitForm","submit #delete-assignment-form":"deleteSave"},initialize:function(e){return this.gradebook=e.gradebook,this.course=e.course,this.assignment=e.assignment,t("body").append(this.render().el),this},render:function(){if(this.assignment){var e=n.template(t("#delete-assignment-template").html()),i=e({assignment:this.assignment,course:this.course});this.$el.html(i)}return this.$el.modal("show"),this},keyPressHandler:function(t){return 27==t.keyCode&&this.deleteCancel(),13==t.keyCode&&this.submitForm(),this},deleteCancel:function(){return this.$el.data("modal",null),this.remove(),!1},submitForm:function(){t("#delete-assignment-form").submit()},deleteSave:function(t){t.preventDefault(),console.log("go deleteSave",this.assignment);var e=this;this.assignment.destroy({success:function(t,o){var a=e.gradebook.cells.where({amid:t.get("id")});e.gradebook.cells.remove(a);var r=t.get("assign_order");if(e.gradebook.assignments.models.length){var s=n.max(e.gradebook.assignments.models,function(t){return t.get("assign_order")});for(i=r;i<s.get("assign_order");i++){var l=e.gradebook.assignments.findWhere({assign_order:i+1});void 0!==l&&l.save({assign_order:i})}}e.checkForAverageGradeUpdates(o),e.$el.modal("hide")}})},checkForAverageGradeUpdates:function(t){if(void 0===t.student_grade_update||t.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=t.distributed_weight,n.each(t.student_grade_update,function(t){e.pubSub.trigger("updateAverageGrade",t)})}})}),define("views/AssignmentView",["jquery","backbone","underscore","views/AssignmentStatisticsView","views/EditAssignmentView","views/DetailsAssignmentView","views/DeleteAssignmentView","views/GradeBookView","jquery-ui"],function(t,e,i,n,o,a,r,s){return e.View.extend({tagName:"th",className:"assignment-tools assignment",events:{"click li.assign-submenu-sort":"sortColumn","click .dashicons-menu":"toggleAssignmentMenu","click li.assign-submenu-details":"detailsAssignment","click li.assign-submenu-delete":"deleteAssignment","click li.assign-submenu-edit":"editAssignment","click li.assign-submenu-left":"shiftAssignmentLeft","click li.assign-submenu-right":"shiftAssignmentRight","click li.assign-submenu-stats":"statsAssignment","mouseenter div.column-frame":"mouseEnter","mouseleave div.column-frame":"mouseLeave"},initialize:function(t){this.gradebook=t.gradebook,this.course=t.course,this.assignment=this.model,this.listenTo(this.assignment,"change:assign_name",this.render),this.listenTo(this.assignment,"change:sorted",this.sortColumnCSS),this.listenTo(this.assignment,"change:visibility",this.visibilityColumnCSS),this.listenTo(this.gradebook.students,"add remove",this.close),this.listenTo(this.gradebook.assignments,"add remove change:sorted change:assign_order",this.close),this.render()},mouseEnter:function(){this.$el.addClass("hover"),this.assignment.set({hover:!0})},mouseLeave:function(){this.$el.removeClass("hover"),this.assignment.set({hover:!1})},detailsAssignment:function(t){t.preventDefault();new a({model:this.assignment,course:this.course})},shiftAssignmentLeft:function(t){t.preventDefault(),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var e=this.gradebook.assignments.findWhere({assign_order:this.model.get("assign_order")-1});e.save({assign_order:this.model.get("assign_order"),assign_visibility:e.get("assign_visibility")}),this.assignment.save({assign_order:this.model.get("assign_order")-1,assign_visibility:this.model.get("assign_visibility")})},shiftAssignmentRight:function(t){t.preventDefault(),this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden");var e=this.gradebook.assignments.findWhere({assign_order:this.model.get("assign_order")+1});e.save({assign_order:this.model.get("assign_order"),assign_visibility:e.get("assign_visibility")}),this.assignment.save({assign_order:this.model.get("assign_order")+1,assign_visibility:this.model.get("assign_visibility")})},toggleAssignmentMenu:function(){var e=t("#column-assign-id-"+this.model.get("id"));if("none"===e.css("display")){var i=this;e.toggle(1,function(){var e=this;t(document).one("click",function(){t(e).hide(),i.model.set({hover:!1})})})}},render:function(){this.visibilityColumnCSS();var e=(this.assignment.get("sorted"),i.template(t("#assignment-view-template").html())),n=e({assignment:this.assignment,role:this.role,min:i.min(this.gradebook.assignments.models,function(t){return t.get("assign_order")}),max:i.max(this.gradebook.assignments.models,function(t){return t.get("assign_order")})});return this.$el.html(n),this.el},sortColumn:function(t){if(t.preventDefault(),this.assignment.get("sorted"))"desc"===this.assignment.get("sorted")?this.assignment.set({sorted:"asc"}):this.assignment.set({sorted:"desc"});else{var e=this.gradebook.assignments.find(function(t){return t.get("sorted").length>0});e&&e.set({sorted:""}),this.assignment.set({sorted:"asc"})}},sortColumnCSS:function(){if(this.assignment.get("sorted")){var t=this.$el.hasClass("desc");this.$el.toggleClass("desc",!t).toggleClass("asc",t)}else this.$el.removeClass("asc desc"),this.$el.addClass("asc")},visibilityColumnCSS:function(t){this.assignment.get("visibility")?this.$el.removeClass("hidden"):this.$el.addClass("hidden")},statsAssignment:function(t){t.preventDefault();new n({model:this.assignment,options:this.options})},editAssignment:function(t){t.preventDefault();new o({model:this.assignment,gradebook:this.gradebook,course:this.course})},deleteAssignment:function(t){t.preventDefault();new r({gradebook:this.gradebook,course:this.course,assignment:this.assignment})},close:function(t){this.remove()},checkForAverageGradeUpdates:function(t){if(void 0===t.student_grade_update||t.student_grade_update.length<1)return!1;this.gradebook.attributes.distributed_weight=t.distributed_weight,i.each(t.student_grade_update,function(t){e.pubSub.trigger("updateAverageGrade",t)})}})}),define("views/uploadCSV",["jquery","backbone","underscore","models/User","models/UserList","bootstrap3-typeahead"],function(t,e,i,n,o,a){var r={},s="";return e.View.extend({id:"upload-csv",className:"modal fade",events:{"shown.bs.modal":"renderUploader","hidden.bs.modal":"editCancel","click #uploadExternal":"uploadFile"},initialize:function(t){return this.course=t.course,this.gradebook=t.gradebook,this},render:function(){var e=this,n=i.template(t("#upload-csv").html()),o=n({});return e.$el.html(o),this.$el.modal("show"),e.el},renderUploader:function(){var e=this;t("#upload-csv-input").fileinput({uploadUrl:oplbGradebook.ajaxURL+"?action=oplb_gradebook_upload_csv&nonce="+oplbGradebook.nonce+"&gbid="+this.course.get("id"),maxFileCount:1,hideThumbnailContent:!0,showClose:!1,msgUploadThreshold:"Adding to Gradebook...",layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {pause}\n      {browse}\n    </div>\n</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',indicator:""}}).on("fileselect",function(i,n,o){console.log("fileselect"),s="",e.$el.find("#upload-csv-error-message").remove(),t("#upload-csv .modal-content").addClass("upload-active")}).on("fileuploaded",function(i,n){t(".file-input").html(n.response.message),r=n.response.content,t("#upload-csv-input").fileinput("clear"),t("#upload-csv .modal-content").addClass("upload-successful"),e.updateGradebook()}).on("filecleared",function(i){console.log("filecleared"),t("#upload-csv .modal-content").removeClass("upload-active"),""!==s&&e.$el.find(".file-input .kv-fileinput-error").after(s)}).on("fileuploaderror",function(e,i){s=i.response.error,t("#upload-csv-input").fileinput("clear")})},editCancel:function(){return this.$el.data("modal",null),this.remove(),e.pubSub.trigger("closeUploadCSV",r),!1},updateGradebook:function(){console.log("self.newGradebook in updateGradebook",r),e.pubSub.trigger("newGradebookCSV",r)},uploadFile:function(){console.log("go uploadFile"),t("#upload-csv-input").fileinput("upload")}})}),define("views/uploadModal",["jquery","backbone","underscore","models/User","models/UserList","views/uploadCSV","bootstrap3-typeahead"],function(t,e,i,n,o,a,r){return e.View.extend({id:"upload-modal",className:"modal fade",events:{"hidden.bs.modal":"editCancel","click button#modal-download-csv":"downloadCSV","click button#modal-upload-csv":"uploadCSV"},initialize:function(t){return this.model=t.model,this.course=t.course,this.gradebook=t.gradebook,e.pubSub.on("closeUploadCSV",this.removeSecondary,this),this},render:function(e){console.log("newGradebook",e),void 0!==e&&(this.model=e);var n=this,o=i.template(t("#upload-modal").html()),a=o({});return n.$el.html(a),this.$el.modal("show"),console.log("this.$el in uploadModal",this.$el),n.el},downloadCSV:function(e){e.preventDefault(),t(".download-buttons").addClass("success").find("#modal-download-csv").text("Download Again"),this.course.export2csv()},uploadCSV:function(e){e.preventDefault();var i=this;setTimeout(function(){i.$el.addClass("secondary-modal")},10,i);var n=new a({course:this.course,gradebook:this.gradebook});t("body").append(n.render())},removeSecondary:function(){var e=this;t("body").addClass("modal-open"),console.log("removeSecondary"),setTimeout(function(){e.$el.removeClass("secondary-modal")},10,e)},editCancel:function(){return console.log("editCancel"),this.$el.data("modal",null),this.remove(),!1}})}),define("views/GradeBookView",["jquery","backbone","underscore","views/StudentView","views/AssignmentView","views/EditStudentView","views/EditAssignmentView","views/uploadModal","models/Course"],function(t,e,i,n,o,a,r,s,l){return e.pubSub=i.extend({},e.Events),e.View.extend({initialize:function(n){var o=this;return this.studentHeader,this.scrollSize=0,this.resizeTimer,this.xhrs=[],this._subviews=[],this.scrollObj={},this.options=n,this.filter_option="default",this.course=n.course,this.renderControl=0,this.gradebook=n.gradebook,this.listenTo(o.gradebook.students,"add remove",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.cells,"add remove",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.cells,"change:assign_order",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.assignments,"add",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"remove",i.debounce(i.bind(this.handleDelete,this),128)),this.listenTo(o.gradebook.assignments,"remove",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"change:assign_grade_type change:assign_weight",i.debounce(i.bind(this.render,this),128)),this.listenTo(o.gradebook.assignments,"change:sorted",o.sortByAssignment),this.listenTo(o.gradebook.assignments,"change:assign_category",i.debounce(i.bind(this.initRender,this),128)),this.listenTo(o.gradebook.assignments,"change:assign_order",this.render),e.pubSub.on("updateAverageGrade",this.updateAverageGrade,this),e.pubSub.on("newGradebookCSV",this.initRender,this),this.render(),this.initRender(),t(window).on("resize",function(t){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){o.handleTableResize(!0)},250)}),this},clearSubViews:function(){var t=this;i.each(t._subviews,function(t){t.close()}),this._subviews=[]},events:{"click button#add-student":"addStudent","click button#upload-modal":"uploadModal","click button#download-csv":"downloadCSV","click button#download-csv-mobile":"downloadCSV","click button#add-assignment":"addAssignment","click button#filter-assignments":"filterAssignments","click [class^=gradebook-student-column-]":"sortGradebookBy","click [class^=gradebook-student-column-] span":"sortGradebookBy"},initRender:function(e){this.scrollSize=0;var n=this;this.clearSubViews(),this.renderControl=0,console.log("ev on initRender",e),void 0!==e&&(console.log("ev, self.gradebook",e,n.gradebook),void 0!==e.cells&&this.gradebook.cells.set(e.cells),void 0!==e.students&&this.gradebook.students.set(e.students),void 0!==e.assignments&&this.gradebook.assignments.set(e.assignments));var o=i.map(n.gradebook.assignments.models,function(t){return t.get("assign_category").trim()}),a=i.without(i.uniq(o),"")||null,r=i.template(t("#gradebook-interface-template").html()),s=n.getTotalWeight(),l=r({course:n.course,assign_categories:a,role:this.gradebook.role,total_weight:s,assign_length:n.gradebook.assignments.length});t("#wpbody-content").append(n.$el.html(l));var d=i.template(t("#gradebook-interface-template-student-header").html()),u=d({role:this.gradebook.role});return n.$el.find("#students-header tr").append(u),this.studentHeader=u,void 0===this.filter_option&&(this.filter_option="default"),t("#filter-assignments-select").val(this.filter_option),this.render(),this},handleTableResize:function(e){if(void 0===e&&(e=!1),this.adjustCellWidths(),void 0!==this.scrollObj.data){var i=this.scrollObj.data("jsp");if(void 0!==i)if(currentScrollSize=t("#an-gradebook-container").width(),parseInt(this.scrollSize)!==parseInt(currentScrollSize)||e)this.scrollSize=currentScrollSize,i.destroy(),this.scrollObj=t(".table-wrapper .scrollable").bind("jsp-initialised",this.calculateScrollBarPosition);else{var n=t("#an-gradebook-container").closest(".jspContainer"),o={height:n.height()};n.css({"max-height":o.height+29+"px"})}}},render:function(){var e=this;switch(this.gradebook.sort_key){case"cell":t("#students").html(""),t("#students-pinned").html(""),t("#students-header tr").html(this.studentHeader),i.each(this.sort_column,function(i){var o=new n({model:e.gradebook.students.get(i.get("uid")),course:e.course,gradebook:e.gradebook,options:e.options});e._subviews.push(o),t("#students").append(o.render("pinned",e.gradebook.assignments))});var a=e.gradebook.assignments.models;a=i.sortBy(a,function(t){return t.get("assign_order")}),i.each(this.sort_column,function(i){var o=new n({model:e.gradebook.students.get(i.get("uid")),course:e.course,gradebook:e.gradebook,options:e.options});e._subviews.push(o),t("#students-pinned").append(o.render("static",e.gradebook.assignments))});var a=e.gradebook.assignments.models;a=i.sortBy(a,function(t){return t.get("assign_order")}),i.each(a,function(i){var n=new o({model:i,course:e.course,gradebook:e.gradebook});e._subviews.push(n),t("#students-header tr").append(n.render())});break;case"student":t("#students").html(""),t("#students-pinned").html(""),t("#students-header tr").html(this.studentHeader),i.each(this.gradebook.sort_column.models,function(i){var o=new n({model:i,course:e.course,gradebook:e.gradebook,options:e.options});e._subviews.push(o),t("#students").append(o.render("pinned",e.gradebook.assignments))}),i.each(this.gradebook.sort_column.models,function(i){var o=new n({model:i,course:e.course,gradebook:e.gradebook,options:e.options});e._subviews.push(o),t("#students-pinned").append(o.render("static",e.gradebook.assignments))});var a=e.gradebook.assignments;a=i.sortBy(a.models,function(t){return t.get("assign_order")}),i.each(a,function(i){var n=new o({model:i,course:e.course,gradebook:e.gradebook});e._subviews.push(n),t("#students-header tr").append(n.render())})}return this.filterAssignments(),0===this.scrollSize&&(this.scrollSize=this.$el.find("#an-gradebook-container").width(),this.gradebook.sort_key="student",this.gradebook.students.sort_key="last_name",this.gradebook.students.sort_direction="desc",this.gradebook.students.sort(),this.render(),this.scrollObj=t(".table-wrapper .scrollable").bind("jsp-initialised",this.calculateScrollBarPosition),t('[data-toggle="tooltip"]').tooltip(),new ResizeSensor(jQuery("#an-gradebook-container"),function(){e.handleTableResize()})),this},filterAssignments:function(){if("instructor"!==this.gradebook.role)return!1;var e=t("#filter-assignments-select").val();this.filter_option=e;var n=this.gradebook.assignments.filter(function(t){return t.get("assign_category")!==e}),o=this.gradebook.assignments.filter(function(t){return t.get("assign_category")===e});if("default"===e?this.gradebook.assignments.each(function(t){t.set({visibility:!0})}):(i.each(n,function(t){t.set({visibility:!1})}),i.each(o,function(t){t.set({visibility:!0})})),void 0!==this.scrollObj.data){var a=this.scrollObj.data("jsp");void 0!==a&&a.reinitialise()}},adjustCellWidths:function(){var e=t(".pinned .table"),i=e.find(".adjust-widths");if(i.lenght<1)return!1;var n=e.width();i.each(function(){var e=t(this),i=e.data("targetwidth"),o=i/n*100;e.css({width:o+"%"})})},calculateScrollBarPosition:function(e,i){var n=t("#an-gradebook-container"),o=n.closest(".jspContainer");if(t("#an-gradebook-container").css("width","auto"),n.height()<500){o.css({"padding-bottom":"500px"}),o.find(".jspHorizontalBar").css({bottom:"500px"})}var a={height:o.height()};o.css({height:a.height+29+"px"});var r=t("#an-gradebook-container").offset();o.find(".jspHorizontalBar").css({position:"fixed",left:r.left-16+"px"});new Waypoint({element:document.getElementById("an-gradebook-container"),handler:function(t){var e=o.find(".jspHorizontalBar");"up"===t?e.css({position:"fixed",left:r.left-16+"px"}):e.css({position:"absolute",left:"-16px"})},offset:"bottom-in-view"})},addAssignment:function(e){if(t("body").find("#modalDialogEditAssignment").length)return!1;new r({course:this.course,gradebook:this.gradebook})},addStudent:function(e){if(t("body").find("#modalDialogEditStudent").length)return!1;var i=new a({course:this.course,gradebook:this.gradebook});t("body").append(i.render())},downloadCSV:function(t){t.preventDefault(),this.course.export2csv()},uploadModal:function(e){if(t("body").find("#modalDialogUpload").length)return!1;var i=new s({course:this.course,gradebook:this.gradebook,model:this.model});t("body").append(i.render())},
checkStudentSortDirection:function(){"asc"===this.gradebook.students.sort_direction?this.gradebook.students.sort_direction="desc":this.gradebook.students.sort_direction="asc"},sortGradebookBy:function(e){e.stopPropagation();var i=t(e.srcElement),n=i.closest("th");"TH"===e.srcElement.nodeName&&(n=i);var o=n.find(".tooltip-wrapper"),a=o.data("target"),r=n.find(".header-wrapper"),s=r.attr("class"),l="sort-up";-1!==s.indexOf("sort-up")&&(l="sort-down"),this.gradebook.sort_key="student",this.gradebook.students.sort_key=a,this.checkStudentSortDirection(),this.gradebook.students.sort(),this.render(),t(".header-wrapper").removeClass("sort-up sort-down"),t(".gradebook-student-column-"+a).find(".header-wrapper").addClass(l)},sortByAssignment:function(t){var e=this.gradebook.cells.where({amid:parseInt(t.get("id"))});this.sort_column=i.sortBy(e,function(e){return"asc"===t.get("sorted")?e.get("assign_points_earned"):-1*e.get("assign_points_earned")}),this.gradebook.sort_key="cell",this.render()},handleDelete:function(t){this.$el.closest("#gradebookWrapper").find("#savingStatus").removeClass("hidden")},close:function(){this.clearSubViews(),i.map(this.xhrs,function(t){t.abort()}),this.remove()},getTotalWeight:function(){var t=this,e=0;i.each(t.gradebook.assignments.models,function(t){e+=parseFloat(t.get("assign_weight"))});var n="";return e>=100?n+="<strong>Percentage of Total Grade:</strong> "+e+"% of the total grade has been designated. Any assignments that do not have a set percentage will not be included in the average calculation.":e<100&&(n+="<strong>Percentage of Total Grade:</strong> "+e+"% of the total grade has been designated. The rest of the grade average will be calculated evenly."),"instructor"===t.gradebook.role&&(n+=" Percentages can be edited in the dropdown menus."),n},updateAverageGrade:function(e){var n=parseInt(e.uid),o=t("#average"+n);o.html(e.current_grade_average);var a=0;i.each(this.gradebook.students.models,function(t){parseInt(t.get("id"))===n&&t.set({current_grade_average:e.current_grade_average},{silent:!0}),a++}),o.attr("title",e.current_grade_average).tooltip("fixTitle")}})}),define("models/CourseList",["backbone","models/Course"],function(t,e){return t.Collection.extend({model:e,fetchCourses:function(){var t=this;return new Promise(function(e,i){t.url()?t.fetch({success:function(){e(t)}}):(t.set([{id:1,name:"Blah",school:"Blah",semester:"Blah",year:2010},{id:2,name:"Calc I",school:"BCC",semester:"Fall",year:2015}]),e(t))})},url:function(){return ajaxurl+"?action=course_list"},sort_key:"year",comparator:function(t,e){var i=t.get(this.sort_key),n=e.get(this.sort_key);return"year"!=this.sort_key&&"id"!=this.sort_key?"asc"===this.sort_direction?n.localeCompare(i):i.localeCompare(n):"asc"===this.sort_direction?n-i:i-n},parse:function(t){return this.gbRole=t.role,t.course_list}})}),define("models/AssignmentList",["backbone","models/Assignment"],function(t,e){return t.Collection.extend({model:e})}),define("models/Cell",["backbone"],function(t){return t.Model.extend({defaults:{uid:null,username:null,gbid:null,assign_order:null,amid:null,assign_points_earned:0,selected:!1,hover:!1,visibility:!0,display:!1,comments:null,commentsUpdate:!1},url:function(){return this.get("id")?ajaxurl+"?action=cell&id="+this.get("id"):ajaxurl+"?action=cell"}})}),define("models/CellList",["backbone","models/Cell"],function(t,e){return t.Collection.extend({model:e})}),define("models/CourseGradebook",["backbone","models/AssignmentList","models/UserList","models/CellList"],function(t,e,i,n){return t.Model.extend({fetchCourseGradebook:function(){var t=this;return new Promise(function(e,i){t.url()?t.fetch({success:function(){e(t)}}):(t.set(t.parse({assignments:[{id:1,gbid:1,assign_order:1,assign_name:"Cal",assign_category:"HW",assign_visibility:"Students",assign_date:"2015-11-11",assign_due:"2015-11-25"}],cells:[{id:1,uid:2,gbid:1,amid:1,assign_order:1,assign_points_earned:100}],students:[{first_name:"Aori",last_name:"Nevo",user_login:"anevo",id:2,gbid:1}],role:"instructor"})),e(t))})},url:function(){return ajaxurl+"?action=gradebook&gbid="+parseInt(this.get("gbid"))},sort_key:"student",parse:function(t){return this.assignments=new e(t.assignments),this.cells=new n(t.cells),this.students=new i(t.students),this.sort_column=this.students,this.role=t.role,t}})}),define("router/GradeBookRouter",["jquery","underscore","backbone","views/CourseListView","views/GradeBookView","models/CourseList","models/Course","models/CourseGradebook"],function(t,e,i,n,o,a,r,s){return i.emulateHTTP=!0,i.Router.extend({initialize:function(){return this._views=[],this.courseList=new a,i.history.start(),this},routes:{courses:"courses","gradebook/:id":"show-gradebook"},initPage:function(){t("#wpcontent").css("padding-left","0px")},clearViews:function(){var t=this;this.initPage(),e.each(t._views,function(t){t.close()}),this._views=[]},courses:function(){var e=this;this.clearViews(),t("#wpbody-content").prepend(t("#ajax-template").html()),this.courseList.fetchCourses().then(function(i){t(".ajax-loader-container").remove();var o=new n({collection:e.courseList});e._views.push(o)})},"show-gradebook":function(e){var i=this;this.clearViews(),this.course=new r({id:parseInt(e)}),this.gradebook=new s({gbid:parseInt(e)}),t("#wpbody-content").prepend(t("#ajax-template").html()),Promise.all([this.course.fetchCourse(),this.gradebook.fetchCourseGradebook()]).then(function(e){t(".ajax-loader-container").remove();var n=new o({gradebook:i.gradebook,course:i.course});i._views.push(n)})}})}),oplbgb_require_config={paths:{models:"app/models",views:"app/views",router:"app/router",jquery:oplbGradebook.depLocations.jquery,"jquery-ui":oplbGradebook.depLocations.jqueryui,backbone:oplbGradebook.depLocations.backbone,underscore:oplbGradebook.depLocations.underscore,bootstrap:"lib/bootstrap/js/bootstrap.min",chart:"lib/chart/Chart.min","bootstrap3-typeahead":"lib/bootstrap3-typeahead/bootstrap3-typeahead.min",jscrollpane:"lib/jscrollpane/jscrollpane.dist",bootstrapfileinput:"lib/bootstrap-fileinput/bootstrap-fileinput.dist",waypoints:"lib/bootstrap-fileinput/bootstrap-fileinput.dist.js",csselementqueries:"lib/css-element-queries/css.element.queries.dist"},shim:{bootstrap:{deps:["jquery"]}}},require.config(oplbgb_require_config),define("jquery",[],function(){return jQuery}),define("jquery-ui",[],function(){return jQuery}),define("backbone",[],function(){return Backbone}),define("underscore",[],function(){return _}),window.oplbGlobals=window.oplbGlobals||{},window.oplbGlobals.total_weight=0;var oldBackboneSync=Backbone.sync,savingStatus;Backbone.sync=function(t,e,i){return savingStatus=jQuery("#savingStatus"),savingStatus.length&&savingStatus.removeClass("hidden"),i.url=e.url()+"&nonce="+oplbGradebook.nonce,oldBackboneSync.apply(this,[t,e,i])};var currentSync=Backbone.sync,loggingSync=function(t,e,i){var n=currentSync(t,e,i);return savingStatus=jQuery("#savingStatus"),n.done(function(){savingStatus.length&&savingStatus.addClass("hidden")}),n.fail(function(){savingStatus.length&&savingStatus.addClass("hidden")}),n};Backbone.sync=loggingSync,require(["jquery","router/GradeBookRouter","bootstrap"],function(t,e,i){t.fn.serializeObject=function(){var e={},i=this.serializeArray();return t.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};new e}),define("oplb-gradebook-app",function(){});