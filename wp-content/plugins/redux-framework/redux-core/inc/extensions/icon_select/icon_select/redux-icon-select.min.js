!function(l){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.icon_select=redux.field_objects.icon_select||{},redux.field_objects.icon_select.getIconArray=function(e){return e.find(".redux-icon-select").data("options")},redux.field_objects.icon_select.reloadIcons=function(e,n,i,d,o){window.wp.ajax.post("redux_get_icons",{icon_set:d,select_text:o,nonce:n.data("nonce"),data:redux.field_objects.icon_select.getIconArray(e)}).done(function(e){i.find(".redux-modal-loading").hide(),i.find(".redux-modal-load").html(e.content)}).fail(function(e,n,d){i.find(".redux-modal-loading").hide(),i.find(".redux-modal-load").html(d),i.on("click",function(){i.addClass("hidden"),i.off("click"),l(".redux-icon-select-font").empty(),i.find(".redux-modal-load").empty()})})},redux.field_objects.icon_select.init=function(e){e=e||l(document).find(".redux-group-tab:visible").find(".redux-container-icon_select:visible"),l(e).each(function(){const c=l(this);let e=c;(e=c.hasClass("redux-field-container")?e:c.parents(".redux-field-container:first")).is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),c.find(".redux-icon-add").on("click",function(e){const i=l(this),o=l("#redux-modal-icon"),t=o.find(".redux-icon-select-font");var n;e.preventDefault(),e=c.find(".redux-icon-select").data("icon-sets"),e=JSON.parse(decodeURIComponent(e)),l.each(e,function(e,n){t.append(l("<option>",{value:e,text:n}))}),o.removeClass("hidden"),e=t.val(),n=t.find(":selected").text(),o.find(".redux-modal-loading").show(),window.wp.ajax.post("redux_get_icons",{icon_set:e,select_text:n,nonce:i.data("nonce"),data:redux.field_objects.icon_select.getIconArray(c)}).done(function(e){o.find(".redux-modal-loading").hide();const d=o.find(".redux-modal-load").html(e.content);d.off("click"),d.on("click","i",function(e){e.preventDefault();e=l(this).attr("title");c.find(".redux-icon-select-preview i").removeAttr("class").addClass(e),c.find(".redux-icon-select-preview").removeClass("hidden"),c.find(".redux-icon-remove").removeClass("hidden"),c.find("input").val(e).trigger("change"),o.addClass("hidden"),t.empty(),d.empty()}),o.off("change"),o.on("change",".redux-icon-select-font",function(){var e=l(this).val(),n=l(this).find(":selected").text();o.find(".redux-modal-loading").show(),redux.field_objects.icon_select.reloadIcons(c,i,o,e,n)}),o.on("change keyup",".redux-icon-search",function(){const n=l(this).val();d.find("i").each(function(){var e=l(this);e.attr("title").search(new RegExp(n,"i"))<0?e.hide():e.show()})}),o.on("click",".redux-modal-close, .redux-modal-overlay",function(){o.addClass("hidden"),t.empty(),d.empty()})}).fail(function(e,n,d){o.find(".redux-modal-loading").hide(),o.find(".redux-modal-load").html(d),o.on("click",function(){t.empty(),c.find(".redux-modal-load").empty(),o.off("click")})})}),c.find(".redux-icon-remove").on("click",function(e){e.preventDefault(),c.find(".redux-icon-select-preview").addClass("hidden"),c.find("input").val("").trigger("change"),l(this).addClass("hidden")}))})}}(jQuery);