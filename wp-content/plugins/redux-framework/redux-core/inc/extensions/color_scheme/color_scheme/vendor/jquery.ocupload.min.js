!function(t){t.fn.upload=function(e){return e=t.extend({name:"file",class:"hidden-input-div",enctype:"multipart/form-data",action:"",fileType:"",autoSubmit:!0,onSubmit:function(){},onComplete:function(){},onSelect:function(){},params:{}},e),new t.ocupload(this,e)},t.ocupload=function(e,n){var a=this,o=(new Date).getTime().toString().substr(8),i=t('<iframe id="iframe'+o+'" name="iframe'+o+'"></iframe>').css({display:"none"}),r=t('<form method="post" enctype="'+n.enctype+'" action="'+n.action+'" target="iframe'+o+'"></form>').css({margin:0,padding:0}),c=t('<input name="'+n.name+'" type="file" accept="'+n.fileType+'"class="noUpdate"/>').css({position:"relative",display:"block",marginLeft:"-175px",opacity:0,cursor:"pointer"});e.wrap('<div class="'+n.class+'"></div>'),r.append(c),e.after(r),e.after(i);var u=e.parent().css({position:"relative",height:e.outerHeight()+"px",width:e.outerWidth()+"px",overflow:"hidden",cursor:"pointer",margin:0,padding:0});c.css("marginTop",-u.height()-10+"px"),u.on("mousemove",function(t){c.css({top:t.pageY-u.offset().top+"px",left:t.pageX-u.offset().left+"px"})}),c.on("change",function(){a.onSelect(),a.autoSubmit&&a.submit()}),t.extend(this,{autoSubmit:!0,onSubmit:n.onSubmit,onComplete:n.onComplete,onSelect:n.onSelect,filename:function(){return c.attr("value")},params:function(e){if(!(e=e||!1))return n.params;n.params=t.extend(n.params,e)},name:function(t){if(!(t=t||!1))return c.attr("name");c.attr("name",value)},action:function(t){if(!(t=t||!1))return r.attr("action");r.attr("action",t)},enctype:function(t){if(!(t=t||!1))return r.attr("enctype");r.attr("enctype",t)},set:function(e,n){function o(t,e){switch(t){default:throw new Error("[jQuery.ocupload.set] '"+t+"' is an invalid option.");case"name":a.name(e);break;case"action":a.action(e);break;case"enctype":a.enctype(e);break;case"params":a.params(e);break;case"autoSubmit":a.autoSubmit=e;break;case"onSubmit":a.onSubmit=e;break;case"onComplete":a.onComplete=e;break;case"onSelect":a.onSelect=e}}(n=n||!1)?o(e,n):t.each(e,function(t,e){o(t,e)})},submit:function(){this.onSubmit(),t.each(n.params,function(e,n){r.append(t('<input type="hidden" name="'+e+'" value="'+n+'" />'))}),r.trigger("submit"),i.off().on("load",function(){var e=document.getElementById(i.attr("name")),n=t(e.contentWindow.document.body).text();a.onComplete(n)})}})}}(jQuery);