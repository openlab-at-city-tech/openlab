!function(d){"use strict";function e(){this.widgetWrap=d(".sidebars-column-1"),this.widgetArea=d("#widgets-right"),this.parentArea=d(".widget-liquid-right"),this.widgetTemplate=d("#redux-add-widget-template"),this.addFormHtml(),this.addDelButton(),this.bindEvents()}e.prototype={addFormHtml:function(){this.widgetWrap.append(this.widgetTemplate.html()),this.widgetName=this.widgetWrap.find('input[name="redux-add-widget-input"]'),this.nonce=this.widgetWrap.find('input[name="redux-nonce"]').val()},addDelButton:function(){var e=0;this.widgetArea.find(".sidebar-redux-custom .widgets-sortables").each(function(){e>=reduxWidgetAreasLocalize.count&&d(this).append('<div class="redux-widget-area-edit"><a href="#" class="redux-widget-area-delete button-primary">'+reduxWidgetAreasLocalize.delete+'</a><a href="#" style="display:none" class="redux-widget-area-delete-cancel button-secondary">'+reduxWidgetAreasLocalize.cancel+'</a><a href="#" style="display:none" class="redux-widget-area-delete-confirm button-primary">'+reduxWidgetAreasLocalize.confirm+"</a></div>"),e++})},bindEvents:function(){this.parentArea.on("click","a.redux-widget-area-delete",function(e){e.preventDefault(),d(this).hide(),d(this).next("a.redux-widget-area-delete-cancel").show().next("a.redux-widget-area-delete-confirm").show()}),this.parentArea.on("click","a.redux-widget-area-delete-cancel",function(e){e.preventDefault(),d(this).hide(),d(this).prev("a.redux-widget-area-delete").show(),d(this).next("a.redux-widget-area-delete-confirm").hide()}),this.parentArea.on("click","a.redux-widget-area-delete-confirm",d.proxy(this.deleteWidgetArea,this)),d("#addWidgetAreaForm").on("submit",function(){var e=d("#redux-add-widget").find(".spinner");e.css("display","inline-block"),e.css("visibility","visible"),d.proxy(this.addWidgetArea,this)})},addWidgetArea:function(e){return e.preventDefault(),!1},deleteWidgetArea:function(e){var t=d(e.currentTarget).parents(".widgets-holder-wrap:eq(0)"),e=t.find(".sidebar-name h2"),i=e.find(".spinner"),e=e.text().trim();t.addClass("closed"),i.css("display","inline-block"),i.css("visibility","visible"),d.ajax({type:"POST",url:ajaxurl,data:{action:"redux_delete_widget_area",name:e,_wpnonce:this.nonce},success:function(e){"widget_area-deleted"===e.trim()&&t.slideUp(200,function(){this.remove()})}})}},d(function(){new e})}(jQuery);