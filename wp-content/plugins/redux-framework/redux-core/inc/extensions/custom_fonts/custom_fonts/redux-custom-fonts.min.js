!function(c){"use strict";let f,a,u=!1;redux.field_objects=redux.field_objects||{},redux.field_objects.custom_fonts=redux.field_objects.custom_fonts||{},redux.field_objects.custom_fonts.init=function(t){t=t||c(document).find(".redux-group-tab:visible").find(".redux-container-custom_font:visible"),c(t).each(function(){var t=c(this);let e=t;(e=t.hasClass("redux-field-container")?e:t.parents(".redux-field-container:first")).is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),redux.field_objects.custom_fonts.modInit(t))})},redux.field_objects.custom_fonts.modInit=function(n){var t=c(".redux-ajax-security").data("opt-name");f=redux_custom_fonts_l10,a=void 0===t?redux:redux.optName,n.find(".checkbox").on("click",function(){let t=0;let e,o;"custom-font-convert"===c(this).attr("id")&&(c(this).is(":checked")?(e="",o=1,n.find(".conversion-types").removeClass("is-disabled")):(e="disabled",o=.7,n.find(".conversion-types").addClass("is-disabled")),n.find("#custom-font-eot,#custom-font-svg,#custom-font-ttf,#custom-font-woff,#custom-font-woff2").prop("disabled",e),n.find(".conversion-types").css("opacity",o)),c(this).is(":checked")&&(t=c(this).parent().find(".checkbox-check").attr("data-val")),c(this).parent().find(".checkbox-check").val(t),redux_change(c(this))}),n.find(".remove-font").off("click").on("click",function(){redux.field_objects.custom_fonts.remove_font(n,c(this).parents("fieldset.redux-field:first"))}),n.find(".media_add_font").off().on("click",function(t){redux.field_objects.custom_fonts.add_font(n,t,c(this).parents("fieldset.redux-field:first"))}),n.find(".fontDelete").on("click",function(t){const e=c(this).parents("td:first");return t.preventDefault(),e.find(".spinner").show(),(t=c(this).data()).action="redux_custom_fonts",t.nonce=c(this).parents(".redux-container-custom_font:first").find(".media_add_font").attr("data-nonce"),c.post(ajaxurl,t,function(t){(t=JSON.parse(t)).type&&"success"===t.type?(1===e.parents("table:first").find("tr").length?e.parents("table:first"):e.parents("tr:first")).fadeOut().remove():(alert(f.delete_error+" "+t.msg),e.find(".spinner").hide())}),!1})},redux.field_objects.custom_fonts.startTimer=function(o,n){let s;c.ajax({url:ajaxurl,type:"POST",data:{action:"redux_custom_font_timer"},beforeSend:function(){},success:function(t){let e;!1===u?(setTimeout(redux.field_objects.custom_fonts.startTimer(o,n),500),e=a.args.please_wait+": "+n+"<br><br>"+t):(e=f.complete,t="finished"),""!==t&&s!==t&&(c(".blockUI.blockMsg h2").html(e),s=t)}})},redux.field_objects.custom_fonts.add_font=function(i,t,d){let r;t.preventDefault(),r,(r=wp.media({multiple:!1,library:{type:["application","font"]},title:"Redux Custom Fonts:  "+f.media_title,button:{text:f.media_button}})).on("select",function(){var t,e;let o;var n=r.state().get("selection").first();const s=d.find(".font-error");s.slideUp(),s.find("span").text(""),r.close(),"application"!==n.attributes.type&&"font"!==n.attributes.type||(t=c(d).find(".media_add_font").attr("data-nonce"),e=c("#custom-font-convert").is(":checked"),t={action:"redux_custom_fonts",nonce:t,attachment_id:n.id,title:n.attributes.title,mime:n.attributes.mime,filename:n.attributes.filename,conversion:Boolean(e)},o="application/zip "===t.mime?f.unzip:f.convert,redux.field_objects.custom_fonts.startTimer(i,o),c.blockUI({message:"<h2>"+a.args.please_wait+": "+o+"</h2>"}),c.post(ajaxurl,t,function(t){if(console.log("Redux Custom Fonts API Response (For support purposes)"),console.log(t),"success"===(t=JSON.parse(t)).type){if(""!==t.msg)return c.unblockUI(),s.find("span").html(t.msg+"  "+f.partial),s.slideDown(),void(u=!0);window.onbeforeunload="",location.reload()}else"error"===t.type?(c.unblockUI(),s.find("span").html(t.msg)):(c.unblockUI(),s.find("span").text(f.unknown)),s.slideDown();u=!0}))}),r.open()},redux.field_objects.custom_fonts.remove_font=function(t,e){if(!e.find(".remove-image").addClass("hide"))return null},redux.field_objects.custom_fonts.sleep=function(t){var e=(new Date).getTime();let o;for(o=0;o<1e7&&!((new Date).getTime()-e>t);o+=1);}}(jQuery);