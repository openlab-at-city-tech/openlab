{"version":3,"sources":["includes/js/generator/node_modules/browser-pack/_prelude.js","includes/js/generator/includes/js/generator/src/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","$","$generator","$search","$filter","$filters","$choices","$choice","$settings","$prefix","$result","$selected","self","window","SUG","App","jQuery","children","find","state","mceSelection","target","wpActiveEditor","context","insertArgs","preview","timer","request","el","body","init","gp_hover_timer","click","regex","filter","this","data","css","opacity","removeClass","RegExp","each","match","preventDefault","on","val","html","hide","show","focus","magnificPopup","close","blur","keyup","$first","best","keyCode","trigger","id","shortcode","matches","name","desc","group","join","addClass","ajax","type","url","ajaxurl","action","beforeSend","success","$content","attr","index","$val","min","max","step","simpleSlider","snap","range","farbtastic","update","images","tax","terms","ids","source","$sources","$images","categories","$cats","$taxes","$terms","frame","$picker","$source","$addMedia","indexOf","parent","fadeOut","remove","wp","media","frames","su_media_frame_1","title","SUGL10n","isp_media_title","library","button","text","isp_media_insert","multiple","files","get","toJSON","append","open","sortable","revert","containment","tolerance","stop","ajaxTermSelect","$cont","parents","dataType","class","size","_typeof","abort","file","$button","stopPropagation","su_media_frame_2","upload_title","upload_insert","attachment","first","$field","toggleClass","hasClass","$icons","$value","$switch","value","su_generator_get_terms","noselect","$fields","$hoff","$voff","$blur","$color","cnt","wheel","split","replace","$width","$style","$cnt","_default","nonce","setSettings","insertShortcode","$preview","updatePreview","clearTimeout","setTimeout","$list","Date","getTime","prompt","presets_prompt_msg","presets_prompt_value","addPreset","$insert","$preset","removePreset","settings","getSettings","parseSettings","settingsSelector","query","prefix","content","result","String","$this","is","toString","hasOwnProperty","forced","previous","cache","insert","args","preSelectedShortcode","mfpOptions","alignTop","closeOnBgClick","mainClass","items","src","callbacks","concat","tinyMCE","activeEditor","selection","getContent","format","props","originalText","last_used","HTMLEditor","document","getElementById","editorID","insertAtCaret","editor","attributes","setAttributes","field","start","selectionStart","substring","ready"],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/* eslint-disable */\n\n/* global jQuery, wp, ajaxurl, SUGL10n */\n\nwindow.SUG = {}\n\nwindow.SUG.App = (($) => {\n  var $generator = $('#su-generator')\n  var $search = $('#su-generator-search')\n  var $filter = $('#su-generator-filter')\n  var $filters = $filter.children('a')\n  var $choices = $('#su-generator-choices')\n  var $choice = $choices.find('span')\n  var $settings = $('#su-generator-settings')\n  var $prefix = $('#su-compatibility-mode-prefix')\n  var $result = $('#su-generator-result')\n  var $selected = $('#su-generator-selected')\n\n  var self = {}\n\n  self.state = {\n    mceSelection: '',\n    target: '',\n    wpActiveEditor: null,\n    context: '',\n    insertArgs: '',\n    preview: {\n      timer: null,\n      request: null\n    }\n  }\n\n  self.el = {\n    body: $('body')\n  }\n\n  self.init = () => {\n    $filters.click(\n      function (e) {\n        // Prepare data\n        var filter = $(this).data('filter')\n        // If filter All, show all choices\n        if (filter === 'all') {\n          $choice.css(\n            {\n              opacity: 1\n            }\n          ).removeClass('su-generator-choice-first')\n        } else { // Else run search\n          var regex = new RegExp(filter, 'gi')\n          // Hide all choices\n          $choice.css({ opacity: 0.2 })\n          // Find searched choices and show\n          $choice.each(\n            function () {\n              // Get shortcode name\n              var group = $(this).data('group')\n              // Show choice if matched\n              if (group.match(regex) !== null) {\n                $(this)\n                  .css({ opacity: 1 })\n                  .removeClass('su-generator-choice-first')\n              }\n            }\n          )\n        }\n        e.preventDefault()\n      }\n    )\n    // Go to home link\n    $('#su-generator').on(\n      'click',\n      '.su-generator-home',\n      function (e) {\n        // Clear search field\n        $search.val('')\n        // Hide settings\n        $settings.html('').hide()\n        // Remove narrow class\n        $generator.removeClass('su-generator-narrow')\n        // Show filters\n        $filter.show()\n        // Show choices panel\n        $choices.show()\n        $choice.show()\n        // Clear selection\n        self.state.mceSelection = ''\n        // Focus search field\n        $search.focus()\n        e.preventDefault()\n      }\n    )\n    // Generator close button\n    $('#su-generator').on(\n      'click',\n      '.su-generator-close',\n      function (e) {\n        // Close popup\n        $.magnificPopup.close()\n        // Prevent default action\n        e.preventDefault()\n      }\n    )\n    // Search field\n    $search.on(\n      {\n        focus: function () {\n          // Clear field\n          $(this).val('')\n          // Hide settings\n          $settings.html('').hide()\n          // Remove narrow class\n          $generator.removeClass('su-generator-narrow')\n          // Show choices panel\n          $choices.show()\n          $choice.css(\n            {\n              opacity: 1\n            }\n          ).removeClass('su-generator-choice-first')\n          // Show filters\n          $filter.show()\n        },\n        blur: function () {},\n        keyup: function (e) {\n          // Prepare vars\n          var $first = $('.su-generator-choice-first:first')\n          var val = $(this).val()\n          var regex = new RegExp(val, 'gi')\n          var best = 0\n          // Hotkey action\n          if (e.keyCode === 13 && $first.length > 0) {\n            e.preventDefault()\n            $(this).val('').blur()\n            $first.trigger('click')\n          }\n          // Hide all choices\n          $choice.css(\n            {\n              opacity: 0.2\n            }\n          ).removeClass('su-generator-choice-first')\n          // Loop and highlight choices\n          $choice.each(\n            function () {\n              // Get choice data\n              var data = $(this).data()\n              var id = data.shortcode\n              var name = data.name\n              var desc = data.desc\n              var group = data.group\n              var matches = ([id, name, desc, group].join(' ')).match(regex)\n              // Highlight choice if matched\n              if (matches !== null) {\n                // Highlight current choice\n                $(this).css(\n                  {\n                    opacity: 1\n                  }\n                )\n                // Check for exact match\n                if (val === id) {\n                  // Remove primary class from all choices\n                  $choice.removeClass('su-generator-choice-first')\n                  // Add primary class to the current choice\n                  $(this).addClass('su-generator-choice-first')\n                  // Prevent selecting by matches number\n                  best = 999\n                } else if (matches.length > best) { // Check matches length\n                  // Remove primary class from all choices\n                  $choice.removeClass('su-generator-choice-first')\n                  // Add primary class to the current choice\n                  $(this).addClass('su-generator-choice-first')\n                  // Save the score\n                  best = matches.length\n                }\n              }\n            }\n          )\n          // Remove primary class if search field is empty\n          if (val === '') {\n            $choice.removeClass('su-generator-choice-first')\n          }\n        }\n      }\n    )\n    // Click on shortcode choice\n    $choice.on(\n      'click',\n      function (e) {\n        // Prepare data\n        var shortcode = $(this).data('shortcode')\n        // Load shortcode options\n        $.ajax(\n          {\n            type: 'POST',\n            url: ajaxurl,\n            data: {\n              action: 'su_generator_settings',\n              shortcode: shortcode\n            },\n            beforeSend: function () {\n              // Hide preview box\n              $('#su-generator-preview').hide()\n              // Hide choices panel\n              $choices.hide()\n              // Show loading animation\n              $settings.addClass('su-generator-loading').show()\n              // Add narrow class\n              $generator.addClass('su-generator-narrow')\n              // Hide filters\n              $filter.hide()\n            },\n            success: function (data) {\n              // Hide loading animation\n              $settings.removeClass('su-generator-loading')\n              // Insert new HTML\n              $settings.html(data)\n              // Apply selected text to the content field\n              var $content = $('#su-generator-content')\n              if (typeof self.state.mceSelection !== 'undefined' && self.state.mceSelection !== '' && $content.attr('type') !== 'hidden') {\n                $content.val(self.state.mceSelection)\n              }\n              // Init range pickers\n              $('.su-generator-range-picker').each(\n                function (index) {\n                  var $picker = $(this)\n                  var $val = $picker.find('input')\n                  var min = $val.attr('min')\n                  var max = $val.attr('max')\n                  var step = $val.attr('step')\n                  // Apply noUIslider\n                  $val.simpleSlider(\n                    {\n                      snap: true,\n                      step: step,\n                      range: [min, max]\n                    }\n                  )\n                  $val.show()\n                  $val.on(\n                    'keyup blur',\n                    function (e) {\n                      $val.simpleSlider('setValue', $val.val())\n                    }\n                  )\n                }\n              )\n              // Init color pickers\n              $('.su-generator-select-color').each(\n                function (index) {\n                  $(this).find('.su-generator-select-color-wheel').filter(':first').farbtastic('.su-generator-select-color-value:eq(' + index + ')')\n                  $(this).find('.su-generator-select-color-value').focus(\n                    function () {\n                      $('.su-generator-select-color-wheel:eq(' + index + ')').show()\n                    }\n                  )\n                  $(this).find('.su-generator-select-color-value').blur(\n                    function () {\n                      $('.su-generator-select-color-wheel:eq(' + index + ')').hide()\n                    }\n                  )\n                }\n              )\n              // Init image sourse pickers\n              $('.su-generator-isp').each(\n                function () {\n                  var $picker = $(this)\n                  var $sources = $picker.find('.su-generator-isp-sources')\n                  var $source = $picker.find('.su-generator-isp-source')\n                  var $addMedia = $picker.find('.su-generator-isp-add-media')\n                  var $images = $picker.find('.su-generator-isp-images')\n                  var $cats = $picker.find('.su-generator-isp-categories')\n                  var $taxes = $picker.find('.su-generator-isp-taxonomies')\n                  var $terms = $('.su-generator-isp-terms')\n                  var $val = $picker.find('.su-generator-attr')\n                  var frame\n                  // Update hidden value\n                  var update = function () {\n                    var val = 'none'\n                    var ids = ''\n                    var source = $sources.val()\n                    // Media library\n                    if (source === 'media') {\n                      var images = []\n                      $images.find('span').each(\n                        function (i) {\n                          images[i] = $(this).data('id')\n                        }\n                      )\n                      if (images.length > 0) {\n                        ids = images.join(',')\n                      }\n                    }\n                    // Category\n                    else if (source === 'category') {\n                      var categories = $cats.val() || []\n                      if (categories.length > 0) {\n                        ids = categories.join(',')\n                      }\n                    }\n                    // Taxonomy\n                    else if (source === 'taxonomy') {\n                      var tax = $taxes.val() || ''\n                      var terms = $terms.val() || []\n                      if (tax !== '0' && terms.length > 0) {\n                        val = 'taxonomy: ' + tax + '/' + terms.join(',')\n                      }\n                    }\n                    // Deselect\n                    else if (source === '0') {\n                      val = 'none'\n                    }\n                    // Other options\n                    else {\n                      val = source\n                    }\n                    if (ids !== '') {\n                      val = source + ': ' + ids\n                    }\n                    $val.val(val).trigger('change')\n                  }\n                  // Switch source\n                  $sources.on(\n                    'change',\n                    function (e) {\n                      var source = $(this).val()\n                      e.preventDefault()\n                      $source.removeClass('su-generator-isp-source-open')\n                      if (source.indexOf(':') === -1) {\n                        $picker.find('.su-generator-isp-source-' + source).addClass('su-generator-isp-source-open')\n                      }\n                      update()\n                    }\n                  )\n                  // Remove image\n                  $images.on(\n                    'click',\n                    'span i',\n                    function () {\n                      $(this).parent('span').css('border-color', '#f03').fadeOut(\n                        300,\n                        function () {\n                          $(this).remove()\n                          update()\n                        }\n                      )\n                    }\n                  )\n                  // Add image\n                  $addMedia.click(\n                    function (e) {\n                      e.preventDefault()\n                      if (typeof (frame) !== 'undefined') {\n                        frame.close()\n                      }\n                      frame = wp.media.frames.su_media_frame_1 = wp.media(\n                        {\n                          title: SUGL10n.isp_media_title,\n                          library: {\n                            type: 'image'\n                          },\n                          button: {\n                            text: SUGL10n.isp_media_insert\n                          },\n                          multiple: true\n                        }\n                      )\n                      frame.on('open', function () {\n                        $('.mfp-wrap').addClass('hidden')\n                      })\n                      frame.on('close', function () {\n                        $('.mfp-wrap').removeClass('hidden')\n                      })\n                      frame.on(\n                        'select',\n                        function () {\n                          var files = frame.state().get('selection').toJSON()\n                          $images.find('em').remove()\n                          $.each(\n                            files,\n                            function (i) {\n                              $images.append('<span data-id=\"' + this.id + '\" title=\"' + this.title + '\"><img src=\"' + this.url + '\" alt=\"\" /><i class=\"sui sui-times\"></i></span>')\n                            }\n                          )\n                          update()\n                        }\n                      ).open()\n                    }\n                  )\n                  // Sort images\n                  $images.sortable(\n                    {\n                      revert: 200,\n                      containment: $picker,\n                      tolerance: 'pointer',\n                      stop: function () {\n                        update()\n                      }\n                    }\n                  )\n                  // Select categories and terms\n                  $cats.on('change', update)\n                  $terms.on('change', update)\n                  // Select taxonomy\n                  $taxes.on(\n                    'change',\n                    function () {\n                      var $cont = $(this).parents('.su-generator-isp-source')\n                      var tax = $(this).val()\n                      // Remove terms\n                      $terms.hide().find('option').remove()\n                      update()\n                      // Taxonomy is not selected\n                      if (tax === '0') {\n\n                      } else { // Taxonomy selected\n                        var ajaxTermSelect = $.ajax(\n                          {\n                            url: ajaxurl,\n                            type: 'post',\n                            dataType: 'html',\n                            data: {\n                              action: 'su_generator_get_terms',\n                              tax: tax,\n                              class: 'su-generator-isp-terms',\n                              multiple: true,\n                              size: 10\n                            },\n                            beforeSend: function () {\n                              if (typeof ajaxTermSelect === 'object') {\n                                ajaxTermSelect.abort()\n                              }\n                              $terms.html('').attr('disabled', true).hide()\n                              $cont.addClass('su-generator-loading')\n                            },\n                            success: function (data) {\n                              $terms.html(data).attr('disabled', false).show()\n                              $cont.removeClass('su-generator-loading')\n                            }\n                          }\n                        )\n                      }\n                    }\n                  )\n                }\n              )\n              // Init media buttons\n              $('.su-generator-upload-button').each(\n                function () {\n                  var $button = $(this)\n                  var $val = $(this).parents('.su-generator-attr-container').find('input:text')\n                  var file\n                  $button.on(\n                    'click',\n                    function (e) {\n                      e.preventDefault()\n                      e.stopPropagation()\n                      // If the frame already exists, reopen it\n                      if (typeof (file) !== 'undefined') {\n                        file.close()\n                      }\n                      // Create WP media frame.\n                      file = wp.media.frames.su_media_frame_2 = wp.media(\n                        {\n                          // Title of media manager frame\n                          title: SUGL10n.upload_title,\n                          button: {\n                            // Button text\n                            text: SUGL10n.upload_insert\n                          },\n                          // Do not allow multiple files, if you want multiple, set true\n                          multiple: false\n                        }\n                      )\n                      // callback for selected image\n                      file.on(\n                        'select',\n                        function () {\n                          var attachment = file.state().get('selection').first().toJSON()\n                          $val.val(attachment.url).trigger('change')\n                        }\n                      )\n                      file.on('open', function () {\n                        $('.mfp-wrap').addClass('hidden')\n                      })\n                      file.on('close', function () {\n                        $('.mfp-wrap').removeClass('hidden')\n                      })\n                      // Open modal\n                      file.open()\n                    }\n                  )\n                }\n              )\n              // Init icon pickers\n              $('.su-generator-icon-picker-button').each(\n                function () {\n                  var $button = $(this)\n                  var $field = $(this).parents('.su-generator-attr-container')\n                  var $val = $field.find('.su-generator-attr')\n                  var $picker = $field.find('.su-generator-icon-picker')\n                  var $filter = $picker.find('input:text')\n                  $button.click(\n                    function (e) {\n                      $picker.toggleClass('su-generator-icon-picker-visible')\n                      $filter.val('').trigger('keyup')\n                      if ($picker.hasClass('su-generator-icon-picker-loaded')) {\n                        return\n                      }\n                      // Load icons\n                      $.ajax(\n                        {\n                          type: 'post',\n                          url: ajaxurl,\n                          data: {\n                            action: 'su_generator_get_icons'\n                          },\n                          dataType: 'html',\n                          beforeSend: function () {\n                            // Show loading animation\n                            $picker.addClass('su-generator-loading')\n                            // Add loaded class\n                            $picker.addClass('su-generator-icon-picker-loaded')\n                          },\n                          success: function (data) {\n                            $picker.append(data)\n                            var $icons = $picker.children('i')\n                            $icons.click(\n                              function (e) {\n                                $val.val('icon: ' + $(this).attr('title'))\n                                $picker.removeClass('su-generator-icon-picker-visible')\n                                $val.trigger('change')\n                                e.preventDefault()\n                              }\n                            )\n                            $filter.on(\n                              {\n                                keyup: function () {\n                                  var val = $(this).val()\n                                  var regex = new RegExp(val, 'gi')\n                                  // Hide all choices\n                                  $icons.hide()\n                                  // Find searched choices and show\n                                  $icons.each(\n                                    function () {\n                                      // Get shortcode name\n                                      var name = $(this).attr('title')\n                                      // Show choice if matched\n                                      if (name.match(regex) !== null) {\n                                        $(this).show()\n                                      }\n                                    }\n                                  )\n                                },\n                                focus: function () {\n                                  $(this).val('')\n                                  $icons.show()\n                                }\n                              }\n                            )\n                            $picker.removeClass('su-generator-loading')\n                          }\n                        }\n                      )\n                      e.preventDefault()\n                    }\n                  )\n                }\n              )\n              // Init switches\n              $('.su-generator-switch').click(\n                function (e) {\n                  // Prepare data\n                  var $switch = $(this)\n                  var $value = $switch.parent().children('input')\n                  var isOn = $value.val() === 'yes'\n                  // Disable\n                  if (isOn) {\n                    // Change value\n                    $value.val('no').trigger('change')\n                  } else { // Enable\n                    // Change value\n                    $value.val('yes').trigger('change')\n                  }\n                  e.preventDefault()\n                }\n              )\n              $('.su-generator-switch-value').on(\n                'change',\n                function () {\n                  // Prepare data\n                  var $value = $(this)\n                  var $switch = $value.parent().children('.su-generator-switch')\n                  var value = $value.val()\n                  // Disable\n                  if (value === 'yes') {\n                    $switch.removeClass('su-generator-switch-no').addClass('su-generator-switch-yes')\n                  } else if (value === 'no') { // Enable\n                    $switch.removeClass('su-generator-switch-yes').addClass('su-generator-switch-no')\n                  }\n                }\n              )\n              // Init tax_term selects\n              $('select#su-generator-attr-taxonomy').on(\n                'change',\n                function () {\n                  var $taxonomy = $(this)\n                  var tax = $taxonomy.val()\n                  var $terms = $('select#su-generator-attr-tax_term')\n                  // Load new options\n                  window.su_generator_get_terms = $.ajax(\n                    {\n                      type: 'POST',\n                      url: ajaxurl,\n                      data: {\n                        action: 'su_generator_get_terms',\n                        tax: tax,\n                        noselect: true\n                      },\n                      dataType: 'html',\n                      beforeSend: function () {\n                        // Check previous requests\n                        if (typeof window.su_generator_get_terms === 'object') {\n                          window.su_generator_get_terms.abort()\n                        }\n                        // Show loading animation\n                        $terms.parent().addClass('su-generator-loading')\n                      },\n                      success: function (data) {\n                        // Remove previous options\n                        $terms.find('option').remove()\n                        // Append new options\n                        $terms.append(data)\n                        // Hide loading animation\n                        $terms.parent().removeClass('su-generator-loading')\n                      }\n                    }\n                  )\n                }\n              )\n              // Init shadow pickers\n              $('.su-generator-shadow-picker').each(\n                function (index) {\n                  var $picker = $(this)\n                  var $fields = $picker.find('.su-generator-shadow-picker-field input')\n                  var $hoff = $picker.find('.su-generator-sp-hoff')\n                  var $voff = $picker.find('.su-generator-sp-voff')\n                  var $blur = $picker.find('.su-generator-sp-blur')\n                  var $color = {\n                    cnt: $picker.find('.su-generator-shadow-picker-color'),\n                    value: $picker.find('.su-generator-shadow-picker-color-value'),\n                    wheel: $picker.find('.su-generator-shadow-picker-color-wheel')\n                  }\n                  var $val = $picker.find('.su-generator-attr')\n                  // Init color picker\n                  $color.wheel.farbtastic($color.value)\n                  $color.value.focus(\n                    function () {\n                      $color.wheel.show()\n                    }\n                  )\n                  $color.value.blur(\n                    function () {\n                      $color.wheel.hide()\n                    }\n                  )\n                  // Handle text fields\n                  $fields.on(\n                    'change blur keyup',\n                    function () {\n                      $val.val($hoff.val() + 'px ' + $voff.val() + 'px ' + $blur.val() + 'px ' + $color.value.val()).trigger('change')\n                    }\n                  )\n                  $val.on(\n                    'keyup',\n                    function () {\n                      var value = $(this).val().split(' ')\n                      // Value is correct\n                      if (value.length === 4) {\n                        $hoff.val(value[0].replace('px', ''))\n                        $voff.val(value[1].replace('px', ''))\n                        $blur.val(value[2].replace('px', ''))\n                        $color.value.val(value[3])\n                        $fields.trigger('keyup')\n                      }\n                    }\n                  )\n                }\n              )\n              // Init border pickers\n              $('.su-generator-border-picker').each(\n                function (index) {\n                  var $picker = $(this)\n                  var $fields = $picker.find('.su-generator-border-picker-field input, .su-generator-border-picker-field select')\n                  var $width = $picker.find('.su-generator-bp-width')\n                  var $style = $picker.find('.su-generator-bp-style')\n                  var $color = {\n                    cnt: $picker.find('.su-generator-border-picker-color'),\n                    value: $picker.find('.su-generator-border-picker-color-value'),\n                    wheel: $picker.find('.su-generator-border-picker-color-wheel')\n                  }\n                  var $val = $picker.find('.su-generator-attr')\n                  // Init color picker\n                  $color.wheel.farbtastic($color.value)\n                  $color.value.focus(\n                    function () {\n                      $color.wheel.show()\n                    }\n                  )\n                  $color.value.blur(\n                    function () {\n                      $color.wheel.hide()\n                    }\n                  )\n                  // Handle text fields\n                  $fields.on(\n                    'change blur keyup',\n                    function () {\n                      $val.val($width.val() + 'px ' + $style.val() + ' ' + $color.value.val()).trigger('change')\n                    }\n                  )\n                  $val.on(\n                    'keyup',\n                    function () {\n                      var value = $(this).val().split(' ')\n                      // Value is correct\n                      if (value.length === 3) {\n                        $width.val(value[0].replace('px', ''))\n                        $style.val(value[1])\n                        $color.value.val(value[2])\n                        $fields.trigger('keyup')\n                      }\n                    }\n                  )\n                }\n              )\n              // Remove skip class when setting is changed\n              $settings.find('.su-generator-attr').on(\n                'change keyup blur',\n                function () {\n                  var $cnt = $(this).parents('.su-generator-attr-container')\n                  var _default = $cnt.data('default')\n                  var val = $(this).val()\n                  // Value is changed\n                  if (val != _default) {\n                    $cnt.removeClass('su-generator-skip')\n                  } else {\n                    $cnt.addClass('su-generator-skip')\n                  }\n                }\n              )\n              // Init value setters\n              $('.su-generator-set-value').click(\n                function (e) {\n                  $(this).parents('.su-generator-attr-container').find('input').val($(this).text()).trigger('change')\n                }\n              )\n              // Save selected value\n              $selected.val(shortcode)\n              // Load last used preset\n              $.ajax(\n                {\n                  type: 'GET',\n                  url: ajaxurl,\n                  data: {\n                    action: 'su_generator_get_preset',\n                    id: 'last_used',\n                    shortcode: shortcode,\n                    nonce: $('#su_generator_presets_nonce').val()\n                  },\n                  beforeSend: function () {\n                    // Show loading animation\n                    // $settings.addClass('su-generator-loading');\n                  },\n                  success: function (data) {\n                    // Remove loading animation\n                    // $settings.removeClass('su-generator-loading');\n                    // Set new settings\n                    self.setSettings(data)\n                    // Apply selected text to the content field\n                    var $content = $('#su-generator-content')\n                    if (typeof self.state.mceSelection !== 'undefined' && self.state.mceSelection !== '' && $content.attr('type') !== 'hidden') {\n                      $content.val(self.state.mceSelection)\n                    }\n                  },\n                  dataType: 'json'\n                }\n              )\n            },\n            dataType: 'html'\n          }\n        )\n      }\n    )\n    // Insert shortcode\n    $('#su-generator').on('click', '.su-generator-insert', self.insertShortcode)\n    // Preview shortcode\n    $('#su-generator').on(\n      'click',\n      '.su-generator-toggle-preview',\n      function (e) {\n        // Prepare data\n        var $preview = $('#su-generator-preview')\n        var $button = $(this)\n        // Hide button\n        $button.hide()\n        // Show preview box\n        $preview.addClass('su-generator-loading').show()\n        // Bind updating on settings changes\n        $settings.find('input, textarea, select').on(\n          'change keyup blur',\n          function () {\n            self.updatePreview()\n          }\n        )\n        // Update preview box\n        self.updatePreview(true)\n        // Prevent default action\n        e.preventDefault()\n      }\n    )\n    var gp_hover_timer\n    // Presets manager - mouseenter\n    $('#su-generator').on(\n      'mouseenter click',\n      '.su-generator-presets',\n      function () {\n        clearTimeout(gp_hover_timer)\n        $('.su-gp-popup').show()\n      }\n    )\n    // Presets manager - mouseleave\n    $('#su-generator').on(\n      'mouseleave',\n      '.su-generator-presets',\n      function () {\n        gp_hover_timer = window.setTimeout(\n          function () {\n            $('.su-gp-popup').fadeOut(200)\n          },\n          600\n        )\n      }\n    )\n    // Presets manager - add new preset\n    $('#su-generator').on(\n      'click',\n      '.su-gp-new',\n      function (e) {\n        // Prepare data\n        var $container = $(this).parents('.su-generator-presets')\n        var $list = $('.su-gp-list')\n        var id = new Date().getTime()\n        // Ask for preset name\n        var name = prompt(SUGL10n.presets_prompt_msg, SUGL10n.presets_prompt_value)\n        // Name is entered\n        if (name !== '' && name !== null) {\n          // Hide default text\n          $list.find('b').hide()\n          // Add new option\n          $list.append('<span data-id=\"' + id + '\"><em>' + name + '</em><i class=\"sui sui-times\"></i></span>')\n          // Perform AJAX request\n          self.addPreset(id, name)\n        }\n      }\n    )\n    // Presets manager - load preset\n    $('#su-generator').on(\n      'click',\n      '.su-gp-list span',\n      function (e) {\n        // Prepare data\n        var shortcode = $('.su-generator-presets').data('shortcode')\n        var id = $(this).data('id')\n        var $insert = $('.su-generator-insert')\n        // Hide popup\n        $('.su-gp-popup').hide()\n        // Disable hover timer\n        clearTimeout(gp_hover_timer)\n        // Get the preset\n        $.ajax(\n          {\n            type: 'GET',\n            url: ajaxurl,\n            data: {\n              action: 'su_generator_get_preset',\n              id: id,\n              shortcode: shortcode,\n              nonce: $('#su_generator_presets_nonce').val()\n            },\n            beforeSend: function () {\n              // Disable insert button\n              $insert.addClass('button-primary-disabled').attr('disabled', true)\n            },\n            success: function (data) {\n              // Enable insert button\n              $insert.removeClass('button-primary-disabled').attr('disabled', false)\n              // Set new settings\n              self.setSettings(data)\n            },\n            dataType: 'json'\n          }\n        )\n        // Prevent default action\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    )\n    // Presets manager - remove preset\n    $('#su-generator').on(\n      'click',\n      '.su-gp-list i',\n      function (e) {\n        // Prepare data\n        var $list = $(this).parents('.su-gp-list')\n        var $preset = $(this).parent('span')\n        var id = $preset.data('id')\n        // Remove DOM element\n        $preset.remove()\n        // Show default text if last preset was removed\n        if ($list.find('span').length < 1) {\n          $list.find('b').show()\n        }\n        // Perform ajax request\n        self.removePreset(id)\n        // Prevent <span> action\n        e.stopPropagation()\n        // Prevent default action\n        e.preventDefault()\n      }\n    )\n  }\n\n  /**\n\t * Create new preset with specified name from current settings\n\t */\n  self.addPreset = function (id, name) {\n    // Prepare shortcode name and current settings\n    var shortcode = $('.su-generator-presets').data('shortcode')\n    var settings = self.getSettings()\n    // Perform AJAX request\n    $.ajax(\n      {\n        type: 'POST',\n        url: ajaxurl,\n        data: {\n          action: 'su_generator_add_preset',\n          id: id,\n          name: name,\n          shortcode: shortcode,\n          settings: settings,\n          nonce: $('#su_generator_presets_nonce').val()\n        }\n      }\n    )\n  }\n  /**\n\t * Remove preset by ID\n\t */\n  self.removePreset = function (id) {\n    // Get current shortcode name\n    var shortcode = $('.su-generator-presets').data('shortcode')\n    // Perform AJAX request\n    $.ajax(\n      {\n        type: 'POST',\n        url: ajaxurl,\n        data: {\n          action: 'su_generator_remove_preset',\n          id: id,\n          shortcode: shortcode,\n          nonce: $('#su_generator_presets_nonce').val()\n        }\n      }\n    )\n  }\n\n  self.parseSettings = function () {\n    var settingsSelector = $('#su-generator-option-skip').val() === 'on'\n      ? '#su-generator-settings .su-generator-attr-container:not(.su-generator-skip) .su-generator-attr'\n      : '#su-generator-settings .su-generator-attr-container .su-generator-attr'\n    // Prepare data\n    var query = $selected.val()\n    var prefix = $prefix.val()\n    var $settings = $(settingsSelector)\n    var $content = $('textarea#su-generator-content')\n    var content = $content.length ? $content.val() : 'false'\n    var result = new String('')\n    // Open shortcode\n    result += '[' + prefix + query\n    // Add shortcode attributes\n    $settings.each(\n      function () {\n        // Prepare field and value\n        var $this = $(this)\n        var value = ''\n        // Selects\n        if ($this.is('select')) {\n          value = $this.find('option:selected').val()\n        }\n        // Other fields\n        else {\n          value = $this.val()\n        }\n        // Check that value is not empty\n        if (value == null) {\n          value = ''\n        } else if (typeof value === 'array') {\n          value = value.join(',')\n        }\n        // Add attribute\n        if (value !== '') {\n          result += ' ' + $(this).attr('name') + '=\"' + $(this).val().toString().replace(/\"/gi, \"'\") + '\"'\n        }\n      }\n    )\n    // End of opening tag\n    result += ']'\n    // Wrap shortcode if content presented\n    if (content != 'false') {\n      result += content + '[/' + prefix + query + ']'\n    }\n    // Return result\n    return result\n  }\n\n  self.getSettings = function () {\n    // Prepare data\n    var query = $selected.val()\n    var $settings = $('#su-generator-settings .su-generator-attr')\n    var $content = $('textarea#su-generator-content')\n    var content = $content.length ? $content.val() : 'false'\n    var data = {}\n    // Add shortcode attributes\n    $settings.each(\n      function (i) {\n        // Prepare field and value\n        var $this = $(this)\n        var value = ''\n        var name = $this.attr('name')\n        // Selects\n        if ($this.is('select')) {\n          value = $this.find('option:selected').val()\n        }\n        // Other fields\n        else {\n          value = $this.val()\n        }\n        // Check that value is not empty\n        if (value == null) {\n          value = ''\n        }\n        // Save value\n        data[name] = value\n      }\n    )\n    // Add content\n    data.content = content.toString()\n    // Return data\n    return data\n  }\n\n  self.setSettings = function (data) {\n    // Prepare data\n    var $settings = $('#su-generator-settings .su-generator-attr')\n    var $content = $('#su-generator-content')\n    // Loop through settings\n    $settings.each(\n      function () {\n        var $this = $(this)\n        var name = $this.attr('name')\n        // Data contains value for this field\n        if (data.hasOwnProperty(name)) {\n          // Set new value\n          $this.val(data[name])\n          $this.trigger('keyup').trigger('change').trigger('blur')\n        }\n      }\n    )\n    // Set content\n    if (data.hasOwnProperty('content')) {\n      $content.val(data.content).trigger('keyup').trigger('change').trigger('blur')\n    }\n    // Update preview\n    self.updatePreview()\n  }\n\n  self.updatePreview = function (forced) {\n    // Prepare data\n    var $preview = $('#su-generator-preview')\n    var shortcode = self.parseSettings()\n    var previous = $result.text()\n    // Check forced mode\n    forced = forced || false\n    // Break if preview box is hidden (preview isn't enabled)\n    if (!$preview.is(':visible')) {\n      return\n    }\n    // Check shortcode is changed is this is not a forced mode\n    if (shortcode === previous && !forced) {\n      return\n    }\n    // Run timer to filter often calls\n    window.clearTimeout(self.state.preview.timer)\n    self.state.preview.timer = window.setTimeout(\n      function () {\n        self.state.preview.request = $.ajax(\n          {\n            type: 'POST',\n            url: ajaxurl,\n            cache: false,\n            data: {\n              action: 'su_generator_preview',\n              shortcode: shortcode\n            },\n            beforeSend: function () {\n              // Abort previous requests\n              if (self.state.preview.request) {\n                self.state.preview.request.abort()\n              }\n              // Show loading animation\n              $preview.addClass('su-generator-loading').html('')\n            },\n            success: function (data) {\n              // Hide loading animation and set new HTML\n              $preview.html(data).removeClass('su-generator-loading')\n            },\n            dataType: 'html'\n          }\n        )\n      },\n      300\n    )\n    // Save shortcode to div\n    $result.text(shortcode)\n  }\n\n  self.insert = function (context, args) {\n    if (typeof context !== 'string' || typeof args !== 'object') {\n      return\n    }\n\n    self.state.context = context\n    self.state.insertArgs = args\n\n    var preSelectedShortcode = args.shortcode || ''\n\n    var mfpOptions = {\n      type: 'inline',\n      alignTop: true,\n      closeOnBgClick: false,\n      mainClass: 'su-generator-mfp',\n      items: {\n        src: '#su-generator'\n      },\n      callbacks: {}\n    }\n\n    mfpOptions.callbacks.open = () => {\n      if (preSelectedShortcode) {\n        $choice.filter(`[data-shortcode=\"${preSelectedShortcode}\"]`).trigger('click')\n      } else {\n        window.setTimeout(() => $search.focus(), 200)\n      }\n\n      // self.el.body.addClass( 'su-mfp-shown' );\n\n      if (\n        typeof tinyMCE !== 'undefined' &&\n\t\t\t\ttinyMCE.activeEditor != null &&\n\t\t\t\ttinyMCE.activeEditor.hasOwnProperty('selection')\n      ) {\n        self.state.mceSelection = tinyMCE.activeEditor.selection.getContent({ format: 'text' })\n      }\n    }\n\n    mfpOptions.callbacks.close = () => {\n      $search.val('')\n      $settings.html('').hide()\n      $generator.removeClass('su-generator-narrow')\n      $filter.show()\n      $choices.show()\n      $choice.show()\n\n      self.state.mceSelection = ''\n\n      // self.el.body.removeClass( 'su-mfp-shown' );\n    }\n\n    $.magnificPopup.open(mfpOptions)\n  }\n\n  self.insertShortcode = function () {\n    var shortcode = self.parseSettings()\n\n    self.addPreset('last_used', SUGL10n.last_used)\n\n    $.magnificPopup.close()\n\n    $result.text(shortcode)\n\n    if (self.state.context === 'html') {\n      var HTMLEditor = document.getElementById(self.state.insertArgs.editorID)\n      self.insertAtCaret(HTMLEditor, shortcode)\n    }\n\n    if (self.state.context === 'classic') {\n      window.wp.media.editor.insert(shortcode)\n    }\n\n    if (self.state.context === 'block') {\n      var props = self.state.insertArgs.props\n\n      if (props.attributes.hasOwnProperty('content')) {\n        props.setAttributes({ content: props.attributes.content + shortcode })\n      } else if (props.name === 'core/shortcode') {\n        var originalText = props.attributes.hasOwnProperty('text')\n          ? props.attributes.text\n          : ''\n\n        props.setAttributes({ text: originalText + shortcode })\n      }\n    }\n  }\n\n  self.insertAtCaret = (field, text) => {\n    var start = field.selectionStart\n    field.value = field.value.substring(0, start) + text + field.value.substring(start)\n    field.focus()\n    field.selectionStart = start + text.length\n  }\n\n  return {\n    init: self.init,\n    insert: self.insert\n  }\n})(jQuery)\n\njQuery(document).ready(window.SUG.App.init)\n"]}