!function(){"use strict";var e={n:function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,{a:t}),t},d:function(r,t){for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}},r={};function t(){return(t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}e.d(r,{default:function(){return g}});var n=window.wp.element,o=window.wp.data,c=window.wp.deprecated,s=e.n(c),u=window.lodash,l=window.wp.compose,a=window.wp.i18n,i=window.wp.apiFetch,d=e.n(i),w=window.wp.url,p=window.wp.components,f=window.wp.blocks;function m({className:e}){return(0,n.createElement)(p.Placeholder,{className:e},(0,a.__)("Block rendered as empty."))}function E({response:e,className:r}){const t=(0,a.sprintf)(// translators: %s: error message describing the problem
(0,a.__)("Error loading block: %s"),e.errorMsg);return(0,n.createElement)(p.Placeholder,{className:r},t)}function h({children:e,showLoader:r}){return(0,n.createElement)("div",{style:{position:"relative"}},r&&(0,n.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"}},(0,n.createElement)(p.Spinner,null)),(0,n.createElement)("div",{style:{opacity:r?"0.3":1}},e))}function v(e){const{attributes:r,block:o,className:c,httpMethod:s="GET",urlQueryArgs:a,EmptyResponsePlaceholder:i=m,ErrorResponsePlaceholder:p=E,LoadingResponsePlaceholder:v=h}=e,y=(0,n.useRef)(!0),[b,g]=(0,n.useState)(!1),P=(0,n.useRef)(),[S,R]=(0,n.useState)(null),T=(0,l.usePrevious)(e),[_,O]=(0,n.useState)(!1);function M(){if(!y.current)return;O(!0);const e=r&&(0,f.__experimentalSanitizeBlockAttributes)(o,r),t="POST"===s,n=function(e,r=null,t={}){return(0,w.addQueryArgs)(`/wp/v2/block-renderer/${e}`,{context:"edit",...null!==r?{attributes:r}:{},...t})}(o,t?null:null!=e?e:null,a),c=t?{attributes:null!=e?e:null}:null,u=P.current=d()({path:n,data:c,method:t?"POST":"GET"}).then((e=>{y.current&&u===P.current&&e&&R(e.rendered)})).catch((e=>{y.current&&u===P.current&&R({error:!0,errorMsg:e.message})})).finally((()=>{y.current&&u===P.current&&O(!1)}));return u}const N=(0,l.useDebounce)(M,500);(0,n.useEffect)((()=>()=>{y.current=!1}),[]),(0,n.useEffect)((()=>{void 0===T?M():(0,u.isEqual)(T,e)||N()})),(0,n.useEffect)((()=>{if(!_)return;const e=setTimeout((()=>{g(!0)}),1e3);return()=>clearTimeout(e)}),[_]);const k=!!S,L=""===S,A=null==S?void 0:S.error;return L||!k?(0,n.createElement)(i,e):A?(0,n.createElement)(p,t({response:S},e)):_?(0,n.createElement)(v,t({},e,{showLoader:b}),k&&(0,n.createElement)(n.RawHTML,{className:c},S)):(0,n.createElement)(n.RawHTML,{className:c},S)}const y={},b=(0,o.withSelect)((e=>{const r=e("core/editor");if(r){const e=r.getCurrentPostId();if(e&&"number"==typeof e)return{currentPostId:e}}return y}))((({urlQueryArgs:e=y,currentPostId:r,...o})=>{const c=(0,n.useMemo)((()=>r?{post_id:r,...e}:e),[r,e]);return(0,n.createElement)(v,t({urlQueryArgs:c},o))}));window&&window.wp&&window.wp.components&&(window.wp.components.ServerSideRender=(0,n.forwardRef)(((e,r)=>(s()("wp.components.ServerSideRender",{since:"5.3",alternative:"wp.serverSideRender"}),(0,n.createElement)(b,t({},e,{ref:r}))))));var g=b;(window.wp=window.wp||{}).serverSideRender=r.default}();