{"version":3,"file":"./build/block-library/blocks/navigation-submenu/view.min.js","mappings":"MAAA,MAAMA,EAAkBC,IACvBA,EACEC,iBAAkB,0BAClBC,SAAWC,IACXA,EAAOC,aAAc,gBAAiB,aAInCC,EAAyBC,IAC9B,MAAMC,EAAeD,EAAME,OAAOC,QAAS,mBAG3C,GAAuB,SAFDF,EAAaG,aAAc,iBAGhDX,EAAeQ,EAAaE,QAAS,qCAC/B,CAEN,MAAME,EAAgBJ,EAAaE,QAClC,gCAEKG,EACLL,EAAaE,QAAS,4CACtBF,EAAaE,QAAS,mCACvBI,MAAMC,KAAMF,EAAWG,UAAWb,SAAWc,IACvCA,IAAUL,GACdZ,EAAeiB,MAIjBT,EAAaH,aAAc,gBAAiB,UAIvBa,SAAShB,iBAC/B,wCAGcC,SAAWgB,IACzBA,EAAOC,iBAAkB,QAASd,MAInCY,SAASE,iBAAkB,SAAS,SAAWb,GACrBW,SAAShB,iBACjC,wBAEgBC,SAAWkB,IACpBA,EAAMC,SAAUf,EAAME,SAC5BT,EAAeqB,SAKlBH,SAASE,iBAAkB,SAAS,SAAWb,GACxBW,SAAShB,iBAC9B,gCAEaC,SAAWkB,IACxB,GAAOA,EAAMC,SAAUf,EAAME,SAEtB,GAAmB,WAAdF,EAAMgB,IAAmB,CACpC,MAAMnB,EAASiB,EAAMG,cAAe,0BACpCxB,EAAeqB,GAEfjB,MAAAA,GAAAA,EAAQqB,cALRzB,EAAeqB,U","sources":["webpack://wp/./packages/block-library/build-module/navigation-submenu/@wordpress/block-library/src/navigation-submenu/view.js"],"sourcesContent":["const closeSubmenus = ( element ) => {\n\telement\n\t\t.querySelectorAll( '[aria-expanded=\"true\"]' )\n\t\t.forEach( ( toggle ) => {\n\t\t\ttoggle.setAttribute( 'aria-expanded', 'false' );\n\t\t} );\n};\n\nconst toggleSubmenuOnClick = ( event ) => {\n\tconst buttonToggle = event.target.closest( '[aria-expanded]' );\n\tconst isSubmenuOpen = buttonToggle.getAttribute( 'aria-expanded' );\n\n\tif ( isSubmenuOpen === 'true' ) {\n\t\tcloseSubmenus( buttonToggle.closest( '.wp-block-navigation-submenu' ) );\n\t} else {\n\t\t// Close all sibling submenus.\n\t\tconst parentElement = buttonToggle.closest(\n\t\t\t'.wp-block-navigation-submenu'\n\t\t);\n\t\tconst parentList =\n\t\t\tbuttonToggle.closest( '.wp-block-navigation__submenu-container' ) ||\n\t\t\tbuttonToggle.closest( '.wp-block-navigation__container' );\n\t\tArray.from( parentList.children ).forEach( ( child ) => {\n\t\t\tif ( child !== parentElement ) {\n\t\t\t\tcloseSubmenus( child );\n\t\t\t}\n\t\t} );\n\t\t// Open submenu.\n\t\tbuttonToggle.setAttribute( 'aria-expanded', 'true' );\n\t}\n};\n\nconst submenuButtons = document.querySelectorAll(\n\t'.wp-block-navigation-submenu__toggle'\n);\n\nsubmenuButtons.forEach( ( button ) => {\n\tbutton.addEventListener( 'click', toggleSubmenuOnClick );\n} );\n\n// Close on click outside.\ndocument.addEventListener( 'click', function ( event ) {\n\tconst navigationBlocks = document.querySelectorAll(\n\t\t'.wp-block-navigation'\n\t);\n\tnavigationBlocks.forEach( ( block ) => {\n\t\tif ( ! block.contains( event.target ) ) {\n\t\t\tcloseSubmenus( block );\n\t\t}\n\t} );\n} );\n// Close on focus outside or escape key.\ndocument.addEventListener( 'keyup', function ( event ) {\n\tconst submenuBlocks = document.querySelectorAll(\n\t\t'.wp-block-navigation-submenu'\n\t);\n\tsubmenuBlocks.forEach( ( block ) => {\n\t\tif ( ! block.contains( event.target ) ) {\n\t\t\tcloseSubmenus( block );\n\t\t} else if ( event.key === 'Escape' ) {\n\t\t\tconst toggle = block.querySelector( '[aria-expanded=\"true\"]' );\n\t\t\tcloseSubmenus( block );\n\t\t\t// Focus the submenu trigger so focus does not get trapped in the closed submenu.\n\t\t\ttoggle?.focus();\n\t\t}\n\t} );\n} );\n"],"names":["closeSubmenus","element","querySelectorAll","forEach","toggle","setAttribute","toggleSubmenuOnClick","event","buttonToggle","target","closest","getAttribute","parentElement","parentList","Array","from","children","child","document","button","addEventListener","block","contains","key","querySelector","focus"],"sourceRoot":""}