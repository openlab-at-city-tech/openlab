{"version":3,"file":"./build/block-library/blocks/query/view.min.js","mappings":"yBAAA,IAAI,EAA+BA,OAAW,GAAiB,cCW/D,MAAMC,EAAgBC,GACrBA,GACAA,aAAeF,OAAOG,mBACtBD,EAAIE,QACAF,EAAIG,QAAyB,UAAfH,EAAIG,SACtBH,EAAII,SAAWN,OAAOO,SAASD,QAUhCE,EAAAA,EAAAA,OAAO,aAAc,CACpBC,MAAO,CACN,kBAAIC,GACH,MAAkC,WAA3BC,EAAAA,EAAAA,cAAaC,SACrB,EACA,mBAAIC,GACH,MAAkC,YAA3BF,EAAAA,EAAAA,cAAaC,SACrB,GAEDE,QAAS,CACR,SAACC,CAAUC,GACV,MAAMC,GAAMN,EAAAA,EAAAA,eACN,IAAET,IAAQgB,EAAAA,EAAAA,cACVC,EAAajB,EAAIkB,QAAS,4BAA6BC,QAC3DC,qBAEF,GAAKrB,EAAaC,IAxBEc,MACL,IAAjBA,EAAMO,QACJP,EAAMQ,SACNR,EAAMS,SACNT,EAAMU,QACNV,EAAMW,UACNX,EAAMY,kBAkBqBC,CAAcb,KAAaG,EAAa,CAClEH,EAAMc,iBAEN,MAAMC,EAAK7B,EAAIkB,QAAS,2BAA4BC,QAClDW,eAGIC,EAAUC,YAAY,KAC3BjB,EAAIkB,QAAUlB,EAAImB,YAClBnB,EAAIL,UAAY,OAAO,GACrB,WAEGG,EAAAA,EAAAA,UAAUb,EAAIE,MAGpBiC,aAAcJ,GAKdhB,EAAIkB,QACHlB,EAAIqB,YACFrB,EAAIkB,UAAYlB,EAAIqB,WAAa,IAAW,IAE/CrB,EAAIL,UAAY,SAChBK,EAAIsB,IAAMrC,EAAIE,KAGd,MAAMoC,EAAe,0BAA0BT,qCAC/CU,SAASC,cAAeF,IAAeG,OACxC,CACD,EACA,SAACC,GACA,MAAM,IAAE1C,IAAQgB,EAAAA,EAAAA,cACVC,EAAajB,EAAIkB,QAAS,4BAA6BC,QAC3DC,qBACGrB,EAAaC,KAAWiB,UACtByB,EAAAA,EAAAA,UAAU1C,EAAIE,MAEtB,GAEDyC,UAAW,CACV,SAACD,GACA,MAAM,IAAEL,IAAQ5B,EAAAA,EAAAA,eACV,IAAET,IAAQgB,EAAAA,EAAAA,cACXqB,GAAOtC,EAAaC,WAClB0C,EAAAA,EAAAA,UAAU1C,EAAIE,MAEtB,I","sources":["webpack://wp/external window [\"wp\",\"interactivity\"]","webpack://wp/./packages/block-library/build-module/query/@wordpress/block-library/src/query/view.js"],"sourcesContent":["var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"interactivity\"];","/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tnavigate,\n\tprefetch,\n} from '@wordpress/interactivity';\n\nconst isValidLink = ( ref ) =>\n\tref &&\n\tref instanceof window.HTMLAnchorElement &&\n\tref.href &&\n\t( ! ref.target || ref.target === '_self' ) &&\n\tref.origin === window.location.origin;\n\nconst isValidEvent = ( event ) =>\n\tevent.button === 0 && // Left clicks only.\n\t! event.metaKey && // Open in new tab (Mac).\n\t! event.ctrlKey && // Open in new tab (Windows).\n\t! event.altKey && // Download.\n\t! event.shiftKey &&\n\t! event.defaultPrevented;\n\nstore( 'core/query', {\n\tstate: {\n\t\tget startAnimation() {\n\t\t\treturn getContext().animation === 'start';\n\t\t},\n\t\tget finishAnimation() {\n\t\t\treturn getContext().animation === 'finish';\n\t\t},\n\t},\n\tactions: {\n\t\t*navigate( event ) {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst isDisabled = ref.closest( '[data-wp-navigation-id]' )?.dataset\n\t\t\t\t.wpNavigationDisabled;\n\n\t\t\tif ( isValidLink( ref ) && isValidEvent( event ) && ! isDisabled ) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconst id = ref.closest( '[data-wp-navigation-id]' ).dataset\n\t\t\t\t\t.wpNavigationId;\n\n\t\t\t\t// Don't announce the navigation immediately, wait 400 ms.\n\t\t\t\tconst timeout = setTimeout( () => {\n\t\t\t\t\tctx.message = ctx.loadingText;\n\t\t\t\t\tctx.animation = 'start';\n\t\t\t\t}, 400 );\n\n\t\t\t\tyield navigate( ref.href );\n\n\t\t\t\t// Dismiss loading message if it hasn't been added yet.\n\t\t\t\tclearTimeout( timeout );\n\n\t\t\t\t// Announce that the page has been loaded. If the message is the\n\t\t\t\t// same, we use a no-break space similar to the @wordpress/a11y\n\t\t\t\t// package: https://github.com/WordPress/gutenberg/blob/c395242b8e6ee20f8b06c199e4fc2920d7018af1/packages/a11y/src/filter-message.js#L20-L26\n\t\t\t\tctx.message =\n\t\t\t\t\tctx.loadedText +\n\t\t\t\t\t( ctx.message === ctx.loadedText ? '\\u00A0' : '' );\n\n\t\t\t\tctx.animation = 'finish';\n\t\t\t\tctx.url = ref.href;\n\n\t\t\t\t// Focus the first anchor of the Query block.\n\t\t\t\tconst firstAnchor = `[data-wp-navigation-id=${ id }] .wp-block-post-template a[href]`;\n\t\t\t\tdocument.querySelector( firstAnchor )?.focus();\n\t\t\t}\n\t\t},\n\t\t*prefetch() {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst isDisabled = ref.closest( '[data-wp-navigation-id]' )?.dataset\n\t\t\t\t.wpNavigationDisabled;\n\t\t\tif ( isValidLink( ref ) && ! isDisabled ) {\n\t\t\t\tyield prefetch( ref.href );\n\t\t\t}\n\t\t},\n\t},\n\tcallbacks: {\n\t\t*prefetch() {\n\t\t\tconst { url } = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tif ( url && isValidLink( ref ) ) {\n\t\t\t\tyield prefetch( ref.href );\n\t\t\t}\n\t\t},\n\t},\n} );\n"],"names":["window","isValidLink","ref","HTMLAnchorElement","href","target","origin","location","store","state","startAnimation","getContext","animation","finishAnimation","actions","navigate","event","ctx","getElement","isDisabled","closest","dataset","wpNavigationDisabled","button","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","isValidEvent","preventDefault","id","wpNavigationId","timeout","setTimeout","message","loadingText","clearTimeout","loadedText","url","firstAnchor","document","querySelector","focus","prefetch","callbacks"],"sourceRoot":""}