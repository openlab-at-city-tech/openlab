{"version":3,"file":"./build/customize-widgets/index.min.js","mappings":"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","sources":["webpack://wp/./node_modules/fast-deep-equal/es6/index.js","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"blockLibrary\"]","webpack://wp/external window [\"wp\",\"widgets\"]","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/external window [\"wp\",\"editor\"]","webpack://wp/external window [\"wp\",\"preferences\"]","webpack://wp/external window [\"wp\",\"components\"]","webpack://wp/external window [\"wp\",\"i18n\"]","webpack://wp/external window [\"wp\",\"blockEditor\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"hooks\"]","webpack://wp/external window \"ReactJSXRuntime\"","../../packages/customize-widgets/src/components/error-boundary/index.js","webpack://wp/external window [\"wp\",\"coreData\"]","webpack://wp/external window [\"wp\",\"mediaUtils\"]","../../packages/customize-widgets/src/components/block-inspector-button/index.js","webpack://wp/./node_modules/clsx/dist/clsx.mjs","webpack://wp/external window [\"wp\",\"keycodes\"]","webpack://wp/external window [\"wp\",\"primitives\"]","../../packages/icons/src/library/undo.js","../../packages/icons/src/library/redo.js","../../packages/icons/src/library/plus.js","../../packages/icons/src/library/close-small.js","../../packages/customize-widgets/src/store/reducer.js","../../packages/customize-widgets/src/store/selectors.js","../../packages/customize-widgets/src/store/actions.js","../../packages/customize-widgets/src/store/constants.js","../../packages/customize-widgets/src/store/index.js","../../packages/customize-widgets/src/components/inserter/index.js","../../packages/icons/src/library/more-vertical.js","../../packages/icons/src/library/external.js","webpack://wp/external window [\"wp\",\"keyboardShortcuts\"]","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/config.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/shortcut.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/dynamic-shortcut.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/index.js","../../packages/customize-widgets/src/components/more-menu/index.js","../../packages/customize-widgets/src/components/header/index.js","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","../../packages/customize-widgets/src/utils.js","../../packages/customize-widgets/src/components/focus-control/index.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/customize-widgets/src/lock-unlock.js","../../packages/customize-widgets/src/components/sidebar-block-editor/sidebar-editor-provider.js","../../packages/customize-widgets/src/components/sidebar-block-editor/use-sidebar-block-editor.js","../../packages/customize-widgets/src/components/focus-control/use-blocks-focus-control.js","../../packages/customize-widgets/src/components/welcome-guide/index.js","../../packages/customize-widgets/src/components/keyboard-shortcuts/index.js","../../packages/customize-widgets/src/components/block-appender/index.js","../../packages/customize-widgets/src/components/sidebar-block-editor/index.js","../../packages/customize-widgets/src/components/inserter/use-inserter.js","../../packages/customize-widgets/src/components/sidebar-controls/index.js","../../packages/customize-widgets/src/components/customize-widgets/index.js","../../packages/customize-widgets/src/components/customize-widgets/use-clear-selected-block.js","../../packages/customize-widgets/src/controls/sidebar-section.js","../../packages/customize-widgets/src/components/sidebar-block-editor/sidebar-adapter.js","webpack://wp/external window [\"wp\",\"dom\"]","../../packages/customize-widgets/src/controls/sidebar-control.js","../../packages/customize-widgets/src/filters/move-to-sidebar.js","../../packages/customize-widgets/src/filters/replace-media-upload.js","../../packages/customize-widgets/src/filters/wide-widget-display.js","../../packages/customize-widgets/src/index.js","../../packages/customize-widgets/src/controls/inserter-outer-section.js","../../packages/customize-widgets/src/controls/inspector-section.js"],"sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockLibrary\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"widgets\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"preferences\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Warning } from '@wordpress/block-editor';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { doAction } from '@wordpress/hooks';\n\nfunction CopyButton( { text, children } ) {\n\tconst ref = useCopyToClipboard( text );\n\treturn (\n\t\t<Button size=\"compact\" variant=\"secondary\" ref={ ref }>\n\t\t\t{ children }\n\t\t</Button>\n\t);\n}\n\nexport default class ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tthis.setState( { error } );\n\n\t\tdoAction( 'editor.ErrorBoundary.errorLogged', error );\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\treturn (\n\t\t\t<Warning\n\t\t\t\tclassName=\"customize-widgets-error-boundary\"\n\t\t\t\tactions={ [\n\t\t\t\t\t<CopyButton key=\"copy-error\" text={ error.stack }>\n\t\t\t\t\t\t{ __( 'Copy Error' ) }\n\t\t\t\t\t</CopyButton>,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t{ __( 'The editor has encountered an unexpected error.' ) }\n\t\t\t</Warning>\n\t\t);\n\t}\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"mediaUtils\"];","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\nfunction BlockInspectorButton( { inspector, closeMenu, ...props } ) {\n\tconst selectedBlockClientId = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSelectedBlockClientId(),\n\t\t[]\n\t);\n\n\tconst selectedBlock = useMemo(\n\t\t() => document.getElementById( `block-${ selectedBlockClientId }` ),\n\t\t[ selectedBlockClientId ]\n\t);\n\n\treturn (\n\t\t<MenuItem\n\t\t\tonClick={ () => {\n\t\t\t\t// Open the inspector.\n\t\t\t\tinspector.open( {\n\t\t\t\t\treturnFocusWhenClose: selectedBlock,\n\t\t\t\t} );\n\t\t\t\t// Then close the dropdown menu.\n\t\t\t\tcloseMenu();\n\t\t\t} }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ __( 'Show more settings' ) }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockInspectorButton;\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keycodes\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst undo = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z\" />\n\t</SVG>\n);\n\nexport default undo;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst redo = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z\" />\n\t</SVG>\n);\n\nexport default redo;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst plus = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z\" />\n\t</SVG>\n);\n\nexport default plus;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst closeSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\" />\n\t</SVG>\n);\n\nexport default closeSmall;\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Reducer tracking whether the inserter is open.\n *\n * @param {boolean|Object} state\n * @param {Object}         action\n */\nfunction blockInserterPanel( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_IS_INSERTER_OPENED':\n\t\t\treturn action.value;\n\t}\n\treturn state;\n}\n\nexport default combineReducers( {\n\tblockInserterPanel,\n} );\n","const EMPTY_INSERTION_POINT = {\n\trootClientId: undefined,\n\tinsertionIndex: undefined,\n};\n\n/**\n * Returns true if the inserter is opened.\n *\n * @param {Object} state Global application state.\n *\n * @example\n * ```js\n * import { store as customizeWidgetsStore } from '@wordpress/customize-widgets';\n * import { __ } from '@wordpress/i18n';\n * import { useSelect } from '@wordpress/data';\n *\n * const ExampleComponent = () => {\n *    const { isInserterOpened } = useSelect(\n *        ( select ) => select( customizeWidgetsStore ),\n *        []\n *    );\n *\n *    return isInserterOpened()\n *        ? __( 'Inserter is open' )\n *        : __( 'Inserter is closed.' );\n * };\n * ```\n *\n * @return {boolean} Whether the inserter is opened.\n */\nexport function isInserterOpened( state ) {\n\treturn !! state.blockInserterPanel;\n}\n\n/**\n * Get the insertion point for the inserter.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} The root client ID and index to insert at.\n */\nexport function __experimentalGetInsertionPoint( state ) {\n\tif ( typeof state.blockInserterPanel === 'boolean' ) {\n\t\treturn EMPTY_INSERTION_POINT;\n\t}\n\n\treturn state.blockInserterPanel;\n}\n","/**\n * Returns an action object used to open/close the inserter.\n *\n * @param {boolean|Object} value                Whether the inserter should be\n *                                              opened (true) or closed (false).\n *                                              To specify an insertion point,\n *                                              use an object.\n * @param {string}         value.rootClientId   The root client ID to insert at.\n * @param {number}         value.insertionIndex The index to insert at.\n *\n * @example\n * ```js\n * import { useState } from 'react';\n * import { store as customizeWidgetsStore } from '@wordpress/customize-widgets';\n * import { __ } from '@wordpress/i18n';\n * import { useDispatch } from '@wordpress/data';\n * import { Button } from '@wordpress/components';\n *\n * const ExampleComponent = () => {\n *   const { setIsInserterOpened } = useDispatch( customizeWidgetsStore );\n *   const [ isOpen, setIsOpen ] = useState( false );\n *\n *    return (\n *        <Button\n *            onClick={ () => {\n *                setIsInserterOpened( ! isOpen );\n *                setIsOpen( ! isOpen );\n *            } }\n *        >\n *            { __( 'Open/close inserter' ) }\n *        </Button>\n *    );\n * };\n * ```\n *\n * @return {Object} Action object.\n */\nexport function setIsInserterOpened( value ) {\n\treturn {\n\t\ttype: 'SET_IS_INSERTER_OPENED',\n\t\tvalue,\n\t};\n}\n","/**\n * Module Constants\n */\nexport const STORE_NAME = 'core/customize-widgets';\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as actions from './actions';\nimport { STORE_NAME } from './constants';\n\n/**\n * Block editor data store configuration.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registering-a-store\n *\n * @type {Object}\n */\nconst storeConfig = {\n\treducer,\n\tselectors,\n\tactions,\n};\n\n/**\n * Store definition for the edit widgets namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n *\n * @type {Object}\n */\nexport const store = createReduxStore( STORE_NAME, storeConfig );\nregister( store );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLibrary as Library } from '@wordpress/block-editor';\nimport { Button } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { store as customizeWidgetsStore } from '../../store';\n\nfunction Inserter( { setIsOpened } ) {\n\tconst inserterTitleId = useInstanceId(\n\t\tInserter,\n\t\t'customize-widget-layout__inserter-panel-title'\n\t);\n\tconst insertionPoint = useSelect(\n\t\t( select ) =>\n\t\t\tselect( customizeWidgetsStore ).__experimentalGetInsertionPoint(),\n\t\t[]\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"customize-widgets-layout__inserter-panel\"\n\t\t\taria-labelledby={ inserterTitleId }\n\t\t>\n\t\t\t<div className=\"customize-widgets-layout__inserter-panel-header\">\n\t\t\t\t<h2\n\t\t\t\t\tid={ inserterTitleId }\n\t\t\t\t\tclassName=\"customize-widgets-layout__inserter-panel-header-title\"\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Add a block' ) }\n\t\t\t\t</h2>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\tonClick={ () => setIsOpened( false ) }\n\t\t\t\t\taria-label={ __( 'Close inserter' ) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"customize-widgets-layout__inserter-panel-content\">\n\t\t\t\t<Library\n\t\t\t\t\trootClientId={ insertionPoint.rootClientId }\n\t\t\t\t\t__experimentalInsertionIndex={\n\t\t\t\t\t\tinsertionPoint.insertionIndex\n\t\t\t\t\t}\n\t\t\t\t\tshowInserterHelpPanel\n\t\t\t\t\tonSelect={ () => setIsOpened( false ) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Inserter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst moreVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\" />\n\t</SVG>\n);\n\nexport default moreVertical;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst external = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\" />\n\t</SVG>\n);\n\nexport default external;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keyboardShortcuts\"];","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nexport const textFormattingShortcuts = [\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'b' },\n\t\tdescription: __( 'Make the selected text bold.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'i' },\n\t\tdescription: __( 'Make the selected text italic.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'k' },\n\t\tdescription: __( 'Convert the selected text into a link.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primaryShift', character: 'k' },\n\t\tdescription: __( 'Remove a link.' ),\n\t},\n\t{\n\t\tkeyCombination: { character: '[[' },\n\t\tdescription: __( 'Insert a link to a post or page.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'u' },\n\t\tdescription: __( 'Underline the selected text.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: 'd' },\n\t\tdescription: __( 'Strikethrough the selected text.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: 'x' },\n\t\tdescription: __( 'Make the selected text inline code.' ),\n\t},\n\t{\n\t\tkeyCombination: {\n\t\t\tmodifier: 'access',\n\t\t\tcharacter: '0',\n\t\t},\n\t\taliases: [\n\t\t\t{\n\t\t\t\tmodifier: 'access',\n\t\t\t\tcharacter: '7',\n\t\t\t},\n\t\t],\n\t\tdescription: __( 'Convert the current heading to a paragraph.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: '1-6' },\n\t\tdescription: __(\n\t\t\t'Convert the current paragraph or heading to a heading of level 1 to 6.'\n\t\t),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primaryShift', character: 'SPACE' },\n\t\tdescription: __( 'Add non breaking space.' ),\n\t},\n];\n","/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { displayShortcutList, shortcutAriaLabel } from '@wordpress/keycodes';\n\nfunction KeyCombination( { keyCombination, forceAriaLabel } ) {\n\tconst shortcut = keyCombination.modifier\n\t\t? displayShortcutList[ keyCombination.modifier ](\n\t\t\t\tkeyCombination.character\n\t\t  )\n\t\t: keyCombination.character;\n\tconst ariaLabel = keyCombination.modifier\n\t\t? shortcutAriaLabel[ keyCombination.modifier ](\n\t\t\t\tkeyCombination.character\n\t\t  )\n\t\t: keyCombination.character;\n\n\treturn (\n\t\t<kbd\n\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-key-combination\"\n\t\t\taria-label={ forceAriaLabel || ariaLabel }\n\t\t>\n\t\t\t{ ( Array.isArray( shortcut ) ? shortcut : [ shortcut ] ).map(\n\t\t\t\t( character, index ) => {\n\t\t\t\t\tif ( character === '+' ) {\n\t\t\t\t\t\treturn <Fragment key={ index }>{ character }</Fragment>;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-key\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ character }\n\t\t\t\t\t\t</kbd>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t) }\n\t\t</kbd>\n\t);\n}\n\nfunction Shortcut( { description, keyCombination, aliases = [], ariaLabel } ) {\n\treturn (\n\t\t<>\n\t\t\t<div className=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-description\">\n\t\t\t\t{ description }\n\t\t\t</div>\n\t\t\t<div className=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-term\">\n\t\t\t\t<KeyCombination\n\t\t\t\t\tkeyCombination={ keyCombination }\n\t\t\t\t\tforceAriaLabel={ ariaLabel }\n\t\t\t\t/>\n\t\t\t\t{ aliases.map( ( alias, index ) => (\n\t\t\t\t\t<KeyCombination\n\t\t\t\t\t\tkeyCombination={ alias }\n\t\t\t\t\t\tforceAriaLabel={ ariaLabel }\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default Shortcut;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\n\n/**\n * Internal dependencies\n */\nimport Shortcut from './shortcut';\n\nfunction DynamicShortcut( { name } ) {\n\tconst { keyCombination, description, aliases } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetShortcutKeyCombination,\n\t\t\t\tgetShortcutDescription,\n\t\t\t\tgetShortcutAliases,\n\t\t\t} = select( keyboardShortcutsStore );\n\n\t\t\treturn {\n\t\t\t\tkeyCombination: getShortcutKeyCombination( name ),\n\t\t\t\taliases: getShortcutAliases( name ),\n\t\t\t\tdescription: getShortcutDescription( name ),\n\t\t\t};\n\t\t},\n\t\t[ name ]\n\t);\n\n\tif ( ! keyCombination ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Shortcut\n\t\t\tkeyCombination={ keyCombination }\n\t\t\tdescription={ description }\n\t\t\taliases={ aliases }\n\t\t/>\n\t);\n}\n\nexport default DynamicShortcut;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Modal } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseShortcut,\n\tstore as keyboardShortcutsStore,\n} from '@wordpress/keyboard-shortcuts';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { textFormattingShortcuts } from './config';\nimport Shortcut from './shortcut';\nimport DynamicShortcut from './dynamic-shortcut';\n\nconst ShortcutList = ( { shortcuts } ) => (\n\t/*\n\t * Disable reason: The `list` ARIA role is redundant but\n\t * Safari+VoiceOver won't announce the list otherwise.\n\t */\n\t/* eslint-disable jsx-a11y/no-redundant-roles */\n\t<ul\n\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-list\"\n\t\trole=\"list\"\n\t>\n\t\t{ shortcuts.map( ( shortcut, index ) => (\n\t\t\t<li\n\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut\"\n\t\t\t\tkey={ index }\n\t\t\t>\n\t\t\t\t{ typeof shortcut === 'string' ? (\n\t\t\t\t\t<DynamicShortcut name={ shortcut } />\n\t\t\t\t) : (\n\t\t\t\t\t<Shortcut { ...shortcut } />\n\t\t\t\t) }\n\t\t\t</li>\n\t\t) ) }\n\t</ul>\n\t/* eslint-enable jsx-a11y/no-redundant-roles */\n);\n\nconst ShortcutSection = ( { title, shortcuts, className } ) => (\n\t<section\n\t\tclassName={ clsx(\n\t\t\t'customize-widgets-keyboard-shortcut-help-modal__section',\n\t\t\tclassName\n\t\t) }\n\t>\n\t\t{ !! title && (\n\t\t\t<h2 className=\"customize-widgets-keyboard-shortcut-help-modal__section-title\">\n\t\t\t\t{ title }\n\t\t\t</h2>\n\t\t) }\n\t\t<ShortcutList shortcuts={ shortcuts } />\n\t</section>\n);\n\nconst ShortcutCategorySection = ( {\n\ttitle,\n\tcategoryName,\n\tadditionalShortcuts = [],\n} ) => {\n\tconst categoryShortcuts = useSelect(\n\t\t( select ) => {\n\t\t\treturn select( keyboardShortcutsStore ).getCategoryShortcuts(\n\t\t\t\tcategoryName\n\t\t\t);\n\t\t},\n\t\t[ categoryName ]\n\t);\n\n\treturn (\n\t\t<ShortcutSection\n\t\t\ttitle={ title }\n\t\t\tshortcuts={ categoryShortcuts.concat( additionalShortcuts ) }\n\t\t/>\n\t);\n};\n\nexport default function KeyboardShortcutHelpModal( {\n\tisModalActive,\n\ttoggleModal,\n} ) {\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\n\tregisterShortcut( {\n\t\tname: 'core/customize-widgets/keyboard-shortcuts',\n\t\tcategory: 'main',\n\t\tdescription: __( 'Display these keyboard shortcuts.' ),\n\t\tkeyCombination: {\n\t\t\tmodifier: 'access',\n\t\t\tcharacter: 'h',\n\t\t},\n\t} );\n\n\tuseShortcut( 'core/customize-widgets/keyboard-shortcuts', toggleModal );\n\n\tif ( ! isModalActive ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal\"\n\t\t\ttitle={ __( 'Keyboard shortcuts' ) }\n\t\t\tonRequestClose={ toggleModal }\n\t\t>\n\t\t\t<ShortcutSection\n\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__main-shortcuts\"\n\t\t\t\tshortcuts={ [ 'core/customize-widgets/keyboard-shortcuts' ] }\n\t\t\t/>\n\t\t\t<ShortcutCategorySection\n\t\t\t\ttitle={ __( 'Global shortcuts' ) }\n\t\t\t\tcategoryName=\"global\"\n\t\t\t/>\n\n\t\t\t<ShortcutCategorySection\n\t\t\t\ttitle={ __( 'Selection shortcuts' ) }\n\t\t\t\tcategoryName=\"selection\"\n\t\t\t/>\n\n\t\t\t<ShortcutCategorySection\n\t\t\t\ttitle={ __( 'Block shortcuts' ) }\n\t\t\t\tcategoryName=\"block\"\n\t\t\t\tadditionalShortcuts={ [\n\t\t\t\t\t{\n\t\t\t\t\t\tkeyCombination: { character: '/' },\n\t\t\t\t\t\tdescription: __(\n\t\t\t\t\t\t\t'Change the block type after adding a new paragraph.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t/* translators: The forward-slash character. e.g. '/'. */\n\t\t\t\t\t\tariaLabel: __( 'Forward-slash' ),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t\t<ShortcutSection\n\t\t\t\ttitle={ __( 'Text formatting' ) }\n\t\t\t\tshortcuts={ textFormattingShortcuts }\n\t\t\t/>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tToolbarDropdownMenu,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { external, moreVertical } from '@wordpress/icons';\nimport { displayShortcut } from '@wordpress/keycodes';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { PreferenceToggleMenuItem } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport KeyboardShortcutHelpModal from '../keyboard-shortcut-help-modal';\n\nexport default function MoreMenu() {\n\tconst [\n\t\tisKeyboardShortcutsModalActive,\n\t\tsetIsKeyboardShortcutsModalVisible,\n\t] = useState( false );\n\tconst toggleKeyboardShortcutsModal = () =>\n\t\tsetIsKeyboardShortcutsModalVisible( ! isKeyboardShortcutsModalActive );\n\n\tuseShortcut(\n\t\t'core/customize-widgets/keyboard-shortcuts',\n\t\ttoggleKeyboardShortcutsModal\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarDropdownMenu\n\t\t\t\ticon={ moreVertical }\n\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'bottom-end',\n\t\t\t\t\tclassName: 'more-menu-dropdown__content',\n\t\t\t\t} }\n\t\t\t\ttoggleProps={ {\n\t\t\t\t\ttooltipPosition: 'bottom',\n\t\t\t\t\tsize: 'compact',\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup label={ _x( 'View', 'noun' ) }>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"fixedToolbar\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Top toolbar' ) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Access all block and document tools in a single place'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar activated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar deactivated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Tools' ) }>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetIsKeyboardShortcutsModalVisible( true );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tshortcut={ displayShortcut.access( 'h' ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Keyboard shortcuts' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"welcomeGuide\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Welcome Guide' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/block-based-widgets-editor/'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Help' ) }\n\t\t\t\t\t\t\t\t<VisuallyHidden as=\"span\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t/* translators: accessibility text */\n\t\t\t\t\t\t\t\t\t\t__( '(opens in a new tab)' )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Preferences' ) }>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"keepCaretInsideBlock\"\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Aids screen readers by stopping text caret from leaving blocks.'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block activated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block deactivated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</ToolbarDropdownMenu>\n\t\t\t<KeyboardShortcutHelpModal\n\t\t\t\tisModalActive={ isKeyboardShortcutsModalActive }\n\t\t\t\ttoggleModal={ toggleKeyboardShortcutsModal }\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { ToolbarButton } from '@wordpress/components';\nimport { NavigableToolbar } from '@wordpress/block-editor';\nimport { createPortal, useEffect, useState } from '@wordpress/element';\nimport { displayShortcut, isAppleOS } from '@wordpress/keycodes';\nimport { __, _x, isRTL } from '@wordpress/i18n';\nimport { plus, undo as undoIcon, redo as redoIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport MoreMenu from '../more-menu';\n\nfunction Header( {\n\tsidebar,\n\tinserter,\n\tisInserterOpened,\n\tsetIsInserterOpened,\n\tisFixedToolbarActive,\n} ) {\n\tconst [ [ hasUndo, hasRedo ], setUndoRedo ] = useState( [\n\t\tsidebar.hasUndo(),\n\t\tsidebar.hasRedo(),\n\t] );\n\n\tconst shortcut = isAppleOS()\n\t\t? displayShortcut.primaryShift( 'z' )\n\t\t: displayShortcut.primary( 'y' );\n\n\tuseEffect( () => {\n\t\treturn sidebar.subscribeHistory( () => {\n\t\t\tsetUndoRedo( [ sidebar.hasUndo(), sidebar.hasRedo() ] );\n\t\t} );\n\t}, [ sidebar ] );\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={ clsx( 'customize-widgets-header', {\n\t\t\t\t\t'is-fixed-toolbar-active': isFixedToolbarActive,\n\t\t\t\t} ) }\n\t\t\t>\n\t\t\t\t<NavigableToolbar\n\t\t\t\t\tclassName=\"customize-widgets-header-toolbar\"\n\t\t\t\t\taria-label={ __( 'Document tools' ) }\n\t\t\t\t>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon={ ! isRTL() ? undoIcon : redoIcon }\n\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\tlabel={ __( 'Undo' ) }\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'z' ) }\n\t\t\t\t\t\tdisabled={ ! hasUndo }\n\t\t\t\t\t\tonClick={ sidebar.undo }\n\t\t\t\t\t\tclassName=\"customize-widgets-editor-history-button undo-button\"\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon={ ! isRTL() ? redoIcon : undoIcon }\n\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\tlabel={ __( 'Redo' ) }\n\t\t\t\t\t\tshortcut={ shortcut }\n\t\t\t\t\t\tdisabled={ ! hasRedo }\n\t\t\t\t\t\tonClick={ sidebar.redo }\n\t\t\t\t\t\tclassName=\"customize-widgets-editor-history-button redo-button\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName=\"customize-widgets-header-toolbar__inserter-toggle\"\n\t\t\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t'Add block',\n\t\t\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tsetIsInserterOpened( ( isOpen ) => ! isOpen );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<MoreMenu />\n\t\t\t\t</NavigableToolbar>\n\t\t\t</div>\n\n\t\t\t{ createPortal(\n\t\t\t\t<Inserter setIsOpened={ setIsInserterOpened } />,\n\t\t\t\tinserter.contentContainer[ 0 ]\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default Header;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","// @ts-check\n/**\n * WordPress dependencies\n */\nimport { serialize, parse, createBlock } from '@wordpress/blocks';\nimport { addWidgetIdToBlock } from '@wordpress/widgets';\n\n/**\n * Convert settingId to widgetId.\n *\n * @param {string} settingId The setting id.\n * @return {string} The widget id.\n */\nexport function settingIdToWidgetId( settingId ) {\n\tconst matches = settingId.match( /^widget_(.+)(?:\\[(\\d+)\\])$/ );\n\n\tif ( matches ) {\n\t\tconst idBase = matches[ 1 ];\n\t\tconst number = parseInt( matches[ 2 ], 10 );\n\n\t\treturn `${ idBase }-${ number }`;\n\t}\n\n\treturn settingId;\n}\n\n/**\n * Transform a block to a customizable widget.\n *\n * @param {WPBlock} block          The block to be transformed from.\n * @param {Object}  existingWidget The widget to be extended from.\n * @return {Object} The transformed widget.\n */\nexport function blockToWidget( block, existingWidget = null ) {\n\tlet widget;\n\n\tconst isValidLegacyWidgetBlock =\n\t\tblock.name === 'core/legacy-widget' &&\n\t\t( block.attributes.id || block.attributes.instance );\n\n\tif ( isValidLegacyWidgetBlock ) {\n\t\tif ( block.attributes.id ) {\n\t\t\t// Widget that does not extend WP_Widget.\n\t\t\twidget = {\n\t\t\t\tid: block.attributes.id,\n\t\t\t};\n\t\t} else {\n\t\t\tconst { encoded, hash, raw, ...rest } = block.attributes.instance;\n\n\t\t\t// Widget that extends WP_Widget.\n\t\t\twidget = {\n\t\t\t\tidBase: block.attributes.idBase,\n\t\t\t\tinstance: {\n\t\t\t\t\t...existingWidget?.instance,\n\t\t\t\t\t// Required only for the customizer.\n\t\t\t\t\tis_widget_customizer_js_value: true,\n\t\t\t\t\tencoded_serialized_instance: encoded,\n\t\t\t\t\tinstance_hash_key: hash,\n\t\t\t\t\traw_instance: raw,\n\t\t\t\t\t...rest,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t} else {\n\t\tconst instance = {\n\t\t\tcontent: serialize( block ),\n\t\t};\n\t\twidget = {\n\t\t\tidBase: 'block',\n\t\t\twidgetClass: 'WP_Widget_Block',\n\t\t\tinstance: {\n\t\t\t\traw_instance: instance,\n\t\t\t},\n\t\t};\n\t}\n\n\tconst { form, rendered, ...restExistingWidget } = existingWidget || {};\n\n\treturn {\n\t\t...restExistingWidget,\n\t\t...widget,\n\t};\n}\n\n/**\n * Transform a widget to a block.\n *\n * @param {Object} widget          The widget to be transformed from.\n * @param {string} widget.id       The widget id.\n * @param {string} widget.idBase   The id base of the widget.\n * @param {number} widget.number   The number/index of the widget.\n * @param {Object} widget.instance The instance of the widget.\n * @return {WPBlock} The transformed block.\n */\nexport function widgetToBlock( { id, idBase, number, instance } ) {\n\tlet block;\n\n\tconst {\n\t\tencoded_serialized_instance: encoded,\n\t\tinstance_hash_key: hash,\n\t\traw_instance: raw,\n\t\t...rest\n\t} = instance;\n\n\tif ( idBase === 'block' ) {\n\t\tconst parsedBlocks = parse( raw.content ?? '', {\n\t\t\t__unstableSkipAutop: true,\n\t\t} );\n\t\tblock = parsedBlocks.length\n\t\t\t? parsedBlocks[ 0 ]\n\t\t\t: createBlock( 'core/paragraph', {} );\n\t} else if ( number ) {\n\t\t// Widget that extends WP_Widget.\n\t\tblock = createBlock( 'core/legacy-widget', {\n\t\t\tidBase,\n\t\t\tinstance: {\n\t\t\t\tencoded,\n\t\t\t\thash,\n\t\t\t\traw,\n\t\t\t\t...rest,\n\t\t\t},\n\t\t} );\n\t} else {\n\t\t// Widget that does not extend WP_Widget.\n\t\tblock = createBlock( 'core/legacy-widget', {\n\t\t\tid,\n\t\t} );\n\t}\n\n\treturn addWidgetIdToBlock( block, id );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcreateContext,\n\tuseState,\n\tuseEffect,\n\tuseContext,\n\tuseCallback,\n\tuseMemo,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { settingIdToWidgetId } from '../../utils';\n\nconst FocusControlContext = createContext();\n\nexport default function FocusControl( { api, sidebarControls, children } ) {\n\tconst [ focusedWidgetIdRef, setFocusedWidgetIdRef ] = useState( {\n\t\tcurrent: null,\n\t} );\n\n\tconst focusWidget = useCallback(\n\t\t( widgetId ) => {\n\t\t\tfor ( const sidebarControl of sidebarControls ) {\n\t\t\t\tconst widgets = sidebarControl.setting.get();\n\n\t\t\t\tif ( widgets.includes( widgetId ) ) {\n\t\t\t\t\tsidebarControl.sectionInstance.expand( {\n\t\t\t\t\t\t// Schedule it after the complete callback so that\n\t\t\t\t\t\t// it won't be overridden by the \"Back\" button focus.\n\t\t\t\t\t\tcompleteCallback() {\n\t\t\t\t\t\t\t// Create a \"ref-like\" object every time to ensure\n\t\t\t\t\t\t\t// the same widget id can also triggers the focus control.\n\t\t\t\t\t\t\tsetFocusedWidgetIdRef( { current: widgetId } );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[ sidebarControls ]\n\t);\n\n\tuseEffect( () => {\n\t\tfunction handleFocus( settingId ) {\n\t\t\tconst widgetId = settingIdToWidgetId( settingId );\n\n\t\t\tfocusWidget( widgetId );\n\t\t}\n\n\t\tlet previewBound = false;\n\n\t\tfunction handleReady() {\n\t\t\tapi.previewer.preview.bind(\n\t\t\t\t'focus-control-for-setting',\n\t\t\t\thandleFocus\n\t\t\t);\n\t\t\tpreviewBound = true;\n\t\t}\n\n\t\tapi.previewer.bind( 'ready', handleReady );\n\n\t\treturn () => {\n\t\t\tapi.previewer.unbind( 'ready', handleReady );\n\t\t\tif ( previewBound ) {\n\t\t\t\tapi.previewer.preview.unbind(\n\t\t\t\t\t'focus-control-for-setting',\n\t\t\t\t\thandleFocus\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t}, [ api, focusWidget ] );\n\n\tconst context = useMemo(\n\t\t() => [ focusedWidgetIdRef, focusWidget ],\n\t\t[ focusedWidgetIdRef, focusWidget ]\n\t);\n\n\treturn (\n\t\t<FocusControlContext.Provider value={ context }>\n\t\t\t{ children }\n\t\t</FocusControlContext.Provider>\n\t);\n}\n\nexport const useFocusControl = () => useContext( FocusControlContext );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.',\n\t\t'@wordpress/customize-widgets'\n\t);\n","/**\n * WordPress dependencies\n */\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport useSidebarBlockEditor from './use-sidebar-block-editor';\nimport useBlocksFocusControl from '../focus-control/use-blocks-focus-control';\n\nimport { unlock } from '../../lock-unlock';\n\nconst { ExperimentalBlockEditorProvider } = unlock( blockEditorPrivateApis );\n\nexport default function SidebarEditorProvider( {\n\tsidebar,\n\tsettings,\n\tchildren,\n} ) {\n\tconst [ blocks, onInput, onChange ] = useSidebarBlockEditor( sidebar );\n\n\tuseBlocksFocusControl( blocks );\n\n\treturn (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ blocks }\n\t\t\tonInput={ onInput }\n\t\t\tonChange={ onChange }\n\t\t\tsettings={ settings }\n\t\t\tuseSubRegistry={ false }\n\t\t>\n\t\t\t{ children }\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n}\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\nimport { getWidgetIdFromBlock, addWidgetIdToBlock } from '@wordpress/widgets';\n\n/**\n * Internal dependencies\n */\nimport { blockToWidget, widgetToBlock } from '../../utils';\n\nfunction widgetsToBlocks( widgets ) {\n\treturn widgets.map( ( widget ) => widgetToBlock( widget ) );\n}\n\nexport default function useSidebarBlockEditor( sidebar ) {\n\tconst [ blocks, setBlocks ] = useState( () =>\n\t\twidgetsToBlocks( sidebar.getWidgets() )\n\t);\n\n\tuseEffect( () => {\n\t\treturn sidebar.subscribe( ( prevWidgets, nextWidgets ) => {\n\t\t\tsetBlocks( ( prevBlocks ) => {\n\t\t\t\tconst prevWidgetsMap = new Map(\n\t\t\t\t\tprevWidgets.map( ( widget ) => [ widget.id, widget ] )\n\t\t\t\t);\n\t\t\t\tconst prevBlocksMap = new Map(\n\t\t\t\t\tprevBlocks.map( ( block ) => [\n\t\t\t\t\t\tgetWidgetIdFromBlock( block ),\n\t\t\t\t\t\tblock,\n\t\t\t\t\t] )\n\t\t\t\t);\n\n\t\t\t\tconst nextBlocks = nextWidgets.map( ( nextWidget ) => {\n\t\t\t\t\tconst prevWidget = prevWidgetsMap.get( nextWidget.id );\n\n\t\t\t\t\t// Bail out updates.\n\t\t\t\t\tif ( prevWidget && prevWidget === nextWidget ) {\n\t\t\t\t\t\treturn prevBlocksMap.get( nextWidget.id );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn widgetToBlock( nextWidget );\n\t\t\t\t} );\n\n\t\t\t\t// Bail out updates.\n\t\t\t\tif ( isShallowEqual( prevBlocks, nextBlocks ) ) {\n\t\t\t\t\treturn prevBlocks;\n\t\t\t\t}\n\n\t\t\t\treturn nextBlocks;\n\t\t\t} );\n\t\t} );\n\t}, [ sidebar ] );\n\n\tconst onChangeBlocks = useCallback(\n\t\t( nextBlocks ) => {\n\t\t\tsetBlocks( ( prevBlocks ) => {\n\t\t\t\tif ( isShallowEqual( prevBlocks, nextBlocks ) ) {\n\t\t\t\t\treturn prevBlocks;\n\t\t\t\t}\n\n\t\t\t\tconst prevBlocksMap = new Map(\n\t\t\t\t\tprevBlocks.map( ( block ) => [\n\t\t\t\t\t\tgetWidgetIdFromBlock( block ),\n\t\t\t\t\t\tblock,\n\t\t\t\t\t] )\n\t\t\t\t);\n\n\t\t\t\tconst nextWidgets = nextBlocks.map( ( nextBlock ) => {\n\t\t\t\t\tconst widgetId = getWidgetIdFromBlock( nextBlock );\n\n\t\t\t\t\t// Update existing widgets.\n\t\t\t\t\tif ( widgetId && prevBlocksMap.has( widgetId ) ) {\n\t\t\t\t\t\tconst prevBlock = prevBlocksMap.get( widgetId );\n\t\t\t\t\t\tconst prevWidget = sidebar.getWidget( widgetId );\n\n\t\t\t\t\t\t// Bail out updates by returning the previous widgets.\n\t\t\t\t\t\t// Deep equality is necessary until the block editor's internals changes.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tfastDeepEqual( nextBlock, prevBlock ) &&\n\t\t\t\t\t\t\tprevWidget\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn prevWidget;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn blockToWidget( nextBlock, prevWidget );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add a new widget.\n\t\t\t\t\treturn blockToWidget( nextBlock );\n\t\t\t\t} );\n\n\t\t\t\t// Bail out updates if the updated widgets are the same.\n\t\t\t\tif ( isShallowEqual( sidebar.getWidgets(), nextWidgets ) ) {\n\t\t\t\t\treturn prevBlocks;\n\t\t\t\t}\n\n\t\t\t\tconst addedWidgetIds = sidebar.setWidgets( nextWidgets );\n\n\t\t\t\treturn nextBlocks.reduce(\n\t\t\t\t\t( updatedNextBlocks, nextBlock, index ) => {\n\t\t\t\t\t\tconst addedWidgetId = addedWidgetIds[ index ];\n\n\t\t\t\t\t\tif ( addedWidgetId !== null ) {\n\t\t\t\t\t\t\t// Only create a new instance if necessary to prevent\n\t\t\t\t\t\t\t// the whole editor from re-rendering on every edit.\n\t\t\t\t\t\t\tif ( updatedNextBlocks === nextBlocks ) {\n\t\t\t\t\t\t\t\tupdatedNextBlocks = nextBlocks.slice();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tupdatedNextBlocks[ index ] = addWidgetIdToBlock(\n\t\t\t\t\t\t\t\tnextBlock,\n\t\t\t\t\t\t\t\taddedWidgetId\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn updatedNextBlocks;\n\t\t\t\t\t},\n\t\t\t\t\tnextBlocks\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t[ sidebar ]\n\t);\n\n\treturn [ blocks, onChangeBlocks, onChangeBlocks ];\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { getWidgetIdFromBlock } from '@wordpress/widgets';\n\n/**\n * Internal dependencies\n */\nimport { useFocusControl } from '.';\n\nexport default function useBlocksFocusControl( blocks ) {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst [ focusedWidgetIdRef ] = useFocusControl();\n\n\tconst blocksRef = useRef( blocks );\n\n\tuseEffect( () => {\n\t\tblocksRef.current = blocks;\n\t}, [ blocks ] );\n\n\tuseEffect( () => {\n\t\tif ( focusedWidgetIdRef.current ) {\n\t\t\tconst focusedBlock = blocksRef.current.find(\n\t\t\t\t( block ) =>\n\t\t\t\t\tgetWidgetIdFromBlock( block ) === focusedWidgetIdRef.current\n\t\t\t);\n\n\t\t\tif ( focusedBlock ) {\n\t\t\t\tselectBlock( focusedBlock.clientId );\n\t\t\t\t// If the block is already being selected, the DOM node won't\n\t\t\t\t// get focused again automatically.\n\t\t\t\t// We select the DOM and focus it manually here.\n\t\t\t\tconst blockNode = document.querySelector(\n\t\t\t\t\t`[data-block=\"${ focusedBlock.clientId }\"]`\n\t\t\t\t);\n\t\t\t\tblockNode?.focus();\n\t\t\t}\n\t\t}\n\t}, [ focusedWidgetIdRef, selectBlock ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, ExternalLink } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\nexport default function WelcomeGuide( { sidebar } ) {\n\tconst { toggle } = useDispatch( preferencesStore );\n\n\tconst isEntirelyBlockWidgets = sidebar\n\t\t.getWidgets()\n\t\t.every( ( widget ) => widget.id.startsWith( 'block-' ) );\n\n\treturn (\n\t\t<div className=\"customize-widgets-welcome-guide\">\n\t\t\t<div className=\"customize-widgets-welcome-guide__image__wrapper\">\n\t\t\t\t<picture>\n\t\t\t\t\t<source\n\t\t\t\t\t\tsrcSet=\"https://s.w.org/images/block-editor/welcome-editor.svg\"\n\t\t\t\t\t\tmedia=\"(prefers-reduced-motion: reduce)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"customize-widgets-welcome-guide__image\"\n\t\t\t\t\t\tsrc=\"https://s.w.org/images/block-editor/welcome-editor.gif\"\n\t\t\t\t\t\twidth=\"312\"\n\t\t\t\t\t\theight=\"240\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</picture>\n\t\t\t</div>\n\t\t\t<h1 className=\"customize-widgets-welcome-guide__heading\">\n\t\t\t\t{ __( 'Welcome to block Widgets' ) }\n\t\t\t</h1>\n\t\t\t<p className=\"customize-widgets-welcome-guide__text\">\n\t\t\t\t{ isEntirelyBlockWidgets\n\t\t\t\t\t? __(\n\t\t\t\t\t\t\t'Your theme provides different block areas for you to add and edit content.Try adding a search bar, social icons, or other types of blocks here and see how theyll look on your site.'\n\t\t\t\t\t  )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'You can now add any block to your sites widget areas. Dont worry, all of your favorite widgets still work flawlessly.'\n\t\t\t\t\t  ) }\n\t\t\t</p>\n\t\t\t<Button\n\t\t\t\tsize=\"compact\"\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tonClick={ () =>\n\t\t\t\t\ttoggle( 'core/customize-widgets', 'welcomeGuide' )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ __( 'Got it' ) }\n\t\t\t</Button>\n\t\t\t<hr className=\"customize-widgets-welcome-guide__separator\" />\n\t\t\t{ ! isEntirelyBlockWidgets && (\n\t\t\t\t<p className=\"customize-widgets-welcome-guide__more-info\">\n\t\t\t\t\t{ __( 'Want to stick with the old widgets?' ) }\n\t\t\t\t\t<br />\n\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t'https://wordpress.org/plugins/classic-widgets/'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Get the Classic Widgets plugin.' ) }\n\t\t\t\t\t</ExternalLink>\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t<p className=\"customize-widgets-welcome-guide__more-info\">\n\t\t\t\t{ __( 'New to the block editor?' ) }\n\t\t\t\t<br />\n\t\t\t\t<ExternalLink\n\t\t\t\t\thref={ __(\n\t\t\t\t\t\t'https://wordpress.org/documentation/article/wordpress-block-editor/'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ __( \"Here's a detailed guide.\" ) }\n\t\t\t\t</ExternalLink>\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport {\n\tuseShortcut,\n\tstore as keyboardShortcutsStore,\n} from '@wordpress/keyboard-shortcuts';\nimport { isAppleOS } from '@wordpress/keycodes';\nimport { useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\nfunction KeyboardShortcuts( { undo, redo, save } ) {\n\tuseShortcut( 'core/customize-widgets/undo', ( event ) => {\n\t\tundo();\n\t\tevent.preventDefault();\n\t} );\n\n\tuseShortcut( 'core/customize-widgets/redo', ( event ) => {\n\t\tredo();\n\t\tevent.preventDefault();\n\t} );\n\n\tuseShortcut( 'core/customize-widgets/save', ( event ) => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t} );\n\n\treturn null;\n}\n\nfunction KeyboardShortcutsRegister() {\n\tconst { registerShortcut, unregisterShortcut } = useDispatch(\n\t\tkeyboardShortcutsStore\n\t);\n\n\tuseEffect( () => {\n\t\tregisterShortcut( {\n\t\t\tname: 'core/customize-widgets/undo',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Undo your last changes.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/customize-widgets/redo',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Redo your last undo.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t\t// Disable on Apple OS because it conflicts with the browser's\n\t\t\t// history shortcut. It's a fine alias for both Windows and Linux.\n\t\t\t// Since there's no conflict for Ctrl+Shift+Z on both Windows and\n\t\t\t// Linux, we keep it as the default for consistency.\n\t\t\taliases: isAppleOS()\n\t\t\t\t? []\n\t\t\t\t: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodifier: 'primary',\n\t\t\t\t\t\t\tcharacter: 'y',\n\t\t\t\t\t\t},\n\t\t\t\t  ],\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/customize-widgets/save',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Save your changes.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 's',\n\t\t\t},\n\t\t} );\n\n\t\treturn () => {\n\t\t\tunregisterShortcut( 'core/customize-widgets/undo' );\n\t\t\tunregisterShortcut( 'core/customize-widgets/redo' );\n\t\t\tunregisterShortcut( 'core/customize-widgets/save' );\n\t\t};\n\t}, [ registerShortcut ] );\n\n\treturn null;\n}\n\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\nexport default KeyboardShortcuts;\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport {\n\tButtonBlockAppender,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\n\nexport default function BlockAppender( props ) {\n\tconst ref = useRef();\n\tconst isBlocksListEmpty = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlockCount() === 0\n\t);\n\n\t// Move the focus to the block appender to prevent focus from\n\t// being lost when emptying the widget area.\n\tuseEffect( () => {\n\t\tif ( isBlocksListEmpty && ref.current ) {\n\t\t\tconst { ownerDocument } = ref.current;\n\n\t\t\tif (\n\t\t\t\t! ownerDocument.activeElement ||\n\t\t\t\townerDocument.activeElement === ownerDocument.body\n\t\t\t) {\n\t\t\t\tref.current.focus();\n\t\t\t}\n\t\t}\n\t}, [ isBlocksListEmpty ] );\n\n\treturn <ButtonBlockAppender { ...props } ref={ ref } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\nimport { useMemo, createPortal } from '@wordpress/element';\nimport {\n\tBlockList,\n\tBlockToolbar,\n\tBlockInspector,\n\tprivateApis as blockEditorPrivateApis,\n\t__unstableBlockSettingsMenuFirstItem,\n} from '@wordpress/block-editor';\nimport { uploadMedia } from '@wordpress/media-utils';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { privateApis as blockLibraryPrivateApis } from '@wordpress/block-library';\n\n/**\n * Internal dependencies\n */\nimport BlockInspectorButton from '../block-inspector-button';\nimport Header from '../header';\nimport useInserter from '../inserter/use-inserter';\nimport SidebarEditorProvider from './sidebar-editor-provider';\nimport WelcomeGuide from '../welcome-guide';\nimport KeyboardShortcuts from '../keyboard-shortcuts';\nimport BlockAppender from '../block-appender';\nimport { unlock } from '../../lock-unlock';\n\nconst { ExperimentalBlockCanvas: BlockCanvas } = unlock(\n\tblockEditorPrivateApis\n);\n\nconst { BlockKeyboardShortcuts } = unlock( blockLibraryPrivateApis );\n\nexport default function SidebarBlockEditor( {\n\tblockEditorSettings,\n\tsidebar,\n\tinserter,\n\tinspector,\n} ) {\n\tconst [ isInserterOpened, setIsInserterOpened ] = useInserter( inserter );\n\tconst isMediumViewport = useViewportMatch( 'small' );\n\tconst {\n\t\thasUploadPermissions,\n\t\tisFixedToolbarActive,\n\t\tkeepCaretInsideBlock,\n\t\tisWelcomeGuideActive,\n\t} = useSelect( ( select ) => {\n\t\tconst { get } = select( preferencesStore );\n\t\treturn {\n\t\t\thasUploadPermissions:\n\t\t\t\tselect( coreStore ).canUser( 'create', {\n\t\t\t\t\tkind: 'root',\n\t\t\t\t\tname: 'media',\n\t\t\t\t} ) ?? true,\n\t\t\tisFixedToolbarActive: !! get(\n\t\t\t\t'core/customize-widgets',\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\tkeepCaretInsideBlock: !! get(\n\t\t\t\t'core/customize-widgets',\n\t\t\t\t'keepCaretInsideBlock'\n\t\t\t),\n\t\t\tisWelcomeGuideActive: !! get(\n\t\t\t\t'core/customize-widgets',\n\t\t\t\t'welcomeGuide'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst settings = useMemo( () => {\n\t\tlet mediaUploadBlockEditor;\n\t\tif ( hasUploadPermissions ) {\n\t\t\tmediaUploadBlockEditor = ( { onError, ...argumentsObject } ) => {\n\t\t\t\tuploadMedia( {\n\t\t\t\t\twpAllowedMimeTypes: blockEditorSettings.allowedMimeTypes,\n\t\t\t\t\tonError: ( { message } ) => onError( message ),\n\t\t\t\t\t...argumentsObject,\n\t\t\t\t} );\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...blockEditorSettings,\n\t\t\t__experimentalSetIsInserterOpened: setIsInserterOpened,\n\t\t\tmediaUpload: mediaUploadBlockEditor,\n\t\t\thasFixedToolbar: isFixedToolbarActive || ! isMediumViewport,\n\t\t\tkeepCaretInsideBlock,\n\t\t\t__unstableHasCustomAppender: true,\n\t\t};\n\t}, [\n\t\thasUploadPermissions,\n\t\tblockEditorSettings,\n\t\tisFixedToolbarActive,\n\t\tisMediumViewport,\n\t\tkeepCaretInsideBlock,\n\t\tsetIsInserterOpened,\n\t] );\n\n\tif ( isWelcomeGuideActive ) {\n\t\treturn <WelcomeGuide sidebar={ sidebar } />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<KeyboardShortcuts.Register />\n\t\t\t<BlockKeyboardShortcuts />\n\n\t\t\t<SidebarEditorProvider sidebar={ sidebar } settings={ settings }>\n\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\tundo={ sidebar.undo }\n\t\t\t\t\tredo={ sidebar.redo }\n\t\t\t\t\tsave={ sidebar.save }\n\t\t\t\t/>\n\n\t\t\t\t<Header\n\t\t\t\t\tsidebar={ sidebar }\n\t\t\t\t\tinserter={ inserter }\n\t\t\t\t\tisInserterOpened={ isInserterOpened }\n\t\t\t\t\tsetIsInserterOpened={ setIsInserterOpened }\n\t\t\t\t\tisFixedToolbarActive={\n\t\t\t\t\t\tisFixedToolbarActive || ! isMediumViewport\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ ( isFixedToolbarActive || ! isMediumViewport ) && (\n\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t) }\n\t\t\t\t<BlockCanvas\n\t\t\t\t\tshouldIframe={ false }\n\t\t\t\t\tstyles={ settings.defaultEditorStyles }\n\t\t\t\t\theight=\"100%\"\n\t\t\t\t>\n\t\t\t\t\t<BlockList renderAppender={ BlockAppender } />\n\t\t\t\t</BlockCanvas>\n\n\t\t\t\t{ createPortal(\n\t\t\t\t\t// This is a temporary hack to prevent button component inside <BlockInspector>\n\t\t\t\t\t// from submitting form when type=\"button\" is not specified.\n\t\t\t\t\t<form onSubmit={ ( event ) => event.preventDefault() }>\n\t\t\t\t\t\t<BlockInspector />\n\t\t\t\t\t</form>,\n\t\t\t\t\tinspector.contentContainer[ 0 ]\n\t\t\t\t) }\n\t\t\t</SidebarEditorProvider>\n\n\t\t\t<__unstableBlockSettingsMenuFirstItem>\n\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t<BlockInspectorButton\n\t\t\t\t\t\tinspector={ inspector }\n\t\t\t\t\t\tcloseMenu={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</__unstableBlockSettingsMenuFirstItem>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useCallback } from '@wordpress/element';\nimport { useSelect, useDispatch, select as selectStore } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as customizeWidgetsStore } from '../../store';\n\nexport default function useInserter( inserter ) {\n\tconst isInserterOpened = useSelect(\n\t\t( select ) => select( customizeWidgetsStore ).isInserterOpened(),\n\t\t[]\n\t);\n\tconst { setIsInserterOpened } = useDispatch( customizeWidgetsStore );\n\n\tuseEffect( () => {\n\t\tif ( isInserterOpened ) {\n\t\t\tinserter.open();\n\t\t} else {\n\t\t\tinserter.close();\n\t\t}\n\t}, [ inserter, isInserterOpened ] );\n\n\treturn [\n\t\tisInserterOpened,\n\t\tuseCallback(\n\t\t\t( updater ) => {\n\t\t\t\tlet isOpen = updater;\n\t\t\t\tif ( typeof updater === 'function' ) {\n\t\t\t\t\tisOpen = updater(\n\t\t\t\t\t\tselectStore( customizeWidgetsStore ).isInserterOpened()\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tsetIsInserterOpened( isOpen );\n\t\t\t},\n\t\t\t[ setIsInserterOpened ]\n\t\t),\n\t];\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext, useMemo, useContext } from '@wordpress/element';\n\nexport const SidebarControlsContext = createContext();\n\nexport default function SidebarControls( {\n\tsidebarControls,\n\tactiveSidebarControl,\n\tchildren,\n} ) {\n\tconst context = useMemo(\n\t\t() => ( {\n\t\t\tsidebarControls,\n\t\t\tactiveSidebarControl,\n\t\t} ),\n\t\t[ sidebarControls, activeSidebarControl ]\n\t);\n\n\treturn (\n\t\t<SidebarControlsContext.Provider value={ context }>\n\t\t\t{ children }\n\t\t</SidebarControlsContext.Provider>\n\t);\n}\n\nexport function useSidebarControls() {\n\tconst { sidebarControls } = useContext( SidebarControlsContext );\n\n\treturn sidebarControls;\n}\n\nexport function useActiveSidebarControl() {\n\tconst { activeSidebarControl } = useContext( SidebarControlsContext );\n\n\treturn activeSidebarControl;\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect, useRef, createPortal } from '@wordpress/element';\nimport { SlotFillProvider, Popover } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ErrorBoundary from '../error-boundary';\nimport SidebarBlockEditor from '../sidebar-block-editor';\nimport FocusControl from '../focus-control';\nimport SidebarControls from '../sidebar-controls';\nimport useClearSelectedBlock from './use-clear-selected-block';\n\nexport default function CustomizeWidgets( {\n\tapi,\n\tsidebarControls,\n\tblockEditorSettings,\n} ) {\n\tconst [ activeSidebarControl, setActiveSidebarControl ] = useState( null );\n\tconst parentContainer = document.getElementById(\n\t\t'customize-theme-controls'\n\t);\n\tconst popoverRef = useRef();\n\n\tuseClearSelectedBlock( activeSidebarControl, popoverRef );\n\n\tuseEffect( () => {\n\t\tconst unsubscribers = sidebarControls.map( ( sidebarControl ) =>\n\t\t\tsidebarControl.subscribe( ( expanded ) => {\n\t\t\t\tif ( expanded ) {\n\t\t\t\t\tsetActiveSidebarControl( sidebarControl );\n\t\t\t\t}\n\t\t\t} )\n\t\t);\n\n\t\treturn () => {\n\t\t\tunsubscribers.forEach( ( unsubscriber ) => unsubscriber() );\n\t\t};\n\t}, [ sidebarControls ] );\n\n\tconst activeSidebar =\n\t\tactiveSidebarControl &&\n\t\tcreatePortal(\n\t\t\t<ErrorBoundary>\n\t\t\t\t<SidebarBlockEditor\n\t\t\t\t\tkey={ activeSidebarControl.id }\n\t\t\t\t\tblockEditorSettings={ blockEditorSettings }\n\t\t\t\t\tsidebar={ activeSidebarControl.sidebarAdapter }\n\t\t\t\t\tinserter={ activeSidebarControl.inserter }\n\t\t\t\t\tinspector={ activeSidebarControl.inspector }\n\t\t\t\t/>\n\t\t\t</ErrorBoundary>,\n\t\t\tactiveSidebarControl.container[ 0 ]\n\t\t);\n\n\t// We have to portal this to the parent of both the editor and the inspector,\n\t// so that the popovers will appear above both of them.\n\tconst popover =\n\t\tparentContainer &&\n\t\tcreatePortal(\n\t\t\t<div className=\"customize-widgets-popover\" ref={ popoverRef }>\n\t\t\t\t<Popover.Slot />\n\t\t\t</div>,\n\t\t\tparentContainer\n\t\t);\n\n\treturn (\n\t\t<SlotFillProvider>\n\t\t\t<SidebarControls\n\t\t\t\tsidebarControls={ sidebarControls }\n\t\t\t\tactiveSidebarControl={ activeSidebarControl }\n\t\t\t>\n\t\t\t\t<FocusControl api={ api } sidebarControls={ sidebarControls }>\n\t\t\t\t\t{ activeSidebar }\n\t\t\t\t\t{ popover }\n\t\t\t\t</FocusControl>\n\t\t\t</SidebarControls>\n\t\t</SlotFillProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\n/**\n * We can't just use <BlockSelectionClearer> because the customizer has\n * many root nodes rather than just one in the post editor.\n * We need to listen to the focus events in all those roots, and also in\n * the preview iframe.\n * This hook will clear the selected block when focusing outside the editor,\n * with a few exceptions:\n * 1. Focusing on popovers.\n * 2. Focusing on the inspector.\n * 3. Focusing on any modals/dialogs.\n * These cases are normally triggered by user interactions from the editor,\n * not by explicitly focusing outside the editor, hence no need for clearing.\n *\n * @param {Object} sidebarControl The sidebar control instance.\n * @param {Object} popoverRef     The ref object of the popover node container.\n */\nexport default function useClearSelectedBlock( sidebarControl, popoverRef ) {\n\tconst { hasSelectedBlock, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\n\n\tuseEffect( () => {\n\t\tif ( popoverRef.current && sidebarControl ) {\n\t\t\tconst inspector = sidebarControl.inspector;\n\t\t\tconst container = sidebarControl.container[ 0 ];\n\t\t\tconst ownerDocument = container.ownerDocument;\n\t\t\tconst ownerWindow = ownerDocument.defaultView;\n\n\t\t\tfunction handleClearSelectedBlock( element ) {\n\t\t\t\tif (\n\t\t\t\t\t// 1. Make sure there are blocks being selected.\n\t\t\t\t\t( hasSelectedBlock() || hasMultiSelection() ) &&\n\t\t\t\t\t// 2. The element should exist in the DOM (not deleted).\n\t\t\t\t\telement &&\n\t\t\t\t\townerDocument.contains( element ) &&\n\t\t\t\t\t// 3. It should also not exist in the container, the popover, nor the dialog.\n\t\t\t\t\t! container.contains( element ) &&\n\t\t\t\t\t! popoverRef.current.contains( element ) &&\n\t\t\t\t\t! element.closest( '[role=\"dialog\"]' ) &&\n\t\t\t\t\t// 4. The inspector should not be opened.\n\t\t\t\t\t! inspector.expanded()\n\t\t\t\t) {\n\t\t\t\t\tclearSelectedBlock();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle mouse down in the same document.\n\t\t\tfunction handleMouseDown( event ) {\n\t\t\t\thandleClearSelectedBlock( event.target );\n\t\t\t}\n\t\t\t// Handle focusing outside the current document, like to iframes.\n\t\t\tfunction handleBlur() {\n\t\t\t\thandleClearSelectedBlock( ownerDocument.activeElement );\n\t\t\t}\n\n\t\t\townerDocument.addEventListener( 'mousedown', handleMouseDown );\n\t\t\townerWindow.addEventListener( 'blur', handleBlur );\n\n\t\t\treturn () => {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'mousedown',\n\t\t\t\t\thandleMouseDown\n\t\t\t\t);\n\t\t\t\townerWindow.removeEventListener( 'blur', handleBlur );\n\t\t\t};\n\t\t}\n\t}, [\n\t\tpopoverRef,\n\t\tsidebarControl,\n\t\thasSelectedBlock,\n\t\thasMultiSelection,\n\t\tclearSelectedBlock,\n\t] );\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport getInspectorSection from './inspector-section';\n\nconst getInspectorSectionId = ( sidebarId ) =>\n\t`widgets-inspector-${ sidebarId }`;\n\nexport default function getSidebarSection() {\n\tconst {\n\t\twp: { customize },\n\t} = window;\n\n\tconst reduceMotionMediaQuery = window.matchMedia(\n\t\t'(prefers-reduced-motion: reduce)'\n\t);\n\tlet isReducedMotion = reduceMotionMediaQuery.matches;\n\treduceMotionMediaQuery.addEventListener( 'change', ( event ) => {\n\t\tisReducedMotion = event.matches;\n\t} );\n\n\treturn class SidebarSection extends customize.Section {\n\t\tready() {\n\t\t\tconst InspectorSection = getInspectorSection();\n\t\t\tthis.inspector = new InspectorSection(\n\t\t\t\tgetInspectorSectionId( this.id ),\n\t\t\t\t{\n\t\t\t\t\ttitle: __( 'Block Settings' ),\n\t\t\t\t\tparentSection: this,\n\t\t\t\t\tcustomizeAction: [\n\t\t\t\t\t\t__( 'Customizing' ),\n\t\t\t\t\t\t__( 'Widgets' ),\n\t\t\t\t\t\tthis.params.title,\n\t\t\t\t\t].join( '  ' ),\n\t\t\t\t}\n\t\t\t);\n\t\t\tcustomize.section.add( this.inspector );\n\t\t\tthis.contentContainer[ 0 ].classList.add(\n\t\t\t\t'customize-widgets__sidebar-section'\n\t\t\t);\n\t\t}\n\t\thasSubSectionOpened() {\n\t\t\treturn this.inspector.expanded();\n\t\t}\n\t\tonChangeExpanded( expanded, _args ) {\n\t\t\tconst controls = this.controls();\n\t\t\tconst args = {\n\t\t\t\t..._args,\n\t\t\t\tcompleteCallback() {\n\t\t\t\t\tcontrols.forEach( ( control ) => {\n\t\t\t\t\t\tcontrol.onChangeSectionExpanded?.( expanded, args );\n\t\t\t\t\t} );\n\t\t\t\t\t_args.completeCallback?.();\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif ( args.manualTransition ) {\n\t\t\t\tif ( expanded ) {\n\t\t\t\t\tthis.contentContainer.addClass( [ 'busy', 'open' ] );\n\t\t\t\t\tthis.contentContainer.removeClass( 'is-sub-section-open' );\n\t\t\t\t\tthis.contentContainer\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\n\t\t\t\t\t\t.addClass( 'section-open' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.contentContainer.addClass( [\n\t\t\t\t\t\t'busy',\n\t\t\t\t\t\t'is-sub-section-open',\n\t\t\t\t\t] );\n\t\t\t\t\tthis.contentContainer\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\n\t\t\t\t\t\t.addClass( 'section-open' );\n\t\t\t\t\tthis.contentContainer.removeClass( 'open' );\n\t\t\t\t}\n\n\t\t\t\tconst handleTransitionEnd = () => {\n\t\t\t\t\tthis.contentContainer.removeClass( 'busy' );\n\t\t\t\t\targs.completeCallback();\n\t\t\t\t};\n\n\t\t\t\tif ( isReducedMotion ) {\n\t\t\t\t\thandleTransitionEnd();\n\t\t\t\t} else {\n\t\t\t\t\tthis.contentContainer.one(\n\t\t\t\t\t\t'transitionend',\n\t\t\t\t\t\thandleTransitionEnd\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsuper.onChangeExpanded( expanded, args );\n\t\t\t}\n\t\t}\n\t};\n}\n","/**\n * Internal dependencies\n */\nimport { settingIdToWidgetId } from '../../utils';\n\nconst { wp } = window;\n\nfunction parseWidgetId( widgetId ) {\n\tconst matches = widgetId.match( /^(.+)-(\\d+)$/ );\n\tif ( matches ) {\n\t\treturn {\n\t\t\tidBase: matches[ 1 ],\n\t\t\tnumber: parseInt( matches[ 2 ], 10 ),\n\t\t};\n\t}\n\n\t// Likely an old single widget.\n\treturn { idBase: widgetId };\n}\n\nfunction widgetIdToSettingId( widgetId ) {\n\tconst { idBase, number } = parseWidgetId( widgetId );\n\tif ( number ) {\n\t\treturn `widget_${ idBase }[${ number }]`;\n\t}\n\n\treturn `widget_${ idBase }`;\n}\n\n/**\n * This is a custom debounce function to call different callbacks depending on\n * whether it's the _leading_ call or not.\n *\n * @param {Function} leading  The callback that gets called first.\n * @param {Function} callback The callback that gets called after the first time.\n * @param {number}   timeout  The debounced time in milliseconds.\n * @return {Function} The debounced function.\n */\nfunction debounce( leading, callback, timeout ) {\n\tlet isLeading = false;\n\tlet timerID;\n\n\tfunction debounced( ...args ) {\n\t\tconst result = ( isLeading ? callback : leading ).apply( this, args );\n\n\t\tisLeading = true;\n\n\t\tclearTimeout( timerID );\n\n\t\ttimerID = setTimeout( () => {\n\t\t\tisLeading = false;\n\t\t}, timeout );\n\n\t\treturn result;\n\t}\n\n\tdebounced.cancel = () => {\n\t\tisLeading = false;\n\t\tclearTimeout( timerID );\n\t};\n\n\treturn debounced;\n}\n\nexport default class SidebarAdapter {\n\tconstructor( setting, api ) {\n\t\tthis.setting = setting;\n\t\tthis.api = api;\n\n\t\tthis.locked = false;\n\t\tthis.widgetsCache = new WeakMap();\n\t\tthis.subscribers = new Set();\n\n\t\tthis.history = [\n\t\t\tthis._getWidgetIds().map( ( widgetId ) =>\n\t\t\t\tthis.getWidget( widgetId )\n\t\t\t),\n\t\t];\n\t\tthis.historyIndex = 0;\n\t\tthis.historySubscribers = new Set();\n\t\t// Debounce the input for 1 second.\n\t\tthis._debounceSetHistory = debounce(\n\t\t\tthis._pushHistory,\n\t\t\tthis._replaceHistory,\n\t\t\t1000\n\t\t);\n\n\t\tthis.setting.bind( this._handleSettingChange.bind( this ) );\n\t\tthis.api.bind( 'change', this._handleAllSettingsChange.bind( this ) );\n\n\t\tthis.undo = this.undo.bind( this );\n\t\tthis.redo = this.redo.bind( this );\n\t\tthis.save = this.save.bind( this );\n\t}\n\n\tsubscribe( callback ) {\n\t\tthis.subscribers.add( callback );\n\n\t\treturn () => {\n\t\t\tthis.subscribers.delete( callback );\n\t\t};\n\t}\n\n\tgetWidgets() {\n\t\treturn this.history[ this.historyIndex ];\n\t}\n\n\t_emit( ...args ) {\n\t\tfor ( const callback of this.subscribers ) {\n\t\t\tcallback( ...args );\n\t\t}\n\t}\n\n\t_getWidgetIds() {\n\t\treturn this.setting.get();\n\t}\n\n\t_pushHistory() {\n\t\tthis.history = [\n\t\t\t...this.history.slice( 0, this.historyIndex + 1 ),\n\t\t\tthis._getWidgetIds().map( ( widgetId ) =>\n\t\t\t\tthis.getWidget( widgetId )\n\t\t\t),\n\t\t];\n\t\tthis.historyIndex += 1;\n\n\t\tthis.historySubscribers.forEach( ( listener ) => listener() );\n\t}\n\n\t_replaceHistory() {\n\t\tthis.history[ this.historyIndex ] = this._getWidgetIds().map(\n\t\t\t( widgetId ) => this.getWidget( widgetId )\n\t\t);\n\t}\n\n\t_handleSettingChange() {\n\t\tif ( this.locked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst prevWidgets = this.getWidgets();\n\n\t\tthis._pushHistory();\n\n\t\tthis._emit( prevWidgets, this.getWidgets() );\n\t}\n\n\t_handleAllSettingsChange( setting ) {\n\t\tif ( this.locked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! setting.id.startsWith( 'widget_' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst widgetId = settingIdToWidgetId( setting.id );\n\t\tif ( ! this.setting.get().includes( widgetId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst prevWidgets = this.getWidgets();\n\n\t\tthis._pushHistory();\n\n\t\tthis._emit( prevWidgets, this.getWidgets() );\n\t}\n\n\t_createWidget( widget ) {\n\t\tconst widgetModel = wp.customize.Widgets.availableWidgets.findWhere( {\n\t\t\tid_base: widget.idBase,\n\t\t} );\n\n\t\tlet number = widget.number;\n\t\tif ( widgetModel.get( 'is_multi' ) && ! number ) {\n\t\t\twidgetModel.set(\n\t\t\t\t'multi_number',\n\t\t\t\twidgetModel.get( 'multi_number' ) + 1\n\t\t\t);\n\t\t\tnumber = widgetModel.get( 'multi_number' );\n\t\t}\n\n\t\tconst settingId = number\n\t\t\t? `widget_${ widget.idBase }[${ number }]`\n\t\t\t: `widget_${ widget.idBase }`;\n\n\t\tconst settingArgs = {\n\t\t\ttransport: wp.customize.Widgets.data.selectiveRefreshableWidgets[\n\t\t\t\twidgetModel.get( 'id_base' )\n\t\t\t]\n\t\t\t\t? 'postMessage'\n\t\t\t\t: 'refresh',\n\t\t\tpreviewer: this.setting.previewer,\n\t\t};\n\t\tconst setting = this.api.create(\n\t\t\tsettingId,\n\t\t\tsettingId,\n\t\t\t'',\n\t\t\tsettingArgs\n\t\t);\n\t\tsetting.set( widget.instance );\n\n\t\tconst widgetId = settingIdToWidgetId( settingId );\n\n\t\treturn widgetId;\n\t}\n\n\t_removeWidget( widget ) {\n\t\tconst settingId = widgetIdToSettingId( widget.id );\n\t\tconst setting = this.api( settingId );\n\n\t\tif ( setting ) {\n\t\t\tconst instance = setting.get();\n\t\t\tthis.widgetsCache.delete( instance );\n\t\t}\n\n\t\tthis.api.remove( settingId );\n\t}\n\n\t_updateWidget( widget ) {\n\t\tconst prevWidget = this.getWidget( widget.id );\n\n\t\t// Bail out update if nothing changed.\n\t\tif ( prevWidget === widget ) {\n\t\t\treturn widget.id;\n\t\t}\n\n\t\t// Update existing setting if only the widget's instance changed.\n\t\tif (\n\t\t\tprevWidget.idBase &&\n\t\t\twidget.idBase &&\n\t\t\tprevWidget.idBase === widget.idBase\n\t\t) {\n\t\t\tconst settingId = widgetIdToSettingId( widget.id );\n\t\t\tthis.api( settingId ).set( widget.instance );\n\t\t\treturn widget.id;\n\t\t}\n\n\t\t// Otherwise delete and re-create.\n\t\tthis._removeWidget( widget );\n\t\treturn this._createWidget( widget );\n\t}\n\n\tgetWidget( widgetId ) {\n\t\tif ( ! widgetId ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { idBase, number } = parseWidgetId( widgetId );\n\t\tconst settingId = widgetIdToSettingId( widgetId );\n\t\tconst setting = this.api( settingId );\n\n\t\tif ( ! setting ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst instance = setting.get();\n\n\t\tif ( this.widgetsCache.has( instance ) ) {\n\t\t\treturn this.widgetsCache.get( instance );\n\t\t}\n\n\t\tconst widget = {\n\t\t\tid: widgetId,\n\t\t\tidBase,\n\t\t\tnumber,\n\t\t\tinstance,\n\t\t};\n\n\t\tthis.widgetsCache.set( instance, widget );\n\n\t\treturn widget;\n\t}\n\n\t_updateWidgets( nextWidgets ) {\n\t\tthis.locked = true;\n\n\t\tconst addedWidgetIds = [];\n\n\t\tconst nextWidgetIds = nextWidgets.map( ( nextWidget ) => {\n\t\t\tif ( nextWidget.id && this.getWidget( nextWidget.id ) ) {\n\t\t\t\taddedWidgetIds.push( null );\n\n\t\t\t\treturn this._updateWidget( nextWidget );\n\t\t\t}\n\n\t\t\tconst widgetId = this._createWidget( nextWidget );\n\n\t\t\taddedWidgetIds.push( widgetId );\n\n\t\t\treturn widgetId;\n\t\t} );\n\n\t\tconst deletedWidgets = this.getWidgets().filter(\n\t\t\t( widget ) => ! nextWidgetIds.includes( widget.id )\n\t\t);\n\t\tdeletedWidgets.forEach( ( widget ) => this._removeWidget( widget ) );\n\n\t\tthis.setting.set( nextWidgetIds );\n\n\t\tthis.locked = false;\n\n\t\treturn addedWidgetIds;\n\t}\n\n\tsetWidgets( nextWidgets ) {\n\t\tconst addedWidgetIds = this._updateWidgets( nextWidgets );\n\n\t\tthis._debounceSetHistory();\n\n\t\treturn addedWidgetIds;\n\t}\n\n\t/**\n\t * Undo/Redo related features\n\t */\n\thasUndo() {\n\t\treturn this.historyIndex > 0;\n\t}\n\n\thasRedo() {\n\t\treturn this.historyIndex < this.history.length - 1;\n\t}\n\n\t_seek( historyIndex ) {\n\t\tconst currentWidgets = this.getWidgets();\n\n\t\tthis.historyIndex = historyIndex;\n\n\t\tconst widgets = this.history[ this.historyIndex ];\n\n\t\tthis._updateWidgets( widgets );\n\n\t\tthis._emit( currentWidgets, this.getWidgets() );\n\n\t\tthis.historySubscribers.forEach( ( listener ) => listener() );\n\t\tthis._debounceSetHistory.cancel();\n\t}\n\n\tundo() {\n\t\tif ( ! this.hasUndo() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._seek( this.historyIndex - 1 );\n\t}\n\n\tredo() {\n\t\tif ( ! this.hasRedo() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._seek( this.historyIndex + 1 );\n\t}\n\n\tsubscribeHistory( listener ) {\n\t\tthis.historySubscribers.add( listener );\n\n\t\treturn () => {\n\t\t\tthis.historySubscribers.delete( listener );\n\t\t};\n\t}\n\n\tsave() {\n\t\tthis.api.previewer.save();\n\t}\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"dom\"];","/**\n * WordPress dependencies\n */\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport SidebarAdapter from '../components/sidebar-block-editor/sidebar-adapter';\nimport getInserterOuterSection from './inserter-outer-section';\nimport { store as customizeWidgetsStore } from '../store';\n\nconst getInserterId = ( controlId ) => `widgets-inserter-${ controlId }`;\n\nexport default function getSidebarControl() {\n\tconst {\n\t\twp: { customize },\n\t} = window;\n\n\treturn class SidebarControl extends customize.Control {\n\t\tconstructor( ...args ) {\n\t\t\tsuper( ...args );\n\n\t\t\tthis.subscribers = new Set();\n\t\t}\n\n\t\tready() {\n\t\t\tconst InserterOuterSection = getInserterOuterSection();\n\t\t\tthis.inserter = new InserterOuterSection(\n\t\t\t\tgetInserterId( this.id ),\n\t\t\t\t{}\n\t\t\t);\n\t\t\tcustomize.section.add( this.inserter );\n\n\t\t\tthis.sectionInstance = customize.section( this.section() );\n\n\t\t\tthis.inspector = this.sectionInstance.inspector;\n\n\t\t\tthis.sidebarAdapter = new SidebarAdapter( this.setting, customize );\n\t\t}\n\n\t\tsubscribe( callback ) {\n\t\t\tthis.subscribers.add( callback );\n\n\t\t\treturn () => {\n\t\t\t\tthis.subscribers.delete( callback );\n\t\t\t};\n\t\t}\n\n\t\tonChangeSectionExpanded( expanded, args ) {\n\t\t\tif ( ! args.unchanged ) {\n\t\t\t\t// Close the inserter when the section collapses.\n\t\t\t\tif ( ! expanded ) {\n\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.subscribers.forEach( ( subscriber ) =>\n\t\t\t\t\tsubscriber( expanded, args )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBlockControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { addFilter } from '@wordpress/hooks';\nimport { MoveToWidgetArea, getWidgetIdFromBlock } from '@wordpress/widgets';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseSidebarControls,\n\tuseActiveSidebarControl,\n} from '../components/sidebar-controls';\nimport { useFocusControl } from '../components/focus-control';\nimport { blockToWidget } from '../utils';\n\nconst withMoveToSidebarToolbarItem = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tlet widgetId = getWidgetIdFromBlock( props );\n\t\tconst sidebarControls = useSidebarControls();\n\t\tconst activeSidebarControl = useActiveSidebarControl();\n\t\tconst hasMultipleSidebars = sidebarControls?.length > 1;\n\t\tconst blockName = props.name;\n\t\tconst clientId = props.clientId;\n\t\tconst canInsertBlockInSidebar = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// Use an empty string to represent the root block list, which\n\t\t\t\t// in the customizer editor represents a sidebar/widget area.\n\t\t\t\treturn select( blockEditorStore ).canInsertBlockType(\n\t\t\t\t\tblockName,\n\t\t\t\t\t''\n\t\t\t\t);\n\t\t\t},\n\t\t\t[ blockName ]\n\t\t);\n\t\tconst block = useSelect(\n\t\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\n\t\t\t[ clientId ]\n\t\t);\n\t\tconst { removeBlock } = useDispatch( blockEditorStore );\n\t\tconst [ , focusWidget ] = useFocusControl();\n\n\t\tfunction moveToSidebar( sidebarControlId ) {\n\t\t\tconst newSidebarControl = sidebarControls.find(\n\t\t\t\t( sidebarControl ) => sidebarControl.id === sidebarControlId\n\t\t\t);\n\n\t\t\tif ( widgetId ) {\n\t\t\t\t/**\n\t\t\t\t * If there's a widgetId, move it to the other sidebar.\n\t\t\t\t */\n\t\t\t\tconst oldSetting = activeSidebarControl.setting;\n\t\t\t\tconst newSetting = newSidebarControl.setting;\n\n\t\t\t\toldSetting( oldSetting().filter( ( id ) => id !== widgetId ) );\n\t\t\t\tnewSetting( [ ...newSetting(), widgetId ] );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * If there isn't a widgetId, it's most likely a inner block.\n\t\t\t\t * First, remove the block in the original sidebar,\n\t\t\t\t * then, create a new widget in the new sidebar and get back its widgetId.\n\t\t\t\t */\n\t\t\t\tconst sidebarAdapter = newSidebarControl.sidebarAdapter;\n\n\t\t\t\tremoveBlock( clientId );\n\t\t\t\tconst addedWidgetIds = sidebarAdapter.setWidgets( [\n\t\t\t\t\t...sidebarAdapter.getWidgets(),\n\t\t\t\t\tblockToWidget( block ),\n\t\t\t\t] );\n\t\t\t\t// The last non-null id is the added widget's id.\n\t\t\t\twidgetId = addedWidgetIds.reverse().find( ( id ) => !! id );\n\t\t\t}\n\n\t\t\t// Move focus to the moved widget and expand the sidebar.\n\t\t\tfocusWidget( widgetId );\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<BlockEdit key=\"edit\" { ...props } />\n\t\t\t\t{ hasMultipleSidebars && canInsertBlockInSidebar && (\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<MoveToWidgetArea\n\t\t\t\t\t\t\twidgetAreas={ sidebarControls.map(\n\t\t\t\t\t\t\t\t( sidebarControl ) => ( {\n\t\t\t\t\t\t\t\t\tid: sidebarControl.id,\n\t\t\t\t\t\t\t\t\tname: sidebarControl.params.label,\n\t\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\tsidebarControl.params.description,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tcurrentWidgetAreaId={ activeSidebarControl?.id }\n\t\t\t\t\t\t\tonSelect={ moveToSidebar }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t},\n\t'withMoveToSidebarToolbarItem'\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/customize-widgets/block-edit',\n\twithMoveToSidebarToolbarItem\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { MediaUpload } from '@wordpress/media-utils';\n\nconst replaceMediaUpload = () => MediaUpload;\n\naddFilter(\n\t'editor.MediaUpload',\n\t'core/edit-widgets/replace-media-upload',\n\treplaceMediaUpload\n);\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\n\nconst { wp } = window;\n\nconst withWideWidgetDisplay = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { idBase } = props.attributes;\n\t\tconst isWide =\n\t\t\twp.customize.Widgets.data.availableWidgets.find(\n\t\t\t\t( widget ) => widget.id_base === idBase\n\t\t\t)?.is_wide ?? false;\n\n\t\treturn <BlockEdit key=\"edit\" { ...props } isWide={ isWide } />;\n\t},\n\t'withWideWidgetDisplay'\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/customize-widgets/wide-widget-display',\n\twithWideWidgetDisplay\n);\n","/**\n * WordPress dependencies\n */\nimport { createRoot, StrictMode } from '@wordpress/element';\nimport {\n\tregisterCoreBlocks,\n\t__experimentalGetCoreBlocks,\n\t__experimentalRegisterExperimentalCoreBlocks,\n} from '@wordpress/block-library';\nimport {\n\tregisterLegacyWidgetBlock,\n\tregisterLegacyWidgetVariations,\n\tregisterWidgetGroupBlock,\n} from '@wordpress/widgets';\nimport {\n\tsetFreeformContentHandlerName,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { dispatch } from '@wordpress/data';\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport CustomizeWidgets from './components/customize-widgets';\nimport getSidebarSection from './controls/sidebar-section';\nimport getSidebarControl from './controls/sidebar-control';\nimport './filters';\nimport { unlock } from './lock-unlock';\n\nconst { wp } = window;\n\nconst DISABLED_BLOCKS = [\n\t'core/more',\n\t'core/block',\n\t'core/freeform',\n\t'core/template-part',\n];\nconst ENABLE_EXPERIMENTAL_FSE_BLOCKS = false;\n\nconst { registerCoreBlockBindingsSources } = unlock( editorPrivateApis );\n\n/**\n * Initializes the widgets block editor in the customizer.\n *\n * @param {string} editorName          The editor name.\n * @param {Object} blockEditorSettings Block editor settings.\n */\nexport function initialize( editorName, blockEditorSettings ) {\n\tdispatch( preferencesStore ).setDefaults( 'core/customize-widgets', {\n\t\tfixedToolbar: false,\n\t\twelcomeGuide: true,\n\t} );\n\n\tdispatch( blocksStore ).reapplyBlockTypeFilters();\n\tconst coreBlocks = __experimentalGetCoreBlocks().filter( ( block ) => {\n\t\treturn ! (\n\t\t\tDISABLED_BLOCKS.includes( block.name ) ||\n\t\t\tblock.name.startsWith( 'core/post' ) ||\n\t\t\tblock.name.startsWith( 'core/query' ) ||\n\t\t\tblock.name.startsWith( 'core/site' ) ||\n\t\t\tblock.name.startsWith( 'core/navigation' )\n\t\t);\n\t} );\n\tregisterCoreBlocks( coreBlocks );\n\tregisterCoreBlockBindingsSources();\n\tregisterLegacyWidgetBlock();\n\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t__experimentalRegisterExperimentalCoreBlocks( {\n\t\t\tenableFSEBlocks: ENABLE_EXPERIMENTAL_FSE_BLOCKS,\n\t\t} );\n\t}\n\tregisterLegacyWidgetVariations( blockEditorSettings );\n\tregisterWidgetGroupBlock();\n\n\t// As we are unregistering `core/freeform` to avoid the Classic block, we must\n\t// replace it with something as the default freeform content handler. Failure to\n\t// do this will result in errors in the default block parser.\n\t// see: https://github.com/WordPress/gutenberg/issues/33097\n\tsetFreeformContentHandlerName( 'core/html' );\n\n\tconst SidebarControl = getSidebarControl( blockEditorSettings );\n\n\twp.customize.sectionConstructor.sidebar = getSidebarSection();\n\twp.customize.controlConstructor.sidebar_block_editor = SidebarControl;\n\n\tconst container = document.createElement( 'div' );\n\tdocument.body.appendChild( container );\n\n\twp.customize.bind( 'ready', () => {\n\t\tconst sidebarControls = [];\n\t\twp.customize.control.each( ( control ) => {\n\t\t\tif ( control instanceof SidebarControl ) {\n\t\t\t\tsidebarControls.push( control );\n\t\t\t}\n\t\t} );\n\n\t\tcreateRoot( container ).render(\n\t\t\t<StrictMode>\n\t\t\t\t<CustomizeWidgets\n\t\t\t\t\tapi={ wp.customize }\n\t\t\t\t\tsidebarControls={ sidebarControls }\n\t\t\t\t\tblockEditorSettings={ blockEditorSettings }\n\t\t\t\t/>\n\t\t\t</StrictMode>\n\t\t);\n\t} );\n}\nexport { store } from './store';\n","/**\n * WordPress dependencies\n */\nimport { ESCAPE } from '@wordpress/keycodes';\nimport { focus } from '@wordpress/dom';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as customizeWidgetsStore } from '../store';\n\nexport default function getInserterOuterSection() {\n\tconst {\n\t\twp: { customize },\n\t} = window;\n\n\tconst OuterSection = customize.OuterSection;\n\t// Override the OuterSection class to handle multiple outer sections.\n\t// It closes all the other outer sections whenever one is opened.\n\t// The result is that at most one outer section can be opened at the same time.\n\tcustomize.OuterSection = class extends OuterSection {\n\t\tonChangeExpanded( expanded, args ) {\n\t\t\tif ( expanded ) {\n\t\t\t\tcustomize.section.each( ( section ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tsection.params.type === 'outer' &&\n\t\t\t\t\t\tsection.id !== this.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tif ( section.expanded() ) {\n\t\t\t\t\t\t\tsection.collapse();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn super.onChangeExpanded( expanded, args );\n\t\t}\n\t};\n\t// Handle constructor so that \"params.type\" can be correctly pointed to \"outer\".\n\tcustomize.sectionConstructor.outer = customize.OuterSection;\n\n\treturn class InserterOuterSection extends customize.OuterSection {\n\t\tconstructor( ...args ) {\n\t\t\tsuper( ...args );\n\n\t\t\t// This is necessary since we're creating a new class which is not identical to the original OuterSection.\n\t\t\t// @See https://github.com/WordPress/wordpress-develop/blob/42b05c397c50d9dc244083eff52991413909d4bd/src/js/_enqueues/wp/customize/controls.js#L1427-L1436\n\t\t\tthis.params.type = 'outer';\n\n\t\t\tthis.activeElementBeforeExpanded = null;\n\n\t\t\tconst ownerWindow =\n\t\t\t\tthis.contentContainer[ 0 ].ownerDocument.defaultView;\n\n\t\t\t// Handle closing the inserter when pressing the Escape key.\n\t\t\townerWindow.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\t( event ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.expanded() &&\n\t\t\t\t\t\t( event.keyCode === ESCAPE ||\n\t\t\t\t\t\t\tevent.code === 'Escape' ) &&\n\t\t\t\t\t\t! event.defaultPrevented\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// Use capture mode to make this run before other event listeners.\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t\tthis.contentContainer.addClass( 'widgets-inserter' );\n\n\t\t\t// Set a flag if the state is being changed from open() or close().\n\t\t\t// Don't propagate the event if it's an internal action to prevent infinite loop.\n\t\t\tthis.isFromInternalAction = false;\n\t\t\tthis.expanded.bind( () => {\n\t\t\t\tif ( ! this.isFromInternalAction ) {\n\t\t\t\t\t// Propagate the event to React to sync the state.\n\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\n\t\t\t\t\t\tthis.expanded()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.isFromInternalAction = false;\n\t\t\t} );\n\t\t}\n\t\topen() {\n\t\t\tif ( ! this.expanded() ) {\n\t\t\t\tconst contentContainer = this.contentContainer[ 0 ];\n\t\t\t\tthis.activeElementBeforeExpanded =\n\t\t\t\t\tcontentContainer.ownerDocument.activeElement;\n\n\t\t\t\tthis.isFromInternalAction = true;\n\n\t\t\t\tthis.expand( {\n\t\t\t\t\tcompleteCallback() {\n\t\t\t\t\t\t// We have to do this in a \"completeCallback\" or else the elements will not yet be visible/tabbable.\n\t\t\t\t\t\t// The first one should be the close button,\n\t\t\t\t\t\t// we want to skip it and choose the second one instead, which is the search box.\n\t\t\t\t\t\tconst searchBox =\n\t\t\t\t\t\t\tfocus.tabbable.find( contentContainer )[ 1 ];\n\t\t\t\t\t\tif ( searchBox ) {\n\t\t\t\t\t\t\tsearchBox.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\tclose() {\n\t\t\tif ( this.expanded() ) {\n\t\t\t\tconst contentContainer = this.contentContainer[ 0 ];\n\t\t\t\tconst activeElement =\n\t\t\t\t\tcontentContainer.ownerDocument.activeElement;\n\n\t\t\t\tthis.isFromInternalAction = true;\n\n\t\t\t\tthis.collapse( {\n\t\t\t\t\tcompleteCallback() {\n\t\t\t\t\t\t// Return back the focus when closing the inserter.\n\t\t\t\t\t\t// Only do this if the active element which triggers the action is inside the inserter,\n\t\t\t\t\t\t// (the close button for instance). In that case the focus will be lost.\n\t\t\t\t\t\t// Otherwise, we don't hijack the focus when the user is focusing on other elements\n\t\t\t\t\t\t// (like the quick inserter).\n\t\t\t\t\t\tif ( contentContainer.contains( activeElement ) ) {\n\t\t\t\t\t\t\t// Return back the focus when closing the inserter.\n\t\t\t\t\t\t\tif ( this.activeElementBeforeExpanded ) {\n\t\t\t\t\t\t\t\tthis.activeElementBeforeExpanded.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t};\n}\n","export default function getInspectorSection() {\n\tconst {\n\t\twp: { customize },\n\t} = window;\n\n\treturn class InspectorSection extends customize.Section {\n\t\tconstructor( id, options ) {\n\t\t\tsuper( id, options );\n\n\t\t\tthis.parentSection = options.parentSection;\n\n\t\t\tthis.returnFocusWhenClose = null;\n\t\t\tthis._isOpen = false;\n\t\t}\n\t\tget isOpen() {\n\t\t\treturn this._isOpen;\n\t\t}\n\t\tset isOpen( value ) {\n\t\t\tthis._isOpen = value;\n\t\t\tthis.triggerActiveCallbacks();\n\t\t}\n\t\tready() {\n\t\t\tthis.contentContainer[ 0 ].classList.add(\n\t\t\t\t'customize-widgets-layout__inspector'\n\t\t\t);\n\t\t}\n\t\tisContextuallyActive() {\n\t\t\treturn this.isOpen;\n\t\t}\n\t\tonChangeExpanded( expanded, args ) {\n\t\t\tsuper.onChangeExpanded( expanded, args );\n\n\t\t\tif ( this.parentSection && ! args.unchanged ) {\n\t\t\t\tif ( expanded ) {\n\t\t\t\t\tthis.parentSection.collapse( {\n\t\t\t\t\t\tmanualTransition: true,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tthis.parentSection.expand( {\n\t\t\t\t\t\tmanualTransition: true,\n\t\t\t\t\t\tcompleteCallback: () => {\n\t\t\t\t\t\t\t// Return focus after finishing the transition.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.returnFocusWhenClose &&\n\t\t\t\t\t\t\t\t! this.contentContainer[ 0 ].contains(\n\t\t\t\t\t\t\t\t\tthis.returnFocusWhenClose\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.returnFocusWhenClose.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\topen( { returnFocusWhenClose } = {} ) {\n\t\t\tthis.isOpen = true;\n\t\t\tthis.returnFocusWhenClose = returnFocusWhenClose;\n\n\t\t\tthis.expand( {\n\t\t\t\tallowMultiple: true,\n\t\t\t} );\n\t\t}\n\t\tclose() {\n\t\t\tthis.collapse( {\n\t\t\t\tallowMultiple: true,\n\t\t\t} );\n\t\t}\n\t\tcollapse( options ) {\n\t\t\t// Overridden collapse() function. Mostly call the parent collapse(), but also\n\t\t\t// move our .isOpen to false.\n\t\t\t// Initially, I tried tracking this with onChangeExpanded(), but it doesn't work\n\t\t\t// because the block settings sidebar is a layer \"on top of\" the G editor sidebar.\n\t\t\t//\n\t\t\t// For example, when closing the block settings sidebar, the G\n\t\t\t// editor sidebar would display, and onChangeExpanded in\n\t\t\t// inspector-section would run with expanded=true, but I want\n\t\t\t// isOpen to be false when the block settings is closed.\n\t\t\tthis.isOpen = false;\n\t\t\tsuper.collapse( options );\n\t\t}\n\t\ttriggerActiveCallbacks() {\n\t\t\t// Manually fire the callbacks associated with moving this.active\n\t\t\t// from false to true.  \"active\" is always true for this section,\n\t\t\t// and \"isContextuallyActive\" reflects if the block settings\n\t\t\t// sidebar is currently visible, that is, it has replaced the main\n\t\t\t// Gutenberg view.\n\t\t\t// The WP customizer only checks \".isContextuallyActive()\" when\n\t\t\t// \".active\" changes values. But our \".active\" never changes value.\n\t\t\t// The WP customizer never foresaw a section being used a way we\n\t\t\t// fit the block settings sidebar into a section. By manually\n\t\t\t// triggering the \"this.active\" callbacks, we force the WP\n\t\t\t// customizer to query our .isContextuallyActive() function and\n\t\t\t// update its view of our status.\n\t\t\tthis.active.callbacks.fireWith( this.active, [ false, true ] );\n\t\t}\n\t};\n}\n"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","Map","size","entries","has","get","Set","ArrayBuffer","isView","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","o","defineProperty","enumerable","obj","prop","r","Symbol","toStringTag","value","window","CopyButton","text","children","ref","useCopyToClipboard","_jsx","Button","variant","ErrorBoundary","Component","super","arguments","this","state","error","componentDidCatch","setState","doAction","render","Warning","className","actions","stack","__","props","inspector","closeMenu","selectedBlockClientId","useSelect","select","blockEditorStore","getSelectedBlockClientId","selectedBlock","useMemo","document","getElementById","MenuItem","onClick","open","returnFocusWhenClose","e","t","f","SVG","xmlns","viewBox","Path","combineReducers","blockInserterPanel","action","type","EMPTY_INSERTION_POINT","rootClientId","insertionIndex","isInserterOpened","__experimentalGetInsertionPoint","setIsInserterOpened","storeConfig","reducer","selectors","store","createReduxStore","register","Inserter","setIsOpened","inserterTitleId","useInstanceId","insertionPoint","customizeWidgetsStore","_jsxs","id","icon","closeSmall","Library","__experimentalInsertionIndex","showInserterHelpPanel","onSelect","textFormattingShortcuts","keyCombination","modifier","character","description","aliases","KeyCombination","forceAriaLabel","shortcut","displayShortcutList","ariaLabel","shortcutAriaLabel","map","index","Fragment","_Fragment","alias","name","getShortcutKeyCombination","getShortcutDescription","getShortcutAliases","keyboardShortcutsStore","Shortcut","ShortcutList","shortcuts","role","DynamicShortcut","ShortcutSection","title","clsx","ShortcutCategorySection","categoryName","additionalShortcuts","categoryShortcuts","getCategoryShortcuts","concat","KeyboardShortcutHelpModal","isModalActive","toggleModal","registerShortcut","useDispatch","category","useShortcut","Modal","onRequestClose","MoreMenu","isKeyboardShortcutsModalActive","setIsKeyboardShortcutsModalVisible","useState","toggleKeyboardShortcutsModal","ToolbarDropdownMenu","moreVertical","label","popoverProps","placement","toggleProps","tooltipPosition","MenuGroup","_x","PreferenceToggleMenuItem","scope","info","messageActivated","messageDeactivated","displayShortcut","access","external","href","target","rel","VisuallyHidden","as","sidebar","inserter","isFixedToolbarActive","hasUndo","hasRedo","setUndoRedo","isAppleOS","primaryShift","primary","useEffect","subscribeHistory","NavigableToolbar","ToolbarButton","isRTL","redoIcon","undoIcon","disabled","undo","redo","isPressed","plus","isOpen","createPortal","contentContainer","settingIdToWidgetId","settingId","matches","match","parseInt","blockToWidget","block","existingWidget","widget","attributes","instance","encoded","hash","raw","rest","idBase","is_widget_customizer_js_value","encoded_serialized_instance","instance_hash_key","raw_instance","widgetClass","content","serialize","form","rendered","restExistingWidget","widgetToBlock","number","_raw$content","parsedBlocks","parse","__unstableSkipAutop","createBlock","addWidgetIdToBlock","FocusControlContext","createContext","FocusControl","api","sidebarControls","focusedWidgetIdRef","setFocusedWidgetIdRef","current","focusWidget","useCallback","widgetId","sidebarControl","setting","includes","sectionInstance","expand","completeCallback","handleFocus","previewBound","handleReady","previewer","preview","bind","unbind","context","Provider","useFocusControl","useContext","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","ExperimentalBlockEditorProvider","blockEditorPrivateApis","SidebarEditorProvider","settings","blocks","onInput","onChange","setBlocks","getWidgets","subscribe","prevWidgets","nextWidgets","prevBlocks","prevWidgetsMap","prevBlocksMap","getWidgetIdFromBlock","nextBlocks","nextWidget","prevWidget","isShallowEqual","onChangeBlocks","nextBlock","prevBlock","getWidget","fastDeepEqual","addedWidgetIds","setWidgets","reduce","updatedNextBlocks","addedWidgetId","slice","useSidebarBlockEditor","selectBlock","blocksRef","useRef","focusedBlock","find","clientId","blockNode","querySelector","focus","useBlocksFocusControl","useSubRegistry","WelcomeGuide","toggle","preferencesStore","isEntirelyBlockWidgets","every","startsWith","srcSet","media","src","width","height","alt","ExternalLink","KeyboardShortcuts","save","event","preventDefault","Register","unregisterShortcut","BlockAppender","isBlocksListEmpty","getBlockCount","ownerDocument","activeElement","body","ButtonBlockAppender","ExperimentalBlockCanvas","BlockCanvas","BlockKeyboardShortcuts","blockLibraryPrivateApis","SidebarBlockEditor","blockEditorSettings","close","updater","selectStore","useInserter","isMediumViewport","useViewportMatch","hasUploadPermissions","keepCaretInsideBlock","isWelcomeGuideActive","_select$canUser","coreStore","canUser","kind","mediaUploadBlockEditor","onError","argumentsObject","uploadMedia","wpAllowedMimeTypes","allowedMimeTypes","message","__experimentalSetIsInserterOpened","mediaUpload","hasFixedToolbar","__unstableHasCustomAppender","Header","BlockToolbar","hideDragHandle","shouldIframe","styles","defaultEditorStyles","BlockList","renderAppender","onSubmit","BlockInspector","__unstableBlockSettingsMenuFirstItem","onClose","BlockInspectorButton","SidebarControlsContext","SidebarControls","activeSidebarControl","CustomizeWidgets","setActiveSidebarControl","parentContainer","popoverRef","hasSelectedBlock","hasMultiSelection","clearSelectedBlock","container","ownerWindow","defaultView","handleClearSelectedBlock","element","contains","closest","expanded","handleMouseDown","handleBlur","addEventListener","removeEventListener","useClearSelectedBlock","unsubscribers","forEach","unsubscriber","activeSidebar","sidebarAdapter","popover","Popover","Slot","SlotFillProvider","getInspectorSectionId","sidebarId","wp","parseWidgetId","widgetIdToSettingId","SidebarAdapter","locked","widgetsCache","WeakMap","subscribers","history","_getWidgetIds","historyIndex","historySubscribers","_debounceSetHistory","leading","callback","timerID","isLeading","debounced","args","result","apply","clearTimeout","setTimeout","cancel","debounce","_pushHistory","_replaceHistory","_handleSettingChange","_handleAllSettingsChange","add","delete","_emit","listener","_createWidget","widgetModel","customize","Widgets","availableWidgets","findWhere","id_base","set","settingArgs","transport","data","selectiveRefreshableWidgets","create","_removeWidget","remove","_updateWidget","_updateWidgets","nextWidgetIds","push","filter","_seek","currentWidgets","widgets","getInserterId","controlId","withMoveToSidebarToolbarItem","createHigherOrderComponent","BlockEdit","useSidebarControls","useActiveSidebarControl","hasMultipleSidebars","blockName","canInsertBlockInSidebar","canInsertBlockType","getBlock","removeBlock","BlockControls","MoveToWidgetArea","widgetAreas","params","currentWidgetAreaId","sidebarControlId","newSidebarControl","oldSetting","newSetting","reverse","addFilter","replaceMediaUpload","MediaUpload","withWideWidgetDisplay","_wp$customize$Widgets","isWide","is_wide","DISABLED_BLOCKS","ENABLE_EXPERIMENTAL_FSE_BLOCKS","registerCoreBlockBindingsSources","editorPrivateApis","initialize","editorName","dispatch","setDefaults","fixedToolbar","welcomeGuide","blocksStore","reapplyBlockTypeFilters","coreBlocks","__experimentalGetCoreBlocks","registerCoreBlocks","registerLegacyWidgetBlock","__experimentalRegisterExperimentalCoreBlocks","enableFSEBlocks","registerLegacyWidgetVariations","registerWidgetGroupBlock","setFreeformContentHandlerName","SidebarControl","Control","ready","InserterOuterSection","OuterSection","onChangeExpanded","section","each","collapse","sectionConstructor","outer","activeElementBeforeExpanded","keyCode","ESCAPE","code","defaultPrevented","stopPropagation","addClass","isFromInternalAction","searchBox","tabbable","getInserterOuterSection","onChangeSectionExpanded","unchanged","subscriber","getSidebarControl","reduceMotionMediaQuery","matchMedia","isReducedMotion","Section","InspectorSection","options","parentSection","_isOpen","triggerActiveCallbacks","classList","isContextuallyActive","manualTransition","allowMultiple","active","callbacks","fireWith","getInspectorSection","customizeAction","join","hasSubSectionOpened","_args","controls","control","removeClass","handleTransitionEnd","one","getSidebarSection","controlConstructor","sidebar_block_editor","createElement","appendChild","createRoot","StrictMode"],"sourceRoot":""}