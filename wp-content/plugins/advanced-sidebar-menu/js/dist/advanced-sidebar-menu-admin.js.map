{"version":3,"file":"advanced-sidebar-menu-admin.js","mappings":"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","sources":["webpack://@onpointplugins/advanced-sidebar-menu/./js/src/pcss/admin.pcss","webpack://@onpointplugins/advanced-sidebar-menu/external var \"jQuery\"","webpack://@onpointplugins/advanced-sidebar-menu/webpack/bootstrap","webpack://@onpointplugins/advanced-sidebar-menu/webpack/runtime/define property getters","webpack://@onpointplugins/advanced-sidebar-menu/webpack/runtime/hasOwnProperty shorthand","webpack://@onpointplugins/advanced-sidebar-menu/webpack/runtime/make namespace object","webpack://@onpointplugins/advanced-sidebar-menu/./js/src/admin.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {};","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './pcss/admin.pcss';\n\n/**\n * @todo Cleanup this entire file. It's legacy code that needs to be refactored.\n */\n\n\n/**\n * Misc JS for the widget forms in various contexts.\n *\n * @notice `\\Advanced_Sidebar_Menu\\Scripts::init_widget_js` is using this in PHP.\n * @notice `\\Advanced_Sidebar_Menu\\Widget\\Widget_Abstract::checkbox` is using this in PHP.\n */\nwindow.advancedSidebarMenuAdmin = {\n\n\t/**\n\t * Called by PHP so this will run no matter where the widget is loaded.\n\t * This solves issues with page builders as well as widget updating.\n\t *\n\t * For WP 5.8+ this is called via the 'widget-added' event.\n\t *\n\t * @since 7.4.5\n\t */\n\tinit() {\n\t\tthis.handlePreviews();\n\t\tthis.showHideElements();\n\t\t$( document ).trigger( 'advanced-sidebar-menu/init' );\n\t},\n\t/**\n\t * Toggle the visibility of the widget form elements.\n\t *\n\t * Triggered via PHP.\n\t *\n\t * @see \\Advanced_Sidebar_Menu\\Widget\\Widget_Abstract::checkbox\n\t */\n\tclickReveal( id: string ) {\n\t\tconst target = $( ( '[data-js=\"' + id + '\"]' ) );\n\t\ttarget.toggle();\n\t\tthis.setHideState( target );\n\t},\n\n\t/**\n\t * Set the data attribute to the current show/hide state, so we\n\t * can track its visibility and not improperly show/hide an element\n\t * when a widget is saved.\n\t *\n\t * Solves the issue where updating one widget could affect another.\n\t */\n\tsetHideState( el: JQuery ) {\n\t\tif ( el.is( ':visible' ) ) {\n\t\t\tel.data( 'advanced-sidebar-menu-hide', 0 );\n\t\t} else {\n\t\t\tel.data( 'advanced-sidebar-menu-hide', 1 );\n\t\t}\n\t},\n\n\t/**\n\t * Use JS to show/hide widget elements instead of PHP because sometimes widgets are loaded\n\t * in weird ways like ajax, and we don't want any fields hidden if the JS is never loaded\n\t * to later show them\n\t *\n\t */\n\tshowHideElements() {\n\t\t$( '[data-advanced-sidebar-menu-hide]' ).each( function() {\n\t\t\tconst el = $( this );\n\t\t\tif ( 1 === el.data( 'advanced-sidebar-menu-hide' ) ) {\n\t\t\t\tel.hide();\n\t\t\t} else {\n\t\t\t\tel.show();\n\t\t\t}\n\t\t} );\n\t},\n\n\t/**\n\t * Display the preview image and close icon when the \"Preview\"\n\t * button is clicked.\n\t *\n\t * Adds a class to the wrap which allows hiding the existing options\n\t * to prevent inconsistent margin requirements.\n\t *\n\t * @since 8.1.0\n\t */\n\thandlePreviews() {\n\t\t/**\n\t\t * Failsafe in case the image cannot load from onpointplugins.com.\n\t\t * Better to not have a preview than a broken one.\n\t\t */\n\t\t$( '[data-js=\"advanced-sidebar-menu/pro/preview/image\"]' )\n\t\t\t.on( 'error', function( ev ) {\n\t\t\t\t$( ev.target ).parent().parent()\n\t\t\t\t\t.find( '[data-js=\"advanced-sidebar-menu/pro/preview/trigger\"]' ).remove();\n\t\t\t\t$( ev.target ).remove();\n\t\t\t} );\n\n\t\t$( '[data-js=\"advanced-sidebar-menu/pro/preview/trigger\"]' ).on( 'click', function( ev ) {\n\t\t\tev.preventDefault();\n\t\t\tconst el = $( '[data-js=\"' + $( this ).data( 'target' ) + '\"]' );\n\t\t\tconst form = el.parents( 'form' );\n\t\t\tform.addClass( 'advanced-sidebar-menu-open' );\n\t\t\tconst close = el.find( '.advanced-sidebar-menu-close-icon' );\n\t\t\tconst img = el.find( 'img' );\n\t\t\timg.css( 'width', '100%' );\n\t\t\tclose.css( 'display', 'block' );\n\t\t\tclose.on( 'click', function() {\n\t\t\t\timg.css( 'width', 0 );\n\t\t\t\tclose.css( 'display', 'none' );\n\t\t\t\tform.removeClass( 'advanced-sidebar-menu-open' );\n\t\t\t} );\n\t\t} );\n\t},\n};\n\n/**\n * WP 5.8 no longer fires the <script> tag within the PHP because\n * it loads the markup via the REST API. We must use the new\n * event to init the JS.\n *\n * @link https://developer.wordpress.org/block-editor/how-to-guides/widgets/legacy-widget-block/\n */\n$( document ).on( 'widget-added', function() {\n\twindow.advancedSidebarMenuAdmin.init();\n} );\n"],"names":["window","advancedSidebarMenuAdmin","init","handlePreviews","showHideElements","$","document","trigger","clickReveal","id","target","toggle","setHideState","el","is","data","each","hide","show","on","ev","parent","find","remove","preventDefault","form","parents","addClass","close","img","css","removeClass"],"sourceRoot":""}