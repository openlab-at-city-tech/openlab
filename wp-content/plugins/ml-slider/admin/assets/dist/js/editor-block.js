/*! For license information please see editor-block.js.LICENSE.txt */
(()=>{"use strict";var e={251:(e,t,r)=>{var i=r(196),n=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;n=o("react.element"),o("react.fragment")}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var i,o={},c=null,d=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,i)&&!a.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:n,type:e,key:c,ref:d,props:o,_owner:s.current}}t.jsx=c,t.jsxs=c},893:(e,t,r)=>{e.exports=r(251)},196:e=>{e.exports=window.React}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}(()=>{var e=r(893);const t=(0,e.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 255.8 255.8",xmlSpace:"preserve",children:(0,e.jsx)("g",{children:(0,e.jsx)("path",{d:"M127.9,0C57.3,0,0,57.3,0,127.9c0,70.6,57.3,127.9,127.9,127.9c70.6,0,127.9-57.3,127.9-127.9C255.8,57.3,198.5,0,127.9,0z M16.4,177.1l92.5-117.5L124.2,79l-77.3,98.1H16.4z M170.5,177.1l-38.9-49.4l15.5-19.6l54.4,69H170.5z M208.5,177.1L146.9,99 l-61.6,78.2h-31l92.5-117.5l92.5,117.5H208.5z"})})});function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,s=void 0,s=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(s)?s:String(s)),n)}var o,s}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,r)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var c=window.wp,d=window.React,u=c.components,p=u.Placeholder,h=u.Spinner,f=c.i18n.__,w=c.apiRequest;const m=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(m,r);var i,a,c,u=s(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=u.call(this,e)).state={height:200,previewIsLoading:!0,slideshowId:null,html:"",previewErrorMessage:""},t.handleOnLoad=t.handleOnLoad.bind(l(t)),t.setHeight=t.setHeight.bind(l(t)),t.getPreview=t.getPreview.bind(l(t)),t.handleResize=t.handleResize.bind(l(t)),t.iframe=d.createRef(),t}return i=m,(a=[{key:"componentDidMount",value:function(){this.getPreview(),window.addEventListener("resize",this.handleResize),this.props.componentDidMount&&this.props.componentDidMount(this)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),this.props.componentWillUnmount&&this.props.componentWillUnmount()}},{key:"componentDidUpdate",value:function(e){this.props.slideshowId===e.slideshowId&&this.props.refresh===e.refresh||(this.setHeight(200),this.getPreview(),this.iframe.current.contentDocument.location.reload(!0))}},{key:"handleOnLoad",value:function(e){var t=this;this.state.html&&(this.iframe.current.contentDocument.editor_block=this,setTimeout((function(){clearInterval(t.loadInterval),t.setHeight(t.iframe.current.contentDocument.body.clientHeight)}),50),this.setState({previewIsLoading:!1}))}},{key:"handleResize",value:function(e){this.setHeight(this.iframe.current.contentDocument.body.clientHeight)}},{key:"setHeight",value:function(e){this.setState({height:e>200?e:200})}},{key:"getPreview",value:function(){var e=this;try{this.setState({html:"",previewIsLoading:!0,previewErrorMessage:""}),w({path:"/metaslider/v1/slideshow/preview",data:{action:"ms_get_preview",slideshow_id:this.props.slideshowId,override_preview_style:!0}}).then((function(t){e.setState({html:t.data}),e.setHeight(e.iframe.current.contentDocument.body.clientHeight)})).fail((function(t){410===t.status?(e.setState({previewIsLoading:!1,previewErrorMessage:t.responseJSON.data.message}),console.error("MetaSlider (Gutenberg): Slideshow not found:",t)):console.error("MetaSlider (Gutenberg): Could not load the preview:",t)}))}catch(e){console.error("MetaSlider (Gutenberg): A general error occured:",e)}}},{key:"render",value:function(){return(0,e.jsxs)("div",{className:this.props.className+(this.state.previewIsLoading?"":" loading")+" ms-preview",children:[(0,e.jsx)("iframe",{height:this.state.height,srcDoc:this.state.html||"",onLoad:this.handleOnLoad,ref:this.iframe},"preview-iframe"),(0,e.jsx)("div",{className:"ms-preview__trigger"},"trigger"),this.state.previewIsLoading&&(0,e.jsxs)(p,{className:"ms-loader",label:[t," MetaSlider"],children:[(0,e.jsx)(h,{})," ",f("Loading slideshow","ml-slider")]},"ms-loader"),this.state.previewErrorMessage&&(0,e.jsx)(p,{className:"ms-loader",label:[t," MetaSlider"],children:this.state.previewErrorMessage},"ms-preview-empty")]})}}])&&n(i.prototype,a),c&&n(i,c),Object.defineProperty(i,"prototype",{writable:!1}),m}(d.Component);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=window.wp,j=S.i18n.__,x=S.components.Toolbar,_={normal:{icon:"align-center",title:j("Normal width","ml-slider")},wide:{icon:"align-wide",title:j("Wide width","ml-slider")},full:{icon:"align-full-width",title:j("Full width","ml-slider")}},O=["normal","wide","full"];function P(t){var r=t.value,i=t.onChange,n=t.controls;var o=void 0===n?O:n;return(0,e.jsx)(x,{controls:o.map((function(e){return g(g({},_[e]),{},{isActive:r===e,onClick:(t=e,function(){return i(r===t?void 0:t)})});var t}))})}var E=window.wp,C=E.i18n.__,k=E.components.SelectControl;function I(t){var r=t.props,i=r.attributes.slideshowId,n=r.slideshows;return(0,e.jsx)(k,{label:C("Select a slideshow","ml-slider"),value:i,options:[{label:"-- "+C("Select a slideshow","ml-slider")+" --",value:0}].concat(n.items.map((function(e){return{key:e.id,label:E.htmlEntities.decodeEntities(e.title)+" (#"+e.id+")",value:e.id}}))),onChange:function(e){e=parseInt(e),r.setAttributes({slideshowId:e})}})}var L=window.wp,M=L.i18n.__,R=L.components.Toolbar;function N(t){t.value,t.onChange;var r=t.onClick;return(0,e.jsx)(R,{controls:[{icon:"update",title:M("Update preview","ml-slider"),isActive:!1,onClick:r}]})}const D=window.wp.blockEditor;var T=window.wp,H=T.i18n.__,z=T.element.Fragment,A=T.data.withSelect,W=T.components,B=W.TextControl,U=W.Placeholder,q=W.Spinner,F=W.PanelBody,G=W.BaseControl,$=window.metaslider_block_config||{};const J=A((function(e){return{wideControlsEnabled:e("core/editor")&&"post"===e("core/editor").getCurrentPostType()&&e("core/editor").getEditorSettings().alignWide}}))((function(r){var i=r.slideshows,n=r.className,o=r.isSelected,s=r.wideControlsEnabled,l=void 0!==s&&s,a=r.attributes.slideshowId,c=r.attributes.stretch,d=r.attributes.containerClass,u=i.isLoading,p=i.items.length||!1,h=r.attributes.refreshPreview,f=o&&(0,e.jsxs)(z,{children:[(0,e.jsx)(D.InspectorControls,{children:(0,e.jsxs)(F,{title:H("Slideshow settings","ml-slider"),children:[p&&(0,e.jsx)(I,{props:r}),0!==a&&(0,e.jsx)("a",{href:$.plugin_page+"&id="+a,target:"_blank",className:"ms-edit-current-slideshow",children:H("Edit slideshow","ml-slider")}),l&&(0,e.jsx)(G,{label:H("Slideshow width","ml-slider"),children:(0,e.jsx)(P,{value:c,onChange:function(e){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),50),r.setAttributes({stretch:e})}})})]})},"inspector"),(0,e.jsx)(D.InspectorAdvancedControls,{children:(0,e.jsx)(G,{label:H("Additional CSS Class","ml-slider"),children:(0,e.jsx)(B,{value:d,onChange:function(e){r.setAttributes({containerClass:e})}})})}),(0,e.jsxs)(D.BlockControls,{children:[l&&(0,e.jsx)(P,{label:H("Slideshow width","ml-slider"),value:c,onChange:function(e){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),50),r.setAttributes({stretch:e})}}),0!==a&&(0,e.jsx)(N,{label:H("Refresh preview","ml-slider"),onClick:function(){r.setAttributes({refreshPreview:!h})}},"refresh")]},"controls")]},"inspectorControls");return p||a||!u?p||a||u?[f,!!a&&(0,e.jsx)(m,{className:n,src:$.preview_url+"&slideshow_id="+a,slideshowId:a,isSelected:o,refresh:h},"preview"),!a&&(0,e.jsx)(U,{className:r.className,label:[t," MetaSlider"],children:(0,e.jsx)(I,{props:r},"slidehow-selector")},"instructions")]:(0,e.jsxs)(U,{className:n,label:[t," MetaSlider"],children:[H("No slideshows found.","ml-slider")," ",(0,e.jsx)("a",{target:"_blank",href:$.plugin_page,children:H("Create one now!","ml-slider")})]}):(0,e.jsxs)(U,{className:n,label:[t," MetaSlider"],children:[(0,e.jsx)(q,{},"spinner")," ",H("Loading slideshows list...","ml-slider")]})}));var X=window.wp.element.Fragment;const Y=function(t){var r=t.attributes,i=r.slideshowId,n=r.stretch,o=r.containerClass,s=n?"align"+n:"";return!!i&&(0,e.jsx)(X,{children:(0,e.jsxs)("div",{class:s,children:["[metaslider id=",i,' cssclass="',o,'"]']})})||""};var K=window.wp,Q=K.i18n.__,V=K.blocks.registerBlockType,Z=K.data,ee=Z.registerStore,te=Z.dispatch,re=Z.withSelect,ie=K.apiRequest,ne={items:[],isLoading:!0};ee("metaslider",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return"SET_SLIDESHOWS"===t.type?{items:t.items,isLoading:!1}:e},actions:{setSlideshows:function(e){return{type:"SET_SLIDESHOWS",items:e}}},selectors:{getSlideshows:function(e){return e}},resolvers:{getSlideshows:function(e,t){try{ie({path:"/metaslider/v1/slideshow/list"}).then((function(e){!0===e.success?te("metaslider").setSlideshows(e.data):(console.warn("MetaSlider: API Request error:",e.data.message),te("metaslider").setSlideshows([]))}))}catch(e){console.warn("MetaSlider: API Request error:",e),te("metaslider").setSlideshows([])}}}}),V("metaslider/slider",{title:"MetaSlider",description:Q("Use MetaSlider to insert slideshows and sliders in your page","ml-slider"),icon:t,category:"common",keywords:[Q("slider","ml-slider"),Q("slideshow","ml-slider"),Q("gallery","ml-slider")],attributes:{slideshowId:{type:"number",default:0},stretch:{type:"string",default:"normal"},containerClass:{type:"string",default:""}},supports:{customClassName:!1},edit:re((function(e,t){return{slideshows:(0,e("metaslider").getSlideshows)()}}))(J),save:function(e){return Y(e)},getEditWrapperProps:function(e){var t=e.stretch;if(-1!==["wide","full","normal"].indexOf(t))return{"data-align":t}}})})()})();