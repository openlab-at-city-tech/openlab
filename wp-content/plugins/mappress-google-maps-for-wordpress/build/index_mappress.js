(()=>{var t={273:(t,i,o)=>{"use strict";o.r(i);const n=wp.element.createElement,{Fragment:s,useEffect:a,useLayoutEffect:l,useRef:p,useState:r}=wp.element,__=t=>wp.i18n.__(t,"mappress-google-maps-for-wordpress");function h(t){const[i,o]=r({saddr:t.saddr?t.saddr:"",daddr:t.daddr?t.daddr:""});function s(t){o((e=>({...e,...t})))}function a(o,n){switch(o){case"close":t.onClose&&t.onClose();break;case"get-directions":l();break;case"keydown":13==e.which?a("get-directions"):27==e.which&&a("close");break;case"swap":s({saddr:i.daddr,daddr:i.saddr})}}function l(){let t=mappl10n.options.directionsServer;const e=i.saddr.trim(),o=i.daddr.trim();t="https://maps.google.com"==t?"https://www.google.com":t,-1==t.toLowerCase().indexOf("http")&&(t="https://"+t),t+="/maps/dir/?api=1&origin="+encodeURIComponent(e)+"&destination="+encodeURIComponent(o),window.open(t),a("close")}return"google"==mappl10n.options.directions?(l(),null):n("div",{className:"mapp-directions-component"},n("div",{className:"mapp-close",onClick:()=>a("close")}),n("div",null,n("input",{className:"mapp-dir-saddr",onChange:t=>s({saddr:t}),onKeyPress:t=>a("keydown",t.which),tabIndex:"1",placeholder:__("My location"),value:i.saddr}),n("div",{className:"mapp-dir-arrows",onClick:()=>a("swap")})),n("div",null,n("input",{className:"mapp-dir-daddr",onChange:t=>s({daddr:t}),onKeyPress:t=>a("keydown",t.which),tabIndex:"2",value:i.daddr})),n("div",{className:"mapp-dir-toolbar"},n("div",{className:"mapp-submit-button",onClick:()=>a("get-directions")},__("Get Directions"))))}window.mapp=window.mapp||{};const d=wp.element.createElement,c=t=>wp.i18n.__(t,"mappress-google-maps-for-wordpress"),_n=wp.i18n._n;var g;g=jQuery,mapp.Map=function(t,e){this.defaults={alignment:null,center:null,classname:null,editable:null,embed:null,height:null,initialOpenInfo:null,layers:null,layout:null,mapid:null,mapTypeId:null,metaKey:null,mapOpts:null,name:null,poiList:null,poiListOpen:null,poiListPageSize:null,pois:null,postid:null,query:null,search:null,sel:null,title:null,width:null,zoom:null},this.dirty=!1,this.hovered=null,this.isFullscreen=!1,this.iw=null,this.mapdata=t,this.opened=null,this.pagination={count:0,page:1},this.places=null,this.selected=null,this.settings=e||{},this.templates=null,this.clusterer=null,this.dir_=null,this.div={},this.layers_={},this.map_=null,this.modal_=null,this.pois_=[],this.user_=null,this.xhr_,_.extend(this,this.defaults,this.mapdata,this.settings),this.poiList=void 0!==this.poiList&&null!=this.poiList?this.poiList:mappl10n.options.poiList,this.layout=this.layout?this.layout:mappl10n.options.layout,this.postid=this.postid?this.postid:mappl10n.options.postid},mapp.Map.prototype={display:function(){this.render(),this.div&&this.div.layout&&(this.sanity(),this.editable?this.templates={loop:"edit-loop",item:"edit-item",popup:"edit-popup"}:this.query?this.templates={loop:"map-loop",item:"mashup-item",popup:"mashup-popup"}:this.templates={loop:"map-loop",item:"map-item",popup:"map-popup"},"leaflet"==mappl10n.options.engine?this.mapOpts=_.extend({attribution:'Map data <a href="https://openstreetmap.org">OpenStreetMap</a>',minZoom:0,scrollWheelZoom:mappl10n.options.scrollWheel,worldCopyJump:!0,zoomControl:null},this.mapOpts):this.mapOpts=_.extend({backgroundColor:"transparent",clickableIcons:!1,fullscreenControl:!1,mapTypeControl:!1,minZoom:0,scaleControl:!0,streetViewControl:!this.query,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}},this.mapOpts),this.mapOpts.minZoom=isNaN(parseInt(this.mapOpts.minZoom))?0:parseInt(this.mapOpts.minZoom),this.div&&this.div.canvas&&("leaflet"==mappl10n.options.engine?(this.map_=new L.Map(this.div.canvas.get(0),this.mapOpts),L.control.zoom({position:"bottomright",zoomInTitle:"",zoomOutTitle:""}).addTo(this.map_)):(this.map_=new google.maps.Map(this.div.canvas.get(0),{mapTypeId:"roadmap",zoom:1}),this.map_.setOptions(this.mapOpts),this.addLayers()),this.addGeolocateControl(),this.addMenu(),this.addPopup(),this.isFilterable()&&this.addFilters(),this.setMapTypeId(this.mapTypeId),this.clustering(),"postmodal"==mappl10n.options.mashupClick&&(this.modal_=new mapp.lib.Modal),this.places=new mapp.Places(g(".mapp-places",this.div.search),{map:this}),this.addUserLocation(),this.editable&&this.places.sel.focus(),g(this.places).on("search.mapp",((t,e)=>{this.onSearch(e)})),this.addEvents("click dragstart zoom_changed zoomstart",(t=>{"leaflet"==mappl10n.options.engine&&"click"==t.type&&t.originalEvent&&!t.originalEvent.target.matches(".mapp-canvas")||this.poiClose()})),this.div.layout.on("click","[data-mapp-action]",(t=>{if(this.div.list&&this.div.list.length&&g.contains(this.div.list.get(0),t.target))return;const e=g(t.currentTarget),i=e.attr("data-mapp-action"),o=e.attr("data-mapp-"+i);t.preventDefault(),this.onAction(i,o,e)})),this.div.list.on("click","[data-mapp-action]",(t=>{const e=g(t.currentTarget),i=e.attr("data-mapp-action"),o=e.attr("data-mapp-"+i);this.onAction(i,o,e)})),new ResizeObserver(((t,e)=>{document.fullscreenElement?this.isFullscreen=!0:(this.isFullscreen?this.isFullscreen=!1:this.poiClose(),this.toggleView("mini"),this.resize())})).observe(this.div.layout.get(0)),mapp.event.addListener(this.map_,"maptypeid_changed baselayerchange",(()=>{this.set({dirty:!0})})),this.places.parse(this.center,(t=>{this.center=t&&t.geometry&&t.geometry.location?{lat:t.geometry.location.lat,lng:t.geometry.location.lng}:null,this.setPois(this.pois),this.initCenter()})),this.div.list.on("mouseenter","[data-mapp-poi]",(t=>{var e=g(t.currentTarget).attr("data-mapp-poi");this.poiHover(this.pois_[e])})),this.div.list.on("mouseleave","[data-mapp-poi]",(t=>{this.poiHover(null)}))))},initCenter:function(){setTimeout((()=>{this.recenter(),this.renderList(),this.isSearchable&&!this.editable&&this.addSearchMove(),"leaflet"==mappl10n.options.engine?this.initOpen():mapp.event.addListenerOnce(this.map_,"idle",(()=>this.initOpen()))}),100)},initOpen:function(){const t=this.pois_.length?this.pois_[0]:null,e=null!=this.initialOpenInfo?this.initialOpenInfo:mappl10n.options.initialOpenInfo;t&&e&&!this.editable&&t.open()},addEvents:function(t,e){t=t.split(" ");for(var i=0;i<t.length;i++)mapp.event.addListener(this.map_,t[i],e)},addFilters:function(){g("body").on("click",(t=>{var e=g(t.target);e.hasClass("mapp-filters-toggle")||0!=e.closest(".mapp-filters-wrapper").length||this.div.layout.removeClass("mapp-view-filters")})),this.div.filters.on("change",(()=>{this.fetchPois()})),"top"==mappl10n.options.filtersPos&&new ResizeObserver(((t,e)=>{t.forEach((t=>{const e=this.div.canvas.get(0).clientHeight;g(".mapp-filters-body",this.div.layout).css({"max-height":e})}))})).observe(this.div.layout.get(0))},addGeolocateControl:function(){if(!mappl10n.options.ssl)return;const t=g(".mapp-geolocate-control-wrapper",this.div.layout).get(0);"google"==mappl10n.options.engine?this.map_.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t):(L.Control.Geolocate=L.Control.extend({onAdd:e=>t,onRemove:()=>{}}),new L.Control.Geolocate({position:"bottomright"}).addTo(this.map_))},addLayers:function(){this.layers_={traffic:new google.maps.TrafficLayer,bicycling:new google.maps.BicyclingLayer,transit:new google.maps.TransitLayer};for(var t=g.makeArray(this.layers),e=0;e<t.length;e++){var i=t[e].trim(),o=i.split(".").pop();this.layers_[i]?this.toggleLayer(i):"kml"==o||"kmz"==o?this.layers_[i]=new google.maps.KmlLayer({map:this.map_,preserveViewport:!0,url:i}):"json"==o&&(this.layers_[i]=new google.maps.Data({map:this.map_}).loadGeoJson(i))}},addMenu:function(){g("body").on("click",(t=>{var e=g(t.target),i=e.attr("data-mapp-action");e==this.div.menu||"menu-toggle"==i||e.closest(this.div.menu).length||this.toggleView("menu",!1)}))},addPopup:function(){var t=this.editable?"mapp-iw-edit":"mapp-iw";this.editable||(t+=" mapp-"+this.templates.popup),this.div.iw=g('<div class="'+t+'">').appendTo(this.div.canvas),this.iw=new mapp.Infobox(this.map_,{className:this.editable?"mapp-ib-edit":""}),this.iw.setContent(this.div.iw.get(0)),this.div.iw.on("click",".mapp-close",(()=>{this.poiClose()}))},addSearchMove:function(){},addUserLocation:function(){mappl10n.options.userLocation&&mappl10n.options.ssl&&this.places.geolocate((t=>{if(t&&t.geometry&&t.geometry.location){const e=t.geometry.location,i=mapp.Icons.get("geolocation");"leaflet"==mappl10n.options.engine?this.user_=L.marker([e.lat,e.lng],{icon:i}).addTo(this.map_):(this.user_=new mapp.Marker({icon:i,position:new google.maps.LatLng(e.lat,e.lng)}),this.user_.setMap(this.map_))}}),!0)},clusterGetLatLng:function(t){if(this.clusterer){if("leaflet"==mappl10n.options.engine){var e=this.clusterer.getVisibleParent(t.overlay);return e?e.getLatLng():null}for(var i=this.clusterer.getClusters(),o=0;o<i.length;o++){var n=i[o].markers_;if(n.length>1)for(var s=0;s<n.length;s++)if(n[s]==t.overlay)return i[o].center_}}},clustering:function(){if(mappl10n.options.clustering&&!this.editable){let t=mappl10n.options.clusteringOptions?mappl10n.options.clusteringOptions:{};void 0!==t.disableClusteringAtZoom&&""==t.disableClusteringAtZoom&&(t.disableClusteringAtZoom=null),"leaflet"==mappl10n.options.engine?this.clusterer=L.markerClusterGroup(t):(t=_.extend(t,{imagePath:mappl10n.options.baseurl+"/lib/js-markerclustererplus-main/images/m"}),this.clusterer=new MarkerClusterer(this.map_,[],t))}},clustersReset:function(){this.clusterer&&("leaflet"==mappl10n.options.engine?this.clusterer.clearLayers():this.clusterer.clearMarkers())},clustersSet:function(){if(this.clusterer){var t=[];for(let e=0;e<this.pois_.length;e++)this.pois_[e].type||t.push(this.pois_[e].overlay);"leaflet"==mappl10n.options.engine?(this.clusterer.addLayers(t),this.map_.addLayer(this.clusterer)):this.clusterer.addMarkers(t)}},fetchPois:function(t){var e=new Date;this.poiClose();var i={action:"mapp_query",filters:g(":input",this.div.filters).serialize(),list:!!this.div.list.length,query:this.query,url:{href:window.location.href,search:window.location.search},debug:mappl10n.options.debug};this.xhr_&&this.xhr_.abort("cancel"),this.spinner(!0),this.xhr_=mapp.lib.ajax({data:i,callback:(i,o)=>{this.spinner(!1),i&&"OK"==i.status&&(this.setPois(i.data.pois),this.renderList(),mappl10n.options.debug&&mapp.lib.log("Results: "+i.data.pois.length+" ("+o.responseText.length/1e3+"K)  AJAX: "+(new Date-e)+(i.data.timing?i.data.timing:"")),t&&t())}})},fitBounds:function(t){return this.map_.fitBounds(t)},getBounds:function(){try{return this.map_.getBounds()}catch(t){return null}},getCenter:function(){try{return this.map_.getCenter()}catch(t){return null}},getMap:function(){return this.map_},getPois:function(){return this.pois_},getZoom:function(){try{return this.map_.getZoom()}catch(t){return null}},isFilterable:function(){return mappl10n.options.pro&&mappl10n.options.filters&&mappl10n.options.filters.length>0&&!this.editable&&this.query},isSearchable:function(){return!!this.editable},onAction:function(t,e,i){switch(t){case"center":this.toggleView("menu",!1),this.poiClose(),this.recenter();break;case"dir":this.renderDirections({isOpen:!0,from:null,to:this.opened});break;case"dir-from":this.renderDirections({isOpen:!0,from:this.opened,to:null});break;case"filters-reset":this.div.filters.find(":input").each(((t,e)=>{"hidden"!=e.type&&("checkbox"==e.type||"radio"==e.type?g(e).prop("checked",!1):g(e).val(""))})),this.fetchPois();break;case"filters-toggle":this.toggleView("filters");break;case"geolocate":this.places.geolocate((t=>{t&&t.geometry&&t.geometry.location&&this.setView(t.geometry.location,parseInt(mappl10n.options.poiZoom))}));break;case"layer":this.toggleLayer(e),this.toggleView("menu",!1);break;case"menu-toggle":this.toggleView("menu");break;case"open":var o=i.attr("data-mapp-poi");this.poiOpen(this.pois_[o]);break;case"page":var n=parseInt(i.attr("data-mapp-page"));this.pagination.page=n,this.renderList();break;case"sidebar-toggle":this.toggleSidebar();break;case"view-map":this.toggleSidebar(!1);break;case"view-list":this.toggleSidebar(!0);break;default:return!0}},onSearch:function(t){if(t&&t.geometry){var e=t.geometry.location?t.geometry.location:null,i=t.geometry.viewport?t.geometry.viewport:null;if("leaflet"==mappl10n.options.engine)var o=new L.LatLng(e.lat,e.lng),n=i?new L.LatLngBounds(new L.LatLng(i.sw.lat,i.sw.lng),new L.LatLng(i.ne.lat,i.ne.lng)):o.toBounds(1e3*mappl10n.options.radius);else{var s=new google.maps.Circle({center:e,radius:1e3*mappl10n.options.radius});n=i?new google.maps.LatLngBounds(new google.maps.LatLng(i.sw.lat,i.sw.lng),new google.maps.LatLng(i.ne.lat,i.ne.lng)).union(s.getBounds()):s.getBounds()}n&&this.fitBounds(n),this.setView(e)}},poiClose:function(){this.poiHighlight(null),this.selected=null,this.opened=null,this.hovered=null,this.iw.close(),this.renderDirections({isOpen:!1}),g(this).triggerHandler("mapp.close")},poiHighlight:function(t){if("icon"!=mappl10n.options.highlight||"leaflet"!=mappl10n.options.engine||!this.editable){if(g("[data-mapp-poi]",this.div.list).removeClass("mapp-selected"),this.hovered&&this.hovered.highlight(!1),t){var e=g.inArray(t,this.pois_);g('[data-mapp-poi="'+e+'"]',this.div.list).addClass("mapp-selected"),t.highlight(!0)}this.selected&&(e=g.inArray(this.selected,this.pois_),g('[data-mapp-poi="'+e+'"]',this.div.list).addClass("mapp-selected"))}},poiHover:function(t){t&&this.opened==t||(mappl10n.options.tooltips||(this.poiHighlight(null),this.hovered=null),t&&(this.poiHighlight(t),this.hovered=t,mappl10n.options.tooltips&&!this.editable&&this.popupOpen(t,null,"popup")))},poiInsert:function(t){this.pois_.unshift(t),t.setMap(this),this.renderList(),this.set({dirty:!0})},poiOpen:function(t,e){if(this.poiClose(),this.selected=t,this.poiHighlight(t),this.query&&t.postid&&t.url&&!this.editable)switch(mappl10n.options.mashupClick){case"post":return void window.location.assign(t.url);case"postnew":return void window.open(t.url);case"postmodal":return this.modal_.open(),this.modal_.setContent('<div class="mapp-modal-spinner">'),void t.fetchPost((()=>this.modal_.setContent(t.html)))}this.div.layout.hasClass("mapp-view-mini")&&this.toggleSidebar(!1),this.popupOpen(t,e,"popup"),g(this).triggerHandler("mapp.open",t)},poiRemove:function(t){var e=g.inArray(t,this.pois_);-1!=e&&(this.pois_[e].setMap(null),this.pois_.splice(e,1),this.renderList()),this.set({dirty:!0})},popupClose:function(){"icon"==mappl10n.options.highlight&&"leaflet"==mappl10n.options.engine&&this.editable||(this.iw.close(),this.renderDirections({isOpen:!1}),this.opened=null,g(this).triggerHandler("mapp.close"))},popupOpen:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"popup",o=null;this.popupClose(),e&&e.featureData?o=e.featureData:e&&e.propagatedFrom&&e.propagatedFrom.feature&&e.propagatedFrom.feature.properties&&(o=e.propagatedFrom.feature.properties),this.div.iw.html(t.render(i,o)),this.div.iw.toggleClass(" mapp-thumb-"+mappl10n.options.thumbsPopup,!!t.thumbnail);var n=this.clusterGetLatLng(t),s=n||t.getPosition(e);this.iw.open({position:s,anchorPoint:t.getAnchorPoint(e)}),this.opened=t},recenter:function(){var t=this.center&&this.center.hasOwnProperty("lat")&&this.center.hasOwnProperty("lng")?this.center:null,e=this.zoom&&parseInt(this.zoom)?parseInt(this.zoom):null;if(t&&!e&&this.query)return void this.onSearch({geometry:{location:{lat:t.lat,lng:t.lng}}});if(t)return void this.setView(t,e||1);if(0==this.pois_.length)return void this.setView({lat:0,lng:0},e||1);if(1==this.pois_.length)return void this.pois_[0].center(e);let i="leaflet"==mappl10n.options.engine?new L.LatLngBounds:new google.maps.LatLngBounds;for(var o=0;o<this.pois_.length;o++){var n=this.pois_[o].getBounds(),s=this.pois_[o].getPosition();i=n?"leaflet"==mappl10n.options.engine?i.extend(n):i.union(n):i.extend(s)}e?this.setView(i.getCenter().toJSON(),e):this.fitBounds(i)},render:function(){let t=this.name?this.name+"-layout":"",e="mapp-layout",i=this.layout&&window.parent==window?this.layout:"left";if(e+="left"==i?" mapp-list-left":" mapp-inline",e+="leaflet"==mappl10n.options.engine?" mapp-leaflet ":" mapp-google ",e+=this.classname?" "+this.classname:"",!document.body.classList.contains("block-editor-page")){let t=this.alignment?this.alignment:mappl10n.options.alignment;if(t){let i=" align"+t+" mapp-align-"+t;window.parent==window?e+=i:g(window.frameElement).parent().parent().addClass(i)}}var o=mapp.lib.template("map",{map:this,layout:i});if(this.sel){if(this.div.layout=g(this.sel),this.div.layout.html(o),this.div.layout.addClass(e),this.div.layout.attr("id",t),!this.div.layout.length)return mapp.lib.log("MapPress: Missing map name or container for map: "+this.name)}else{let i=g('<div id="'+t+'" class="'+e+'">');i.html(o);let n=g("#"+this.name+"-layout");if(!n.length)return mapp.lib.log("MapPress: Missing map name or container for map: "+this.name);n.replaceWith(i),this.div.layout=i}g.each(["canvas","content","controls","directions","filters","header","list","menu","search","sidebar","wrapper"],((t,e)=>{this.div[e]=g(".mapp-"+e,this.div.layout)})),this.setSize({width:this.width,height:this.height}),this.set({poiList:this.poiList})},renderDirections:function(t){let{isOpen:e,from:i,to:o}=t;if(e){const t=o?o.getAddress():"",e=i?i.getAddress():"";this.toggleView("directions",!0),wp.element.render(d(h,{saddr:e,daddr:t,onClose:()=>{wp.element.unmountComponentAtNode(this.div.directions.get(0)),this.toggleView("directions",!1)}}),this.div.directions.get(0))}else this.div.directions.legnth&&wp.element.unmountComponentAtNode(this.div.directions.get(0)),this.toggleView("directions",!1)},renderList:function(){var t=this.getBounds(),e=0;if(this.editable)return void this.div.layout.trigger("mapp.render");if(!this.poiList)return;let i=parseInt(mappl10n.options.poiListPageSize);i=isNaN(i)?20:i;const o=i*(this.pagination.page-1),n=o+i;if(!this.editable)for(var s=0;s<this.pois_.length;s++){let i=this.pois_[s];i.visible=!1,this.isSearchable()?t&&t.contains(i.getPosition())&&(i.visible=!0,e++):(i.visible=!0,e++),i.visible=e>=o&&e<=n&&i.visible}this.pagination.count=e,this.pagination.countString=sprintf(_n(c("%d Result"),c("%d Results"),this.pagination.count),this.pagination.count),this.div.list.html(mapp.lib.template(this.templates.loop,{map:this,pois:this.pois_,pageSize:i,pagination:this.pagination})),g(".mapp-filters-count",this.filters).html(this.pagination.countString),mappl10n.options.thumbsList&&this.div.list.addClass(" mapp-thumb-"+mappl10n.options.thumbsList)},renderMenu:function(){for(var t in this.layers_)g('[data-mapp-layer="'+t+'"]',this.div.layout).toggleClass("mapp-active",null!=this.layers_[t].getMap())},resetPois:function(){for(var t=0;t<this.pois_.length;t++)this.pois_[t].setMap(null);this.pois_=[],this.clustersReset()},resize:function(){this.map_&&("leaflet"==mappl10n.options.engine?this.map_.invalidateSize():mapp.event.trigger(this.map_,"resize"),this.toggleView("mini"))},sanity:function(){const t="<a href='"+mappl10n.options.adminurl+"/admin.php?page=mappress'>"+c("MapPress Settings")+"</a>",e=jQuery&&jQuery.ui?jQuery.ui.version:"0.0",i="<a href ='http://mappresspro.com/mappress-faq' target='_blank'>"+c("MapPress FAQ")+"</a>",o="<a href='http://mappresspro.com/chris-contact', target='_blank'>"+c("contact support")+"</a>",n="<br/>"+sprintf(c("Please see the %s for help, or %s and provide this error message."),i,o),s=sprintf("<div class='mapp-errors-toolbar'><div class='mapp-errors-apikey'>%s</a></div>",c("Get an API Key"));this.div.layout.on("click",".mapp-errors-apikey",(()=>{window.open("https://mappresspro.com/how-to-get-a-google-maps-api-key")}));let a=[{condition:"leaflet"==mappl10n.options.engine&&"undefined"==typeof L,title:c("Leaflet library not loaded"),text:c("A theme or plugin is preventing the Leaflet library from loading.")+n},{condition:"google"==mappl10n.options.engine&&"undefined"==typeof google,title:c("Google Maps API not loaded"),text:c("A theme or plugin is preventing Google Maps from loading.")+n},{condition:"google"==mappl10n.options.engine&&!mappl10n.options.apikey,title:c("Google Maps API key required"),text:sprintf(c("Please enter a Google Maps API key in the %s, or switch to Leaflet maps."),t)+s},{condition:g('script[src*="https://maps.googleapis.com/maps/api/js?v=3"]').length>1,title:c("Google Maps API loaded multiple times"),text:c("A theme or plugin has loaded Google Maps twice")+n},{condition:"undefined"==typeof _,title:c("Underscore library not loaded"),text:c("A theme or plugin is preventing the underscore.js library from loading.")+n},{condition:e<"1.12",title:sprintf(c("Obsolete jQuery version: %s, must be >= 1.12"),e),text:c("A theme or plugin is loading an obsolete version of jQuery.")+n}];if(_.map(a,(t=>{if(t.condition){mappl10n.options.admin&&this.sanityOutput({title:t.title,text:t.text?t.text:""});let e=jQuery("<span>"+t.text.replace("<br/>","\n")+"</span>").text();console.error(c("Map error")+": "+t.title+" - "+e)}})),"google"==mappl10n.options.engine){const t=console.error;console.error=e=>{(e.includes("Google Maps JavaScript API")||e.includes("You have exceeded your request quota")||e.includes("You have exceeded your daily quota"))&&mappl10n.options.admin&&(e=e.replace(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi,((t,e,i)=>{let o=i;return o.match("^https?://")||(o="http://"+o),e+'<a href="'+o+'" target="_blank">'+i+"</a>"})),this.sanityOutput({title:c("Google Maps Error"),text:e})),t(e)}}},sanityOutput(t){if(!g(".mapp-errors-overlay",this.div.content).length){let t="<div class='mapp-errors-overlay'></div><div class='mapp-errors'><div class='mapp-errors-header'>"+c("Oops!  Something went wrong.")+"</div><div class='mapp-errors-list'></div></div>";this.div.content.prepend(t)}g(".mapp-errors-list",this.div.content).append("<div class='mapp-errors-title'>"+t.title+"</div><div class='mapp-errors-text'>"+t.text+"</div>")},set:function(t){for(let i in t){var e=t[i];switch(i){case"dirty":this.dirty=e;break;case"mapTypeId":this.mapTypeId=e,this.setMapTypeId(e);break;case"poiList":this.poiList=null==e?mappl10n.options.poiList:e,this.toggleSidebar(mappl10n.options.poiListOpen),this.toggleView("mini");break;case"search":this.search=e;break;case"style":this.setStyle(e);break;case"title":this.title=e;break;default:this[i]=e}}},setMapTypeId:function(t){const e=mappl10n.options.standardStyles.concat(mappl10n.options.userStyles),i=_.find(e,(e=>e.id==t));!mappl10n.options.style||"roadmap"!=t&&"streets"!=t&&i||(t=mappl10n.options.style);let o=_.find(e,(e=>e.id==t));o=o||e[0],this.setStyle(o)},setPois:function(t){if(this.resetPois(),t)for(var e=0;e<t.length;e++){var i=new mapp.Poi(t[e]);this.pois_.push(i),i.id=this.pois_.length-1,i.setMap(this)}this.clustersSet()},setSize:function(t){var e=mappl10n.options.sizes[mappl10n.options.size]?mappl10n.options.sizes[mappl10n.options.size]:mappl10n.options.sizes[0];let i={},o={};if(t&&t.hasOwnProperty("width")&&(i={width:t.width?t.width:e.width}),t&&t.hasOwnProperty("height")){let i=t.height?t.height:e.height;o="string"==typeof i&&i.includes("%")?{"padding-bottom":i,height:"auto"}:{"padding-bottom":0,height:i}}window.frameElement&&window.frameElement.classList.contains("mapp-iframe")?(g(window.frameElement).parent().parent().css(i),g(window.frameElement).parent().css(o)):this.embed?(i={height:"100%"},o={"padding-bottom":0,height:"100%"}):(this.div.layout.css(i),this.div.wrapper.css(o)),this.resize()},setStyle:function(t){if("leaflet"==mappl10n.options.engine){let e={mapbox:{accessToken:mappl10n.options.mapbox,attribution:['<a href="https://www.mappresspro.com" target="_blank">MapPress</a>','<a href="https://www.mapbox.com/about/maps" target="_blank">&copy; Mapbox<a/>','<a href="https://www.openstreetmap.org/about/" target="_blank">&copy; OpenStreetMap</a>'],url:"https://api.mapbox.com/styles/v1/{user}/{mapboxid}/tiles/256/{z}/{x}/{y}{r}?access_token={accessToken}&fresh=true",zoomOffset:0},osm:{attribution:['<a href="https://www.mappresspro.com" target="_blank">MapPress</a>','<a href="https://openstreetmap.org" target="_blank">Map data (c) OpenStreetMap</a>'],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}[t.provider],i=g.extend({},e,t);L.tileLayer(e.url,i).addTo(this.map_)}else if(this.map_.setMapTypeId("standard"==t.type?t.id:"roadmap"),t.json){let e=null;try{e=JSON.parse(t.json)}catch(t){mapp.lib.log("Invalid JSON in map style")}this.map_.setOptions({styles:e||null})}else this.map_.setOptions({styles:null})},setView:function(t,e,i){"leaflet"==mappl10n.options.engine?(null==e&&(e=this.map_.getZoom()?this.map_.getZoom():0),this.map_.setView(t,e,i)):(t=t&&!t.toJSON?{lat:parseFloat(t.lat),lng:parseFloat(t.lng)}:t,e=e?parseInt(e):null,t&&this.map_.setCenter(t),e&&this.map_.setZoom(e))},spinner:function(t){this.div.layout.toggleClass("mapp-busy",t)},toggleLayer:function(t,e){e=void 0!==e?e:null==this.layers_[t].getMap(),g.each(["traffic","bicycling","transit"],((t,e)=>{this.layers_[e].setMap(null)})),e&&this.layers_[t].setMap(this.map_)},toggleSidebar:function(t){this.div.layout.toggleClass("mapp-sidebar-open",t),this.isSidebarOpen=t,setTimeout((()=>this.resize()),100)},togglePois:function(t){t=!!t;for(var e=0;e<this.pois_.length;e++)this.pois_[e].setVisible(t)},toggleView:function(t,e){if("mini"==t){let t=this.div.layout.hasClass("mapp-view-mini"),e=!("inline"==this.layout||!this.poiList)&&this.div.layout.width()<mappl10n.options.mini;return this.div.layout.toggleClass("mapp-view-mini",e),void(e!=t&&this.toggleSidebar(!e))}e=void 0===e?!this.div.layout.hasClass("mapp-view-"+t):e,this.div.layout.toggleClass("mapp-view-"+t,e),"list"==t&&e&&this.renderList(),"menu"==t&&e&&this.renderMenu(),"directions"==t&&this.resize()},toJSON:function(){this.pois=[];for(var t=0;t<this.pois_.length;t++)this.pois.push(this.pois_[t].toJSON());return{center:this.center,height:this.height,mapid:this.mapid,mapTypeId:this.mapTypeId,metaKey:this.metaKey,pois:this.pois,postid:this.postid,search:this.search,title:this.title,width:this.width,zoom:this.zoom}}}},397:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.Directions=function(e,i){this.sel=t(e),this.map=i;var o=this;this.sel.on("keydown",(function(t){13==t.which?(o.getDirections(),t.preventDefault()):27==t.which&&o.close()})),this.sel.on("click","[data-mapp-action]",(function(e){var i=t(this).attr("data-mapp-action"),n=t(".mapp-dir-daddr",o.sel).val(),s=t(".mapp-dir-saddr",o.sel).val();switch(e.preventDefault(),i){case"dir-cancel":o.close();break;case"dir-get":o.getDirections();break;case"dir-swap":t(".mapp-dir-saddr",o.sel).val(n),t(".mapp-dir-daddr",o.sel).val(s)}})),this.open=function(e,i){"google"!=mappl10n.options.directions?(this.map.toggleView("directions",!0),t(".mapp-dir-saddr",this.sel).val(e),t(".mapp-dir-daddr",this.sel).val(i)):this.openGoogle(e,i)},this.close=function(){this.map.toggleView("directions",!1)},this.getDirections=function(){var e=t(".mapp-dir-saddr",this.sel).val().trim(),i=t(".mapp-dir-daddr",this.sel).val().trim();this.map.poiClose(),this.openGoogle(e,i)},this.openGoogle=function(t,e){var i=mappl10n.options.directionsServer;-1==(i="https://maps.google.com"==i?"https://www.google.com":i).toLowerCase().indexOf("http")&&(i="https://"+i),i+="/maps/dir/?api=1&origin="+encodeURIComponent(t)+"&destination="+encodeURIComponent(e),window.open(i)}}},442:(t,e,i)=>{"use strict";i.r(e);var o,n=i(991),s=i(574);window.mapp=window.mapp||{},mapp.geocoders={},o=jQuery,mapp.geocoders.algolia=function(t){this.map=t},mapp.geocoders.algolia.prototype={getDetails:function(t,e){e({formatted_address:t.value,name:t.name,geometry:{location:t.latlng}})},getFirstPrediction(t,e){this.getPredictions(t,(t=>{t&&t.length?this.getDetails(t[0],(t=>e(t))):e(null)}))},getPredictions:function(t,e){var i="https://places-dsn.algolia.net/1/places/query?query="+encodeURIComponent(t)+"&hitsPerPage=5";i=mappl10n.options.country?i+"&countries="+mappl10n.options.country.toLowerCase():i,i=mappl10n.options.language?i+"&language="+mappl10n.options.language.toLowerCase():i+"&language=en";var a=this.map.getMap().getCenter();a&&(i+="&aroundLatLng="+a.lat+","+a.lng),o.getJSON(i,(function(i){if(i&&i.hits&&i.hits.length>0){var o=i.hits.map((function(e,o){return(0,n.Z)({formatInputValue:s.Z,hit:e,hitIndex:o,query:t,rawAnswer:i})}));e(o)}else e(null)}))}},function(t){mapp.geocoders.google=function(e){this.map=e,this.token=null;var i=t('<div style="display:none">').appendTo("body");this.placesService=new google.maps.places.PlacesService(i.get(0)),this.autocompleteService=new google.maps.places.AutocompleteService,i.remove()},mapp.geocoders.google.prototype={getDetails:function(t,e){this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken,this.token=null;var i={fields:["formatted_address","name","geometry"],placeId:t.place_id,sessionToken:this.token};this.placesService.getDetails(i,(function(t,i){if("OK"==i&&t&&t.geometry){if(t.geometry.location&&(t.geometry.location=t.geometry.location.toJSON()),t.geometry.viewport){var o=t.geometry.viewport.toJSON();t.geometry.viewport={sw:{lat:o.south,lng:o.west},ne:{lat:o.north,lng:o.east}}}e(t)}else e(null)}))},getFirstPrediction:function(e,i){this.getPredictions(e,(e=>{e&&t.isArray(e)?this.getDetails(e[0],(t=>i(t))):i(null)}))},getPredictions:function(t,e){this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken;var i=this.map.getMap().getBounds();"leaflet"==mappl10n.options.engine&&(i=new google.maps.LatLngBounds(new google.maps.LatLng(i.getSouthWest().lat,i.getSouthWest().lng),new google.maps.LatLng(i.getNorthEast().lat,i.getNorthEast().lng)));var o={input:t,bounds:i=i||new google.maps.LatLngBounds(new google.maps.LatLng(85,-180),new google.maps.LatLng(-85,180)),sessionToken:this.token,types:this.map.editable?null:["geocode"]};this.autocompleteService.getPlacePredictions(o,(function(t,i){"OK"==i&&t&&t.length?(t=(t=t.map((t=>(t.value=t.description,t)))).filter((t=>t.place_id)),e(t)):(i==google.maps.places.PlacesServiceStatus.REQUEST_DENIED?alert("Google Maps API Key error: please enable the Places API in the Google Developer Console."):i==google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT&&alert("Google Maps API Key has exceeded its query limit"),e(null))}))}}}(jQuery),function(t){mapp.geocoders.mapbox=function(t){this.map=t},mapp.geocoders.mapbox.prototype={getDetails:function(t,e){let i=t.place_name,o=i.indexOf(","),n=i.indexOf(",",o+1);o>0&&(i=parseInt(i.substr(0,o))?i.substr(0,n).replace(",",""):i.substr(0,o));let s=t.bbox&&4==t.bbox.length?{sw:{lat:t.bbox[1],lng:t.bbox[0]},ne:{lat:t.bbox[3],lng:t.bbox[2]}}:null;e({formatted_address:t.place_name,name:i,geometry:{location:{lat:t.center[1],lng:t.center[0]},viewport:s}})},getFirstPrediction(t,e){this.getPredictions(t,(t=>{t&&t.length?this.getDetails(t[0],(t=>e(t))):e(null)}))},getPredictions:function(e,i){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+e+".json?access_token="+mappl10n.options.mapbox;o=mappl10n.options.country?o+"&country="+mappl10n.options.country.toLowerCase():o,o=mappl10n.options.language?o+"&language="+mappl10n.options.language.toLowerCase():o;var n=this.map.getMap().getCenter();n&&(o+="&proximity="+n.lng+","+n.lat),mappl10n.options.searchBox&&(o+="&bbox="+mappl10n.options.searchBox),t.getJSON(o,(t=>{t&&t.features&&t.features.length>0?(t.features=t.features.map((t=>(t.value=t.label=t.place_name,t))),i(t.features)):i(null)}))}}}(jQuery),function(t){mapp.geocoders.nominatim=function(t){this.map=t},mapp.geocoders.nominatim.prototype={getDetails:function(t,e){let i=t.display_name,o=i.indexOf(","),n=i.indexOf(",",o+1);o>0&&(i=parseInt(i.substr(0,o))?i.substr(0,n).replace(",",""):i.substr(0,o));let s=t.boundingbox&&4==t.boundingbox.length?{sw:{lat:t.boundingbox[0],lng:t.boundingbox[2]},ne:{lat:t.boundingbox[1],lng:t.boundingbox[3]}}:null;e({formatted_address:t.display_name,name:i,geometry:{location:{lat:t.lat,lng:t.lon},viewport:s}})},getFirstPrediction(t,e){this.getPredictions(t,(t=>{t&&t.length?this.getDetails(t[0],(t=>e(t))):e(null)}))},getPredictions:function(e,i){var o="https://nominatim.openstreetmap.org/search?format=json&dedupe=1&limit=5&q="+encodeURIComponent(e);if(o=mappl10n.options.country?o+"&countrycodes="+mappl10n.options.country.toLowerCase():o,o=mappl10n.options.language?o+"&accept-language="+mappl10n.options.language.toLowerCase():o,mappl10n.options.searchBox)o+="&viewbox="+mappl10n.options.searchBox,o+="&bounded=1";else{var n=this.map.getMap().getBounds();if(n){let t=n.getSouthWest(),e=n.getNorthEast();o+="&viewbox="+t.lng+","+t.lat+","+e.lng+","+e.lat}}t.getJSON(o,(function(t){t&&t.length?(t=t.map((t=>(t.value=t.display_name,t))),i(t)):i(null)}))}}}(jQuery)},282:()=>{window.mapp=window.mapp||{},mapp.Icons={},mapp.Icons.get=function(t){var e=mapp.Icons.getUrl(t);return"leaflet"==mappl10n.options.engine?L.icon({iconUrl:e,iconAnchor:[16,32],iconSize:[32,32],popupAnchor:[0,-32]}):{url:e}},mapp.Icons.getUrl=function(t){return"https://maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png"}},689:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.Infobox=function(e,i){this.map=e,this.anchorPoint=null,this.fudge=30,this.isOpen=!1,this.mapDiv="leaflet"==mappl10n.options.engine?e.getContainer():e.getDiv(),this.node=null,this.opts=_.extend({clip:!0,pan:!0},i),this.overlayView=null,this.position=null,this.size=null,this.wrapper=null,this.wrapper=t('<div class="mapp-ib-wrapper" tabindex="0"><div class="mapp-ib-content"><div class="mapp-ib" tabindex="0"></div><div class="mapp-ib-tip"></div></div></div>'),this.wrapper.addClass(i.className),this.node=t(".mapp-ib-content",this.wrapper),"leaflet"==mappl10n.options.engine?mapp.event.addListener(this.map,"move",(t=>{this.isOpen&&this.draw()})):(this.overlayView=new google.maps.OverlayView,this.overlayView.onAdd=function(){},this.overlayView.setMap(this.map),this.overlayView.draw=()=>{this.isOpen&&this.draw()}),this.node.get(0).addEventListener("load",(()=>{"leaflet"==mappl10n.options.engine?this.open({position:this.position,anchorPoint:this.anchorPoint}):mapp.event.addListenerOnce(this.map,"panend",(t=>{this.open({position:this.position,anchorPoint:this.anchorPoint})}))}),{capture:!0});var o="leaflet"==mappl10n.options.engine?this.map.getContainer():this.map.getDiv();this.wrapper.appendTo(o),"leaflet"==mappl10n.options.engine&&e.on("load",(()=>{L.DomEvent.disableClickPropagation(this.wrapper.get(0))}))},mapp.Infobox.prototype={close:function(){this.isOpen=!1,this.wrapper&&this.wrapper.removeClass("mapp-open")},draw:function(){if(document.fullscreenElement||this.map.isFullscreen)return;if(!this.position)return;let t,e,i;if(t=this.node.outerWidth(),e=this.node.outerHeight(),"leaflet"==mappl10n.options.engine)i=this.map.latLngToContainerPoint(this.position);else{const t=this.overlayView.getProjection();if(!t)return;i=t.fromLatLngToContainerPixel(this.position)}this.wrapper.css({left:i.x-t/2+this.anchorPoint.x,bottom:this.mapDiv.clientHeight-i.y-this.anchorPoint.y})},getContent:function(){return t(".mapp-ib",this.node)},open:function(t){this.position=t.position,this.anchorPoint=t.anchorPoint?t.anchorPoint:{x:0,y:0},this.wrapper.addClass("mapp-open"),this.wrapper.css({left:0,bottom:0,width:"auto",height:"auto"}),this.wrapper.css({width:this.node.outerWidth(),height:this.node.outerHeight()}),this.draw(),this.pan(),this.isOpen=!0},pan:function(){const e=this.node.outerWidth(),i=this.node.outerHeight(),o=t(this.mapDiv).width(),n=t(this.mapDiv).height();if("leaflet"==mappl10n.options.engine)var s=this.map.latLngToContainerPoint(this.position);else{var a=this.overlayView.getProjection();s=a?a.fromLatLngToContainerPixel(this.position):null}if(!s)return;var l={x:s.x,y:s.y};s.x+e/2+this.anchorPoint.x>o-this.fudge?l.x=Math.max(o-e/2-this.anchorPoint.x-this.fudge,o/2-this.anchorPoint.x):s.x-e/2+this.anchorPoint.x<this.fudge&&(l.x=Math.min(e/2+this.anchorPoint.x+this.fudge,o/2-this.anchorPoint.x)),s.y+this.anchorPoint.y-i<this.fudge&&(l.y=i-this.anchorPoint.y+this.fudge),l.y>=n&&(l.y=n-this.fudge);const p={x:s.x-l.x,y:s.y-l.y};p.x<=-1||p.x>=1||p.y<=-1||p.y>=1?"leaflet"==mappl10n.options.engine?this.map.panBy([p.x,p.y]):(mapp.event.addListenerOnce(this.map,"idle",(t=>{mapp.event.trigger(this.map,"panend")})),this.map.panBy(p.x,p.y)):mapp.event.trigger(this.map,"panend")},setContent:function(e){t(".mapp-ib",this.node).empty().append(e)}}},628:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.lib={ajax:function(e){var i=this,o={callback:null,data:null,dataType:"json",silent:!1,type:"GET",url:mappl10n.options.ajaxurl,success:function(t,o,n){"json"==e.dataType&&e.url==mappl10n.options.ajaxurl&&"OK"!=t.status&&i.alert(t.status),"json"==e.dataType&&t.output?i.alert("AJAX Invalid Output\r\n"+t.output):e.callback&&e.callback(t,n)},error:function(t,o,n){"cancel"!=o&&(void 0!==n&&""!=n&&i.alert("AJAX ERROR\r\nTextStatus="+o+"\r\nError="+n+"\r\nResponseText="+t.responseText),e.callback&&e.callback(null))}};return e=t.extend(o,e),t.ajax(e)},alert:function(t){mappl10n.options.admin||mappl10n.options.debug?alert(t):window.console&&console.error(t)},jqVersionCheck:function(e){if(void 0===t||void 0===e)return!1;e=e.split("."),v=t.fn.jquery.split(".");for(var i=0;i<e.length;i++){var o=parseInt(e[i]),n=void 0!==v[i]?parseInt(v[i]):0;if(n!=o)return n>o}return!0},log:function(t){window.console&&console.error(t)},scrollTo:function(t,e,i){if(t&&e&&t.length&&e.length){var o=t.height(),n=e.outerHeight(!0),s=t.scrollTop(),a=s+e.position().top,l=a+n;a=a-o/2-n/2,i&&(a-=i.outerHeight(!0)),(a<s||l>s+o)&&t.scrollTop(a)}},template:function(e,i){if(mapp.lib.templates=mapp.lib.templates?mapp.lib.templates:{},!mapp.lib.templates[e]){var o=mappl10n.options.templates?mappl10n.options.template[e]:t("#mapp-tmpl-"+e).html();if(!o)return"";mapp.lib.templates[e]=_.template(o,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g})}return mapp.lib.templates[e](i)},uniqid:function(){return void 0===mapp.lib.uniqidCounter?mapp.lib.uniqidCounter=0:mapp.lib.uniqidCounter++,mapp.lib.uniqidCounter}},mapp.lib.jqVersionCheck("1.7")||mapp.lib.alert("jQuery version is too old: "+t.fn.jquery),jQuery,"leaflet"==mappl10n.options.engine&&"undefined"!=typeof L&&(L.LatLng.prototype.toJSON=function(){return{lat:this.lat,lng:this.lng}},L.LatLngBounds.prototype.toJSON=function(){return{south:this.getSouth(),west:this.getWest(),north:this.getNorth(),east:this.getEast()}},L.LatLng.prototype.toUrlValue=function(){return Math.round(1e6*this.lat)/1e6+", "+Math.round(1e6*this.lng)/1e6}),mapp.event={addListener:function(t,e,i){e=e.split(" ");for(var o=0;o<e.length;o++)"leaflet"==mappl10n.options.engine?t.on(e[o],i):google.maps.event.addListener(t,e[o],i)},addListenerOnce:function(t,e,i){e=e.split(" ");for(var o=0;o<e.length;o++)"leaflet"==mappl10n.options.engine?t.once(e[o],i):google.maps.event.addListenerOnce(t,e[o],i)},clearInstanceListeners:function(t){"leaflet"==mappl10n.options.engine?t.off():google.maps.event.clearInstanceListeners(t)},clearListeners:function(t,e){e=e.split(" ");for(var i=0;i<e.length;i++)"leaflet"==mappl10n.options.engine?t.off(e[i]):google.maps.event.clearListeners(t,e[i])},trigger:function(t,e,i){"leaflet"==mappl10n.options.engine?t.fire(e,i):google.maps.event.trigger(t,e,i)}},function(t){mapp.lib.Modal=function(){this.el=null;var e=this;this.el=t('<div class="mapp-modal" tabindex="0">').append('<div class="mapp-modal-backdrop">').append('<div class="mapp-modal-content" tabindex="1">'),this.el.hide(),this.el.on("click",".mapp-modal-backdrop",(function(){e.close()})),this.el.on("click",".mapp-modal-close",(function(){e.close()})),this.el.on("keydown",(function(t){27==t.which&&e.close()}))},mapp.lib.Modal.prototype={close:function(){this.el&&this.el.is(":visible")&&(this.el.hide(),t("body").removeClass("mapp-modal-noscroll"))},focus:function(){t(".mapp-modal-focus",this.el).attr("tabindex",0),t(".mapp-modal-focus",this.el).focus()},open:function(){if(!this.el.parent().length){const e=t("body",window.parent.document);this.el.appendTo(e)}this.el.show(),t("body").addClass("mapp-modal-noscroll"),this.focus()},setContent:function(e){t(".mapp-modal-content",this.el).empty(),t(".mapp-modal-content",this.el).append('<div class="mapp-modal-close">&times;').append(e),this.focus()}}}(jQuery)},692:()=>{window.mapp=window.mapp||{},jQuery,mapp.load=function(){if("undefined"!=typeof mapp&&mapp.data)for(;mapp.data.length;){var t=mapp.data.pop();window[t.name]=new mapp.Map(t),window[t.name].display()}},mapp.load()},436:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.Marker=function(t){this.anchorPoint=null,this.div=null,this.draggable=null,this.icon=null,this.map=null,this.position=null,this.visible=null,this.zIndex=0,this.setValues(t),this.overlayView=new google.maps.OverlayView,this.overlayView.draw=()=>this.draw(),this.overlayView.onAdd=()=>this.onAdd(),this.overlayView.onRemove=()=>this.onRemove()},mapp.Marker.prototype={draw:function(){if(!this.div||!this.icon)return;let e=this.overlayView.getProjection();if(e){let i=e.fromLatLngToDivPixel(this.position),o=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};t(this.div).css({left:i.x-o.width/2,top:i.y-o.height})}},getDiv:function(){return this.div},getDraggable:function(){return this.draggable},getMap:function(){return this.map},getPosition:function(){return this.position},getVisible:function(){return this.visible},handleEvent:function(t){let e="on"+t.type[0].toUpperCase()+t.type.slice(1);this[e]&&this[e](t)},onAdd:function(){let e=this.overlayView.getPanes();e&&(this.div=t('<div class="mapp-marker">'),this.div.appendTo(e.overlayMouseTarget),this.icon&&this.setIcon(),google.maps.OverlayView.preventMapHitsAndGesturesFrom(this.div.get(0)),this.div.get(0).addEventListener("click",(()=>{(!this.dragging||this.dragging&&!this.dragging.moved)&&mapp.event.trigger(this,"click"),this.dragging=null})),this.div.get(0).addEventListener("mouseenter",this),this.div.get(0).addEventListener("mouseleave",this),this.setDraggable(this.draggable))},onMouseenter:function(t){mapp.event.trigger(this,"mouseover")},onMouseleave:function(t){mapp.event.trigger(this,"mouseout")},onPointerdown:function(t){const e=this.map.getDiv().getBoundingClientRect(),i=this.overlayView.getProjection().fromLatLngToContainerPixel(this.position);this.dragging={moved:!1,startPixel:{x:t.clientX,y:t.clientY},offset:{x:i.x-(t.clientX-e.left),y:i.y-(t.clientY-e.top)}},this.toggleDragEvents(!0)},onPointermove:function(t){if(Math.abs(t.clientX-this.dragging.startPixel.x)+Math.abs(t.clientY-this.dragging.startPixel.y)<3)return;const e=this.map.getDiv().getBoundingClientRect();let i={x:t.clientX-e.left+this.dragging.offset.x,y:t.clientY-e.top+this.dragging.offset.y};this.setPosition(this.overlayView.getProjection().fromContainerPixelToLatLng(i)),this.draw(),this.dragging.moved=!0,mapp.event.trigger(this,"dragstart")},onPointercancel:function(t){this.onPointerup(t)},onPointerup:function(t){this.dragging&&this.dragging.moved&&mapp.event.trigger(this,"dragend"),this.toggleDragEvents(!1)},onRemove:function(){this.div&&(this.toggleDragEvents(!1),this.div.remove(),this.div=null)},set:function(t,e){let i="set"+t[0].toUpperCase()+t.slice(1);this[i]&&this[i](e)},setDraggable:function(t){this.draggable=t,this.map&&(this.div.get(0).removeEventListener("pointerdown",this,{passive:!0}),t&&this.div.get(0).addEventListener("pointerdown",this,{passive:!0}))},setIcon:function(t){if(void 0!==t&&(this.icon=t),this.icon&&this.div){let t='<img draggable="false" src="'+this.icon.url+'">';this.div.html(t);let e=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};this.div.css({width:e.width,height:e.height}),this.setZIndex(),this.draw()}},setMap:function(t){this.map=t,this.overlayView.setMap(t)},setPosition:function(t){this.position=t},setValues:function(t){for(const e in t)this.set(e,t[e])},setVisible:function(t){this.visible=t,this.div&&this.div.css("visibility",t?"visible":"hidden")},setZIndex:function(t){this.zIndex=void 0!==t?t:this.zIndex,this.div&&this.div.css("z-index",t)},toggleDragEvents(t){document.removeEventListener("pointermove",this,{passive:!0}),document.removeEventListener("pointerup",this,{passive:!0}),document.removeEventListener("pointercancel",this,{passive:!0}),t&&(document.addEventListener("pointermove",this,{passive:!0}),document.addEventListener("pointerup",this,{passive:!0}),document.addEventListener("pointercancel",this,{passive:!0}))}}},510:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.Places=function(e,i){var o=this;this.sel=t(e),this.opts=t.extend({map:null},i);let n="";n="leaflet"!=mappl10n.options.engine?"google":mappl10n.options.geocoder?mappl10n.options.geocoder:"algolia",this.geocoder=new mapp.geocoders[n](this.opts.map),this.sel.on("keydown",(function(e){13==e.which&&(e.preventDefault(),e.stopImmediatePropagation(),o.sel.autocomplete("close"),o.parse(o.sel.val(),(function(e){e&&t(o).triggerHandler("search.mapp",e)})))})),t(".mapp-search-button",this.sel.parent()).on("click",(function(){o.parse(o.sel.val(),(function(e){e&&(o.sel.autocomplete("close"),t(o).triggerHandler("search.mapp",e))}))})),this.initAutocomplete()},mapp.Places.prototype={parse:function(t,e){var i="";if(t&&(i="string"==typeof(i=t&&t.name?t.name:t)?i.trim():i),i)if("string"!=typeof i||"http"!=i.substring(0,4))if("user"!=i)if(t&&t.geometry)e(t);else{var o=this.parseLatLng(t);o?e(o):this.geocoder.getFirstPrediction(t,(function(t){e(t)}))}else this.geolocate((function(t){e(t)}));else e(i);else e(null)},parseLatLng:function(t){var e;if(t.hasOwnProperty("lat")&&t.hasOwnProperty("lng"))e=t;else{var i=t&&t.name?t.name:t,o=(i="string"==typeof i?i.trim():i).split(",");if(2==o.length){var n=parseFloat(o[0]),s=parseFloat(o[1]);isNaN(n)||isNaN(s)||(e={lat:n,lng:s})}}return e?{name:e.lat+", "+e.lng,geometry:{location:e}}:null},geolocate:function(t,e){var i=this;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};t({name:o.lat+", "+o.lng,geometry:{location:o}}),i.sel.val("")}),(function(i){if(!e){var o=i&&i.message?" : "+i.message:"";alert(mappl10n.no_geolocate+o)}t(null)}),{timeout:15e3,enableHighAccuracy:!0,maximumAge:3e4}):alert(mappl10n.no_geolocate)},initAutocomplete:function(){var e=this;this.sel&&this.sel.length&&(this.sel.on("autocompleteselect",(function(i,o){e.geocoder.getDetails(o.item,(function(i){e.parse(i,(function(i){i&&t(e).triggerHandler("search.mapp",i)}))}))})),this.sel.autocomplete({appendTo:this.sel.parent(),autoFocus:!0,minLength:1,delay:"nominatim"===mappl10n.options.geocoder?500:0,source:(t,i)=>{e.geocoder.getPredictions(t.term,(function(t){i(t)}))}}))}}},548:()=>{var t;window.mapp=window.mapp||{},t=jQuery,mapp.Poi=function(e){if(this.defaults={address:null,body:null,html:null,iconid:null,kml:null,map:null,overlay:null,postid:null,props:null,title:"",url:null,type:null,viewport:null},t.extend(this,this.defaults,e),e&&e.correctedAddress&&(this.address=e.correctedAddress),"leaflet"==mappl10n.options.engine&&this.isPoly()&&(this.type=null),e.viewport&&e.viewport.sw&&e.viewport.ne&&e.viewport.sw.lat){var i=e.viewport.sw,o=e.viewport.ne;"leaflet"==mappl10n.options.engine?this.viewport=new L.LatLngBounds(L.latLng(i.lat,i.lng),L.latLng(o.lat,o.lng)):this.viewport=new google.maps.LatLngBounds(new google.maps.LatLng(i.lat,i.lng),new google.maps.LatLng(o.lat,o.lng))}var n=[],s=[];if(!e.overlay)switch(this.type){case"polygon":if(e.poly&&e.poly.paths)for(var a=0;a<e.poly.paths.length;a++){n=[];for(var l=0;l<e.poly.paths[a].length;l++)n.push(new google.maps.LatLng(e.poly.paths[a][l].lat,e.poly.paths[a][l].lng));s.push(new google.maps.MVCArray(n))}this.overlay=new google.maps.Polygon({paths:new google.maps.MVCArray(s)}),this.setColors(e.poly);break;case"polyline":if(e.poly&&e.poly.path)for(a=0;a<e.poly.path.length;a++)n.push(new google.maps.LatLng(e.poly.path[a].lat,e.poly.path[a].lng));this.overlay=new google.maps.Polyline({path:new google.maps.MVCArray(n)}),this.setColors(e.poly);break;case"circle":var p=new google.maps.LatLng(e.point.lat,e.point.lng);this.overlay=new google.maps.Circle({center:p,radius:parseFloat(e.poly.radius)}),this.setColors(e.poly);break;case"rectangle":this.overlay=new google.maps.Rectangle({bounds:this.viewport}),this.setColors(e.poly);break;case"kml":var r=e.kml&&e.kml.url?e.kml.url:"";this.overlay="leaflet"==mappl10n.options.engine?omnivore.kml(r):new google.maps.KmlLayer({url:r,preserveViewport:!0,suppressInfoWindows:!0});break;default:"leaflet"==mappl10n.options.engine?this.overlay=L.marker([e.point.lat,e.point.lng]):this.overlay=new mapp.Marker({position:new google.maps.LatLng(e.point.lat,e.point.lng)})}e.type||this.set({iconid:e.iconid})},mapp.Poi.prototype={center:function(t){var e=this.getBounds();if("number"!=typeof t)if(e){var i=e.getNorthEast().toJSON().lng-e.getSouthWest().toJSON().lng;i<0&&(i+=360),t=Math.round(Math.log(360*this.map.div.canvas.width()/i/256)/Math.LN2),this.map.setView(this.getPosition(),t,{animate:!1})}else this.map.setView(this.getPosition(),parseInt(mappl10n.options.poiZoom));else this.map.setView(this.getPosition(),t)},getAddress:function(){return this.address?this.address:this.getPosition().toUrlValue()},getAnchorPoint:function(t){switch(this.isPoly()?"poly":this.type){case"kml":return t&&t.pixelOffset?{x:t.pixelOffset.width,y:t.pixelOffset.height}:{x:0,y:0};case"poly":return{x:0,y:0};default:return mappl10n.options.iconScale&&mappl10n.options.iconScale[0]&&mappl10n.options.iconScale[1]?{x:0,y:0-mappl10n.options.iconScale[1]}:{x:0,y:-32}}},getBounds:function(){var t;switch(this.type){case"polyline":t=new google.maps.LatLngBounds,this.overlay.getPath().forEach((function(e){t.extend(e)}));break;case"polygon":t=new google.maps.LatLngBounds,this.overlay.getPaths().forEach((function(e){e.forEach((function(e){t.extend(e)}))}));break;case"rectangle":case"circle":t=this.overlay.getBounds();break;case"kml":t=(t="leaflet"==mappl10n.options.engine?this.overlay.getBounds().isValid()?this.overlay.getBounds():null:this.overlay.getDefaultViewport())||this.viewport;break;default:return this.viewport}return t},getColors:function(){var t={};for(var e in{strokeColor:"",strokeOpacity:"",strokeWeight:"",fillColor:"",fillOpacity:""})void 0!==this.overlay[e]&&(t[e]=this.overlay[e]);return t},getPosition:function(t){if(!this.type)return"leaflet"==mappl10n.options.engine?this.overlay.getLatLng():this.overlay.getPosition();if("kml"==this.type&&t&&t.latLng)return t.latLng;var e=this.getBounds();return e?e.getCenter():"leaflet"==mappl10n.options.engine?new L.latLng(0,0):new google.maps.LatLng(0,0)},getTemplateColors:function(){var t=this.getColors();return"polyline"==this.type?{color:t.strokeColor,opacity:100*t.strokeOpacity,weight:t.strokeWeight}:{color:t.fillColor,opacity:100*t.fillOpacity,weight:t.strokeWeight}},highlight:function(e){if(!this.type){var i="leaflet"==mappl10n.options.engine?t(this.overlay._icon):this.overlay.getDiv();if(i){switch(this.editable?"circle":mappl10n.options.highlight){case"circle":i.toggleClass("mapp-marker-circle",e);break;case"icon":var o=e?mapp.Icons.get(mappl10n.options.highlightIcon):mapp.Icons.get(this.iconid);if("leaflet"==mappl10n.options.engine&&this.overlay.getIcon().options.iconUrl==o.options.iconUrl)return;this.overlay.setIcon(o);break;case"scale":i.addClass("mapp-marker"),i.toggleClass("mapp-marker-scale",e)}this.setZIndex(e?1e4:0)}}},isPoly:function(){return-1!=jQuery.inArray(this.type,["polyline","polygon","circle","rectangle"])},open:function(t){this.map.poiOpen(this,t)},fetchPost:function(t){this.html?t():mapp.lib.ajax({type:"GET",data:{action:"mapp_get_post",postid:this.postid,nonce:mappl10n.options.nonce},dataType:"html",callback:e=>{this.html=e,t()}})},render:function(t,e){var i={};return i=_.extend(i,this,{icon:mapp.Icons.getUrl(this.iconid)}),e&&(i.body=e.description,i.title=e.name),i.thumbnail=mappl10n.options.thumbsPopup&&"popup"==t||mappl10n.options.thumbsList&&"item"==t?i.thumbnail:null,mapp.lib.template(this.map.templates[t],{poi:i,colors:this.getTemplateColors()})},set:function(t){for(var e in t){var i=t[e];switch(e){case"dirty":this.map.set({dirty:i});break;case"iconid":this.type||(this.iconid=i,this.overlay.setIcon(mapp.Icons.get(i)));break;default:this[e]=i}}this.map&&"undefined"!=typeof dirty&&this.map.set({dirty})},setColors:function(t){var e={};for(var i in{strokeColor:"",strokeOpacity:"",strokeWeight:"",fillColor:"",fillOpacity:""})t&&void 0!==t[i]&&(e[i]=t[i]);this.overlay.setOptions(e)},setEditable:function(t){var e=this;"kml"!=this.type&&("leaflet"==mappl10n.options.engine?this.overlay.options.draggable=t:this.overlay.setDraggable(t),this.isPoly()&&this.overlay.setEditable(t),mapp.event.clearListeners(this.overlay,"rightclick"),mapp.event.clearListeners(this.overlay,"dragstart"),t&&(mapp.event.addListener(this.overlay,"dragstart",(function(){e.viewport=null,e.map.poiClose()})),mapp.event.addListener(this.overlay,"dragend",(function(){e.map.set({dirty:!0})})),"polygon"!=this.type&&"polyline"!=this.type||"leaflet"!=mappl10n.options.engine&&(mapp.event.addListener(this.overlay,"rightclick",(function(t){null!=t.vertex&&e.overlay.getPath().getLength()>2&&e.overlay.getPath().removeAt(t.vertex)})),mapp.event.clearListeners(this.overlay.getPath(),"insert_at remove_at set_at"),mapp.event.addListener(this.overlay.getPath(),"insert_at remove_at set_at",(function(){e.map.set({dirty:!0})})))))},setMap:function(t){var e=this;this.map=t,mapp.event.clearInstanceListeners(this.overlay),null!=t?("kml"==this.type&&("leaflet"==mappl10n.options.engine?(mapp.event.addListenerOnce(this.overlay,"ready",(function(){e.viewport=e.overlay.getBounds()})),mapp.event.addListenerOnce(this.overlay,"error",(function(){alert(mappl10n.kml_error)}))):(mapp.event.addListener(this.overlay,"defaultviewport_changed",(function(){e.viewport=e.overlay.getDefaultViewport()})),mapp.event.addListener(this.overlay,"status_changed",(function(){var t=e.overlay.getStatus();"OK"!=t&&alert(mappl10n.kml_error+":"+t)})))),this.setEditable(this.map.editable),!this.type&&this.map.clusterer||("leaflet"==mappl10n.options.engine?this.overlay.addTo(t.getMap()):this.overlay.setMap(t.getMap())),mapp.event.addListener(this.overlay,"click",(function(t){e.open(t)})),mapp.event.addListener(this.overlay,"mouseover",(function(t){e.map.poiHover(e)})),mapp.event.addListener(this.overlay,"mouseout",(function(t){e.map.poiHover(null)}))):"leaflet"==mappl10n.options.engine?this.overlay.remove():this.overlay.setMap(null)},setTemplateColors:function(t){let{color:e,opacity:i,weight:o}=t;i=i?i/100:void 0;var n="polyline"==this.type?{strokeColor:e,strokeOpacity:i,strokeWeight:o}:{fillColor:e,fillOpacity:i,strokeColor:e,strokeWeight:o,strokeOpacity:1};this.setColors(n)},setVisible:function(t){void 0!==this.overlay.setVisible&&this.overlay.setVisible(t)},setZIndex:function(t){"leaflet"==mappl10n.options.engine?this.type||this.overlay.setZIndexOffset(t):this.overlay.set("zIndex",t)},toJSON:function(){var t={address:this.address,body:this.body,iconid:this.iconid,point:null,poly:null,title:this.title,type:this.type,viewport:null},e=this.getPosition();t.point=e.toJSON();var i=this.viewport?this.viewport:this.getBounds();if(i){var o=i.toJSON();t.viewport={sw:{lat:o.south,lng:o.west},ne:{lat:o.north,lng:o.east}}}if("kml"==this.type&&(t.kml=this.kml),this.isPoly())switch(t.poly=this.getColors(),this.type){case"circle":t.poly.radius=this.overlay.getRadius();break;case"polyline":t.poly.path=[],this.overlay.getPath().forEach((function(e){t.poly.path.push(e.toJSON())}));break;case"polygon":t.poly.paths=[],this.overlay.getPaths().forEach((function(e){var i=[];e.forEach((function(t){i.push(t.toJSON())})),t.poly.paths.push(i)}));break;case"rectangle":var n=this.overlay.getBounds();t.viewport={sw:n.getSouthWest().toJSON(),ne:n.getNorthEast().toJSON()}}return t}}},675:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=0;e<t.length;e++){var i=t[e].match(/country\/(.*)?/);if(i)return i[1]}return}},892:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={country:"country",city:"city","amenity/bus_station":"busStop","amenity/townhall":"townhall","railway/station":"trainStation","aeroway/aerodrome":"airport","aeroway/terminal":"airport","aeroway/gate":"airport"};for(var i in e)if(-1!==t.indexOf(i))return e[i];return"address"}},991:(t,e,i)=>{"use strict";e.Z=function(t){var e=t.formatInputValue,i=t.hit,s=t.hitIndex,a=t.query,p=t.rawAnswer;try{var h=i.locale_names[0],d=i.country,c=i.administrative&&i.administrative[0]!==h?i.administrative[0]:void 0,g=i.city&&i.city[0]!==h?i.city[0]:void 0,m=i.suburb&&i.suburb[0]!==h?i.suburb[0]:void 0,u=i.county&&i.county[0]!==h?i.county[0]:void 0,v=i.postcode&&i.postcode.length?function(t,e){for(var i=e[0].value,o=[],n=1;n<e.length;++n)"none"!==e[n].matchLevel&&o.push({index:n,words:e[n].matchedWords});if(0===o.length)return{postcode:t[0],highlightedPostcode:i};return o.sort((function(t,e){return t.words>e.words?-1:t.words<e.words?1:t.index-e.index})),{postcode:t[o[0].index],highlightedPostcode:e[o[0].index].value}}(i.postcode,i._highlightResult.postcode):{postcode:void 0,highlightedPostcode:void 0},f=v.postcode,y=v.highlightedPostcode,w={name:r(i._highlightResult.locale_names),city:g?r(i._highlightResult.city):void 0,administrative:c?r(i._highlightResult.administrative):void 0,country:d?i._highlightResult.country.value:void 0,suburb:m?r(i._highlightResult.suburb):void 0,county:u?r(i._highlightResult.county):void 0,postcode:y},b={name:h,administrative:c,county:u,city:g,suburb:m,country:d,countryCode:(0,o.default)(i._tags),type:(0,n.default)(i._tags),latlng:{lat:i._geoloc.lat,lng:i._geoloc.lng},postcode:f,postcodes:i.postcode&&i.postcode.length?i.postcode:void 0},L=e(b);return l(l({},b),{},{highlight:w,hit:i,hitIndex:s,query:a,rawAnswer:p,value:L})}catch(t){return console.error("Could not parse object",i),console.error(t),{value:"Could not parse object"}}};var o=s(i(675)),n=s(i(892));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){for(var e=t[0].value,i=[],o=1;o<t.length;++o)"none"!==t[o].matchLevel&&i.push({index:o,words:t[o].matchedWords});return 0===i.length?e:(i.sort((function(t,e){return t.words>e.words?-1:t.words<e.words?1:t.index-e.index})),0===i[0].index?"".concat(e," (").concat(t[i[1].index].value,")"):"".concat(t[i[0].index].value," (").concat(e,")"))}},574:(t,e)=>{"use strict";e.Z=function(t){var e=t.administrative,i=t.city,o=t.country,n=t.name,s=t.type;return"".concat(n).concat("country"!==s&&void 0!==o?",":"","\n ").concat(i?"".concat(i,","):"","\n ").concat(e?"".concat(e,","):"","\n ").concat(o||"").replace(/\s*\n\s*/g," ").trim()}}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(628),o(273),o(397),o(442),o(282),o(689),o(436),o(510),o(548),o(692)})();