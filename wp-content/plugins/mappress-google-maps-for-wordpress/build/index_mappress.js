(()=>{var t={117:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappAutocomplete:()=>m});var o=n(326);const a=React.createElement,{Fragment:l,useCallback:i,useEffect:s,useLayoutEffect:r,useMemo:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n;function m(e){e={buttonLabel:null,className:"",delay:null,focus:!1,onFetch:null,onSelect:null,placeholder:"",selected:null,suggestions:[],title:"",value:null,...e};const t=c(null),n=c(null),[l,i]=u({isOpen:!1,searchTerm:e.value?e.value:"",selected:null});function r(e){i((t=>({...t,...e})))}function p(e){if(e){}else l.isOpen&&r({isOpen:!1})}function m(){let t;r({isOpen:!1}),e.suggestions&&(t=null==l.selected?e.suggestions[0]:e.suggestions[l.selected]),e.onSelect({suggestion:t,value:g})}(0,o.useClickOutside)(t,(()=>p())),(0,o.useDebounce)((()=>{e.onFetch&&e.onFetch(l.searchTerm)}),[l.searchTerm],e.delay),s((()=>{e.focus&&n.current&&n.current.focus()}),[]),s((()=>{l.map&&setMapTypeId(e.mapTypeId)}),[e.mapTypeId,l.map]);const g=l.selected>=0&&e.suggestions&&e.suggestions[l.selected]?e.suggestions[l.selected].value:l.searchTerm;return a("div",{className:"mapp-autocomplete",ref:t},a("div",{className:"mapp-autocomplete-wrapper"},a("input",{className:e.className,onChange:t=>{!function(t){r({selected:null,searchTerm:t}),e.onChange&&e.onChange(t)}(t.target.value)},onKeyDownCapture:t=>function(t){switch(t.stopPropagation(),t.code){case"Backspace":r({isOpen:l.searchTerm.length>1});break;case"Enter":m();break;case"Escape":r({isOpen:!1});break;case"ArrowUp":if(t.preventDefault(),e.suggestions&&0!=l.selected){const t=null==l.selected?e.suggestions.length-1:l.selected-1;e.suggestions[t]&&r({isOpen:!0,selected:t})}else r({selected:null});break;case"ArrowDown":if(e.suggestions&&l.selected<e.suggestions.length-1){const t=null==l.selected?0:l.selected+1;e.suggestions[t]&&r({isOpen:!0,selected:t})}else r({selected:null});break;case"Tab":p();break;case"AltLeft":case"AltRight":case"ControlLeft":case"ControlRight":case"MetaLeft":case"MetaRight":break;default:r({isOpen:!0})}}(t),placeholder:e.placeholder,ref:n,title:e.title,type:"text",value:g}),l.isOpen&&function(){if(e.suggestions&&e.suggestions.length)return a("div",{className:"mapp-autocomplete-list"},e.suggestions.map(((t,n)=>{const o="mapp-autocomplete-item"+(l.selected==n?" mapp-selected":"");return a("div",{className:o,index:n,key:n,onClick:()=>function(t,n){r({isOpen:!1,selected:n}),e.onSelect({suggestion:t})}(t,n)},t.value)})))}()),e.buttonLabel&&a("div",{className:"mapp-submit-button",onClick:()=>m()},e.buttonLabel))}},962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Checkbox:()=>p,Checkboxes:()=>c,Container:()=>r,Control:()=>s,Input:()=>u,Radio:()=>m,Radios:()=>g,Select:()=>d,Textarea:()=>f});const o=React.createElement,{Fragment:a,useEffect:l,useState:i}=React;function s(e){let{controlType:t,value:n,...a}=e;const l=e=>"string"==typeof e?e.split(",").map((e=>e.trim())):e,i=e=>Array.isArray(e)?e.sort().join(","):e;switch(t){case"checkbox":return o(p,{checked:i(n),...a});case"checkboxes":return o(c,{selected:l(n),...a});case"radios":return o(g,{selected:l(n),...a});case"select":return o(d,{value:i(n),...a});case"textarea":return o(f,{value:i(n),...a});default:return o(u,{value:i(n),...a})}}function r(e){let{className:t,help:n,label:l,labelLeft:i,labelRight:s,labelTop:r,type:p,...c}=e;let u="mapp-control";p&&(u+=" mapp-control-"+p),t&&(u+=" "+t);const m=n&&n.text?o("div",{className:"mapp-help-text"+(p?" mapp-help-"+p:"")},n.text):null;if(r)return o("div",{className:u},o("div",{className:"mapp-label-top"},r),c.children);const g=Array.isArray(c.children)?a:"label";return o("div",{className:u},o(g,null,i?o("span",{dangerouslySetInnerHTML:{__html:i}}):null,c.children,l||s?o("span",{dangerouslySetInnerHTML:{__html:l||s}}):null),m)}function p(e){let{checked:t,className:n,disabled:a,onChange:l,value:i,...s}=e;return o(r,{className:n,type:"checkbox",...s},o("input",{checked:void 0!==t&&!1!==t&&t,disabled:a,onChange:e=>l(e.target.checked),type:"checkbox",value:i}))}function c(e){let{className:t,label:n,onChange:a,options:l,selected:i,...s}=e,c=i||[];return o(r,{className:t,type:"checkboxes",...s},l?.map(((e,t)=>{const n=c.indexOf(e.value);return o(p,{key:t,label:e.label?e.label:e.value,checked:n>=0,disabled:e.disabled,onChange:t=>{t&&-1==n?c=c.concat(e.value):!t&&n>=0&&c.splice(n,1),a(c)},value:e.value})})))}function u(e){let{autoFocus:t,className:n,disabled:a,max:l,min:i,name:s,onBlur:p,onChange:c,placeholder:u,size:m,title:g,trim:d,type:f,value:h,...v}=e;return o(r,{className:n,type:"input",...v},o("input",{autoFocus:t,disabled:a,max:l,min:i,name:s,onBlur:e=>{if(p){const t=d?e.target.value.trim():e.target.value;p(t)}},onChange:e=>{if(c){const t=d?e.target.value.trim():e.target.value;c(t)}},placeholder:u,size:m,title:g,type:f||"text",value:h||""}))}function m(e){let{checked:t,className:n,disabled:a,onChange:l,value:i,...s}=e;return o(r,{className:n,type:"radio",...s},o("input",{checked:t,disabled:a,onChange:e=>l(e.target.value),type:"radio",value:i}))}function g(e){let{className:t,label:n,onChange:a,options:l,placeholder:i,selected:s,...p}=e,c=l?[...l]:[];return void 0!==i&&c.unshift({value:"",label:i}),o(r,{className:t,type:"radios",...p},c.map(((e,t)=>{if(!e.hide)return o(m,{key:t,value:e.value,checked:s==e.value||null==s&&""==e.value,onChange:t=>a(e.value),disabled:e.disabled,label:e.label?e.label:e.value})})))}function d(e){let{className:t,onChange:n,options:a,placeholder:l,value:i,...s}=e,p=a?[...a]:[];void 0!==l&&p.unshift({value:"",label:l});let c="";return p.map((e=>{c+='<option value="'+e.value+'"'+(e.value==i?" selected":"")+(e.disabled?" disabled":"")+">"+e.label+"</option>"})),o(r,{className:t,type:"select",...s},o("select",{value:null!=i?i:"",onChange:e=>n(e.target.value)},p.map(((e,t)=>o("option",{key:t,value:e.value,disabled:e.disabled,dangerouslySetInnerHTML:{__html:e.label}})))))}function f(e){let{className:t,onChange:n,placeholder:a,rows:l,value:i,...s}=e;return o(r,{className:t,type:"textarea",...s},o("textarea",{onChange:e=>n(e.target.value),rows:l,value:null!=i?i:""}))}},908:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappDialog:()=>c});n(939);const o=React.createElement,a=ReactDOM.createPortal,{Fragment:l,useEffect:i,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={className:null,closeOnClickOutside:null,isModal:null,noPadding:null,onRequestClose:null,title:null,toolbar:null,...e};const t=React.createRef();i((()=>{const n=t.current;return e.isModal?n.showModal():n.show(),()=>{n.close()}}),[]),i((()=>{const n=t.current,o=t=>{t.preventDefault(),e.onRequestClose&&e.onRequestClose()};return n.addEventListener("cancel",o),()=>{n.removeEventListener("cancel",o)}}),[e.onRequestClose]);let n="mapp-dialog"+(e.className?" "+e.className:"");return n+=e.noPadding?" mapp-dialog-nopad":"",a(o("dialog",{className:n,ref:t,onClick:n=>function(n){if(e.closeOnClickOutside){const o=t.current.getBoundingClientRect();(n.clientY<o.top||n.clientY>o.bottom||n.clientX<o.left||n.clientX>o.right)&&e.onRequestClose()}}(n)},o("div",{className:"mapp-dialog-close",onClick:()=>e.onRequestClose()},"Ã—"),function(){if(e.title)return o("div",{className:"mapp-dialog-title"},e.title)}(),o("div",{className:"mapp-dialog-content"},e.children),function(){if(e.toolbar)return o("div",{className:"mapp-dialog-toolbar"},e.toolbar)}()),document.body)}},715:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappDirections:()=>c});var o=n(939);const a=React.createElement,{Fragment:l,useEffect:i,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={from:null,onClose:null,to:null,...e};const[t,n]=p({from:e.from?e.from:"",to:e.to?e.to:""});function l(e){n((t=>({...t,...e})))}function i(){e.onClose&&e.onClose()}function s(){o.mappLib.getDirections(t.from,t.to),i()}function r(e){13==e?s():27==e&&i()}return a("div",{className:"mapp-directions"},a("div",{className:"mapp-close",onClick:()=>i()}),a("div",null,a("input",{className:"mapp-dir-from",onChange:e=>l({from:e.target.value}),onKeyPress:e=>r(e.which),tabIndex:"1",placeholder:__("My location","mappress-google-maps-for-wordpress"),value:t.from}),a("div",{className:"mapp-dir-arrows",onClick:()=>{l({from:t.to,to:t.from})}})),a("div",null,a("input",{className:"mapp-dir-to",onChange:e=>l({to:e.target.value}),onKeyPress:e=>r(e.which),tabIndex:"2",value:t.to})),a("div",{className:"mapp-dir-toolbar"},a("div",{className:"mapp-submit-button",onClick:()=>s()},__("Get Directions","mappress-google-maps-for-wordpress"))))}},817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappFilters:()=>m});var o=n(962),a=n(939),l=n(326);const i=React.createElement,{Fragment:s,useEffect:r,useLayoutEffect:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n,m=e=>{e={onChange:null,filterType:null,name:null,poiCount:null,...e};const[t,n]=u({selected:e.selected?e.selected:{},filters:[],isBusy:!0,isOpen:null});function p(e){n((t=>({...t,...e})))}const m=c();function g(){p({isOpen:!t.isOpen})}function d(e){let n=e.format,a="";return"radios"==n?a=e.placeholder?e.placeholder:__("All","mappress-google-maps-for-wordpress"):"select"!=n&&"input"!=n||(a=e.placeholder?e.placeholder:""),i(o.Control,{controlType:n,onChange:n=>function(e,n){const o={...t.selected};!n||Array.isArray(n)&&0==n.length?delete o[e]:o[e]=n,p({selected:o})}(e.key,n),options:e.values,placeholder:a,value:t.selected[e.key]})}return(0,l.useClickOutside)({current:t.isOpen&&m.current?m.current:null},(()=>{p({isOpen:null})})),(0,l.useDebounce)((()=>{e.onChange&&e.onChange(t.selected)}),[t.selected],"poi"==e.filterType?0:500),r((()=>{"poi"==e.filterType?p({filters:mappl10n.options.poiFields,isBusy:!1}):(p({isBusy:!0}),a.mappLib.ajax({method:"GET",data:{action:"mapp_filters_get",nonce:mappl10n.options.nonce,type:e.filterType,name:e.name},callback:e=>{e&&"OK"==e.status?p({filters:e.data}):console.error("MapPress: unable to fetch filters"),p({isBusy:!1})}}))}),[]),i("div",{className:"mapp-filters",ref:m},i("div",{className:"mapp-filter mapp-filter-all"+(t.isOpen?" mapp-filter-open":"")},i("div",{className:"mapp-button mapp-button-caret mapp-filter-button"+(t.isBusy?" mapp-button-disabled":""),onClick:()=>g()},__("Filter","mappress-google-maps-for-wordpress")),i("div",{className:"mapp-filter-dropdown"},(Array.isArray(t.filters)&&t.filters,i("div",{className:"mapp-filter-values"},t.filters.map((e=>i(s,{key:e.key},i("div",{className:"mapp-filter-"+e.key},i("div",{className:"mapp-filter-label"},e.label),d(e))))))),function(t){let n=sprintf(e.poiCount>1?__("%d Results","mappress-google-maps-for-wordpress"):__("%d Result","mappress-google-maps-for-wordpress"),e.poiCount?e.poiCount:0);return i("div",{className:"mapp-filter-toolbar"},i("div",{className:"mapp-link-button",onClick:()=>{p({selected:{}})}},__("Reset","mappress-google-maps-for-wordpress")),i("div",{className:"mapp-filter-count"},n),i("div",{className:"mapp-submit-button",onClick:()=>g()},__("Done","mappress-google-maps-for-wordpress")))}())))}},10:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useGeocoding:()=>u});const o=n(939).mappLib.toJSON,{Fragment:a,useCallback:l,useEffect:i,useLayoutEffect:s,useRef:r,useState:p}=(React.createElement,React),{__,sprintf}=wp.i18n,c={google:function(){this.token=null;const e=document.createElement("div");this.placesService=new google.maps.places.PlacesService(e),this.autocompleteService=new google.maps.places.AutocompleteService}};c.google.prototype={getDetails:function(e){let{suggestion:t,callback:n}=e;this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken,this.token=null;var a={fields:["formatted_address","name","geometry"],placeId:t.place_id,sessionToken:this.token};this.placesService.getDetails(a,(function(e,t){if("OK"==t&&e&&e.geometry){if(e.geometry.location&&(e.geometry.location=o(e.geometry.location)),e.geometry.viewport){var a=o(e.geometry.viewport);e.geometry.viewport={sw:{lat:a.south,lng:a.west},ne:{lat:a.north,lng:a.east}}}n(e)}else n(null)}))},getFirstPrediction:function(e){let{map:t,value:n,callback:o}=e;this.getPredictions({map:t,value:n,callback:e=>{e&&Array.isArray(e)?this.getDetails({suggestion:e[0],callback:e=>o(e)}):o(null)}})},getPredictions:function(e){let{map:t,value:n,includeBusinesses:o,callback:a}=e;this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken;var l=t?t.getBounds():null;"leaflet"==mappl10n.options.engine&&(l=new google.maps.LatLngBounds(new google.maps.LatLng(l.getSouthWest().lat,l.getSouthWest().lng),new google.maps.LatLng(l.getNorthEast().lat,l.getNorthEast().lng)));var i={input:n,locationBias:l=l||new google.maps.LatLngBounds(new google.maps.LatLng(85,-180),new google.maps.LatLng(-85,180)),sessionToken:this.token,types:o?null:["geocode"]};this.autocompleteService.getPlacePredictions(i,(function(e,t){"OK"==t&&e&&e.length?(e=(e=e.map((e=>(e.value=e.description,e)))).filter((e=>e.place_id)),a(e)):(t==google.maps.places.PlacesServiceStatus.REQUEST_DENIED?alert("Google Maps API Key error: please enable the Places API in the Google Developer Console."):t==google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT&&alert("Google Maps API Key has exceeded its query limit"),a(null))}))}},c.liq=function(){},c.liq.prototype={getDetails:function(e){let{suggestion:t,callback:n}=e,o=t.display_name,a=o.indexOf(","),l=o.indexOf(",",a+1);a>0&&(o=parseInt(o.substr(0,a))?o.substr(0,l).replace(",",""):o.substr(0,a));let i=t.boundingbox&&4==t.boundingbox.length?{sw:{lat:t.boundingbox[0],lng:t.boundingbox[2]},ne:{lat:t.boundingbox[1],lng:t.boundingbox[3]}}:null;n({formatted_address:t.display_name,name:o,geometry:{location:{lat:t.lat,lng:t.lon},viewport:i}})},getFirstPrediction:function(e){let{map:t,value:n,callback:o}=e;this.getPredictions({map:t,value:n,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>o(e)}):o(null)}})},getPredictions:function(e){let{map:t,value:n,callback:o}=e;var a="https://us1.locationiq.com/v1/search?key="+mappl10n.options.liq+"&dedupe=1&format=json&limit=5&q="+encodeURIComponent(n);if(a=mappl10n.options.country?a+"&countrycodes="+mappl10n.options.country.toLowerCase():a,a=mappl10n.options.language?a+"&accept-language="+mappl10n.options.language.toLowerCase():a,mappl10n.options.searchBox)a+="&viewbox="+mappl10n.options.searchBox,a+="&bounded=1";else{var l=t?t.getBounds():null;if(l){let e=l.getSouthWest().wrap(),t=l.getNorthEast().wrap();a+="&viewbox="+e.lng+","+e.lat+","+t.lng+","+t.lat}}fetch(a).then((e=>e.json())).then((e=>{e&&e.length?(e=e.map((e=>(e.value=e.display_name,e))),o(e)):o(null)}))}},c.mapbox=function(){},c.mapbox.prototype={getDetails:function(e){let{suggestion:t,callback:n}=e,o=t.place_name,a=o.indexOf(","),l=o.indexOf(",",a+1);a>0&&(o=parseInt(o.substr(0,a))?o.substr(0,l).replace(",",""):o.substr(0,a));let i=t.bbox&&4==t.bbox.length?{sw:{lat:t.bbox[1],lng:t.bbox[0]},ne:{lat:t.bbox[3],lng:t.bbox[2]}}:null;n({formatted_address:t.place_name,name:o,geometry:{location:{lat:t.center[1],lng:t.center[0]},viewport:i}})},getFirstPrediction:function(e){let{map:t,value:n,callback:o}=e;this.getPredictions({map:t,value:n,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>o(e)}):o(null)}})},getPredictions:function(e){let{map:t,value:n,callback:o}=e;var a="https://api.mapbox.com/geocoding/v5/mapbox.places/"+n+".json?access_token="+mappl10n.options.mapbox;a=mappl10n.options.country?a+"&country="+mappl10n.options.country.toLowerCase():a,a=mappl10n.options.language?a+"&language="+mappl10n.options.language.toLowerCase():a;var l=t?t.getCenter():null;l&&(a+="&proximity="+l.lng+","+l.lat),mappl10n.options.searchBox&&(a+="&bbox="+mappl10n.options.searchBox),fetch(a).then((e=>e.json())).then((e=>{e&&e.features&&e.features.length>0?(e.features=e.features.map((e=>(e.value=e.label=e.place_name,e))),o(e.features)):o(null)}))}},c.nominatim=function(){},c.nominatim.prototype={getDetails:function(e){let{suggestion:t,callback:n}=e,o=t.display_name,a=o.indexOf(","),l=o.indexOf(",",a+1);a>0&&(o=parseInt(o.substr(0,a))?o.substr(0,l).replace(",",""):o.substr(0,a));let i=t.boundingbox&&4==t.boundingbox.length?{sw:{lat:t.boundingbox[0],lng:t.boundingbox[2]},ne:{lat:t.boundingbox[1],lng:t.boundingbox[3]}}:null;n({formatted_address:t.display_name,name:o,geometry:{location:{lat:t.lat,lng:t.lon},viewport:i}})},getFirstPrediction:function(e){let{map:t,value:n,callback:o}=e;this.getPredictions({map:t,value:n,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>o(e)}):o(null)}})},getPredictions:function(e){let{map:t,value:n,callback:o}=e;var a="https://nominatim.openstreetmap.org/search?format=json&dedupe=1&limit=5&q="+encodeURIComponent(n);if(a=mappl10n.options.country?a+"&countrycodes="+mappl10n.options.country.toLowerCase():a,a=mappl10n.options.language?a+"&accept-language="+mappl10n.options.language.toLowerCase():a,mappl10n.options.searchBox)a+="&viewbox="+mappl10n.options.searchBox,a+="&bounded=1";else{var l=t?t.getBounds():null;if(l){let e=l.getSouthWest().wrap(),t=l.getNorthEast().wrap();a+="&viewbox="+e.lng+","+e.lat+","+t.lng+","+t.lat}}fetch(a).then((e=>e.json())).then((e=>{e&&e.length?(e=e.map((e=>(e.value=e.display_name,e))),o(e)):o(null)}))}};const u=e=>{let{includeBusinesses:t}=e;function n(){let e="";return e="leaflet"!=mappl10n.options.engine?"google":mappl10n.options.geocoder?mappl10n.options.geocoder:"nominatim",new c[e]}return{geocode:function(e){let{map:o,suggestion:a,value:l,callback:i}=e;const s=n();l="string"==typeof l?l.trim():l,a||l?function(e){let{map:t,value:n,callback:o}=e;if(!n)return void o(null);if("string"!=typeof n){return void o(n.lat&&n.lng?{geometry:{location:{lat:n.lat,lng:n.lng}}}:null)}if("http"==n.substring(0,4))return void o(n);const a=n.split(",");if(2==a.length){const e=parseFloat(a[0]),t=parseFloat(a[1]);if(!isNaN(e)&&!isNaN(t))return void o({name:e+", "+t,geometry:{location:{lat:e,lng:t}}})}o(null)}({map:o,value:l,callback:e=>{e?i(e):a?s.getDetails({suggestion:a,callback:i}):s.getFirstPrediction({map:o,value:l,includeBusinesses:t,callback:i})}}):i(null)},geolocate:function(e,t){navigator&&navigator.geolocation||(alert(__("Unable to get your location","mappress-google-maps-for-wordpress")),e(null)),navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e({name:n.lat+", "+n.lng,geometry:{location:n}})}),(function(n){if(!t){var o=n&&n.message?" : "+n.message:"";alert(__("Unable to get your location","mappress-google-maps-for-wordpress")+" "+o)}e(null)}),{timeout:15e3,enableHighAccuracy:!0,maximumAge:3e4})},getPredictions:function(e){let{map:o,value:a,callback:l}=e;n().getPredictions({map:o,value:a,includeBusinesses:t,callback:l})}}}},326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useClickOutside:()=>c,useDebounce:()=>u,useIntersectionObserver:()=>g,useResizeObserver:()=>m,useTimeout:()=>d});React.createElement;const{Fragment:o,useCallback:a,useEffect:l,useLayoutEffect:i,useMemo:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e,t){l((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}))}function u(e,t,n){const o=r(!1),a=r(null);React.useEffect((()=>{if(o.current)return clearTimeout(a.current),a.current=setTimeout((()=>{e()}),n),()=>{clearTimeout(a.current)};o.current=!0}),t)}function m(e,t){const n=r();n.current=t,l((()=>{if(!e)return;const t=new ResizeObserver(((e,t)=>{n.current()}));return t.observe(e),()=>{t.disconnect()}}),[e])}function g(e){let{container:t,element:n,options:o,callback:a}=e;const i=r(null),s=r(null);s.current=a,l((()=>(!i.current&&n&&t&&(i.current=new IntersectionObserver((e=>{e[0].isIntersecting&&s.current()}),{...o,root:t}),i.current.observe(n)),()=>{i.current&&(i.current.disconnect(),i.current=null)})),[t,n])}function d(e,t){const n=React.useRef(null),o=React.useRef(e);return l((()=>{o.current=e}),[e]),l((()=>(t>0&&(n.current=window.setTimeout((()=>o.current()),t)),()=>{n.current&&window.clearTimeout(n.current)})),[t]),n}},939:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mappEvent:()=>a,mappLib:()=>o,mappPoi:()=>l});const o={ajax:function(e){if("POST"==(e={cache:"no-cache",credentials:"same-origin",data:null,method:e.method?e.method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer",responseType:"json",url:e.url?e.url:mappl10n.options.ajaxurl,...e}).method)if(e.data instanceof FormData)e.body=e.data;else{const t=new FormData;t.append("action",e.data.action),t.append("nonce",e.data.nonce),t.append("data",JSON.stringify(e.data)),e.body=t}else"GET"==e.method&&(e.url+="?"+o.jQueryParam(e.data));fetch(e.url,e).then((t=>{if("html"==e.responseType)return t.text();if(t.ok)return t.json();throw Error(`Request rejected with status ${t.status}`)})).then((t=>{e.url!=mappl10n.options.ajaxurl||t&&"OK"==t.status||o.alert(t.status),t.output&&o.alert("MapPress: invalid output from a plugin or theme file.  Deactivate plugins to find the problem.  Output:\r\n"+t.output),e.callback&&e.callback(t)})).catch((t=>{if(e.error)return void e.error();const n=void 0!==t.message?t.message:t.statusText;o.alert("AJAX error -- "+n)}))},alert:function(e){mappl10n.options.admin||mappl10n.options.debug?alert(e):window.console&&console.error(e)},boundsToViewport:function(e){return e?{sw:o.toJSON(e.getSouthWest()),ne:o.toJSON(e.getNorthEast())}:null},createRoot:function(e,t,n){if(void 0!==ReactDOM.createRoot){const o=ReactDOM.createRoot(e,n);return t&&o.render(t),o}t&&ReactDOM.render(t,e)},getDirections:function(e,t){let n=mappl10n.options.directionsServer;e=e?e.trim():"",t=t?t.trim():"",n="https://maps.google.com"==n?"https://www.google.com":n,-1==n.toLowerCase().indexOf("http")&&(n="https://"+n),n+="/maps/dir/?api=1&origin="+encodeURIComponent(e)+"&destination="+encodeURIComponent(t),window.open(n)},getDistance(e,t){const n=this.toJSON(e),o=this.toJSON(t);var a=n.lat*(Math.PI/180),l=o.lat*(Math.PI/180),i=l-a,s=(o.lng-n.lng)*(Math.PI/180),r=7917.6*Math.asin(Math.sqrt(Math.sin(i/2)*Math.sin(i/2)+Math.cos(a)*Math.cos(l)*Math.sin(s/2)*Math.sin(s/2)));return r=r.toFixed(1)},getIcon:function(e){{const t=this.getIconUrl(e);return"leaflet"==mappl10n.options.engine?L.icon({iconUrl:t,iconAnchor:[16,32],iconSize:[32,32],popupAnchor:[0,-32]}):{url:t}}},getIconUrl:function(e){return mappl10n.options.baseurl+"/images/red-dot.png"},jQueryParam:function(e){var t=[],n=function(e,n){n=null==(n="function"==typeof n?n():n)?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},o=function(e,a){var l,i,s;if(e)if(Array.isArray(a))for(l=0,i=a.length;l<i;l++)o(e+"["+("object"==typeof a[l]&&a[l]?l:"")+"]",a[l]);else if("[object Object]"===Object.prototype.toString.call(a))for(s in a)o(e+"["+s+"]",a[s]);else n(e,a);else if(Array.isArray(a))for(l=0,i=a.length;l<i;l++)n(a[l].name,a[l].value);else for(s in a)o(s,a[s]);return t};return o("",e).join("&")},map:(e,t,n)=>{const o=!isArrayLike(e)&&keys(e),a=(o||e).length;let l=Array(a);for(let n=0;n<a;n++){const a=o?o[n]:n;l[n]=t(e[a],a,e)}return l},nanoid:function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},pointToLatLng:function(e){return e?"leaflet"==mappl10n.options.engine?L.latLng(e):new google.maps.LatLng(e.lat,e.lng):null},slugify:function(e){return e?e.replace(/[^a-z0-9]/gi,"").toLowerCase():e},template:function(e,t){if(o.templates=o.templates?o.templates:{},!o.templates[e]){var n=document.getElementById("mapp-tmpl-"+e).innerHTML;if(!n)return"";o.templates[e]=this.templateParse(n)}return o.templates[e](t)},templateParse(e,t){const n={escape:e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")};var o=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},l=/\\|'|\r|\n|\u2028|\u2029/g;function i(e){return"\\"+a[e]}var s=RegExp([(/\{\{([^\}]+?)\}\}(?!\})/g||o).source,(/\{\{\{([\s\S]+?)\}\}\}/g||o).source,(/<#([\s\S]+?)#>/g||o).source].join("|")+"|$","g"),r=0,p="__p+='";e.replace(s,(function(t,n,o,a,s){return p+=e.slice(r,s).replace(l,i),r=s+t.length,n?p+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?p+="'+\n((__t=("+o+"))==null?'':__t)+\n'":a&&(p+="';\n"+a+"\n__p+='"),t})),p+="';\n";var c,u=t;if(u){if(!/^\s*(\w|\$)+\s*$/.test(u))throw new Error("variable is not a bare identifier: "+u)}else p="with(obj||{}){\n"+p+"}\n",u="obj";p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{c=new Function(u,"_",p)}catch(e){throw e.source=p,e}var m=function(e){return c.call(this,e,n)};return m.source="function("+u+"){\n"+p+"}",m},ztemplateParse(e,t){const n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=/.^/,a={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(let e in a)a[a[e]]=e;var l="__p+='"+e.replace(/\\|'|\r|\n|\t|\u2028|\u2029/g,(function(e){return"\\"+a[e]})).replace(n.escape||o,(function(e,t){return"'+\n("+unescape(t)+").replaceAll('&', '&amp;').replaceAll('<', '&lt;').replaceAll('>', '&gt;')+\n'"})).replace(n.interpolate||o,(function(e,t){return"'+\n("+unescape(t)+")+\n'"})).replace(n.evaluate||o,(function(e,t){return"';\n"+unescape(t)+"\n;__p+='"}))+"';\n";l="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+(l="with(obj||{}){\n"+l+"}\n")+"return __p;\n";var i=new Function(n.variable||"obj",l);if(t)return i(t);let s=function(e){return i.call(this,e)};return s.source="function("+(n.variable||"obj")+"){\n"+l+"}",s},toJSON:e=>e.toJSON?e.toJSON():e&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||"undefined"!=typeof L&&e instanceof L.LatLng?{lat:e.lat,lng:e.lng}:"undefined"!=typeof L&&L.LatLngBounds&&e instanceof L.LatLngBounds?{south:e.getSouth(),west:e.getWest(),north:e.getNorth(),east:e.getEast()}:null,toUrlValue(e){return e.toUrlValue?e.toUrlValue():"undefined"!=typeof L&&e instanceof L.LatLng?Math.round(1e6*this.lat)/1e6+", "+Math.round(1e6*this.lng)/1e6:null},viewportToBounds:function(e){return e&&e.sw&&e.ne?"leaflet"==mappl10n.options.engine?new L.LatLngBounds(L.latLng(e.sw.lat,e.sw.lng),L.latLng(e.ne.lat,e.ne.lng)):new google.maps.LatLngBounds(new google.maps.LatLng(e.sw.lat,e.sw.lng),new google.maps.LatLng(e.ne.lat,e.ne.lng)):null}},a={addListener:function(e,t,n){let o=[];t=t.split(" ");for(var a=0;a<t.length;a++)"leaflet"==mappl10n.options.engine?(e.on(t[a],n),o.push({target:e,event:t[a],callback:n})):o.push(google.maps.event.addListener(e,t[a],n));return Array.isArray(o)?o:o[0]},addListenerOnce:function(e,t,n){t=t.split(" ");for(var o=0;o<t.length;o++)"leaflet"==mappl10n.options.engine?e.once(t[o],n):google.maps.event.addListenerOnce(e,t[o],n)},clearInstanceListeners:function(e){"leaflet"==mappl10n.options.engine?e.off():google.maps.event.clearInstanceListeners(e)},clearListeners:function(e,t){t=t.split(" ");for(var n=0;n<t.length;n++)"leaflet"==mappl10n.options.engine?e.off(t[n]):google.maps.event.clearListeners(e,t[n])},removeListener:function(e){const t=Array.isArray(e)?e:[e];for(let e=0;e<t.length;e++)"leaflet"==mappl10n.options.engine?t[e].target.off(t[e].event,t[e].callback):google.maps.event.removeListener(t[e])},trigger:function(e,t,n){"leaflet"==mappl10n.options.engine?e.fire(t,n):google.maps.event.trigger(e,t,n)}},l={parseOverlay:function(e,t){if("google"==mappl10n.options.engine){if("kml"==e){const e=t.getDefaultViewport();return{point:e?o.toJSON(e.getCenter()):null,viewport:e?o.boundsToViewport(e):null}}const n=t instanceof google.maps.Polyline?{strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight}:{fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:1,strokeWeight:t.strokeWeight};if("circle"==e)return{point:o.toJSON(t.getCenter()),poly:{radius:t.getRadius(),...n}};if("rectangle"==e)return{point:t.getBounds().getCenter().toJSON(),viewport:o.boundsToViewport(t.getBounds()),poly:{...n}};if("polyline"==e){const e=[];return t.getPath().forEach((function(t){e.push(o.toJSON(t))})),{poly:{path:e,...n}}}if("polygon"==e){const e={fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:1,strokeWeight:t.strokeWeight},n=[];return t.getPaths().forEach((function(e){var t=[];e.forEach((function(e){t.push(o.toJSON(e))})),n.push(t)})),{poly:{paths:n,...e}}}if(!e)return{point:o.toJSON(t.getPosition())}}else{if("kml"==e){const e=t.getBounds();return{point:e&&e.isValid()?o.toJSON(e.getCenter()):null,viewport:e&&e.isValid()?o.boundsToViewport(e):null}}if(!e)return{point:"leaflet"==mappl10n.options.engine?o.toJSON(t.getLatLng()):o.toJSON(t.getPosition())}}}}},374:(e,t,n)=>{"use strict";n.r(t);var o=n(939),a=n(346);window.mapp=window.mapp||{};const{Fragment:l}=React,i=React.createElement;class s extends HTMLElement{constructor(){super()}parseLatLng(e){const t="string"==typeof e?e.split(","):[];return 2==t.length?{lat:t[0],lng:t[1]}:4==t.length?{sw:{lat:t[0],lng:t[1]},ne:{lat:t[2],lng:t[3]}}:null}parseAttributes(e,t){const n=Object.values(e).filter((e=>"style"!=e.name&&"class"!=e.name));let o={};return n.map((e=>{const n=e.value?e.value.substring(0,1):null,a="["==n||"{"==n?JSON.parse(e.value):e.value,l=t&&void 0!==t[e.name]?t[e.name]:e.name;o[l]=a})),o}connectedCallback(){const e=this.parseAttributes(this.attributes,{initialopeninfo:"initialOpenInfo",mapopts:"mapOpts",maptypeid:"mapTypeId",poilist:"poiList"});e.center=this.parseLatLng(e.center),e.container=this,e.pois=[];for(let t=0;t<this.children.length;t++){const n=this.parseAttributes(this.children[t].attributes);n.id=o.mappLib.nanoid(),n.point=this.parseLatLng(n.point),n.body=this.children[t].innerHTML,e.pois[t]=n}o.mappLib.createRoot(this,i(a.MappMap,e))}}window.customElements.get("mappress-map")||window.customElements.define("mappress-map",s),mapp.load=function(){const e=e=>{let{data:t,container:n}=e;t.pois&&t.pois.map((e=>{e.id=o.mappLib.nanoid()})),n?o.mappLib.createRoot(n,i(a.MappMap,{...t,container:n})):console.log("Missing container for map "+t.name)};if(mapp.data)for(;mapp.data.length;){const t=mapp.data.pop();e({data:t,container:document.getElementById(t.name)})}},mapp.load()},945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappFullscreenControl:()=>c,MappGeolocateControl:()=>u});const{Fragment:o,useCallback:a,useEffect:l,useLayoutEffect:i,useRef:s,useState:r}=React,p=React.createElement,{__,sprintf}=wp.i18n;function c(e){if(e={isFullscreen:null,onChange:null,layoutNode:null,...e},l((()=>{if(!e.layoutNode)return;const t=()=>{const t=document.fullscreenElement==e.layoutNode;t!=e.isFullscreen&&e.onChange(t)};return e.layoutNode.addEventListener("fullscreenchange",t),()=>{e.layoutNode&&e.layoutNode.removeEventListener("fullscreenchange",t)}})),void 0===document.fullscreenEnabled||!document.fullscreenEnabled)return null;const t="mapp-"+mappl10n.options.engine+"-control mapp-"+mappl10n.options.engine+"-fullscreen";return p("div",{className:t,onClick:()=>{e.layoutNode&&(document.fullscreenElement==e.layoutNode?document.exitFullscreen():e.layoutNode.requestFullscreen())},title:__("Toggle fullscreen view","mappress-google-maps-for-wordpress")},p("div",null))}function u(e){if(e={onClick:null,...e},!mappl10n.options.ssl)return null;const t="mapp-"+mappl10n.options.engine+"-control mapp-"+mappl10n.options.engine+"-geolocate"+name;return p("div",{className:t,onClick:()=>e.onClick(),title:__("Your Location","mappress-google-maps-for-wordpress")},p("div",null))}},346:(t,n,o)=>{"use strict";o.r(n),o.d(n,{MappMap:()=>S});var a=o(939),l=(o(908),o(715)),i=(o(817),o(945)),s=o(602),r=o(818),p=o(81),c=o(50),u=o(615);const m=React.createElement,{Fragment:g,useEffect:d,useLayoutEffect:f,useMemo:h,useRef:v,useState:y}=React;function b(e){e={anchor:null,className:null,content:null,map:null,onMouseEnter:null,onMouseLeave:null,point:null,...e};const t=v(null),[n,o]=y({isLoaded:null,mapDiv:"leaflet"==mappl10n.options.engine?e.map.getContainer():e.map.getDiv(),overlayView:null});function l(e){o((t=>({...t,...e})))}function i(){const o=t.current;if(!o)return;if(document.fullscreenElement||e.map.isFullscreen)return;let l;o.style.left=0,o.style.bottom=0;const{width:i,height:s}=o.getBoundingClientRect(),r=a.mappLib.pointToLatLng(e.point);if("leaflet"==mappl10n.options.engine)l=e.map.latLngToContainerPoint(r);else{const e=n.overlayView.getProjection();if(!e)return;l=e.fromLatLngToContainerPixel(r)}o.style.bottom=n.mapDiv.clientHeight-l.y-e.anchor.y+"px",o.style.left=l.x-i/2+e.anchor.x+"px"}return f((()=>{"google"==mappl10n.options.engine?n.overlayView||(n.overlayView=new google.maps.OverlayView,n.overlayView.onAdd=function(){l({isLoaded:!0})},n.overlayView.setMap(e.map)):(e.map.stop(),l({isLoaded:!0}))}),[]),f((()=>{if(!n.isLoaded)return;let t;return"google"==mappl10n.options.engine?n.overlayView.draw=()=>i():t=a.mappEvent.addListener(e.map,"move",(e=>i())),()=>{"google"==mappl10n.options.engine?n.overlayView.draw=null:a.mappEvent.removeListener(t)}})),f((()=>{n.isLoaded&&(i(),function(){const o=t.current;if(!o)return;const l=30,i=o.offsetWidth,s=o.offsetHeight,r=n.mapDiv.clientWidth,p=n.mapDiv.clientHeight,c=a.mappLib.pointToLatLng(e.point);let u;if("leaflet"==mappl10n.options.engine)u=e.map.latLngToContainerPoint(c);else{const e=n.overlayView.getProjection();u=e?e.fromLatLngToContainerPixel(c):null}if(!u)return;var m={x:u.x,y:u.y};u.x+i/2+e.anchor.x>r-l?m.x=Math.max(r-i/2-e.anchor.x-l,r/2-e.anchor.x):u.x-i/2+e.anchor.x<l&&(m.x=Math.min(i/2+e.anchor.x+l,r/2-e.anchor.x));u.y+e.anchor.y-s<l&&(m.y=s-e.anchor.y+l);m.y>=p&&(m.y=p-l);const g={x:u.x-m.x,y:u.y-m.y};(g.x<=-1||g.x>=1||g.y<=-1||g.y>=1)&&("leaflet"==mappl10n.options.engine?e.map.panBy([g.x,g.y]):e.map.panBy(g.x,g.y))}())}),[n.isLoaded]),n.isLoaded?m("div",{className:"mapp-ib-wrapper",ref:t,onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()},onMouseLeave:()=>{e.onMouseLeave&&e.onMouseLeave()}},m("div",{className:"mapp-ib-content"},m("div",{className:"mapp-ib"},m("div",{className:"mapp-iw "+(e.className?e.className:"")},e.content)),m("div",{className:"mapp-ib-tip"}))):null}var w=o(892),k=o(10),C=o(326);const E=a.mappLib.toJSON,{Fragment:O,useCallback:x,useEffect:M,useLayoutEffect:N,useRef:P,useState:_}=React,R=React.createElement,{__,sprintf}=wp.i18n;function S(t){t={alignment:null,center:null,centerPoi:null,container:null,geolocate:null,filter:null,height:null,initialOpenInfo:null,isEditable:null,layers:null,layout:null,lines:null,mapid:null,mapTypeId:null,metaKey:null,mapOpts:null,name:null,oid:null,otype:null,onDragDrop:null,onDrawingEvent:null,onPoiChange:null,onPopupHover:null,onRenderPopup:null,onRenderSidebar:null,onSearch:null,onViewportChange:null,poiList:null,poiListOpen:null,poiListPageSize:null,pois:null,popupStyle:null,query:null,search:null,width:null,zoom:null,...t};const[n,o]=_({clusterer:null,clustererDefaultRenderer:null,directionsTo:null,drawingManager:null,filters:mappl10n.options.filterParams?mappl10n.options.filterParams:{},hovered:null,hoveredDelay:null,hoveredPopup:null,init:null,isDirectionsOpen:null,isFetching:null,isFullscreen:null,isGeolocating:null,isHidden:!1,isLoaded:null,isMounted:null,isMini:null,isSidebarOpen:null!=t.poiListOpen?t.poiListOpen:mappl10n.options.poiListOpen,kmlEvent:null,layers:{},layout:t.layout?t.layout:mappl10n.options.layout,map:null,opened:null,oid:t.oid?t.oid:mappl10n.options.oid,otype:t.otype?t.otype:mappl10n.options.otype,overlays:[],page:1,pageCount:0,parsedCenter:null,poiList:void 0!==t.poiList&&null!=t.poiList?t.poiList:mappl10n.options.poiList,pois:[],polyline:null,templates:t.query?"user"==t.otype?{item:"user-mashup-item",popup:"user-mashup-popup"}:{item:"mashup-item",popup:"mashup-popup"}:{item:"map-item",popup:"map-popup"},userLocation:null}),m=window.parent?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),g=mappl10n.options.searchParam&&m.has(mappl10n.options.searchParam)?m.get(mappl10n.options.searchParam):null,d=P(t.container),f=P(null),h=P(null),{geocode:v,geolocate:y}=(P(),(0,k.useGeocoding)({includeBusinesses:t.isEditable}));function x(e){o((t=>({...t,...e})))}(0,C.useResizeObserver)(f.current,(function(){if(d.current&&0==d.current.offsetHeight)return;"leaflet"==mappl10n.options.engine?n.map.invalidateSize():a.mappEvent.trigger(n.map,"resize")})),(0,C.useResizeObserver)(d.current,(function(){if(d.current&&0==d.current.offsetHeight)return void(void 0===n.isHidden&&x({isHidden:!0}));n.isHidden&&(x({isHidden:!1}),K());if(n.poiList&&"inline"!=n.layout&&d.current){const e=d.current.clientWidth<mappl10n.options.mini;n.isMini!=e&&x({isSidebarOpen:!e}),e!=n.isMini&&(x({isMini:e}),d.current&&d.current.classList.toggle("mapp-mini",e))}})),M((()=>{switch(n.init){case null:!function(){const e=[__("MapPress FAQ","mappress-google-maps-for-wordpress")+": http://mappresspro.com/mappress-faq",__("Support","mappress-google-maps-for-wordpress")+": http://mappresspro.com/contact",__("Get an API Key","mappress-google-maps-for-wordpress")+": https://mappresspro.com/how-to-get-a-google-maps-api-key"];let t=[{condition:"leaflet"==mappl10n.options.engine&&("undefined"==typeof L||void 0===L.LatLng),title:__("Leaflet library not loaded","mappress-google-maps-for-wordpress"),text:__("A theme or plugin is preventing the Leaflet library from loading.","mappress-google-maps-for-wordpress")},{condition:"google"==mappl10n.options.engine&&"undefined"==typeof google,title:__("Google Maps API not loaded","mappress-google-maps-for-wordpress"),text:__("A theme or plugin is preventing Google Maps from loading.","mappress-google-maps-for-wordpress")},{condition:"google"==mappl10n.options.engine&&!mappl10n.options.apikey,title:__("Google Maps API key required","mappress-google-maps-for-wordpress")},{condition:document.querySelectorAll('script[src*="https://maps.googleapis.com/maps/api/js?v="]').length>1,title:__("Google Maps API loaded multiple times","mappress-google-maps-for-wordpress"),text:__("A theme or plugin has loaded Google Maps twice","mappress-google-maps-for-wordpress")}];t=t.filter((e=>e.condition));let n=t.map((e=>e.title+" : "+e.text));n.length&&(console.log(__("Map Error","mappress-google-maps-for-wordpress")+"\n----------------\n"+n.join("\n")+"\n----------------\n"+e.join("\n")),mappl10n.options.admin&&alert(__("Map error: please see the developer console (F12 in most browsers) for details.","mappress-google-maps-for-wordpress")))}();const e=window.location.origin;if(e&&e.includes("nfg.org")&&mappl10n.options.version>="2.85")return;let o,l={...t.mapOpts};if(l.minZoom=isNaN(parseInt(l.minZoom))?0:parseInt(l.minZoom),"leaflet"==mappl10n.options.engine?(o=new L.Map(f.current,{attribution:'&copy;<a href="https://openstreetmap.org">OpenStreetMap</a>',minZoom:0,scrollWheelZoom:mappl10n.options.scrollWheel,worldCopyJump:!0,zoomControl:null,...l}),L.control.zoom({position:"bottomright",zoomInTitle:"",zoomOutTitle:""}).addTo(o),o.attributionControl.setPrefix('<a href="https://mappresspro.com" target="_blank">MapPress</a>')):o=new google.maps.Map(f.current,{backgroundColor:"transparent",clickableIcons:!1,fullscreenControl:!1,mapTypeControl:!1,minZoom:0,scaleControl:!0,scrollWheelZoom:mappl10n.options.scrollWheel,streetViewControl:!t.query,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},...l}),x({map:o}),mappl10n.options.userLocation&&mappl10n.options.ssl&&y((e=>{e&&e.geometry&&e.geometry.location&&x({userLocation:e.geometry.location})}),!0),mappl10n.options.geolocate||t.geolocate||"user"==t.center)return void y((e=>{e&&e.geometry&&e.geometry.location&&x({parsedCenter:{lat:e.geometry.location.lat,lng:e.geometry.location.lng}}),x({init:1})}));v({value:t.center,callback:e=>{e&&e.geometry&&e.geometry.location&&x({parsedCenter:{lat:e.geometry.location.lat,lng:e.geometry.location.lng}}),x({init:1})}}),x({init:1});break;case 1:ne(t.mapTypeId),function(){if(t.isEditable&&"google"==mappl10n.options.engine&&google.maps.drawing){const e={fillColor:"#0000FF",fillOpacity:.4,strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:2};n.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},circleOptions:e,polygonOptions:e,polylineOptions:e,rectangleOptions:e}),n.drawingManager.setMap(n.map)}}(),t.query&&!n.isIframe?N((()=>x({init:2}))):(x({pois:t.pois?t.pois:[]}),x({init:2}));break;case 2:const i="leaflet"==mappl10n.options.engine?"load":"tilesloaded";if(a.mappEvent.addListenerOnce(n.map,i,(()=>{x({bounds:T()}),function(){if(mappl10n.options.clustering&&!t.isEditable){let e,t=mappl10n.options.clusteringOptions?mappl10n.options.clusteringOptions:{};if(void 0!==t.disableClusteringAtZoom&&""==t.disableClusteringAtZoom&&(t.disableClusteringAtZoom=null),"leaflet"==mappl10n.options.engine)e=L.markerClusterGroup(t),n.map.addLayer(e);else{const o=new markerClusterer.DefaultRenderer;t.maxZoom=void 0!==t.maxZoom&&t.maxZoom?parseInt(t.maxZoom):void 0;const a=new markerClusterer.SuperClusterAlgorithm(t);e=new markerClusterer.MarkerClusterer({map:n.map,markers:[],algorithm:a,renderer:{render:(e,t)=>{let{count:n,position:a}=e;const l=o.render({count:n,position:a},t);return l.title=null,l}}})}x({clusterer:e})}}(),(t.initialOpenInfo||mappl10n.options.initialOpenInfo)&&!t.isEditable&&n.pois&&n.pois.length&&("leaflet"==mappl10n.options.engine?setTimeout((()=>W(n.pois[0])),100):W(n.pois[0])),x({isLoaded:!0})})),g)return void v({value:g,callback:e=>{J(e)}});K()}}),[n.init]);(0,C.useTimeout)((()=>{x({hoveredDelay:0}),n.hoveredPopup||x({hovered:null})}),n.hoveredDelay);function N(e){}function S(e){return n.pois.find((t=>t.id==e))}function D(e){return n.map.fitBounds(e)}function T(){try{return n.map.getBounds()}catch(e){return null}}function I(){let e;try{e=n.map.getCenter()}catch(t){e=null}return e?E(e):null}function A(){if(t.embed)return{width:"100%",height:"100%"};const e=mappl10n.options.sizes[mappl10n.options.size]?mappl10n.options.sizes[mappl10n.options.size]:mappl10n.options.sizes[0],n=e=>"string"==typeof e&&(e.indexOf("px")>=0||e.indexOf("%")>=0||e.indexOf("vh")>=0||e.indexOf("vw")>=0)?e:e+"px";return{width:t.width?n(t.width):n(e.width),height:t.height?n(t.height):n(e.height)}}function F(e){let t;switch("leaflet"==mappl10n.options.engine&&"kml"!=e.type?null:e.type){case"polygon":t=new google.maps.LatLngBounds,e.poly.paths.map((e=>{e.map((e=>{t.extend(e)}))}));break;case"polyline":t=new google.maps.LatLngBounds,e.poly.path.map((e=>{t.extend(e)}));break;case"circle":const n=new google.maps.Circle({center:e.point,radius:e.poly.radius});t=n.getBounds();break;default:t=a.mappLib.viewportToBounds(e.viewport)}return t}function B(e,t){if(e.point&&!e.type)return"leaflet"==mappl10n.options.engine?L.latLng(e.point):new google.maps.LatLng(e.point.lat,e.point.lng);if("kml"==e.type&&t&&t.latLng)return t.latLng;const n=F(e);return"leaflet"==mappl10n.options.engine?n&&n.isValid()?n.getCenter():new L.latLng(0,0):n?n.getCenter():new google.maps.LatLng(0,0)}function j(){let e;try{e=n.map.getZoom()}catch(t){e=null}return e?parseInt(e):null}function z(){return!!(t.isEditable||t.search||mappl10n.options.search&&t.query)}function V(e){let t="";if(e.address)t=e.address;else{const n=E(B(e));t=n.lat+", "+n.lng}"inline"==mappl10n.options.directions?x({isDirectionsOpen:!0,directionsTo:t}):a.mappLib.getDirections("",t)}function H(e,n){let o;if("poi"!=mappl10n.options.mashupClick&&t.query&&"post"==e.otype&&e.oid&&e.url)switch(mappl10n.options.mashupClick){case"post":return void window.top.location.assign(e.url);case"postnew":return void window.open(e.url);case"postmodal":const t=document.createElement("div");document.body.appendChild(t),o=a.mappLib.createRoot(t);const n=R(w.MappPopupModal,{onClose:()=>{o?o.unmount():ReactDOM.unmountComponentAtNode(t),t.remove()},poi:e});if(!o)return ReactDOM.render(n,t);o.render(n)}else W(e,n)}function q(){x({hovered:null,opened:null,isDirectionsOpen:!1})}function G(e,t){e&&e.id==n.opened||n.opened||x(e?{hovered:e.id,hoveredDelay:0}:t?{hoveredDelay:300}:{hovered:null,hoveredDelay:0})}function W(e,t){q(),n.isMini&&Z(!1),x({kmlEvent:t,opened:e.id})}function U(e){e?x({hoveredPopup:e.id,hoveredDelay:0}):(x({hoveredPopup:null}),n.hovered&&!n.opened&&x({hoveredDelay:300}))}function J(e){if(!e||!e.geometry)return;const t=e.geometry.location?e.geometry.location:null,n=e.geometry.viewport?e.geometry.viewport:null;let o;if("leaflet"==mappl10n.options.engine){const e=new L.LatLng(t.lat,t.lng);o=n?new L.LatLngBounds(new L.LatLng(n.sw.lat,n.sw.lng),new L.LatLng(n.ne.lat,n.ne.lng)):e.toBounds(1e3*mappl10n.options.radius)}else{const e=new google.maps.Circle({center:t,radius:1e3*mappl10n.options.radius});o=n?new google.maps.LatLngBounds(new google.maps.LatLng(n.sw.lat,n.sw.lng),new google.maps.LatLng(n.ne.lat,n.ne.lng)).union(e.getBounds()):e.getBounds()}o&&D(o),oe(t)}function Z(e){x({isSidebarOpen:e=void 0!==e?e:!n.isSidebarOpen})}function K(e){e=void 0===e?n.parsedCenter:e;const o=t.zoom&&parseInt(t.zoom)?parseInt(t.zoom):null;if(e)return void oe(e,o||1);if(0==n.pois.length)return void oe({lat:0,lng:0},o||1);if(1==n.pois.length&&!n.pois[0].type)return void oe(B(n.pois[0]),o||mappl10n.options.poiZoom);let a="leaflet"==mappl10n.options.engine?new L.LatLngBounds:new google.maps.LatLngBounds;for(var l=0;l<n.pois.length;l++){var i=F(n.pois[l]);a=i?"leaflet"==mappl10n.options.engine?a.extend(i):a.union(i):a.extend(B(n.pois[l]))}o?oe(E(a.getCenter()),o):(D(a),ae(a.getCenter()))}function Y(){return n.isDirectionsOpen?R(l.MappDirections,{from:"",to:n.directionsTo,onClose:()=>{x({isDirectionsOpen:!1,directionsTo:null})}}):null}function X(){if(z())return n.isLoaded?R("div",{className:"mapp-header"},z()&&n.map?R("div",{className:"mapp-search-container"},R(r.MappPlaces,{buttonLabel:t.isEditable?__("Add to map","mappress-google-maps-for-wordpress"):R("img",{src:mappl10n.options.baseurl+"/images/search.png",alt:"search"}),focus:t.isEditable,includeBusinesses:t.isEditable,map:n.map,onSearch:e=>{t.onSearch?t.onSearch(e):J(e)},placeholder:!t.isEditable&&mappl10n.options.searchPlaceholder?mappl10n.options.searchPlaceholder:__("Search","mappress-google-maps-for-wordpress"),value:g})):null,"top"==mappl10n.options.filtersPos&&null):R("div",{className:"mapp-header"})}function Q(){return R(O,null,n.isFetching||n.isGeolocating?R(O,null,R("div",{className:"mapp-spinner-overlay"}),R("div",{className:"mapp-spinner"})):null,X(),R("div",{className:"mapp-main"},"inline"!=n.layout&&te(),R("div",{className:"mapp-canvas-panel"+("google"==mappl10n.options.engine?" mapp-google":" mapp-leaflet")},R("div",{className:"mapp-canvas",ref:f}),n.isLoaded&&n.userLocation?R(p.MappPoi,{isClusterable:!1,isEditable:!1,isOpen:!1,key:"user",map:n.map,poi:{point:n.userLocation,iconid:"geolocation"}}):null,function(){if(!n.isLoaded)return;const o=[],a=(e,t,a)=>{n.clusterer&&(t&&o.push(e),a==n.pois.length-1&&x({overlays:o}))};return n.pois.map(((o,l)=>{const i=o.id==n.hovered,s=o.id==n.opened||i&&mappl10n.options.tooltips&&!t.isEditable,r=mappl10n.options.tooltips&&!t.isEditable;return R(p.MappPoi,{key:o.id,isClusterable:!!n.clusterer&&!o.type,isEditable:!!t.isEditable,isHovered:i,isOpen:s,map:n.map,onChange:e=>{t.onPoiChange&&t.onPoiChange(o.id,e)},onClick:e=>H(o,e),onMouseOut:()=>{G(null,r)},onMouseOver:()=>G(o),onOverlayAdd:(e,t)=>a(e,t,l),onRenderPopup:"sidebar"==t.popupStyle?null:(o,a)=>function(o,a){const l=function(e){if(!n.clusterer)return;if("leaflet"==mappl10n.options.engine){var t=n.clusterer.getVisibleParent(e);return t&&t!=e?t.getLatLng():null}const o=n.clusterer.clusters;for(var a=0;a<o.length;a++){const t=o[a].markers;if(t.length>1)for(let n=0;n<t.length;n++)if(t[n]==e)return o[a].center_}}(a),i=B(o),s=E(l||i);let r,p,u={x:0,y:0};l?u={x:0,y:-14}:o.type||(u=mappl10n.options.iconScale&&mappl10n.options.iconScale[0]&&mappl10n.options.iconScale[1]?{x:0,y:0-mappl10n.options.iconScale[1]}:{x:0,y:-32});n.kmlEvent&&(n.kmlEvent.pixelOffset&&(u={x:e.pixelOffset.width,y:e.pixelOffset.height}),n.kmlEvent.featureData?r=n.kmlEvent.featureData:n.kmlEvent&&n.kmlEvent.propagatedFrom&&n.kmlEvent.propagatedFrom.feature&&n.kmlEvent.propagatedFrom.feature.properties&&(r=n.kmlEvent.propagatedFrom.feature.properties));p=t.onRenderPopup?t.onRenderPopup(o,q):R(c.MappPoiContent,{center:I(),context:"popup",feature:r,isEditable:t.isEditable,onDirectionsClick:()=>V(o),poi:o,template:n.templates.popup,thumbs:mappl10n.options.thumbsPopup});let m=!t.isEditable&&mappl10n.options.thumbsPopup?"mapp-thumb-"+mappl10n.options.thumbsPopup:"";return m+=o.images&&o.images.length?" mapp-has-thumb":"",R(b,{anchor:u,className:m,content:p,map:n.map,onMouseEnter:()=>U(o),onMouseLeave:()=>U(null),point:s})}(o,a),poi:o})}))}(),t.isEditable||"leaflet"==mappl10n.options.engine||!n.map?null:R(s.MappMenuControl,{map:n.map,onCenter:()=>{q(),K()}}),t.isEditable?null:R(i.MappFullscreenControl,{onChange:e=>function(e){x({isFullscreen:e,layout:e?"left":t.layout||mappl10n.options.layout})}(e),isFullscreen:n.isFullscreen,layoutNode:d.current}),R(i.MappGeolocateControl,{onClick:()=>(x({isGeolocating:!0}),void y((e=>{x({isGeolocating:!1}),e&&e.geometry&&e.geometry.location&&oe(e.geometry.location,mappl10n.options.poiZoom)}),!1))}))),n.poiList&&"inline"!=n.layout&&n.isMini?R("div",{className:"mapp-footer"},!n.isSidebarOpen&&R("div",{className:"mapp-button mapp-view-list",onClick:()=>Z(!0)},R("img",{alt:"list",src:mappl10n.options.baseurl+"/images/outline_format_list_bulleted_black_18dp.png"}),__("List","mappress-google-maps-for-wordpress")),n.isSidebarOpen&&R("div",{className:"mapp-button mapp-view-map",onClick:()=>Z(!1)},R("img",{alt:"map",src:mappl10n.options.baseurl+"/images/outline_map_black_18dp.png"}),__("Map","mappress-google-maps-for-wordpress"))):null)}function $(){const e=A(),t=n.isFullscreen?{height:"100%"}:{paddingBottom:e.height};return R(O,null,R("div",{className:"mapp-wrapper",style:t},R("div",{className:"mapp-content"},Q())),"inline"==n.layout&&te())}function ee(){if(!n.poiList||!n.isLoaded||n.isDirectionsOpen)return null;const e=(z()||mappl10n.options.poiListViewport)&&n.bounds&&!t.isEditable;let o=[];return o=e?n.pois.filter(((e,t)=>n.bounds.contains(B(e)))):n.pois,n.pageCount!=o.length&&x({pageCount:o.length}),R(u.MappPoiList,{className:!t.isEditable&&mappl10n.options.thumbsList?" mapp-thumb-"+mappl10n.options.thumbsList:"",hovered:n.hovered,isEditable:t.isEditable,isFiltered:e,isPaged:!!t.query,onClick:e=>H(S(e)),onDirectionsClick:e=>V(S(e)),onDragDrop:e=>{let{from:n,to:o}=e;return function(e,n){t.onDragDrop&&t.onDragDrop(e,n)}(n,o)},onMouseEnter:e=>G(S(e)),onMouseLeave:e=>G(null),onPage:e=>{x({page:e})},opened:n.opened,page:n.page,pois:o,template:t.isEditable?null:n.templates.item})}function te(){const e=n.isSidebarOpen||n.isDirectionsOpen;let o="mapp-sidebar";if(o+="inline"==n.layout?" mapp-sidebar-inline":"",o+=e?" mapp-sidebar-open":"",n.isDirectionsOpen)return R("div",{className:o,ref:h},Y());if("sidebar"==t.popupStyle&&n.opened&&t.onRenderPopup){const e=S(n.opened);return R("div",{className:o,ref:h},t.onRenderPopup(e,q))}return n.poiList?R("div",{className:o,ref:h},R("div",{className:"mapp-sidebar-toggle",onClick:()=>Z()}),"list"==mappl10n.options.filtersPos&&null,t.onRenderSidebar&&t.onRenderSidebar(),Y(),ee()):void 0}function ne(e){const t=mappl10n.options.standardStyles.concat(mappl10n.options.userStyles);let o=t.find((t=>t.id==e));if(!mappl10n.options.style||"roadmap"!=e&&"streets"!=e&&o||(o=t.find((e=>e.id==mappl10n.options.style))),o=o||t[0],"leaflet"==mappl10n.options.engine){let e=mappl10n.options.tileProviders[o.provider],t={...e,...o};L.tileLayer(e.url,t).addTo(n.map)}else if(n.map.setMapTypeId("standard"==o.type?o.id:"roadmap"),o.json){let e=null;try{e=JSON.parse(o.json)}catch(e){console.log("Invalid JSON in map style")}n.map.setOptions({styles:e||null})}else n.map.setOptions({styles:null})}function oe(e,t,o){"leaflet"==mappl10n.options.engine?(null==t&&(t=n.map.getZoom()?n.map.getZoom():0),n.map.setView(e,t,o)):(e=E(e),e={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},t=t?parseInt(t):null,e&&n.map.setCenter(e),t&&n.map.setZoom(t)),ae(e)}function ae(e){if(!mappl10n.options.sort||!e||t.isEditable)return;let o=[...n.pois];"distance"==mappl10n.options.sort?(o=o.map((t=>{const n=a.mappLib.getDistance(e,B(t));return{...t,distance:n}})),o.sort(((e,t)=>e.distance-t.distance))):"title"==mappl10n.options.sort&&o.sort(((e,t)=>e.title<t.title?-1:e.title>t.title?1:0)),x({pois:o})}return M((()=>{n.isLoaded&&!t.query&&x({pois:t.pois?t.pois:[]})}),[t.pois]),M((()=>{n.clusterer&&("leaflet"==mappl10n.options.engine?(n.clusterer.clearLayers(),n.clusterer.addLayers(n.overlays)):(n.clusterer.clearMarkers(),n.clusterer.addMarkers(n.overlays)))}),[n.clusterer,n.overlays]),M((()=>{n.isLoaded&&t.query&&N()}),[t.query]),M((()=>{if(n.isLoaded&&t.query)N();else if(t.pois&&n.filters){x({pois:t.pois.filter((e=>{for(const[t,o]of Object.entries(n.filters)){if(!e.data||!e.data[t])return!1;const n=Array.isArray(e.data[t])?e.data[t]:[e.data[t]];if(!(Array.isArray(o)?o:[o]).some((e=>n.includes(e))))return!1}return!0}))})}}),[n.filters]),M((()=>{n.isLoaded&&null==t.center&&K(null)}),[t.center]),M((()=>{n.isLoaded&&ne(t.mapTypeId)}),[t.mapTypeId]),M((()=>{if(n.isLoaded&&t.centerPoi){const n=t.centerPoi.poi;let o=null;if(t.centerPoi.zoom)if(n.viewport){var e=n.viewport.ne.lng-n.viewport.sw.lng;e<0&&(e+=360),o=Math.floor(Math.log(360*f.current.clientWidth/e/256)/Math.LN2)}else o=mappl10n.options.poiZoom;oe(B(n),o)}}),[t.centerPoi]),M((()=>{!function(){if(t.isEditable||!t.lines&&!mappl10n.options.lines||n.pois.length<2)return;n.polyline&&("leaflet"==mappl10n.options.engine?n.polyline.remove():n.polyline.setMap(null),x({polyline:null}));const e={...mappl10n.options.lineOpts},o=[];if(n.pois.map((e=>{o.push(B(e))})),"leaflet"==mappl10n.options.engine)x({polyline:new L.Polyline(o,e).addTo(n.map)});else{const t={strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity};e.icons&&(e.icons.map((e=>{e.icon.path=parseInt(e.icon.path)})),e.icons[0].repeat="50px"),x({polyline:new google.maps.Polyline({map:n.map,path:o,...e,...t})}),e.animate&&e.icons&&e.icons.length&&function(){let e=0;const t=n.polyline.get("icons");t[0].repeat.replace("%","").replace("px","");window.setInterval((()=>{e+=1;t[0].offset=e+(t[0].repeat.indexOf("%")>=0?"%":"px"),n.polyline.set("icons",t)}),20)}()}}()}),[n.pois]),M((()=>{if(!n.isLoaded)return;let e,o,l;return e=a.mappEvent.addListener(n.map,"moveend idle",(e=>(x({bounds:T(),page:1}),void(t.onViewportChange&&t.onViewportChange({center:I(),zoom:j()}))))),o=a.mappEvent.addListener(n.map,"click dragstart zoom_changed zoomstart",(e=>{"leaflet"==mappl10n.options.engine&&"click"==e.type&&e.originalEvent&&!e.originalEvent.target.matches(".mapp-canvas")||q()})),n.drawingManager&&(l=a.mappEvent.addListener(n.drawingManager,"overlaycomplete",(e=>{n.drawingManager.setDrawingMode(null),G(null),t.onDrawingEvent&&t.onDrawingEvent(e)}))),t.name&&(window[t.name]={getMap:()=>n.map,getPois:()=>n.pois,poiOpen:e=>x({opened:"string"==typeof e?e:e.id})}),()=>{a.mappEvent.removeListener(e),a.mappEvent.removeListener(o),l&&a.mappEvent.removeListener(l)}})),t.container?mappl10n.options.webComponent?Q(t.container):$():function(){const e=A();t.name&&t.name;let n="mapp-layout";const o=t.alignment?t.alignment:mappl10n.options.alignment;o&&!document.body.classList.contains("block-editor-page")&&(n+=" align"+o,n+=" mapp-align-"+o);let a="full"==t.alignment?{width:"auto"}:{width:e.width};return R("div",{className:n,style:a,ref:d,tabIndex:"-1"},$())}()}},759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mappMarker:()=>a});var o=n(939);function a(e){this.anchorPoint=null,this.div=null,this.draggable=null,this.icon=null,this.map=null,this.position=null,this.visible=!0,this.zIndex=0,this.setValues(e),this.overlayView=new google.maps.OverlayView,this.overlayView.draw=()=>this.draw(),this.overlayView.onAdd=()=>this.onAdd(),this.overlayView.onRemove=()=>this.onRemove(),this.div=document.createElement("div"),this.div.classList.add("mapp-marker")}a.prototype={draw:function(){if(!this.div||!this.icon)return;let e=this.overlayView.getProjection();if(e){let t=e.fromLatLngToDivPixel(this.position),n=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};this.div.style.left=t.x-n.width/2+"px",this.div.style.top=t.y-n.height+"px"}},getDiv:function(){return this.div},getDraggable:function(){return this.draggable},getMap:function(){return this.map},getPosition:function(){return this.position},getVisible:function(){return this.visible},handleEvent:function(e){let t="on"+e.type[0].toUpperCase()+e.type.slice(1);this[t]&&this[t](e)},onAdd:function(){let e=this.overlayView.getPanes();e&&(this.div||(this.div=document.createElement("div"),this.div.classList.add("mapp-marker")),e.overlayMouseTarget.append(this.div),this.icon&&this.setIcon(),google.maps.OverlayView.preventMapHitsAndGesturesFrom(this.div),this.div.addEventListener("click",(()=>{(!this.dragging||this.dragging&&!this.dragging.moved)&&o.mappEvent.trigger(this,"click"),this.dragging=null})),this.div.addEventListener("mouseenter",this),this.div.addEventListener("mouseleave",this),this.setDraggable(this.draggable))},onMouseenter:function(e){o.mappEvent.trigger(this,"mouseover")},onMouseleave:function(e){o.mappEvent.trigger(this,"mouseout")},onPointerdown:function(e){const t=this.map.getDiv().getBoundingClientRect(),n=this.overlayView.getProjection().fromLatLngToContainerPixel(this.position);this.dragging={moved:!1,startPixel:{x:e.clientX,y:e.clientY},offset:{x:n.x-(e.clientX-t.left),y:n.y-(e.clientY-t.top)}},this.toggleDragEvents(!0)},onPointermove:function(e){if(Math.abs(e.clientX-this.dragging.startPixel.x)+Math.abs(e.clientY-this.dragging.startPixel.y)<3)return;const t=this.map.getDiv().getBoundingClientRect();let n={x:e.clientX-t.left+this.dragging.offset.x,y:e.clientY-t.top+this.dragging.offset.y};this.setPosition(this.overlayView.getProjection().fromContainerPixelToLatLng(n)),this.dragging.moved=!0,o.mappEvent.trigger(this,"dragstart")},onPointercancel:function(e){this.onPointerup(e)},onPointerup:function(e){this.dragging&&this.dragging.moved&&o.mappEvent.trigger(this,"dragend"),this.toggleDragEvents(!1)},onRemove:function(){this.div&&(this.toggleDragEvents(!1),this.div.remove(),this.div=null)},set:function(e,t){let n="set"+e[0].toUpperCase()+e.slice(1);this[n]&&this[n](t)},setDraggable:function(e){this.draggable=e,this.map&&this.div&&(this.div.removeEventListener("pointerdown",this,{passive:!0}),e&&this.div.addEventListener("pointerdown",this,{passive:!0}))},setIcon:function(e){if(void 0!==e&&(this.icon=e),this.icon&&this.div){const e=this.icon.title?this.icon.title:"mappress marker";let t='<img draggable="false" src="'+this.icon.url+'" alt="'+e+'">';this.div.innerHTML=t;let n=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};this.div.style.width=n.width+"px",this.div.style.height=n.height+"px",this.setZIndex(),this.draw()}},setMap:function(e){this.map=e,this.overlayView.setMap(e)},setPosition:function(e){this.position=e,this.draw()},setValues:function(e){for(const t in e)this.set(t,e[t])},setVisible:function(e){this.visible=e,this.div&&(this.div.style.visibility=e?"visible":"hidden")},setZIndex:function(e){this.zIndex=void 0!==e?e:this.zIndex,this.div&&(this.div.style.zIndex=e)},toggleDragEvents(e){document.removeEventListener("pointermove",this,{passive:!0}),document.removeEventListener("pointerup",this,{passive:!0}),document.removeEventListener("pointercancel",this,{passive:!0}),e&&(document.addEventListener("pointermove",this,{passive:!0}),document.addEventListener("pointerup",this,{passive:!0}),document.addEventListener("pointercancel",this,{passive:!0}))}}},602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappMenuControl:()=>c});var o=n(326);const a=React.createElement,{Fragment:l,useEffect:i,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={layer:null,map:null,onCenter:null,...e};const[t,n]=p({activeLayer:e.layer?e.layer:null,layers:null,isOpen:!1}),s=r(null);function c(e){n((t=>({...t,...e})))}function u(){c({isOpen:!t.isOpen})}return(0,o.useClickOutside)(s,(()=>{t.isOpen&&u()})),i((()=>{if("google"==mappl10n.options.engine){c({layers:{traffic:{googleLayer:new google.maps.TrafficLayer,label:__("Traffic","mappress-google-maps-for-wordpress")},bicycling:{googleLayer:new google.maps.BicyclingLayer,label:__("Bicycling","mappress-google-maps-for-wordpress")},transit:{googleLayer:new google.maps.TransitLayer,label:__("Transit","mappress-google-maps-for-wordpress")}}})}}),[]),a("div",{ref:s},a("div",{className:"mapp-menu-toggle",onClick:()=>u()}),t.isOpen&&function(){let n=[];return Object.entries(t.layers).forEach((o=>{let[l,i]=o;const s=t.activeLayer==l?"mapp-menu-item mapp-active":"mapp-menu-item";n.push(a("div",{className:s,key:l,onClick:()=>function(n){t.activeLayer&&t.layers[t.activeLayer].googleLayer.setMap(null),n!=t.activeLayer&&t.layers[n].googleLayer.setMap(e.map),c({activeLayer:n==t.activeLayer?null:n,isOpen:!1})}(l)},i.label))})),a("div",{className:"mapp-menu"},a("div",{className:"mapp-menu-items"},a("div",{className:"mapp-menu-item",onClick:()=>(c({isOpen:!1}),void e.onCenter())},__("Center map","mappress-google-maps-for-wordpress")),"google"==mappl10n.options.engine&&a(l,null,a("div",{className:"mapp-menu-separator"}),n)),a("div",{className:"mapp-menu-footer"},a("a",{className:"mapp-menu-help",href:"https://mappresspro.com/mappress-documentation",target:"_blank"},a("span",null,__("Help","mappress-google-maps-for-wordpress")))))}())}},27:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPaginate:()=>p});const o=React.createElement,{Fragment:a,useEffect:l,useLayoutEffect:i,useRef:s,useState:r}=React,{__,sprintf}=wp.i18n;function p(e){function t(t,n){const o=Math.ceil(e.count/e.pageSize);switch(t){case"first":e.onChange(1);break;case"last":e.onChange(o);break;case"next":e.page<o&&e.onChange(e.page+1);break;case"prev":e.page>1&&e.onChange(e.page-1)}}return function(){const n=Math.ceil(e.count/e.pageSize),a=e.isBusy||e.page<=1,l=e.isBusy||e.page>=n,i=a?"mapp-paginate-button mapp-disabled":"mapp-paginate-button",s=l?"mapp-paginate-button mapp-disabled":"mapp-paginate-button",r=sprintf(__("%d of %d","mappress-google-maps-for-wordpress"),e.page,n);return o("div",{className:"mapp-paginate"},o("div",{className:i,onClick:()=>{a||t("first")}},"Â«"),o("div",{className:i,onClick:()=>{a||t("prev")}},"â€¹"),o("div",{className:"mapp-paginate-count"},r),o("div",{className:s,onClick:()=>{l||t("next")}},"â€º"),o("div",{className:s,onClick:()=>{l||t("last")}},"Â»"))}()}},818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPlaces:()=>m});var o=n(117),a=n(10);const l=React.createElement,{Fragment:i,useCallback:s,useEffect:r,useLayoutEffect:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n;function m(e){e={buttonLabel:null,focus:!1,includeBusinesses:!1,map:null,onChange:null,onSearch:null,placeholder:null,value:null,...e};const{geocode:t,getPredictions:n}=(0,a.useGeocoding)({map:e.map,includeBusinesses:e.includeBusinesses}),[i,s]=u({suggestions:[]});return l(o.MappAutocomplete,{buttonLabel:e.buttonLabel,className:"mapp-places",delay:"google"==mappl10n.options.geocoder||"mapbox"==mappl10n.options.geocoder?50:500,focus:e.focus,onChange:t=>function(t){e.onChange&&e.onChange(t)}(t),onFetch:function(t){n({map:e.map,value:t,callback:e=>{var t;t={suggestions:e},s((e=>({...e,...t})))}})},onSelect:function(n){let{suggestion:o,value:a}=n;t({map:e.map,suggestion:o,value:a,callback:t=>{t&&e.onSearch(t)}})},placeholder:e.placeholder,suggestions:i.suggestions,title:__("Enter an address, place, KML file URL, or lat,lng","mappress-google-maps-for-wordpress"),value:e.value})}},50:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoiContent:()=>u});var o=n(939);const a=React.createElement,{Fragment:l,useEffect:i,useLayoutEffect:s,useMemo:r,useRef:p,useState:c}=React,{__,sprintf}=wp.i18n;function u(e){e={center:null,context:null,feature:null,isEditable:null,onDirectionsClick:null,poi:null,template:null,thumbs:null,...e};const[t,n]=c({imageNumber:0});function i(e){n((t=>({...t,...e})))}function s(){if("popup"!=e.context)return null;e.poi.data&&e.poi.data;const t=mappl10n.options.poiFields?mappl10n.options.poiFields:[];let n='<div class="mapp-table mapp-data">';return t.forEach((t=>{n+=function(t){let n=e.poi?.data?e.poi.data[t.key]:null,o="";if(null==n)return"";Array.isArray(t.values)&&t.values.length?(n=Array.isArray(n)?n:[n],o=t.values.filter((e=>n.indexOf(e.value)>=0)).map((e=>e.label||e.value)).join(", ")):o=n;return'<div class="mapp-row mapp-data-'+t.key+'"><div class="mapp-label">'+(t.label?t.label:t.key)+'</div><div class="mapp-cell">'+o+"</div></div>"}(t)})),n}return a(l,null,function(){const n="list"!=e.context&&mappl10n.options.thumbWidth&&mappl10n.options.thumbHeight?{width:mappl10n.options.thumbWidth+"px",height:mappl10n.options.thumbHeight+"px"}:null,o=e.thumbs&&e.poi.images&&e.poi.images.length&&e.poi.images[t.imageNumber]?e.poi.images[t.imageNumber]:null;if(!o)return null;const l=function(e){switch(e.type){case"avatar":if(e.html)return a("div",{className:"mapp-avatar",dangerouslySetInnerHTML:{__html:e.html}});break;case"embed":return a("div",{className:"mapp-embed",dangerouslySetInnerHTML:{__html:e.html}});default:if("image"==e.type||!e.type){const t=e.size?{src:e.url,width:e.size[0]+"px",height:e.size[1]+"px",alt:"mappress thumbnail"}:{src:e.url,alt:"mappress thumbnail"};return a("img",t)}}}(o);return a("div",{className:"mapp-thumbnail",onClick:()=>function(t){e.isEditable||"popup"!=e.context||"embed"==t.type||e.poi.url&&window.top.open(e.poi.url,"_blank")}(o),style:n},t.imageNumber>=1&&a("div",{className:"mapp-gallery-previous",onClick:e=>function(e){t.imageNumber>0&&(i({imageNumber:t.imageNumber-1}),e.stopPropagation())}(e)}),l,t.imageNumber<e.poi.images.length-1&&a("div",{className:"mapp-gallery-next",onClick:n=>function(n){t.imageNumber<e.poi.images.length-1&&(i({imageNumber:t.imageNumber+1}),n.stopPropagation())}(n)}))}(),a("div",{className:"mapp-info"},function(){let t={...e.poi};t.icon=o.mappLib.getIconUrl(e.poi.iconid),t.distance&&(t.distance+="imperial"==mappl10n.options.units?" mi":" km"),e.feature&&(t.body=e.feature.description,t.title=e.feature.name),mappl10n.options.betaPoiFields?t.dataTable=s():t.data="",t.props=t.props?t.props:{},t.data=t.data?t.data:{};const n=o.mappLib.template(e.template,{poi:t});return a("div",{className:"mapp-template",dangerouslySetInnerHTML:{__html:n}})}(),function(){if(!(e.template.indexOf("user")>=0))return"popup"==e.context&&mappl10n.options.directionsPopup||"list"==e.context&&mappl10n.options.directionsList?a("div",{className:"mapp-dir-wrapper"},a("span",{className:"mapp-dir",onClick:t=>function(t){t.stopPropagation(),e.onDirectionsClick()}(t)},__("Get Directions","mappress-google-maps-for-wordpress"))):void 0}()))}},615:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoiList:()=>g});var o=n(939),a=n(27),l=n(50);const i=React.createElement,{Fragment:s,useEffect:r,useLayoutEffect:p,useMemo:c,useRef:u,useState:m}=React,{__,sprintf}=wp.i18n;function g(e){e={className:null,hovered:null,isEditable:!1,isFiltered:null,isPaged:!1,onClick:null,onDragDrop:null,onDirectionsClick:null,onMouseEnter:null,onMouseLeave:null,onPage:null,opened:null,page:1,pois:null,template:null,...e};const[t,n]=m({dragging:null,dragover:null,pageSize:!e.isEditable&&mappl10n.options.poiListPageSize?parseInt(mappl10n.options.poiListPageSize):20});function r(e){n((t=>({...t,...e})))}function p(n){let a,p="mapp-item";return e.opened!=n.id&&e.hovered!=n.id||(p+=" mapp-selected"),p+=t.dragover==n.id?" mapp-dragover":"",a=e.isEditable?i(s,null,i("img",{className:"mapp-icon",src:o.mappLib.getIconUrl(n.iconid)}),i("div",{className:"mapp-title"},n.title)):i(l.MappPoiContent,{context:"list",onDirectionsClick:()=>e.onDirectionsClick(n.id),poi:n,template:e.template,thumbs:mappl10n.options.thumbsList}),i("div",{className:p,dangerouslySetInnerHTML:null,draggable:e.isEditable,key:n.id,onClick:()=>e.onClick(n.id),onDragOver:e=>e.preventDefault(),onDragStart:e=>r({dragging:n.id}),onDragEnter:e=>r({dragover:n.id}),onDragEnd:e=>r({dragging:null,dragover:null}),onDrop:o=>{return a=n.id,void(e.onDragDrop&&e.onDragDrop({from:t.dragging,to:a}));var a},onMouseEnter:t=>{e.onMouseEnter(n.id)},onMouseLeave:t=>{e.onMouseLeave(n.id)}},a)}return i("div",{className:"mapp-list "+(e.className?e.className:"")},(e.isPaged||e.isFiltered)&&function(){let t=1!=e.pois.length?__("%d Results","mappress-google-maps-for-wordpress"):__("%d Result","mappress-google-maps-for-wordpress");return t=sprintf(t,e.pois.length),i("div",{className:"mapp-list-header"},i("div",{className:"mapp-list-count"},t))}(),function(){const n=t.pageSize*(e.page-1),o=n+t.pageSize-1;return i("div",{className:"mapp-items",key:e.page},e.pois.map(((t,a)=>{if(!e.isPaged||a>=n&&a<=o)return p(t)})))}(),e.isPaged&&(!e.isPaged||e.pois.length<=t.pageSize?null:i("div",{className:"mapp-list-footer"},i(a.MappPaginate,{count:e.pois.length,onChange:t=>e.onPage(t),page:e.page,pageSize:t.pageSize}))))}},81:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoi:()=>u});var o=n(939),a=n(759);React.createElement;const{Fragment:l,useEffect:i,useLayoutEffect:s,useMemo:r,useRef:p,useState:c}=React,{__,sprintf}=wp.i18n;function u(e){e={isClusterable:null,isEditable:null,isHovered:null,isOpen:null,map:null,onMouseOut:null,onMouseOver:null,onOverlayAdd:null,poi:null,...e};const t=p(null),[n,l]=c({overlay:null});function s(){return"google"==mappl10n.options.engine&&-1!=["polyline","polygon","circle","rectangle"].indexOf(e.poi.type)}function r(){const t=o.mappPoi.parseOverlay(e.poi.type,n.overlay);e.onChange(t)}function u(e,t){const n={};return e&&"object"==typeof e&&t&&Array.isArray(t)?(t.map((t=>{void 0!==e[t]&&(n[t]=e[t])})),n):n}function m(t,n){n?"leaflet"==mappl10n.options.engine?t.addTo(e.map):t.setMap(e.map):"leaflet"==mappl10n.options.engine?t.remove():t.setMap(null)}function g(t){"kml"==e.poi.type&&(t?"leaflet"==mappl10n.options.engine?(o.mappEvent.addListenerOnce(n.overlay,"ready",(()=>{const t=n.overlay.getBounds();t&&(e.map.fitBounds(t),r())})),o.mappEvent.addListenerOnce(n.overlay,"error",(t=>{alert(__("Error reading KML file.","mappress-google-maps-for-wordpress")+" "+__("This may be a CORS error.  See the MapPress FAQ for help.","mappress-google-maps-for-wordpress")+" : "+e.poi.kml.url)}))):(o.mappEvent.addListener(n.overlay,"defaultviewport_changed",(()=>{if(e.isEditable&&!e.poi.viewport){const t=n.overlay.getDefaultViewport();t&&e.map.fitBounds(t)}r()})),o.mappEvent.addListener(n.overlay,"status_changed",(()=>{"OK"!=n.overlay.getStatus()&&alert(__("Error reading KML file.","mappress-google-maps-for-wordpress")+" : "+e.poi.kml.url)}))):o.mappEvent.clearListeners(n.overlay,"ready error defaultviewport_changed status_changed"))}function d(t){s()&&"google"==mappl10n.options.engine&&e.isEditable&&("rectangle"==e.poi.type&&(o.mappEvent.clearListeners(n.overlay,"bounds_changed"),t&&o.mappEvent.addListener(n.overlay,"bounds_changed",(()=>{r()}))),"circle"==e.poi.type&&(o.mappEvent.clearListeners(n.overlay,"center_changed radius_changed"),t&&o.mappEvent.addListener(n.overlay,"center_changed radius_changed",(()=>{r()}))),"polygon"!=e.poi.type&&"polyline"!=e.poi.type||(o.mappEvent.clearListeners(n.overlay,"rightclick"),o.mappEvent.clearListeners(n.overlay.getPath(),"insert_at remove_at set_at"),t&&(o.mappEvent.addListener(n.overlay,"rightclick",(e=>{null!=e.vertex&&n.overlay.getPath().getLength()>2&&(n.overlay.getPath().removeAt(e.vertex),r())})),o.mappEvent.addListener(n.overlay.getPath(),"insert_at remove_at set_at",(()=>{r()})))))}return i((()=>{if(!n.overlay||!e.poi.point||e.poi.type)return;const t=o.mappLib.pointToLatLng(e.poi.point);"google"==mappl10n.options.engine?n.overlay.setPosition(t):n.overlay.setLatLng(t)}),[e.poi.point]),i((()=>{const n="leaflet"==mappl10n.options.engine&&"kml"!=e.poi.type?null:e.poi.type,i=u(e.poi.poly,["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity"]);let r;switch(n){case"polygon":r=new google.maps.Polygon({paths:e.poi.poly.paths,...i});break;case"polyline":r=new google.maps.Polyline({path:e.poi.poly.path,...i});break;case"circle":const t=new google.maps.LatLng(e.poi.point.lat,e.poi.point.lng);r=new google.maps.Circle({center:t,radius:parseFloat(e.poi.poly.radius),...i});break;case"rectangle":r=new google.maps.Rectangle({bounds:o.mappLib.viewportToBounds(e.poi.viewport),...i});break;case"kml":const n=e.poi.kml&&e.poi.kml.url?e.poi.kml.url:"";r="leaflet"==mappl10n.options.engine?n&&n.includes(".gpx")?omnivore.gpx(n):omnivore.kml(n):new google.maps.KmlLayer({url:n,preserveViewport:!0,suppressInfoWindows:!0});break;default:r="leaflet"==mappl10n.options.engine?L.marker([e.poi.point.lat,e.poi.point.lng]):new a.mappMarker({position:new google.maps.LatLng(e.poi.point.lat,e.poi.point.lng)}),r.setIcon(o.mappLib.getIcon(e.poi.iconid))}var p;return p={overlay:r},l((e=>({...e,...p}))),"kml"!=e.poi.type&&("leaflet"==mappl10n.options.engine?r.options.draggable=e.isEditable:r.setDraggable(e.isEditable)),s()&&r.setEditable(e.isEditable),e.isClusterable?"google"==mappl10n.options.engine&&m(r,e.map):m(r,e.map),e.onOverlayAdd&&e.onOverlayAdd(r,e.isClusterable),t.current=r,()=>{m(t.current,null)}}),[]),i((()=>{if(n.overlay){const t=u(e.poi.poly,["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity"]);n.overlay.setOptions({...t})}}),[e.poi.poly]),i((()=>{n.overlay&&n.overlay.setIcon(o.mappLib.getIcon(e.poi.iconid))}),[e.poi.iconid]),i((()=>{n.overlay&&function(t){if("kml"==e.poi.type)return;if(s())return void(e.isEditable&&n.overlay.setEditable(t));if("icon"==mappl10n.options.highlight&&"leaflet"==mappl10n.options.engine&&e.isEditable)return;var a="leaflet"==mappl10n.options.engine?n.overlay._icon:n.overlay.getDiv();if(!a)return;switch(e.isEditable?"circle":mappl10n.options.highlight){case"circle":a.classList.toggle("mapp-marker-circle",t);break;case"icon":var l=t?o.mappLib.getIcon(mappl10n.options.highlightIcon):o.mappLib.getIcon(e.poi.iconid);if("leaflet"==mappl10n.options.engine&&n.overlay.getIcon().options.iconUrl==l.options.iconUrl)return;n.overlay.setIcon(l);break;case"scale":a.classList.add("mapp-marker"),a.classList.toggle("mapp-marker-scale",t)}const i=t?1e4:0;"leaflet"==mappl10n.options.engine?e.poi.type||n.overlay.setZIndexOffset(i):n.overlay.set("zIndex",i)}(e.isHovered||e.isOpen)}),[e.isHovered,e.isOpen,n.overlay]),i((()=>{if(n.overlay)return o.mappEvent.addListener(n.overlay,"click",(t=>{e.onClick(t)})),o.mappEvent.addListener(n.overlay,"mouseover",(t=>{e.onMouseOver&&e.onMouseOver(t)})),o.mappEvent.addListener(n.overlay,"mouseout",(t=>{e.onMouseOut&&e.onMouseOut(t)})),d(!0),g(!0),e.isEditable&&(o.mappEvent.addListener(n.overlay,"dragstart",(()=>(d(!1),void(e.onChange&&e.onChange({viewport:null}))))),o.mappEvent.addListener(n.overlay,"dragend",(()=>(r(),void d(!0))))),()=>{o.mappEvent.clearListeners(n.overlay,"click mouseover mouseout dragstart dragend"),d(!1),g(!1)}})),e.isOpen&&e.onRenderPopup?e.onRenderPopup(e.poi,n.overlay):null}},892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPopupModal:()=>u});var o=n(908),a=n(939);const l=React.createElement,{Fragment:i,useEffect:s,useLayoutEffect:r,useRef:p,useState:c}=(ReactDOM.createPortal,React),{__,sprintf}=wp.i18n;function u(e){e={onClose:null,poi:null,...e};const[t,n]=c({isBusy:!1,html:null});function i(e){n((t=>({...t,...e})))}return s((()=>{e.poi.oid&&(i({isBusy:!0}),a.mappLib.ajax({method:"GET",data:{action:"mapp_get_post",oid:e.poi.oid,nonce:mappl10n.options.nonce},responseType:"html",callback:e=>{i({isBusy:!1,html:e})}}))}),[e.poi.oid]),l(o.MappDialog,{className:"mapp-modal",closeOnClickOutside:!0,isModal:!0,onRequestClose:()=>e.onClose()},t.isBusy&&l("div",{className:"mapp-modal-spinner"}),!t.isBusy&&l("div",{className:"mapp-modal-template",dangerouslySetInnerHTML:{__html:t.html}}))}}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(117),o(962),o(908),o(715),o(817),o(10),o(326),o(939),o(346),o(945),o(759),o(602),o(27),o(818),o(81),o(50),o(615),o(892),o(374)})();