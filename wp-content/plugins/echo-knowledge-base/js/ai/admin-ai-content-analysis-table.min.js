(function(){"use strict";const{useState:e,useEffect:a,useCallback:t,createElement:n,Fragment:s,useContext:o,useRef:i,useMemo:l,createRoot:r}=wp.element;const{__:c}=wp.i18n;const{showError:d,showSuccess:u,makeApiRequest:p,showConfirmDialog:g,formatServerDateTime:m,useTableSearch:y,clearAllEPKBSessionStorage:f}=window.EPKB_AI_Util_React||{};const h=()=>{let e=false;let a=[];let t=[];let n=[];let s=null;try{const o=sessionStorage.getItem("epkb_analysis_batch_state");if(o){s=JSON.parse(o);if((s.status==="running"||s.status==="scheduled")&&!s.failed_at&&s.status!=="failed"&&s.status!=="completed"){e=true}}const i=sessionStorage.getItem("epkb_analysis_in_progress");if(i){a=JSON.parse(i)}const l=sessionStorage.getItem("epkb_analysis_completed");if(l){t=JSON.parse(l)}if(e){n=a.filter((e=>!t.includes(e)))}}catch(e){}return{hasActiveBatch:e,inProgressIds:a,completedIds:t,pendingIds:n,batchState:s}};const _=({collectionId:r=1,settings:m={},onSelectedIdsChange:_,onBulkDeleteCallback:b,onSelectAllCallback:v,onTotalItemsChange:k,refreshTrigger:z=0,initialData:A=null,onTrainingDataChange:w=null,isAnalyzing:C=false,onUpdateRowsCallback:I=null})=>{const N=window.EPKB_AI_ContentAnalysisCacheContext?o(window.EPKB_AI_ContentAnalysisCacheContext):null;const S=window.EPKB_AI_ContentAnalysisSyncContext?o(window.EPKB_AI_ContentAnalysisSyncContext):null;const T=()=>{if(N){const e=N.get("table_activeStatusTab");if(e&&typeof e.value==="string"){return e.value}}return"all"};const x=T();const[R,P]=e((()=>{let e=[];if(N){const a=N.get("table_analysisData");if(a&&Array.isArray(a.value)){e=a.value}}if(e.length===0&&A&&A.data){if(x==="all"&&A.data.all&&A.data.all.data){e=A.data.all.data}}try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t&&e.length>0){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=h();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}catch(a){if(N&&e.length>0){const a=N.get("analysis_results_cache");if(a&&a.value){const t=a.value;let n=false;let s=[];try{const e=h();n=e.hasActiveBatch;s=e.pendingIds}catch(e){}e=e.map((e=>{const a=String(e.item_id||e.id);const o=t[a];const i=n&&s.includes(a);let l={...e};if(o){if(o.score!==undefined&&o.score!=="-"&&o.score!=="Analyzing..."){l.score=o.score;l.status=o.status||"analyzed"}if(o.importance!==undefined&&o.importance!=="Analyzing..."){l.importance=o.importance}if(o.scoreComponents&&o.scoreComponents.length>0&&!o.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=o.scoreComponents}if(o.analyzed_at){l.last_analyzed=o.analyzed_at}else if(o.last_analyzed){l.last_analyzed=o.last_analyzed}if(o.error_message){l.error_message=o.error_message}}if(i&&(!o||o.score===undefined||o.score==="-"||o.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}}return e}));const[E,D]=e((()=>{if(N){const e=N.get("analyzed_articles_map");if(e&&e.value){return e.value}}return{}}));const[U,B]=e([]);const[G,$]=e((()=>{if(N){const e=N.get("table_analysisData");if(e&&Array.isArray(e.value)&&e.value.length>0){return false}}return!(A&&A.data&&A.data.all)}));const[J,M]=e((()=>{if(N){const e=N.get("tabDataCache");if(e&&e.value){return e.value}}return{}}));const[K,O]=e(false);const[L,j]=e(null);const[H,F]=e((()=>{if(N){const e=N.get("table_currentPage");return e&&typeof e.value==="number"&&e.value>0?e.value:1}return 1}));const[W,q]=e((()=>{if(N){const e=N.get("table_totalPages");if(e&&typeof e.value==="number"&&e.value>0){return e.value}}if(A&&A.data&&A.data.all&&A.data.all.pagination){return A.data.all.pagination.total_pages}return 1}));const[Y,Q]=e(false);const[V,X]=e(new Set);const Z=20;const[ee,ae]=e(x);const[te,ne]=e((()=>{if(N){const e=N.get("table_sortField");return e&&typeof e.value==="string"?e.value:null}return null}));const[se,oe]=e((()=>{if(N){const e=N.get("table_sortDirection");return e&&(e.value==="asc"||e.value==="desc")?e.value:"asc"}return"asc"}));const[ie,le]=e((()=>{if(N){const e=N.get("table_currentSearchTerm");return e&&typeof e.value==="string"?e.value:""}return""}));a((()=>{if(N){N.set("table_analysisData",R)}}),[R]);a((()=>{if(N){N.set("tabDataCache",J)}}),[J]);a((()=>{if(N){N.set("analyzed_articles_map",E)}}),[E]);a((()=>{if(N){N.set("table_currentPage",H)}}),[H]);a((()=>{if(N){N.set("table_totalPages",W)}}),[W]);a((()=>{if(N){N.set("table_activeStatusTab",ee)}}),[ee]);a((()=>{if(N){N.set("table_sortField",te)}}),[te]);a((()=>{if(N){N.set("table_sortDirection",se)}}),[se]);a((()=>{if(N){N.set("table_currentSearchTerm",ie)}}),[ie]);const re=t((async e=>{le(e||"");F(1);return null}),[]);const{searchTerm:ce,displayedData:de,isSearching:ue,searchMessage:pe,handleSearchChange:ge,clearSearch:me}=y({data:R,allData:null,onServerSearch:re,searchFields:["title","score","importance"]});const ye=t((()=>{let e=[...de];if(ee==="to_analyse"){e=e.filter((e=>e.display_status==="To Analyze"))}else if(ee==="to_improve"){e=e.filter((e=>e.display_status==="To Improve"))}let a=e;if(te){a.sort(((e,a)=>{if(ee==="to_analyse"&&te==="importance"){let t=e.importance==="N/A"?0:parseInt(e.importance)||0;let n=a.importance==="N/A"?0:parseInt(a.importance)||0;let s=e.score==="-"?0:parseInt(e.score)||0;let o=a.score==="-"?0:parseInt(a.score)||0;let i=t*(100-s)/100;let l=n*(100-o)/100;if(i!==l){return l-i}if(t!==n){return n-t}return s-o}if(ee==="to_improve"&&te==="importance"){let t=e.importance==="N/A"?0:parseInt(e.importance)||0;let n=a.importance==="N/A"?0:parseInt(a.importance)||0;let s=e.score==="-"?0:parseInt(e.score)||0;let o=a.score==="-"?0:parseInt(a.score)||0;let i=t*(100-s)/100;let l=n*(100-o)/100;if(i!==l){return l-i}if(t!==n){return n-t}return s-o}let t=e[te];let n=a[te];if(te==="score"){t=t==="-"?0:parseInt(t)||0;n=n==="-"?0:parseInt(n)||0}if(te==="importance"){t=t==="N/A"?-1:parseInt(t)||0;n=n==="N/A"?-1:parseInt(n)||0}if(te==="last_analyzed"||te==="updated"){t=new Date(t||0).getTime();n=new Date(n||0).getTime()}if(te==="display_status"){const e={"To Analyze":1,"To Improve":2,Done:3,Ignored:4};t=e[t]||5;n=e[n]||5}if(t<n)return se==="asc"?-1:1;if(t>n)return se==="asc"?1:-1;return 0}))}return a}),[de,te,se,ee]);const fe=t((()=>{const e=ye();return e}),[ye]);const he=i(true);const _e=i(false);a((()=>{he.current=true;_e.current=false;F(1);ae("all");le("")}),[r]);a((()=>{F(1)}),[ee,ie]);const be=t((async(e=false)=>{if(!e&&A&&he.current){$(false);return}const a=`${ee}_page_${H}_search_${ie||"none"}`;if(!e&&J[a]){const e=J[a];P(e.data);q(e.totalPages);O(false);return}if(!e){try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);const t=e.value||{};if(Object.keys(t).length>0){D((e=>({...e,...t})))}}}catch(e){}}const t=R&&R.length>0;if(ee!=="all"||H!==1){O(true)}else if(!t){$(true)}try{const a=await p("content-analysis-articles-view",{method:"GET",params:{page:H,per_page:Z,status:ee,search:ie||"",kb_id:1}});if(a.success&&a.data){if((!a.data||a.data.length===0)&&R&&R.length>0){$(false);return}let t={};let n=false;let s=[];try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);t=e.value||{};if(Object.keys(t).length>0){D(t)}}const o=h();n=o.hasActiveBatch;s=o.pendingIds}catch(e){}const o=a.data.map((e=>{const a=String(e.item_id||e.id);const o=t[a];const i=E[a];let l=null;if(N){const e=N.get("analysis_results_cache");if(e&&e.value&&e.value[a]){l=e.value[a]}}const r=o||l||i;const c=n&&s.includes(a);let d={...e};if(o&&a===String(e.item_id||e.id)){}if(r){if(r.score!==undefined&&r.score!=="-"&&r.score!=="Analyzing..."){d.score=r.score;d.status=r.status||"analyzed"}if(r.importance!==undefined&&r.importance!=="Analyzing..."){d.importance=r.importance}if(r.scoreComponents&&r.scoreComponents.length>0&&!r.scoreComponents.some((e=>e.value==="Analyzing..."))){d.scoreComponents=r.scoreComponents}else if(!d.scoreComponents){d.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(r.analyzed_at){d.last_analyzed=r.analyzed_at}else if(r.last_analyzed){d.last_analyzed=r.last_analyzed}if(r.error_message){d.error_message=r.error_message}}if(c&&(!r||r.score===undefined||r.score==="-"||r.score==="Analyzing...")){d.score="Analyzing...";d.importance="Analyzing...";d.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];d.status="analyzing";d.last_analyzed="In Progress"}if(!d.scoreComponents){d.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return d}));P(o);if(a.pagination){q(a.pagination.total_pages)}const i=`${ee}_page_${H}_search_${ie||"none"}`;if(e||!J[i]){if(ee!=="all"||H!==1||ie){try{const e=await p("content-analysis-articles-view",{method:"GET",params:{page:1,per_page:100,status:"all",search:"",kb_id:1}});if(e.success&&e.data){const a=e.data.filter((e=>e.display_status==="To Analyze")).length;const t=e.data.filter((e=>e.display_status==="To Improve")).length;const n=e.pagination?e.pagination.total:e.data.length;j({all:n,to_analyse:a,to_improve:t,recent:n})}}catch(e){}}else{const e=o.filter((e=>e.display_status==="To Analyze")).length;const t=o.filter((e=>e.display_status==="To Improve")).length;const n=a.pagination?a.pagination.total:o.length;j({all:n,to_analyse:e,to_improve:t,recent:n})}}M((e=>({...e,[i]:{data:o,totalPages:a.pagination?a.pagination.total_pages:1,timestamp:Date.now()}})));setTimeout((()=>{Ae()}),10);setTimeout((()=>{Ae()}),100);setTimeout((()=>{Ae()}),300)}}catch(e){if(e.status===404||e.code==="rest_no_route"){if(R&&R.length>0){$(false);return}let e=[];for(let a=0;a<5;a++){if(a===2){e.push({id:100+a,item_id:100+a,title:`Article with Error ${100+a}`,score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],last_analyzed:"Error",updated:"2024-01-01",status:"error",error_message:"Failed to analyze article: Unable to process content due to invalid format or missing data. Please check the article content and try again.",error_code:500})}else{e.push({id:100+a,item_id:100+a,title:`Article ${100+a}`,score:Math.floor(Math.random()*40)+60,importance:Math.floor(Math.random()*50)+50,scoreComponents:[{name:"Tags Usage",value:Math.floor(Math.random()*40)+60},{name:"Gap Analysis",value:Math.floor(Math.random()*40)+60},{name:"Readability",value:Math.floor(Math.random()*40)+60}],last_analyzed:"Not analyzed",updated:"2024-01-01",status:"not_analyzed"})}}try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=h();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}return l}))}}catch(e){}P(e);q(1);setTimeout((()=>{Ae()}),10);setTimeout((()=>{Ae()}),100);setTimeout((()=>{Ae()}),300)}else{d(c("Failed to fetch analysis data","echo-knowledge-base"))}}finally{$(false);O(false)}}),[H,ee,ie,Z,m,J]);a((()=>{const e=()=>{if(!A||!A.data||_e.current){return false}if(H!==1||ie){return false}if(ee!=="all"){return false}if(A.data[ee]&&A.data[ee].data!==undefined){return true}return false};if(e()){let e=A.data[ee].data;const a=A.data[ee].pagination;try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=h();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}else if(!l.scoreComponents){l.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}catch(e){}P(e);q(a?a.total_pages:1);$(false);he.current=false;setTimeout((()=>{Ae()}),10);setTimeout((()=>{Ae()}),100);setTimeout((()=>{Ae()}),300)}else{be()}}),[H,ee,ie,A]);const ve=t((e=>{if(e){const e=fe();const a=e.map((e=>String(e.item_id||e.id)));B(a)}else{B([])}}),[fe]);const ke=async()=>{Q(true);_e.current=true;M({});j(null);D({});try{const e=sessionStorage.getItem("epkb_analysis_batch_state");if(e){const a=JSON.parse(e);if(a.status==="completed"||a.status==="failed"){sessionStorage.removeItem("epkb_analysis_batch_state");sessionStorage.removeItem("epkb_analysis_in_progress");sessionStorage.removeItem("epkb_analysis_completed")}}}catch(e){}f();await be(true);Q(false);u(c("Data refreshed successfully","echo-knowledge-base"))};const ze=t((async()=>{if(!U.length)return;const e=await g({title:c("Delete Selected Items","echo-knowledge-base"),message:c("Are you sure you want to delete the selected items?","echo-knowledge-base"),confirmText:c("Delete","echo-knowledge-base"),cancelText:c("Cancel","echo-knowledge-base"),confirmButtonClass:"epkb-ai-button-danger"});if(!e){return}u(c("Items deleted successfully","echo-knowledge-base"));B([])}),[U]);const Ae=t((()=>{let e={};try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);if(a.value&&typeof a.value==="object"){e=a.value}else if(typeof a==="object"&&!a.value){e=a}}else{}}catch(e){}const{hasActiveBatch:a,pendingIds:t}=h();if(Object.keys(e).length>0){D(e);if(N){N.set("analysis_results_cache",{value:e,timestamp:Date.now()});N.set("analyzed_articles_map",e)}}P((n=>{if(!n||n.length===0){return n}if(n.length>0){const e=n[0]}let s=0;const o=n.map((n=>{const o=String(n.item_id||n.id);const i=e[o];const l=a&&t.includes(o);let r={...n};let c=false;if(i&&i.score!==undefined&&i.score!=="-"&&i.score!=="Analyzing..."){r.score=i.score;r.status=i.status||"analyzed";c=true;if(i.importance!==undefined&&i.importance!=="Analyzing..."){r.importance=i.importance}if(i.scoreComponents&&i.scoreComponents.length>0&&!i.scoreComponents.some((e=>e.value==="Analyzing..."))){r.scoreComponents=i.scoreComponents}if(i.analyzed_at){r.last_analyzed=i.analyzed_at}if(i.error_message){r.error_message=i.error_message}}if(l&&(!i||i.score===undefined||i.score==="-"||i.score==="Analyzing...")){r.score="Analyzing...";r.importance="Analyzing...";r.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];r.status="analyzing";r.last_analyzed="In Progress";c=true}if(!r.scoreComponents){r.scoreComponents=n.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(c)s++;return r}));if(o.length>0){const e=o[0]}return o}))}),[N,ee]);const we=t((e=>{if(!e||e.length===0)return;D((a=>{const t={...a};e.forEach((e=>{const a=String(e.id);if(e.status==="analyzing"){t[a]={score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],status:"analyzing",last_analyzed:e.analyzed_at||"In Progress"}}else if(e.status==="error"){t[a]={score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:"error",error_message:e.message||e.error_message,last_analyzed:"Error"}}else if(e.score!==undefined||e.importance!==undefined||e.scoreComponents){t[a]={score:e.score,importance:e.importance,scoreComponents:e.scoreComponents||[{name:"Tags Usage",value:e.tags_usage||"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:e.status||"analyzed",last_analyzed:e.analyzed_at,analyzed_at:e.analyzed_at}}}));return t}));P((a=>{let t=false;const n=[...a];e.forEach((e=>{const a=String(e.id);const s=n.findIndex((e=>{const t=String(e.item_id)===a;const n=String(e.id)===a;return t||n}));if(s!==-1){const a=n[s];let o=false;const i=a.score!==undefined&&a.score!=="-"&&a.score!=="Analyzing...";if(e.status==="analyzing"){o=true;n[s]={...a,status:"analyzing",score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],last_analyzed:e.analyzed_at||"In Progress"}}else if(e.status==="error"){if(a.status!=="error"||a.error_message!==(e.message||e.error_message)){o=true;const t=a.display_status==="Ignored"?"Ignored":"To Analyze";n[s]={...a,status:"error",error_message:e.message||e.error_message||c("Unknown error occurred","echo-knowledge-base"),score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],last_analyzed:"Error",display_status:t}}}else{const t=e.score!==undefined?e.score:a.score;const i=e.importance!==undefined?e.importance:a.importance;const l=e.status||"analyzed";let r;const c=typeof t==="string"&&t!=="-"?parseInt(t):t;if(c!==undefined&&c!=="-"&&!isNaN(c)){r=c>=80?"Done":"To Improve"}else{r="To Analyze"}if(a.status==="analyzing"||a.status!==l||a.score!==t||a.importance!==i||a.last_analyzed==="Not analyzed"||a.last_analyzed==="Never"||a.last_analyzed==="In Progress"||a.last_analyzed==="Queued"||a.last_analyzed==="Processing..."){o=true;n[s]={...a,score:t,importance:i,scoreComponents:e.scoreComponents||a.scoreComponents,last_analyzed:e.analyzed_at||a.last_analyzed,status:l,display_status:r,error_message:undefined}}}if(o){t=true}}}));return t?n:a}));try{const a="epkb_content_analysis_cache_analysis_results_cache";let t={};const n=sessionStorage.getItem(a);if(n){const e=JSON.parse(n);t=e.value||{}}e.forEach((e=>{const a=String(e.id);if(e.status==="analyzing"){}else if(e.status==="error"){t[a]={id:e.id,score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:"error",error_message:e.message||e.error_message,analyzed_at:"Error",cached_at:Date.now()}}else if(e.score!==undefined||e.importance!==undefined){t[a]={id:e.id,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents||[{name:"Tags Usage",value:e.tags_usage||"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:e.status||"analyzed",analyzed_at:e.analyzed_at,cached_at:Date.now()}}}));sessionStorage.setItem(a,JSON.stringify({value:t,timestamp:Date.now()}))}catch(e){}}),[]);a((()=>{if(I){I(we)}}),[I]);a((()=>{const e=async()=>{let e=false;Ae();const{hasActiveBatch:a,pendingIds:t,batchState:n}=h();if(a&&n){e=true;if(S&&S.setAnalysisJob){S.setAnalysisJob(n)}if(S&&S.setShowAnalysisProgress){S.setShowAnalysisProgress(true)}}if(a&&t.length>0){P((e=>{if(e.length===0){return e}return e.map((e=>{const a=String(e.item_id||e.id);if(t.includes(a)){return{...e,score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],status:"analyzing",last_analyzed:"In Progress"}}return e}))}))}await be(true);if(a&&t.length>0){setTimeout((()=>{const e=t.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Ce.current(e)}),200)}};const a=setTimeout(e,100);return()=>clearTimeout(a)}),[]);const Ce=i(we);a((()=>{Ce.current=we}),[we]);a((()=>{if(R&&R.length>0){const e=R.filter((e=>e.score!==undefined&&e.score!=="-"&&e.score!=="Analyzing..."));if(e.length>0){try{const a="epkb_content_analysis_cache_analysis_results_cache";let t={};const n=sessionStorage.getItem(a);if(n){const e=JSON.parse(n);t=e.value||{}}e.forEach((e=>{const a=String(e.item_id||e.id);t[a]={id:e.item_id||e.id,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents,status:e.status||"analyzed",analyzed_at:e.last_analyzed,cached_at:Date.now()}}));sessionStorage.setItem(a,JSON.stringify({value:t,timestamp:Date.now()}))}catch(e){}}}}),[R]);a((()=>{if(!window.EPKB_AI_ContentAnalysisTable){window.EPKB_AI_ContentAnalysisTable={}}window.EPKB_AI_ContentAnalysisTable.refreshAllRows=Ae;return()=>{if(window.EPKB_AI_ContentAnalysisTable&&window.EPKB_AI_ContentAnalysisTable.refreshAllRows===Ae){delete window.EPKB_AI_ContentAnalysisTable.refreshAllRows}}}),[Ae]);a((()=>{if(S&&S.registerArticleUpdateHandler){const e=e=>{Ce.current(e);setTimeout((()=>{Ae()}),50)};S.registerArticleUpdateHandler(e);return()=>{if(S.unregisterArticleUpdateHandler){S.unregisterArticleUpdateHandler(e)}}}}),[S,Ae]);a((()=>{const{hasActiveBatch:e,pendingIds:a}=h();if(e&&a.length>0&&R.length>0){const e=a.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Ce.current(e)}if(S&&S.analysisJob){const e=S.analysisJob;if((e.status==="running"||e.status==="scheduled")&&e.total>0){const e=S.analysisItems;if(e&&e.length>0&&R.length>0){const a=e.map((e=>({id:e.id,status:"analyzing",analyzed_at:"In Progress"})));if(a.length>0){Ce.current(a)}}}}}),[S?.analysisJob?.status,R.length]);a((()=>{if(S&&Array.isArray(S.analysisItems)){const e=S.analysisJob;if((e.status==="running"||e.status==="scheduled")&&S.analysisItems.length>0&&R.length>0){const e=S.analysisItems.map((e=>({id:e.id,status:"analyzing",analyzed_at:"In Progress"})));we(e)}}}),[S?.analysisItems?.length,S?.analysisJob?.status]);a((()=>{if(w&&R){w(R)}}),[R,w]);a((()=>{if(z>0&&!C){_e.current=true;be(true);B([])}}),[z,C]);a((()=>{if(C){M({});j(null);const{hasActiveBatch:e,pendingIds:a}=h();if(e&&a.length>0&&R.length>0){const e=a.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Ce.current(e)}}}),[C,R.length]);a((()=>{if(_){const e=ye();let a=null;if(U.length===1){const t=e.find((e=>String(e.item_id||e.id)===U[0]));if(t){a={id:t.item_id||t.id,title:t.title,score:t.score,importance:t.importance,scoreComponents:t.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}}}const t=[];e.forEach((e=>{const a=String(e.item_id||e.id);if(U.includes(a)){t.push(a)}}));_(t,a)}}),[U,_,te,se,de]);a((()=>{if(b&&ze){b((()=>{ze()}))}}),[b,ze]);a((()=>{if(v){v(ve)}}),[v,ve]);const Ie=l((()=>R.length),[R]);a((()=>{if(k){k(Ie)}}),[Ie,k]);const Ne=e=>{const a=String(e);if(U.includes(a)){B(U.filter((e=>e!==a)))}else{B([...U,a])}};const Se=e=>{ae(e);F(1);if(e==="to_analyse"){ne("importance");oe("desc")}else if(e==="to_improve"){ne("importance");oe("desc")}else if(e==="recent"){ne("updated");oe("desc")}else{ne("updated");oe("desc")}try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);const t=e.value||{};if(Object.keys(t).length>0){D(t);if(N){N.set("analysis_results_cache",{value:t,timestamp:Date.now()});N.set("analyzed_articles_map",t)}}}}catch(e){}Ae();setTimeout((()=>{Ae()}),50);setTimeout((()=>{Ae()}),200);setTimeout((()=>{Ae()}),500)};const Te=e=>{if(te===e){oe(se==="asc"?"desc":"asc")}else{ne(e);oe("asc")}};const xe=t((()=>{if(L){return{all:L.all||0,to_analyse:L.to_analyse||0,to_improve:L.to_improve||0,recent:L.recent||0}}if(A&&A.stats){return{all:A.stats.all||0,to_analyse:A.stats.to_analyse||0,to_improve:A.stats.to_improve||0,recent:A.stats.recent||0}}if(ee==="all"&&R.length>0){const e=R.filter((e=>e.display_status==="To Analyze")).length;const a=R.filter((e=>e.display_status==="To Improve")).length;return{all:R.length,to_analyse:e,to_improve:a,recent:R.length}}return{all:0,to_analyse:0,to_improve:0,recent:0}}),[R,ee,A,L]);if(!G&&R.length===0&&!ie&&!Y){let e="";let a="";switch(ee){case"to_analyse":e=c("No articles need analysis","echo-knowledge-base");a=c("All articles have been analyzed. Great job!","echo-knowledge-base");break;case"to_improve":e=c("No articles need improvement","echo-knowledge-base");a=c("All analyzed articles have scores above 80%. Excellent!","echo-knowledge-base");break;case"recent":e=c("No recent articles","echo-knowledge-base");a=c("No articles have been modified recently.","echo-knowledge-base");break;case"all":default:e=c("No articles found","echo-knowledge-base");a=c("No articles are available in this knowledge base. Create some articles to start analyzing.","echo-knowledge-base");break}return n("div",{className:"epkb-ai-data-source-table"},n("div",{className:"epkb-ai-empty-state"},n("div",{className:"epkb-ai-empty-icon"},n("span",{className:"epkbfa epkbfa-file-text-o"})),n("h4",null,e),n("div",{style:{marginTop:"15px",marginBottom:"15px"}},n("p",null,a)),n("button",{className:"epkb-ai-button epkb-ai-button-success",onClick:ke,disabled:Y,style:{backgroundColor:"#46b450",borderColor:"#46b450",color:"#fff",padding:"8px 16px",fontSize:"14px",marginTop:"15px"}},Y?c("Refreshing...","echo-knowledge-base"):n(s,null,n("span",{className:"epkbfa epkbfa-refresh",style:{marginRight:"5px"}}),c("Refresh","echo-knowledge-base")))))}return n("div",{className:"epkb-ai-data-source-table"},n("div",{className:"epkb-ai-table-content"},n("div",{className:"epkb-ai-table-actions"},n("div",{className:"epkb-ai-table-actions-left"},n("div",{className:"epkb-ai-status-tabs-bar"},(()=>{const e=xe();const a=["all","to_analyse","to_improve","recent"];const t={all:c("All","echo-knowledge-base"),to_analyse:c("To Analyze","echo-knowledge-base"),to_improve:c("To Improve","echo-knowledge-base"),recent:c("Recent","echo-knowledge-base")};return a.map((a=>{const s=e[a]||0;return n("button",{key:a,className:`epkb-ai-status-tab ${a===ee?"active":""}`,onClick:()=>{Se(a)}},n("span",{className:"epkb-ai-tab-label"},t[a]),n("span",{className:"epkb-ai-tab-count"},`(${s})`))}))})())),n("div",{className:"epkb-ai-table-actions-right"},n("div",{className:"epkb-ai-search-input"},n("input",{type:"text",placeholder:c("Search by title...","echo-knowledge-base"),value:ce,onChange:e=>ge(e.target.value)}),n("span",{className:"epkb-ai-search-icon epkbfa epkbfa-search"})),n("button",{className:"epkb-ai-button epkb-ai-button-success",onClick:ke,disabled:G||Y,style:{backgroundColor:"#46b450",borderColor:"#46b450",color:"#fff",padding:"6px 12px",fontSize:"14px",marginLeft:"10px",marginRight:U.length>0?"15px":"0"}},Y?c("Refreshing...","echo-knowledge-base"):n(s,null,n("span",{className:"epkbfa epkbfa-refresh",style:{marginRight:"5px"}}),c("Refresh","echo-knowledge-base"))),U.length>0&&n("span",{className:"epkb-ai-selected-count"},`${U.length} ${c("selected","echo-knowledge-base")}`))),G?n("div",{className:"epkb-ai-loading"},c("Loading content analysis data...","echo-knowledge-base")):n(s,null,n("table",{className:"epkb-ai-data-table"},n("thead",null,n("tr",null,n("th",{className:"epkb-ai-table-checkbox"},n("input",{type:"checkbox",checked:(()=>{const e=fe();if(e.length===0)return false;return e.every((e=>U.includes(String(e.item_id||e.id))))})(),onChange:e=>ve(e.target.checked)})),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Score","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${te==="score"?"active":""}`,onClick:()=>Te("score"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},te==="score"&&se==="asc"?"↑":te==="score"&&se==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Importance","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${te==="importance"?"active":""}`,onClick:()=>Te("importance"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},te==="importance"&&se==="asc"?"↑":te==="importance"&&se==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Title","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${te==="title"?"active":""}`,onClick:()=>Te("title"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},te==="title"&&se==="asc"?"↑":te==="title"&&se==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,ee==="recent"?c("Last Modified","echo-knowledge-base"):c("Status","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${te===(ee==="recent"?"updated":"display_status")?"active":""}`,onClick:()=>Te(ee==="recent"?"updated":"display_status"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},(()=>{const e=ee==="recent"?"updated":"display_status";if(te===e&&se==="asc")return"↑";if(te===e&&se==="desc")return"↓";return"↕"})()))))),n("tbody",{style:{position:"relative"}},K&&n("tr",null,n("td",{colSpan:5,style:{position:"relative",padding:0}},n("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,minHeight:"200px",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}},n("div",{style:{textAlign:"center"}},n("div",{className:"epkb-ai-loading-spinner"}),n("div",{style:{marginTop:"10px"}},c("Loading...","echo-knowledge-base")))))),fe().length===0?n("tr",null,n("td",{colSpan:5,style:{textAlign:"center",padding:"20px"}},(()=>{if(ie){return c("No articles match your search","echo-knowledge-base")}switch(ee){case"to_analyse":return c("No articles need analysis","echo-knowledge-base");case"to_improve":return c("No articles need improvement","echo-knowledge-base");case"recent":return c("No recent articles","echo-knowledge-base");default:return c("No articles found","echo-knowledge-base")}})())):fe().map((e=>{const a=V.has(e.id)?"epkb-ai-deleting-row":"";const t=e.score;const s=e.importance;const o=e=>{if(e>=80)return"#46b450";if(e>=60)return"#f0ad4e";return"#d54e21"};const i=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}];const l=(e,a)=>({display:"inline-block",width:"12px",height:"12px",backgroundColor:e==="-"||e==="Analyzing..."?"#e0e0e0":o(e),marginRight:"3px",borderRadius:"2px"});const r=s;return n("tr",{key:e.id,className:a,"data-item-id":e.item_id||e.id,onClick:a=>{const t=a.target;const n=t.tagName.toLowerCase();const s=n==="a"||n==="button"||n==="input"||t.closest("a")||t.closest("button")||t.closest("input");if(!s){Ne(e.item_id||e.id)}},style:{cursor:"pointer"}},n("td",{className:"epkb-ai-table-checkbox"},n("input",{type:"checkbox",checked:U.includes(String(e.item_id||e.id)),onChange:()=>Ne(e.item_id||e.id)})),n("td",{style:{textAlign:"center"}},n("div",{className:"epkb-ai-score-components",title:i.map(((e,a)=>{const t=["Tags Usage","Gap Analysis","Readability"];const n=["Tags Usage","Gap Analysis","Readability"];const s=e.name&&n.includes(e.name)?e.name:t[a]||"Score "+(a+1);if(s==="Tags Usage"){if(e.value==="-")return"Tags: Not analyzed";if(e.value==="Analyzing...")return"Tags: Analyzing...";return`Tags (Score: ${e.value}%)`}if(s==="Gap Analysis"){if(e.value==="-")return"Gap: Not analyzed";if(e.value==="Analyzing...")return"Gap: Analyzing...";return`Gap (Score: ${e.value}%)`}if(s==="Readability"){if(e.value==="-")return"Readability: Not analyzed";if(e.value==="Analyzing...")return"Readability: Analyzing...";return`Readability (Score: ${e.value}%)`}return`${s}: ${e.value==="-"?"Not analyzed":e.value==="Analyzing..."?"Analyzing...":e.value+"%"}`})).join("\n"),style:{cursor:"help",display:"inline-flex",alignItems:"center",fontSize:"14px"}},i.map(((e,a)=>n("span",{key:a,style:l(e.value,e.name)}))),n("span",{style:{marginLeft:"5px",fontWeight:"bold",color:(()=>{const e=i.find((e=>e.name==="Tags Usage"));const a=e?e.value:"-";return a==="-"||a==="Analyzing..."?"#666":o(a)})()}},(()=>{const e=i.find((e=>e.name==="Tags Usage"));return e?e.value:"-"})()))),n("td",{style:{padding:"8px 12px",textAlign:"center"}},r==="N/A"||r==="Analyzing..."?n("span",{style:{color:"#666",fontSize:"14px"}},r):n("div",{style:{position:"relative",width:"100px",height:"20px",backgroundColor:"#f0f0f0",borderRadius:"10px",overflow:"hidden",margin:"0 auto"}},n("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${r}%`,background:"linear-gradient(90deg, #d1d5db, #e5e7eb)",transition:"width 0.3s ease",borderRadius:"10px"}}))),n("td",{className:"epkb-ai-table-title epkb-ai-table-title-clickable"},n("div",{className:"epkb-ai-title-link-wrapper",style:{cursor:"pointer",position:"relative",display:"inline-block"},onClick:()=>{if(window.EPKB_AI_ContentAnalysis&&window.EPKB_AI_ContentAnalysis.handleImproveItem){const a={id:e.item_id||e.id,title:e.title,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents,last_analyzed:e.last_analyzed,status:e.status||e.display_status,edit_link:`${window.epkb_ai_api.admin_url}post.php?post=${e.item_id}&action=edit`,view_link:e.view_link,is_demo:e.is_demo||false};window.EPKB_AI_ContentAnalysis.handleImproveItem(e.item_id||e.id,a)}},onMouseEnter:e=>{const a=e.currentTarget.querySelector(".epkb-ai-detail-icon");if(a)a.style.opacity="1"},onMouseLeave:e=>{const a=e.currentTarget.querySelector(".epkb-ai-detail-icon");if(a)a.style.opacity="0"}},n("span",{className:"epkb-ai-title-text",style:{color:"#2271b1"}},e.title),n("span",{className:"epkbfa epkbfa-external-link epkb-ai-detail-icon",style:{marginLeft:"6px",fontSize:"11px",color:"#2271b1",opacity:"0",transition:"opacity 0.2s ease"},title:c("View detailed analysis","echo-knowledge-base")}))),n("td",{className:"epkb-ai-table-status"},ee==="recent"?(()=>{const a=e.updated;if(!a)return"-";try{const e=new Date(a);const t=new Date;const n=t-e;const s=Math.floor(n/(1e3*60*60*24));if(s===0){return c("Today","echo-knowledge-base")}else if(s===1){return c("Yesterday","echo-knowledge-base")}else if(s<7){return s+" "+c("days ago","echo-knowledge-base")}else if(s<30){const e=Math.floor(s/7);return e+" "+(e===1?c("week ago","echo-knowledge-base"):c("weeks ago","echo-knowledge-base"))}else{return e.toLocaleDateString()}}catch(e){return a}})():(()=>{const a=e.display_status||"To Improve";const t=e.status==="error"||!!e.error_message;let s={padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"};switch(a){case"To Analyze":s.backgroundColor="#fef2e0";s.color="#b85700";break;case"Ignored":s.backgroundColor="#f0f0f0";s.color="#666";break;case"Done":s.backgroundColor="#e0f5e0";s.color="#2a6d2a";break;case"To Improve":default:s.backgroundColor="#e3f2fd";s.color="#1976d2";break}if(t&&e.error_message){return n("button",{style:{...s,backgroundColor:"#fdecea",color:"#b3261e",border:"none",cursor:"pointer",textDecoration:"underline",backgroundImage:"none"},onClick:a=>{a.stopPropagation();const t=e.title||c("Content Analysis Error","echo-knowledge-base");const n=e.error_message||c("Unknown error occurred","echo-knowledge-base");if(window.EPKB_AI_ContentAnalysisErrorDialog&&typeof window.EPKB_AI_ContentAnalysisErrorDialog.show==="function"){window.EPKB_AI_ContentAnalysisErrorDialog.show(e.item_id||e.id,t,n)}}},c("ERROR","echo-knowledge-base"))}return n("span",{style:s},c(a,"echo-knowledge-base"))})()))})))),(pe||ue)&&n("div",{className:"epkb-ai-search-message",style:{textAlign:"center",padding:"10px",color:"#666",fontStyle:"italic"}},ue?c("Searching...","echo-knowledge-base"):pe),(()=>{if(W<=1){return null}return n("div",{className:"epkb-ai-pagination"},n("button",{disabled:H===1,onClick:()=>F(H-1),className:"epkb-ai-button epkb-ai-button-secondary"},c("Previous","echo-knowledge-base")),n("span",{className:"epkb-ai-page-info"},`${c("Page","echo-knowledge-base")} ${H} ${c("of","echo-knowledge-base")} ${W}`),n("button",{disabled:H===W,onClick:()=>F(H+1),className:"epkb-ai-button epkb-ai-button-secondary"},c("Next","echo-knowledge-base")))})())))};window.EPKB_AI_ContentAnalysisTable=_;class b{constructor(){this.container=null;this.root=null}show(e,a,t){if(!this.container){this.container=document.createElement("div");this.container.id="epkb-ai-content-analysis-error-dialog-root";document.body.appendChild(this.container);const{render:e,unmountComponentAtNode:a}=wp.element;const t=wp.element;if(typeof t.createRoot==="function"){this.root=t.createRoot(this.container)}else if(typeof r==="function"){this.root=r(this.container)}else if(typeof e==="function"){this.root={render:a=>e(a,this.container),unmount:()=>{if(typeof a==="function"){a(this.container)}else{this.container.innerHTML=""}}}}}this.renderDialog({id:e,title:a,errorMessage:t})}renderDialog(e){const{id:a,title:t,errorMessage:s}=e;const o=n("div",{className:"epkb-ai-view-content-dialog-overlay",onClick:e=>{if(e.target.className==="epkb-ai-view-content-dialog-overlay"){this.close()}}},n("div",{className:"epkb-ai-view-content-dialog",style:{maxWidth:"600px"}},n("div",{className:"epkb-ai-dialog-header",style:{position:"relative"}},n("h3",null,c("Content Analysis Error","echo-knowledge-base")),n("span",{style:{position:"absolute",right:"50px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",color:"#666",fontWeight:"normal"}},n("strong",null,c("Article ID:","echo-knowledge-base"))," ",a),n("button",{className:"epkb-ai-dialog-close",onClick:()=>this.close(),"aria-label":c("Close","echo-knowledge-base")},n("span",{className:"epkbfa epkbfa-times"}))),n("div",{className:"epkb-ai-dialog-body"},n("div",{className:"epkb-ai-error-content",style:{textAlign:"center",padding:"20px"}},n("div",{className:"epkb-ai-error-icon"},n("span",{className:"epkbfa epkbfa-exclamation-triangle",style:{fontSize:"48px",color:"#d54e21"}})),n("h4",{style:{marginTop:"20px",marginBottom:"10px"}},t),n("p",{style:{color:"#d54e21",marginTop:"15px"}},c("Error Processing Content Analysis","echo-knowledge-base")),n("div",{className:"epkb-ai-error-message",style:{marginTop:"15px",padding:"15px",backgroundColor:"#fef2f2",border:"1px solid #fee",borderRadius:"4px"}},n("p",{style:{margin:0,color:"#666"}},s)),n("div",{style:{marginTop:"20px"}},n("p",{style:{fontSize:"14px",color:"#666"}},c("This article could not be analyzed. Please try again or check the article content for issues.","echo-knowledge-base")))))));if(this.root&&typeof this.root.render==="function"){this.root.render(o)}}close(){if(this.root&&typeof this.root.unmount==="function"){this.root.unmount();this.root=null}else if(this.container){const{unmountComponentAtNode:e}=wp.element;if(typeof e==="function"){e(this.container)}else{this.container.innerHTML=""}}if(this.container&&this.container.parentNode){this.container.parentNode.removeChild(this.container);this.container=null}}}window.EPKB_AI_ContentAnalysisErrorDialog=new b})();