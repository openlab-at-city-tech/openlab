(function(){"use strict";const{apiFetch:t}=wp;const{__:e}=wp.i18n;window.EPKB_AI_Util_React=window.EPKB_AI_Util_React||{};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("epkb-ai-admin-react-root");if(e&&e.dataset.epkbAiSettings){try{const n=JSON.parse(e.dataset.epkbAiSettings);if(n.nonce){t.use(t.createNonceMiddleware(n.nonce));window.epkbNonceInitialized=true}}catch(t){console.error("Failed to initialize nonce middleware",t)}}}));const n=(t,e="info",n=1e4)=>{o(t,e,n)};const o=(t,n,o)=>{const a=s();const r=a.querySelectorAll(`.epkb-ai-notification-${n}`);for(const e of r){const n=e.querySelector(".epkb-ai-notification-message");if(n&&n.textContent===t){e.style.animation="none";setTimeout((()=>{e.style.animation="slideDown 0.3s ease-out"}),10);return}}const i=document.createElement("div");let c="";let l="";switch(n){case"error":c="dashicons-warning";l="#dc3545";break;case"success":c="dashicons-yes-alt";l="#28a745";break;case"warning":c="dashicons-info";l="#ffc107";break;default:c="dashicons-info-outline";l="#007cba"}i.className=`epkb-ai-notification epkb-ai-notification-${n}`;i.style.borderLeft=`4px solid ${l}`;i.innerHTML=`\n\t\t\t<div class="epkb-ai-notification-content" style="\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 20px 24px;\n\t\t\t\tmin-height: 80px;\n\t\t\t">\n\t\t\t\t<span class="dashicons ${c}" style="\n\t\t\t\t\tfont-size: 48px;\n\t\t\t\t\tcolor: ${l};\n\t\t\t\t\tmargin-right: 34px;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t"></span>\n\t\t\t\t<span class="epkb-ai-notification-message" style="\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t">${p(t)}</span>\n\t\t\t\t<button class="epkb-ai-notification-close" aria-label="${e("Close","echo-knowledge-base")}" style="\n\t\t\t\t\tbackground: none;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tpadding: 8px;\n\t\t\t\t\tmargin-left: 16px;\n\t\t\t\t\topacity: 0.6;\n\t\t\t\t\ttransition: opacity 0.2s;\n\t\t\t\t" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">\n\t\t\t\t\t<span class="dashicons dashicons-dismiss" style="\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;if(!document.querySelector("#epkb-notification-styles")){const t=document.createElement("style");t.id="epkb-notification-styles";t.innerHTML=`\n\t\t\t\t@keyframes slideDown {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\ttransform: translateY(-20px);\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\ttransform: translateY(0);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.epkb-ai-notification-fade-out {\n\t\t\t\t\tanimation: fadeOut 0.3s ease-out forwards;\n\t\t\t\t}\n\t\t\t\t@keyframes fadeOut {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: translateY(0);\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: translateY(-10px);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;document.head.appendChild(t)}const d=i.querySelector(".epkb-ai-notification-close");d.addEventListener("click",(()=>{i.classList.add("epkb-ai-notification-fade-out");setTimeout((()=>i.remove()),300)}));a.appendChild(i);if(o>0){setTimeout((()=>{if(i.parentNode){i.classList.add("epkb-ai-notification-fade-out");setTimeout((()=>i.remove()),300)}}),o)}};const s=()=>{let t=document.getElementById("epkb-ai-notifications");if(!t){t=document.createElement("div");t.id="epkb-ai-notifications";t.className="epkb-ai-notifications-container";const e=document.querySelector(".epkb-ai-tabs-nav");if(e&&e.parentNode){e.parentNode.insertBefore(t,e.nextSibling)}else{document.body.appendChild(t)}}return t};const a=(t,e=1e4)=>{n(t,"success",e)};const r=(t,e=0)=>{n(t,"error",e);window.scrollTo({top:0,behavior:"smooth"})};const i=(t,e=1e4)=>{n(t,"info",e)};const c=(t,e=1e4)=>{n(t,"warning",e)};const l={activeRequests:new Map,cancelRequest(t){const e=this.activeRequests.get(t);if(e){e.abort();this.activeRequests.delete(t)}},registerRequest(t){this.cancelRequest(t);const e=new AbortController;this.activeRequests.set(t,e);return e},completeRequest(t){this.activeRequests.delete(t)}};const d=async(n,o={})=>{const{suppressNotifications:s=false,...a}=o;const i=document.getElementById("epkb-ai-admin-react-root");if(i&&i.dataset.epkbAiSettings){try{const e=JSON.parse(i.dataset.epkbAiSettings);if(e.nonce&&!window.epkbNonceInitialized){t.use(t.createNonceMiddleware(e.nonce));window.epkbNonceInitialized=true}}catch(t){console.error("Failed to ensure nonce middleware",t)}}const c={path:`/epkb-admin/v1/${n}`,method:"GET",headers:{"Content-Type":"application/json"}};const d={...c,...a};let p=null;let f=null;if(n==="sync-progress"&&!o.allowConcurrent){p="sync-progress";f=l.registerRequest(p);d.signal=f.signal}else if(o.signal){d.signal=o.signal}if(d.params&&d.method==="GET"){const t=new URLSearchParams(d.params).toString();d.path+=`?${t}`;delete d.params}if(d.data&&["POST","PUT","PATCH","DELETE"].includes(d.method)){d.body=JSON.stringify(d.data);delete d.data}try{const e=await t(d);if(e.new_token){u(e.new_token)}return e}catch(t){if(t.name==="AbortError"){throw t}if(!s){if(t.code==="invalid_session"||t.code==="no_session"){r(e("Your session has expired. Please refresh the page.","echo-knowledge-base"))}else if(t.code==="rate_limit_exceeded"){r(e("Too many requests. Please wait a moment and try again.","echo-knowledge-base"))}else if(t.message&&t.code!="invalid_json"){r(t.message)}else{r(e("An unexpected error occurred. Please try again.","echo-knowledge-base"))}}throw t}finally{if(p){l.completeRequest(p)}}};const u=e=>{t.use(t.createNonceMiddleware(e));window.epkbNonceInitialized=true;const n=document.getElementById("epkb-ai-admin-react-root");if(n&&n.dataset.epkbAiSettings){try{const t=JSON.parse(n.dataset.epkbAiSettings);t.nonce=e;n.dataset.epkbAiSettings=JSON.stringify(t)}catch(t){console.error("Failed to update nonce in settings",t)}}};const p=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(t=>e[t]))};const f=(t,e)=>{let n;return function o(...s){const a=()=>{clearTimeout(n);t(...s)};clearTimeout(n);n=setTimeout(a,e)}};const m=(t,e)=>{let n;return function(...o){if(!n){t.apply(this,o);n=true;setTimeout((()=>n=false),e)}}};const g=(t,e="default")=>{const n=t instanceof Date?t:new Date(t);if(isNaN(n.getTime())){return""}const o={default:{year:"numeric",month:"short",day:"numeric"},short:{month:"numeric",day:"numeric",year:"2-digit"},long:{weekday:"long",year:"numeric",month:"long",day:"numeric"},time:{hour:"2-digit",minute:"2-digit"},datetime:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},full:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:true},compact:{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:true}};if(e==="datetime"||e==="full"||e==="compact"){return n.toLocaleString(undefined,o[e]||o.default)}return n.toLocaleDateString(undefined,o[e]||o.default)};const b=(t,e="-")=>{if(!t||t==="Never"){return e}let n;if(t.includes("T")){n=new Date(t)}else{const e=t.replace(" ","T")+"Z";n=new Date(e)}if(isNaN(n.getTime())){return t}const o=window.epkb_ai_api&&window.epkb_ai_api.gmt_offset?parseFloat(window.epkb_ai_api.gmt_offset):0;const s=new Date(n.getTime()+o*60*60*1e3);const a=new Date;const r=new Date(a.getTime()+o*60*60*1e3);const i=s.toDateString()===r.toDateString();let c=s.getUTCHours();const l=s.getUTCMinutes();const d=c>=12?"pm":"am";c=c%12;c=c?c:12;const u=l<10?"0"+l:l;const p=`${c}:${u}${d}`;if(i){return`today at ${p}`}const f=new Date(r);f.setDate(f.getDate()-1);if(s.toDateString()===f.toDateString()){return`yesterday at ${p}`}const m=["January","February","March","April","May","June","July","August","September","October","November","December"];const g=m[s.getUTCMonth()];const b=s.getUTCDate();return`${g} ${b} at ${p}`};const h=(t,e)=>{const n=Object.assign({},t);if(y(t)&&y(e)){Object.keys(e).forEach((o=>{if(y(e[o])){if(!(o in t)){Object.assign(n,{[o]:e[o]})}else{n[o]=h(t[o],e[o])}}else{Object.assign(n,{[o]:e[o]})}}))}return n};const y=t=>t&&typeof t==="object"&&!Array.isArray(t);const k=(t,e,n=undefined)=>e.split(".").reduce(((t,e)=>t&&t[e]!==undefined?t[e]:n),t);const w=(t,e,n)=>{const o=e.split(".");const s=o.pop();const a=o.reduce(((t,e)=>{if(!t[e]||typeof t[e]!=="object"){t[e]={}}return t[e]}),t);a[s]=n;return t};const x=t=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(t)};const S=(t="epkb")=>`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const _=async(t={})=>{const{title:n=e("Confirm Action","echo-knowledge-base"),message:o=e("Are you sure you want to proceed?","echo-knowledge-base"),confirmText:s=e("Confirm","echo-knowledge-base"),cancelText:a=e("Cancel","echo-knowledge-base"),confirmButtonClass:r="epkb-ai-button-primary",requireInput:i=false,inputPlaceholder:c="",inputMatch:l=""}=t;return new Promise((t=>{const e=document.createElement("div");e.className="epkb-ai-confirm-dialog-overlay";e.style.cssText=`\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tz-index: 9999999;\n\t\t\t`;const d=document.createElement("div");d.className="epkb-ai-confirm-dialog";d.style.cssText=`\n\t\t\t\tbackground: white;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tpadding: 24px;\n\t\t\t\tmax-width: 500px;\n\t\t\t\twidth: 90%;\n\t\t\t\tbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n\t\t\t\tposition: relative;\n\t\t\t\tz-index: 9999999;\n\t\t\t`;let u=`\n\t\t\t\t<h3 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600;">${p(n)}</h3>\n\t\t\t\t<p style="margin: 0 0 20px 0; color: #555; line-height: 1.5;">${p(o)}</p>\n\t\t\t`;if(i){u+=`\n\t\t\t\t\t<input type="text" \n\t\t\t\t\t\t   id="epkb-dialog-input" \n\t\t\t\t\t\t   class="epkb-ai-input" \n\t\t\t\t\t\t   placeholder="${p(c)}"\n\t\t\t\t\t\t   style="width: 100%; margin-bottom: 20px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">\n\t\t\t\t`}u+=`\n\t\t\t\t<div style="display: flex; justify-content: flex-end; gap: 10px;">\n\t\t\t\t\t<button class="epkb-ai-button epkb-ai-button-secondary" id="epkb-dialog-cancel">\n\t\t\t\t\t\t${p(a)}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="epkb-ai-button ${r}" id="epkb-dialog-confirm">\n\t\t\t\t\t\t${p(s)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;d.innerHTML=u;e.appendChild(d);document.body.appendChild(e);const f=d.querySelector("#epkb-dialog-confirm");const m=d.querySelector("#epkb-dialog-cancel");const g=d.querySelector("#epkb-dialog-input");if(g){g.focus()}const b=()=>{if(i){const e=g.value.trim();if(l&&e!==l){g.style.borderColor="#e74c3c";g.focus();return}y();t(e)}else{y();t(true)}};const h=()=>{y();t(false)};const y=()=>{document.body.removeChild(e)};f.addEventListener("click",b);m.addEventListener("click",h);e.addEventListener("click",(t=>{if(t.target===e){h()}}));if(g){g.addEventListener("keypress",(t=>{if(t.key==="Enter"){b()}}))}document.addEventListener("keydown",(function t(e){if(e.key==="Escape"){document.removeEventListener("keydown",t);h()}}))}))};const T=({onAccept:t,i18n:n})=>{const{createElement:o}=wp.element;return o("div",{className:"epkb-ai-notice epkb-ai-notice-warning",style:{padding:"12px 15px",marginBottom:"20px",borderLeft:"4px solid #ffba00",backgroundColor:"#fff8e5"}},o("p",{style:{margin:"0"}},o("span",{className:"dashicons dashicons-info",style:{marginRight:"8px",color:"#ffba00"}}),e("To use AI features, please configure your API key and accept the data privacy agreement in ","echo-knowledge-base"),o("a",{href:"#",onClick:e=>{e.preventDefault();t()},style:{fontWeight:"bold",textDecoration:"underline"}},e("General Settings","echo-knowledge-base")),"."))};const v=async t=>{if(t.responseJSON&&t.responseJSON.error&&t.responseJSON.message){const n=document.createElement("div");n.innerHTML=t.responseJSON.message;const o=n.textContent||n.innerText||"";if(o.includes("Login")||o.includes("refresh")||o.includes("E03")){const t=await _({title:e("Session Expired","echo-knowledge-base"),message:o.trim(),confirmText:e("Refresh Page","echo-knowledge-base"),cancelText:e("Close","echo-knowledge-base"),confirmButtonClass:"epkb-ai-button-primary"});if(t){window.location.reload()}return true}}return false};const N=(t=e("Loading...","echo-knowledge-base"))=>{const n=document.createElement("div");n.className="epkb-ai-dialog-overlay";n.style.cssText=`\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tz-index: 999999;\n\t\t`;const o=document.createElement("div");o.className="epkb-ai-dialog epkb-ai-loading-dialog";o.style.cssText=`\n\t\t\tbackground: white;\n\t\t\tpadding: 30px;\n\t\t\tborder-radius: 8px;\n\t\t\tbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n\t\t\tmax-width: 400px;\n\t\t\ttext-align: center;\n\t\t`;o.innerHTML=`\n\t\t\t<div class="epkb-loading-spinner" style="margin: 0 auto 20px; width: 40px; height: 40px;"></div>\n\t\t\t<p style="margin: 0; color: #555; font-size: 16px;">${p(t)}</p>\n\t\t`;n.appendChild(o);document.body.appendChild(n);return()=>{n.remove()}};const E=(t={})=>{const{data:n=[],allData:o=null,onServerSearch:s=null,searchFields:a=["title","name","query","message","user_name","url","item_id"],debounceDelay:r=500}=t;const{useState:i,useEffect:c,useCallback:l,useRef:d}=wp.element;const[u,p]=i("");const[f,m]=i(n);const[g,b]=i(false);const[h,y]=i("");const k=d(null);const w=d("");c((()=>{if(!u){m(n)}}),[n,u]);const x=l(((t,r=null)=>{if(!t){m(n);y("");return n}const i=t.toLowerCase();const c=r||o||n;const l=c.filter((t=>a.some((e=>{const n=t[e];if(n===null||n===undefined)return false;return n.toString().toLowerCase().includes(i)}))));m(l);if(!r){if(l.length===0&&!s){y(e("No results found","echo-knowledge-base"))}else{y("")}}return l}),[n,o,a,s]);const S=l((t=>{p(t);w.current=t;if(k.current){clearTimeout(k.current);k.current=null}if(!t){m(n);b(false);y("");return}const e=x(t);if(s){b(true);k.current=setTimeout((async()=>{if(w.current!==t)return;try{const e=await s(t);if(w.current===t){if(e&&Array.isArray(e)){x(t,e)}}}catch(e){console.error("Server search error:",e);if(w.current===t){y("")}}finally{if(w.current===t){b(false);y("")}}}),r)}}),[n,o,x,s,r]);const _=l((()=>{p("");w.current="";m(n);b(false);y("");if(k.current){clearTimeout(k.current);k.current=null}}),[n]);c((()=>()=>{if(k.current){clearTimeout(k.current)}}),[]);return{searchTerm:u,displayedData:f,isSearching:g,searchMessage:h,handleSearchChange:S,clearSearch:_}};const A=(t={})=>{const{errorText:e="Sorry, I couldn't get a response. Please reload your page and try again.",persistText:n="If the issue persists, please",linkText:o="contact support",linkUrl:s="https://www.echoknowledgebase.com/contact-us/",h:a=wp.element.createElement}=t;return a("p",null,e," ",n," ",a("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:{color:"#007cba",textDecoration:"underline"}},o),".")};const C=(t={})=>{const{errorText:e="Sorry, I couldn't get a response. Please reload your page and try again.",persistText:n="If the issue persists, please",linkText:o="contact support",linkUrl:s="https://www.echoknowledgebase.com/contact-us/"}=t;return`${p(e)} ${p(n)} <a href="${p(s)}" target="_blank" rel="noopener noreferrer" style="color: #007cba; text-decoration: underline;">${p(o)}</a>.`};const $=()=>{try{const t=["epkb_new_collection_id"];const e=[];for(let n=0;n<sessionStorage.length;n++){const o=sessionStorage.key(n);if(o&&(o.startsWith("epkb_")||o.includes("epkb"))&&!t.includes(o)){e.push(o)}}e.forEach((t=>sessionStorage.removeItem(t)))}catch(t){}};const D="epkb_analysis_details";const I=5;const L=200*1024;const M=100*1024;const q=t=>`${D}_${t}`;const O=()=>{const t=[];try{for(let e=0;e<sessionStorage.length;e++){const n=sessionStorage.key(e);if(n&&n.startsWith(D+"_")){const e=n.replace(D+"_","");if(e){t.push(e)}}}}catch(t){}return t};const F=t=>new Blob([t]).size;const R=(t,e)=>{if(!t||typeof t!=="string"){return t}const n=F(t);if(n<=e){return t}let o=0;let s=t.length;let a=t;while(o<=s){const n=Math.floor((o+s)/2);const r=t.substring(0,n);const i=F(r);if(i<=e){a=r;o=n+1}else{s=n-1}}return a};const P=t=>{const e=O();const n=new Set(t.map(String));let o=0;e.forEach((t=>{if(!n.has(String(t))){try{sessionStorage.removeItem(q(t));o++}catch(e){console.error("Failed to remove storage for article:",t,e)}}}));return o};const z=()=>{const t=1024*1024;let e=0;try{const t=O();t.forEach((t=>{const n=sessionStorage.getItem(q(t));if(n){e+=F(n)}}))}catch(e){return t}return Math.max(0,t-e)};const J=(t,e)=>{if(t.includes(String(e))){return{allowed:true,reason:"already_open"}}if(t.length>=I){return{allowed:false,reason:"tab_limit",message:`Maximum ${I} article tabs can be open at once. Please close another tab first.`}}return{allowed:true,reason:"ok"}};const B=(t,e,n)=>{P(n);let o={...e};let s=false;let a=false;if(o.data&&o.data.processed_content&&typeof o.data.processed_content==="string"){const t=F(o.data.processed_content);if(t>L){o.data.processed_content=R(o.data.processed_content,M);o.data._content_truncated=true;o.data._full_content_size=t;s=true;a=true}}try{const e=q(t);sessionStorage.setItem(e,JSON.stringify(o));return{stored:true,truncated:s,needsFullFetch:a}}catch(e){console.error("Failed to store article data:",e);if(e.name==="QuotaExceededError"){P(n);if(o.data&&o.data.processed_content){o.data.processed_content=R(o.data.processed_content,M/2);o.data._content_truncated=true;s=true;a=true;try{const e=q(t);sessionStorage.setItem(e,JSON.stringify(o));return{stored:true,truncated:s,needsFullFetch:a}}catch(t){console.error("Failed to store article data after retry:",t);return{stored:false,truncated:false,needsFullFetch:true}}}}return{stored:false,truncated:false,needsFullFetch:true}}};const j=t=>{try{const e=q(t);const n=sessionStorage.getItem(e);if(n){return JSON.parse(n)}}catch(t){console.error("Failed to get article data:",t)}return null};const U=t=>{try{const e=q(t);sessionStorage.removeItem(e);return true}catch(t){console.error("Failed to remove article data:",t);return false}};const H=()=>{const t=O();let e=0;let n=0;let o=0;t.forEach((t=>{try{const s=sessionStorage.getItem(q(t));if(s){e+=F(s);n++;const t=JSON.parse(s);if(t.data&&t.data._content_truncated){o++}}}catch(t){}}));return{articleCount:n,totalSize:e,truncatedCount:o,availableSpace:z(),maxTabs:I,maxContentSize:L}};const V=t=>{const{useState:n,useEffect:o,createElement:s}=wp.element;const{tutorialKey:a,heading:r=e("Tutorial","echo-knowledge-base"),description:i=e("Learn how to use this feature","echo-knowledge-base"),imageSrc:c="",imageAlt:l=e("Tutorial Screenshot","echo-knowledge-base"),content:d=e("This is a tutorial explaining how to use this feature.","echo-knowledge-base"),forceVisible:u=false,onClose:p=null}=t;const[f,m]=n(false);const[g,b]=n(false);o((()=>{if(u){m(true);b(false);return}try{const t=`epkb_tutorial_dismissed_${a}`;const e=localStorage.getItem(t);if(e==="true"){b(true)}else{m(true)}}catch(t){m(true)}}),[a,u]);const h=()=>{m(false);b(true);try{const t=`epkb_tutorial_dismissed_${a}`;localStorage.setItem(t,"true")}catch(t){}if(p){p()}};if(g&&!u){return null}return s("div",{className:"epkb-ai-tutorial-box"+(f?" epkb-ai-tutorial-visible":" epkb-ai-tutorial-hidden"),style:{display:f?"block":"none"}},s("div",{className:"epkb-ai-tutorial-content"},s("button",{className:"epkb-ai-tutorial-close",onClick:h,"aria-label":e("Close Tutorial","echo-knowledge-base")},s("span",{className:"dashicons dashicons-no-alt"})),s("h3",{className:"epkb-ai-tutorial-heading"},r),s("p",{className:"epkb-ai-tutorial-description"},i),s("div",{className:"epkb-ai-tutorial-columns"},s("div",{className:"epkb-ai-tutorial-column epkb-ai-tutorial-column-image"},c&&s("img",{src:c,alt:l,className:"epkb-ai-tutorial-image"})),s("div",{className:"epkb-ai-tutorial-column epkb-ai-tutorial-column-content"},s("div",{className:"epkb-ai-tutorial-text",dangerouslySetInnerHTML:{__html:d}})))))};const K=t=>{const{createElement:n}=wp.element;const{url:o="https://www.echoknowledgebase.com/documentation/ai-set-up/"}=t||{};return n("a",{className:"epkb-ai-tutorial-button",href:o,target:"_blank",rel:"noopener noreferrer","aria-label":e("Tutorial","echo-knowledge-base")},n("span",{className:"epkbfa epkbfa-book"})," ",e("Tutorial","echo-knowledge-base"))};const Y=t=>{const{useState:e,useEffect:n}=wp.element;const[o,s]=e(false);const[a,r]=e(false);n((()=>{try{const e=`epkb_tutorial_dismissed_${t}`;const n=localStorage.getItem(e);if(n!=="true"){r(true);s(true)}}catch(t){r(true);s(true)}}),[t]);const i=()=>{s((t=>!t))};const c=()=>{s(false);try{const e=`epkb_tutorial_dismissed_${t}`;localStorage.setItem(e,"true")}catch(t){}};return{isVisible:o,isFirstVisit:a,toggleVisibility:i,closeAndRemember:c,setIsVisible:s}};Object.assign(window.EPKB_AI_Util_React,{showNotification:n,showSuccess:a,showError:r,showInfo:i,showWarning:c,makeApiRequest:d,updateNonce:u,escapeHtml:p,debounce:f,throttle:m,formatDate:g,formatServerDateTime:b,deepMerge:h,isObject:y,getNestedValue:k,setNestedValue:w,isValidEmail:x,generateId:S,showConfirmDialog:_,handleSessionError:v,showLoadingDialog:N,DisclaimerRequiredMessage:T,useTableSearch:E,createAIErrorMessageElement:A,createAIErrorMessageHTML:C,clearAllEPKBSessionStorage:$,canAddArticleTab:J,storeArticleAnalysisData:B,getArticleAnalysisData:j,removeArticleAnalysisData:U,cleanupArticleStorage:P,getArticleStorageStats:H,TutorialBox:V,TutorialButton:K,useTutorial:Y})})();