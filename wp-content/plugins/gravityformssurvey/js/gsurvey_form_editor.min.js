var isLegacy="true"===gsurveyLikertStrings.isLegacy;function SetDefaultValues_survey(e){e.label=gsurveyVars.strings.untitledSurveyField,SetDefaultValues_likert(e)}function gform_new_choice_survey(e,r){return r=window["gform_new_choice_"+e.inputType]?window["gform_new_choice_"+e.inputType](e,r):new Choice("",GenerateSurveyDefaultChoiceValue(e))}function GenerateSurveyDefaultChoiceValue(e){return"gsurvey"+e.id+"xxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)})}function StartChangeSurveyType(e){var r=GetSelectedField();return r.choices=null,window["SetDefaultValues_"+e]&&window["SetDefaultValues_"+e](r),jQuery("#gsurvey-field-type").val(e),"checkbox"!=e&&"radio"!=e&&"select"!=e||(r.choices=new Array(new Choice(gsurveyRankStrings.firstChoice,GenerateSurveyDefaultChoiceValue(r),!1),new Choice(gsurveyRankStrings.secondChoice,GenerateSurveyDefaultChoiceValue(r),!1),new Choice(gsurveyRankStrings.thirdChoice,GenerateSurveyDefaultChoiceValue(r),!1))),"text"!==e&&(r.inputMask=!1),StartChangeInputType(e,r)}function SetDefaultValues_likert(e){e.enableChoiceValue=!0,e.enablePrice=!1,e.gsurveyLikertEnableMultipleRows=!1,e.gsurveyLikertEnableScoring=!1,e.choices=new Array(new gsurveyLikertChoice(gsurveyLikertStrings.columnLabel1,GenerateLikertChoiceValue(e),1),new gsurveyLikertChoice(gsurveyLikertStrings.columnLabel2,GenerateLikertChoiceValue(e),2),new gsurveyLikertChoice(gsurveyLikertStrings.columnLabel3,GenerateLikertChoiceValue(e),3),new gsurveyLikertChoice(gsurveyLikertStrings.columnLabel4,GenerateLikertChoiceValue(e),4),new gsurveyLikertChoice(gsurveyLikertStrings.columnLabel5,GenerateLikertChoiceValue(e),5)),e.gsurveyLikertRows=new Array(new gsurveyLikertRow(gsurveyLikertStrings.firstChoice),new gsurveyLikertRow(gsurveyLikertStrings.secondChoice),new gsurveyLikertRow(gsurveyLikertStrings.thirdChoice),new gsurveyLikertRow(gsurveyLikertStrings.fourthChoice),new gsurveyLikertRow(gsurveyLikertStrings.fifthChoice));e.id,e.gsurveyLikertRows[0].value;return e.inputType="likert",e.inputs=null,e}function gsurveyLikertUpdatePreview(e){e=gsurveyLikertGetFieldPreviewMarkup(e=null==e?GetSelectedField():e);jQuery(".field_selected .gsurvey-likert").parent().html(e)}function gsurveyLikertUpdateInputs(e){if(e.gsurveyLikertEnableMultipleRows){var r,t;e.inputs=new Array;for(var i=0,n=0;n<e.gsurveyLikertRows.length;n++)t=e.gsurveyLikertRows[n].value,(n+1+i)%10==0&&i++,r=e.id+"."+(n+1+i),e.inputs.push(new gsurveyLikertInput(r,e.gsurveyLikertRows[n].text,t))}else e.inputs=null}function gsurveyLikertInput(e,r,t){this.id=e,this.label=r,this.name=t}function gsurveyLikertGetFieldPreviewMarkup(e){var r=e.gsurveyLikertEnableMultipleRows?e.gsurveyLikertRows.length:1,t=5<r?5:r,i="<table class='gsurvey-likert'>";i+="<tr>",e.gsurveyLikertEnableMultipleRows&&(i+="<td class='gsurvey-likert-row-label'></td>");for(var n=0;n<e.choices.length;n++)i+="<td class='gsurvey-likert-choice-label'><label for='"+("choice_"+e.id+"_"+n)+"'>"+e.choices[n].text+"</label></td>";i+="</tr>";for(var s=1;s<=t;s++){i+="<tr>",e.gsurveyLikertEnableMultipleRows&&(i+="<td>"+e.gsurveyLikertRows[s-1].text+"</td>");for(n=0;n<e.choices.length;n++)i+="<td class='gsurvey-likert-choice'><input type='radio' disabled='disabled'></td>";i+="</tr>"}return 5<r&&(i+="<tr><td colspan='"+(e.choices.length+1)+"'>"+gf_vars.editToViewAll.replace("%d",r)+"</td></tr>"),i+="</table>"}function gsurveyLikertChoice(e,r,t){this.text=e,this.value=r||e,this.isSelected=!1,this.score=t}function gsurveyLikertUpdateColumnsObject(){var s=GetSelectedField();jQuery("ul#gsurvey-likert-columns li").each(function(e){var r=($this=jQuery(this)).children("input.gsurvey-likert-column-text").val(),t=$this.children("input.gsurvey-likert-column-value").val(),i=$this.children("input.gsurvey-likert-column-score").val(),n=$this.data("index"),r=new gsurveyLikertChoice(r,t,i=void 0===i?n+1:i);s.choices[n]=r}),gsurveyLikertUpdateInputs(s)}function GenerateLikertChoiceValue(e){return"glikertcol"+e.id+"xxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)})}function gsurveyLikertInsertColumn(e){var r=GetSelectedField(),t=(gsurveyLikertUpdateColumnsObject(),new Choice("",GenerateLikertChoiceValue(r)));r.choices.splice(e,0,t),jQuery("#gsurvey-likert-columns-container ul#gsurvey-likert-columns").html(gsurveyLikertGetColumns(r)),gsurveyLikertUpdatePreview(r)}function gsurveyLikertDeleteColumn(e){var r=GetSelectedField();gsurveyLikertUpdateColumnsObject(),r.choices.splice(e,1),jQuery("#gsurvey-likert-columns-container ul#gsurvey-likert-columns").html(gsurveyLikertGetColumns(r)),gsurveyLikertUpdatePreview(r)}function gsurveyLikertMoveColumn(e,r){var t=GetSelectedField(),i=(gsurveyLikertUpdateColumnsObject(),t.choices[e]);t.choices.splice(e,1),t.choices.splice(r,0,i),jQuery("#gsurvey-likert-columns-container ul#gsurvey-likert-columns").html(gsurveyLikertGetColumns(t)),gsurveyLikertUpdateColumnsObject(),gsurveyLikertUpdatePreview(t)}function gsurveyLikertGetColumns(e){for(var r=gsurveyVars.imagesUrl,t="",i=0;i<e.choices.length;i++){var n={handle:'<i class="field-choice-handle field-choice-handle--column"></i>',add:'<button class="field-choice-button field-choice-button--insert gf_insert_field_choice" onclick="gsurveyLikertInsertColumn('+(i+1)+');"></button>',remove:'<button class="field-choice-button field-choice-button--delete gf_delete_field_choice" onclick="gsurveyLikertDeleteColumn('+i+');"></button>'};isLegacy&&(n={handle:'<img src="'+r+'/arrow-handle.svg" width="14" height="14" class="gsurvey-liket-column-handle gsurvey-likert-handle--legacy" alt="'+gsurveyLikertStrings.dragToReOrder+'" />',add:'<img src="'+r+'/add.svg" width="16" height="16" class="add_field_choice" title="'+gsurveyLikertStrings.addAnotherColumn+'" alt="'+gsurveyLikertStrings.addAnotherColumn+'" style="cursor:pointer; margin:0 3px;" onclick="gsurveyLikertInsertColumn('+(i+1)+');" />',remove:'<img src="'+r+'/remove.svg" width="16" height="16" title="'+gsurveyLikertStrings.removeThisColumn+'" alt="'+gsurveyLikertStrings.removeThisColumn+'" class="delete_field_choice" style="cursor:pointer;" onclick="gsurveyLikertDeleteColumn('+i+');" />'}),t=(t=(t+=isLegacy?'<li data-index="'+i+'">':'<li class="field-choice-row" data-index="'+i+'">')+n.handle)+("<input type='text' id='gsurvey-likert-column-text-"+i+"' value=\""+e.choices[i].text.replace(/"/g,"&quot;")+"\"  class='gsurvey-column-input gsurvey-likert-column-text field-choice-text field-choice-text--likert' onkeyup='gsurveyLikertUpdateColumnsObject();gsurveyLikertUpdatePreview()'/>"),void 0===e.choices[i].score&&(e.choices[i].score=i+1),t=(t=(t+="<input type='text' id='gsurvey-likert-column-score-"+i+"' value=\""+e.choices[i].score+"\"  class='gsurvey-column-input gsurvey-likert-column-score' onkeyup='gsurveyLikertUpdateColumnsObject();gsurveyLikertUpdatePreview()'/>")+("<input type='hidden' id='gsurvey-likert-column-value-"+i+"' value=\""+e.choices[i].value+"\" class='gsurvey-likert-column-value' >"))+n.add,1<e.choices.length&&(t+=n.remove),t+="</li>"}return t}function gsurveyLikertUpdateRowsObject(){var n=GetSelectedField();jQuery("#gsurvey-likert-rows li").each(function(e){var r=jQuery(this).children("input.gsurvey-likert-row-text").val(),t=jQuery(this).children("input.gsurvey-likert-row-id").val(),i=jQuery(this).data("index"),r=new gsurveyLikertRow(r,t);n.gsurveyLikertRows[i]=r}),gsurveyLikertUpdateInputs(n)}function gsurveyLikertGenerateRowVal(){return"glikertrowxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)})}function gsurveyLikertRow(e,r){this.text=e,this.value=null==r?gsurveyLikertGenerateRowVal():r}function gsurveyLikertInsertRow(e){var r=GetSelectedField(),t=(gsurveyLikertUpdateRowsObject(),new gsurveyLikertRow(""));r.gsurveyLikertRows.splice(e,0,t),jQuery("#gsurvey-likert-rows-container ul#gsurvey-likert-rows").html(gsurveyLikertGetRows(r)),gsurveyLikertUpdatePreview(r)}function gsurveyLikertDeleteRow(e){var r=GetSelectedField();gsurveyLikertUpdateRowsObject(),r.gsurveyLikertRows.splice(e,1),jQuery("#gsurvey-likert-rows-container ul#gsurvey-likert-rows").html(gsurveyLikertGetRows(r)),r.inputs.splice(e,1),gsurveyLikertUpdatePreview(r)}function gsurveyLikertMoveRow(e,r){var t=GetSelectedField(),i=(gsurveyLikertUpdateRowsObject(),t.gsurveyLikertRows[e]);t.gsurveyLikertRows.splice(e,1),t.gsurveyLikertRows.splice(r,0,i),jQuery("#gsurvey-likert-rows-container ul#gsurvey-likert-rows").html(gsurveyLikertGetRows(t)),gsurveyLikertUpdateRowsObject(),gsurveyLikertUpdatePreview(t)}function gsurveyLikertGetRows(e){for(var r=gsurveyVars.imagesUrl,t="",i=0;i<e.gsurveyLikertRows.length;i++){var n={handle:'<i class="field-choice-handle field-choice-handle--row"></i>',add:'<button class="field-choice-button field-choice-button--insert gf_insert_field_choice" onclick="gsurveyLikertInsertRow('+(i+1)+');"></button>',remove:'<button class="field-choice-button field-choice-button--delete gf_delete_field_choice" onclick="gsurveyLikertDeleteRow('+i+');"></button>'};isLegacy&&(n={handle:"<img src='"+r+"/arrow-handle.svg' width='14' height='14' class='gsurvey-liket-row-handle gsurvey-likert-handle--legacy' alt='"+gsurveyLikertStrings.dragToReOrder+"' /> ",add:"<img src='"+r+"/add.svg' width='16' height='16' class='add_field_choice' title='"+gsurveyLikertStrings.addAnotherRow+"' alt='"+gsurveyLikertStrings.addAnotherRow+"' style='cursor:pointer; margin:0 3px;' onclick=\"gsurveyLikertInsertRow("+(i+1)+');" />',remove:"<img src='"+r+"/remove.svg' width='16' height='16' title='"+gsurveyLikertStrings.removeThisRow+"' alt='"+gsurveyLikertStrings.removeThisRow+"' class='delete_field_choice' style='cursor:pointer;' onclick=\"gsurveyLikertDeleteRow("+i+');" />'}),t=(t=(t=(t=(t+=isLegacy?'<li data-index="'+i+'">':'<li class="field-choice-row" data-index="'+i+'">')+n.handle)+("<input type='text' id='gsurvey-likert-row-text-"+i+"' value=\""+e.gsurveyLikertRows[i].text.replace(/"/g,"&quot;")+"\"  class='gsurvey-row-input gsurvey-likert-row-text field-choice-text field-choice-text--likert' onkeyup='gsurveyLikertUpdateRowsObject(); gsurveyLikertUpdatePreview();' />"))+("<input type='hidden' id='gsurvey-likert-row-id-"+i+"' value=\""+e.gsurveyLikertRows[i].value+"\" class='gsurvey-likert-row-id' >"))+n.add,1<e.gsurveyLikertRows.length&&(t+=n.remove),t+="</li>"}return t}function SetDefaultValues_rank(e){return e.inputType="rank",e.inputs=null,e.enableChoiceValue=!0,e.enablePrice=!1,e.choices||(e.choices=new Array(new Choice(gsurveyRankStrings.firstChoice,GenerateRankChoiceValue(e),!1),new Choice(gsurveyRankStrings.secondChoice,GenerateRankChoiceValue(e),!1),new Choice(gsurveyRankStrings.thirdChoice,GenerateRankChoiceValue(e),!1),new Choice(gsurveyRankStrings.fourthChoice,GenerateRankChoiceValue(e),!1),new Choice(gsurveyRankStrings.fifthChoice,GenerateRankChoiceValue(e),!1))),e}function GenerateRankChoiceValue(e){return"grank"+e.id+"xxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)})}function gform_new_choice_rank(e,r){return"rank"==e.inputType&&(r.value=GenerateRankChoiceValue(e)),r}function gsurveyRankGetFieldPreviewMarkup(e){for(var r="",t=0;t<e.choices.length;t++){var i="choice_"+e.id+"_"+t;t<5&&(r+="<li class='gsurvey-rank-choice'><label for='"+i+"'>"+e.choices[t].text+"</label></li>")}return 5<e.choices.length&&(r+="<li class='gchoice_total'>"+gf_vars.editToViewAll.replace("%d",e.choices.length)+"</li>"),r}function SetDefaultValues_rating(e){return e.inputType="rating",e.inputs=null,e.enableChoiceValue=!0,e.enablePrice=!1,e.reversed=!0,e.choices||(e.choices=new Array(new Choice(gsurveyRatingStrings.firstChoice,GenerateRatingChoiceValue(e),!1),new Choice(gsurveyRatingStrings.secondChoice,GenerateRatingChoiceValue(e),!1),new Choice(gsurveyRatingStrings.thirdChoice,GenerateRatingChoiceValue(e),!1),new Choice(gsurveyRatingStrings.fourthChoice,GenerateRatingChoiceValue(e),!1),new Choice(gsurveyRatingStrings.fifthChoice,GenerateRatingChoiceValue(e),!1))),e}function GenerateRatingChoiceValue(e){return"grating"+e.id+"xxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)})}function gform_new_choice_rating(e,r){return"rating"==e.inputType&&(r.value=GenerateRatingChoiceValue(e)),r}function gsurveyRatingGetFieldPreviewMarkup(e){for(var r="<div class='gsurvey-rating'>",t=0;t<e.choices.length;t++){var i="choice_"+e.id+"_"+t;r+="<input type='radio' "+(e.choices[t].isSelected?"checked":"")+" id='"+i+"' disabled='disabled'><label for='"+i+"'>"+e.choices[t].text+"</label>"}return r}jQuery(document).bind("gform_load_field_settings",function(e,r,t){"survey"==r.type&&(jQuery("#gsurvey-field-type").val(r.inputType),jQuery("#gsurvey-question").val(r.label),has_entry(r.id)?jQuery("#gsurvey-field-type").attr("disabled",!0):jQuery("#gsurvey-field-type").removeAttr("disabled"))}),jQuery(document).bind("gform_load_field_settings",function(e,r,t){"likert"==r.inputType&&(void 0===r.gsurveyLikertEnableMultipleRows&&(r.gsurveyLikertEnableMultipleRows=!1),void 0===r.gsurveyLikertEnableScoring&&(r.gsurveyLikertEnableScoring=!1),jQuery("#gsurvey-likert-enable-multiple-rows").prop("checked",r.gsurveyLikertEnableMultipleRows),jQuery("#gsurvey-likert-enable-scoring").prop("checked",r.gsurveyLikertEnableScoring),jQuery("#gsurvey-field-type").val("likert"),r.gsurveyLikertEnableMultipleRows&&jQuery(".gsurvey-likert-setting-rows").show(),r.gsurveyLikertEnableScoring?jQuery("#gsurvey-likert-columns-container").addClass("gsurvey-likert-scoring-enabled"):jQuery("#gsurvey-likert-columns-container").removeClass("gsurvey-likert-scoring-enabled"),jQuery("#gsurvey-likert-columns-container ul#gsurvey-likert-columns").html(gsurveyLikertGetColumns(r)),jQuery("#gsurvey-likert-rows-container ul#gsurvey-likert-rows").html(gsurveyLikertGetRows(r)))}),jQuery(document).bind("gform_load_field_choices",function(e,r){"rank"==r.inputType&&jQuery(".field_selected .gsurvey-rank").html(gsurveyRankGetFieldPreviewMarkup(r))}),jQuery(document).bind("gform_load_field_choices",function(e,r){var t;"rating"==r.inputType&&(void 0===r.reversed&&((t=jQuery("#field_choices")).children().each(function(e,r){t.prepend(r)}),r.choices=r.choices.reverse(),r.reversed=!0),r=gsurveyRatingGetFieldPreviewMarkup(r),jQuery(".field_selected .gsurvey-rating").html(r))}),jQuery(document).ready(function(){jQuery("#gsurvey-likert-columns").sortable({axis:"y",handle:isLegacy?".gsurvey-liket-column-handle":".field-choice-handle--column",update:function(e,r){gsurveyLikertMoveColumn(r.item.data("index"),r.item.index())}}),jQuery("#gsurvey-likert-rows").sortable({axis:"y",handle:isLegacy?".gsurvey-liket-row-handle":".field-choice-handle--row",update:function(e,r){gsurveyLikertMoveRow(r.item.data("index"),r.item.index())}})});