/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.helpPage=tribe.helpPage||{},function($,obj){"use strict";obj.selectors={copyButton:".system-info-copy-btn",optInMsg:".tribe-sysinfo-optin-msg",autoInfoOptIn:"#tribe_auto_sysinfo_opt_in",accordion:".tec-ui-accordion",openSupportChat:"[data-open-support-chat]",helpHubIframe:"#tec-settings__support-hub-iframe",iframeLoader:"#tec-settings__support-hub-iframe-loader",modalButtonSpan:"#tec-settings-nav-modal-open span",navLinkText:".tec-nav__link"},obj.setup=()=>{obj.setupSystemInfo(),obj.setupCopyButton(),obj.setupTabs(),obj.IframeZendeskClickHandler(),obj.IframeRender()},obj.IframeRender=()=>{const iframe=document.querySelector(obj.selectors.helpHubIframe),loader=document.querySelector(obj.selectors.iframeLoader);iframe&&iframe.addEventListener("load",(()=>{iframe.classList.remove("hidden"),loader&&loader.classList.add("hidden")}))},obj.sendMessageToIframe=message=>{document.querySelector(obj.selectors.helpHubIframe).contentWindow&&document.querySelector(obj.selectors.helpHubIframe).contentWindow.postMessage(message,window.origin)},obj.openZendeskInIframe=event=>{event.preventDefault();obj.sendMessageToIframe({action:"runScript",data:"openZendesk"})},obj.IframeZendeskClickHandler=()=>{const openSupportChatElement=document.querySelector(obj.selectors.openSupportChat);openSupportChatElement&&openSupportChatElement.addEventListener("click",(event=>obj.openZendeskInIframe(event)))},obj.setupAccordionsFor=parent=>{$.fn.accordion?$(parent).find(obj.selectors.accordion).accordion({active:!0,collapsible:!0,heightStyle:"content",icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"}}):console.error("jQuery UI Accordion library is missing.")},obj.setupCopyButton=()=>{if("undefined"!=typeof tribe_system_info){var clipboard=new ClipboardJS(obj.selectors.copyButton),button_icon='<span class="dashicons dashicons-clipboard license-btn"></span>',button_text=tribe_system_info.clipboard_btn_text;$(".system-info-copy-btn").on("click",(e=>{e.preventDefault()})),clipboard.on("success",(event=>{event.clearSelection(),event.trigger.innerHTML=button_icon+'<span class="optin-success">'+tribe_system_info.clipboard_copied_text+"<span>",window.setTimeout((function(){event.trigger.innerHTML=button_icon+button_text}),5e3)})),clipboard.on("error",(event=>{event.trigger.innerHTML=button_icon+'<span class="optin-fail">'+tribe_system_info.clipboard_fail_text+"<span>",window.setTimeout((()=>{event.trigger.innerHTML=button_icon+button_text}),5e3)}))}},obj.setupSystemInfo=()=>{"undefined"!=typeof tribe_system_info&&(obj.$system_info_opt_in=$(obj.selectors.autoInfoOptIn),obj.$system_info_opt_in_msg=$(obj.selectors.optInMsg),obj.$system_info_opt_in.on("change",(()=>{this.checked?obj.doAjaxRequest("generate"):obj.doAjaxRequest("remove")})))},obj.doAjaxRequest=generate=>{var request={action:"tribe_toggle_sysinfo_optin",confirm:tribe_system_info.sysinfo_optin_nonce,generate_key:generate};$.post(ajaxurl,request,(results=>{if(results.success)obj.$system_info_opt_in_msg.html("<p class='optin-success'>"+results.data+"</p>");else{var html="<p class='optin-fail'>"+tribe_system_info.sysinfo_error_message_text+"</p>";results.data&&(results.data.message?html+="<p>"+results.data.message+"</p>":results.message&&(html+="<p>"+results.message+"</p>"),results.data.code&&(html+="<p>"+tribe_system_info.sysinfo_error_code_text+" "+results.data.code+"</p>"),results.data.status&&(html+="<p>"+tribe_system_info.sysinfo_error_status_text+results.data.status+"</p>")),obj.$system_info_opt_in_msg.html(html),$(obj.selectors.autoInfoOptIn).prop("checked",!1)}}))},obj.setupTabs=()=>{const tabs=document.querySelectorAll("[data-tab-target]");document.querySelectorAll(".tec-tab-container").forEach((container=>{container.classList.add("hidden")}));let currentTab=document.querySelector(".tec-nav__tab.tec-nav__tab--active"),tabContainer=currentTab?document.getElementById(currentTab.getAttribute("data-tab-target")):null;if(currentTab){const tabText=currentTab.querySelector(obj.selectors.navLinkText).textContent.trim(),modalButtonSpan=document.querySelector(obj.selectors.modalButtonSpan);modalButtonSpan&&(modalButtonSpan.textContent=tabText)}tabContainer&&tabContainer.classList.remove("hidden"),obj.setupTabEventListeners(tabs,tabContainer)},obj.setupTabEventListeners=(tabs,initialTabContainer)=>{obj.activeTabContainer=initialTabContainer,document.addEventListener("click",(event=>{const tab=event.target.closest("[data-tab-target]");if(!tab)return;const target=tab.getAttribute("data-tab-target");obj.updateActiveTab(tabs,target),obj.updateActiveContent(tab,target)}))},obj.updateActiveTab=(tabs,target)=>{tabs.forEach((t=>t.classList.remove("tec-nav__tab--active"))),document.querySelectorAll(`[data-tab-target="${target}"]`).forEach((matchingTab=>{matchingTab.classList.add("tec-nav__tab--active")}))},obj.updateActiveContent=(tab,target)=>{obj.activeTabContainer&&obj.activeTabContainer.classList.add("hidden");const newTabContainer=document.getElementById(target);if(newTabContainer){newTabContainer.classList.remove("hidden"),obj.activeTabContainer=newTabContainer;const tabText=newTabContainer.getAttribute("data-link-title"),modalButtonSpan=document.querySelector(obj.selectors.modalButtonSpan);modalButtonSpan&&tabText&&(modalButtonSpan.textContent=tabText),obj.setupAccordionsFor(obj.activeTabContainer)}},$(obj.setup)}(jQuery,tribe.helpPage);