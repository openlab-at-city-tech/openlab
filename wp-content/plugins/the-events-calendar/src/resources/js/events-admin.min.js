var tribeDateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,a=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(i,d,r){var o=tribeDateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(d=i,i=void 0),"string"==typeof i&&(i=i.replace(/-/g,"/")),i=i?new Date(i):new Date,!isNaN(i)){"UTC:"==(d=String(o.masks[d]||d||o.masks.default)).slice(0,4)&&(d=d.slice(4),r=!0);var s=r?"getUTC":"get",l=i[s+"Date"](),c=i[s+"Day"](),m=i[s+"Month"](),p=i[s+"FullYear"](),y=i[s+"Hours"](),u=i[s+"Minutes"](),v=i[s+"Seconds"](),f=i[s+"Milliseconds"](),h=r?0:i.getTimezoneOffset(),b={d:l,dd:a(l),ddd:o.i18n.dayNames[c],dddd:o.i18n.dayNames[c+7],m:m+1,mm:a(m+1),mmm:o.i18n.monthNames[m],mmmm:o.i18n.monthNames[m+12],yy:String(p).slice(2),yyyy:p,h:y%12||12,hh:a(y%12||12),H:y,HH:a(y),M:u,MM:a(u),s:v,ss:a(v),l:a(f,3),L:a(f>99?Math.round(f/10):f),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:r?"UTC":(String(i).match(t)||[""]).pop().replace(n,""),o:(h>0?"-":"+")+a(100*Math.floor(Math.abs(h)/60)+Math.abs(h)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return d.replace(e,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}}();tribeDateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",tribeQuery:"yyyy-mm-dd",tribeMonthQuery:"yyyy-mm",0:"yyyy-mm-dd",1:"m/d/yyyy",2:"mm/dd/yyyy",3:"d/m/yyyy",4:"dd/mm/yyyy",5:"m-d-yyyy",6:"mm-dd-yyyy",7:"d-m-yyyy",8:"dd-mm-yyyy",9:"yyyy.mm.dd",10:"mm.dd.yyyy",11:"dd.mm.yyyy",m0:"yyyy-mm",m1:"m/yyyy",m2:"mm/yyyy",m3:"m/yyyy",m4:"mm/yyyy",m5:"m-yyyy",m6:"mm-yyyy",m7:"m-yyyy",m8:"mm-yyyy"},tribeDateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return tribeDateFormat(this,e,t)};var tribe_datepicker_opts={};jQuery(function(e){e(".bumpdown-trigger").bumpdown();var t=e("[data-datepicker_format]"),n=(e(".tribe-field-dropdown_select2 select"),e(document.getElementById("view-calendar-link-div")).html()),a=(e('select[name="tribeEventsTemplate"]'),e(document.getElementById("tribe-event-datepickers"))),i=e("body").is(".tribe_community_edit"),d=0;function r(){var t=e(window).width();return t<800?1:t<=1100?2:3}e('[data-wp-lists="list:tribe_events_cat"]').each(function(){var t=e(this),n=t.find(":checkbox:checked").first();if(n.length){var a=t.find(":checkbox").position().top,i=n.position().top;t.closest(".tabs-panel").scrollTop(i-a+5)}}),e(n).insertAfter(".edit-php.post-type-tribe_events #wpbody-content .wrap h2:eq(0) a");var o=function(t){var n=e(document.getElementById("tmpl-tribe-select-"+t)).length?wp.template("tribe-select-"+t):null,a=e(document.getElementById("tmpl-tribe-create-"+t)).length?wp.template("tribe-create-"+t):null,i=e(document.getElementById("event_"+t)),d=i.find(".saved-linked-post");function r(t,n,a){if(void 0!==window["tribe_sticky_"+t+"_fields"]&&Array.isArray(window["tribe_sticky_"+t+"_fields"])){var i=e(a),d=i.filter("tr.linked-post."+n);if(0!==d.length){var r=window["tribe_sticky_"+t+"_fields"].shift(),o=!1;if("object"==typeof r)for(var s in r){var l=i.find('input[name="'+n+"["+s+'][]"]');l.length&&!_.isEmpty(r[s])&&(l.val(r[s]),o=!0)}o&&d.show()}}}i.on("click",".tribe-add-post",function(d){d.preventDefault();var r=e({}),o=e({});if(n&&(r=e(n({}))),r.find(".nosaved").length){var s=r.find("label");s.text(s.data("l10n-create-"+t)),r.find(".nosaved").remove()}a&&(o=e(a({}))),i.find("tfoot").before(o),o.prepend(r),i.find("tbody").length>1?i.find(".move-linked-post-group").show():i.find(".move-linked-post-group").hide(),o.find(".tribe-dropdown").tribe_dropdowns()}),i.on("change",".linked-post-dropdown",s),d.each(function(){var t,n=e(this),i=n.closest("tbody");t=a?e(a({})).find("tr"):i.find("tr").slice(2);var d=n.find(".linked-post-dropdown");if(d.length){var o=d.val();0!==parseInt(o,10)&&t.not(".remain-visible").hide()}else if(n.find(".nosaved").length){var s=n.find("label");s.text(s.data("l10n-create-"+l)),n.find(".nosaved").remove()}for(var l in tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(l)&&r(l,tribe_events_linked_posts.post_types[l],t);t.find(".tribe-dropdown").tribe_dropdowns(),i.append(t)}),i.on("click",".tribe-delete-this",function(t){t.preventDefault();var n=e(this).closest("tbody");n.parents(".tribe-section").removeClass("tribe-is-creating-linked-post"),n.fadeOut(500,function(){e(this).remove()})});var o="> tbody";e("body").hasClass("wp-admin")||(o="table "+o),i.sortable({items:o,handle:".move-linked-post-group",containment:"parent",axis:"y",delay:100}),i.find("tbody").length>1?i.find(".move-linked-post-group").show():i.find(".move-linked-post-group").hide()},s=function(t){const n=e(this),a=n.closest("tbody"),i=a.find(".edit-linked-post-link a"),d=n.val(),r=n.find(":selected");let o="",s=!1;r.val()===d&&(o=r.data("editLink"),s=!!r.data("existingPost")),i.hide(),!s&&"-1"!==d&&r.length?(a.find(".linked-post-name").val(d).parents(".linked-post").eq(0).attr("data-hidden",!0),n.val("-1"),a.find(".linked-post").not("[data-hidden]").show().find(".tribe-dropdown"),a.parents(".tribe-section").addClass("tribe-is-creating-linked-post")):(a.find(".linked-post").hide().find("input, select").val(""),a.parents(".tribe-section").removeClass("tribe-is-creating-linked-post"),_.isEmpty(o)||i.attr("href",o).show())};if(e(".hide-if-js").hide(),void 0!==tribe_l10n_datatables.datepicker){var l=864e5,c="yy-mm-dd";t.length&&t.attr("data-datepicker_format").length>=1&&(c=["yy-mm-dd","m/d/yy","mm/dd/yy","d/m/yy","dd/mm/yy","m-d-yy","mm-dd-yy","d-m-yy","dd-mm-yy","yy.mm.dd","mm.dd.yy","dd.mm.yy"][d=t.attr("data-datepicker_format")]);a.length&&a.data("startofweek");var m=e(document.getElementById("EventStartDate")),p=e(document.getElementById("EventEndDate")),y=e(document.getElementById("tribe_events_event_details"));tribe_datepicker_opts={dateFormat:c,showAnim:"fadeIn",changeMonth:!0,changeYear:!0,numberOfMonths:r(),showButtonPanel:!1,beforeShow:function(t,n){n.input.datepicker("option","numberOfMonths",r()),n.input.data("prevDate",n.input.datepicker("getDate")),void 0!==n.input.data("datepicker-min-date")&&n.input.datepicker("option","minDate",n.input.data("datepicker-min-date")),void 0!==n.input.data("datepicker-max-date")&&n.input.datepicker("option","maxDate",n.input.data("datepicker-max-date")),$dpDiv=e(n.dpDiv),$dpDiv.addClass("tribe-ui-datepicker"),y.trigger("tribe.ui-datepicker-div-beforeshow",[n]),$dpDiv.attrchange({trackValues:!0,callback:function(e){"string"==typeof e.newValue&&(e.newValue.indexOf("display: none")>=0||e.newValue.indexOf("display:none")>=0)&&($dpDiv.removeClass("tribe-ui-datepicker"),y.trigger("tribe.ui-datepicker-div-closed",[n]))}})},onSelect:function(t,n){var a,i,d,r,o=e(this).data("datepicker"),s=e.datepicker.parseDate(o.settings.dateFormat||e.datepicker._defaults.dateFormat,t,o.settings);if("EventStartDate"===this.id){var c=e(document.getElementById("EventStartDate")).data("prevDate"),y=null==c?0:(a=c,i=p.datepicker("getDate"),d=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),r=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()),Math.floor((r-d)/l)),u=new Date(s.setDate(s.getDate()+y));p.datepicker("option","minDate",m.datepicker("getDate")).datepicker("setDate",u).datepicker_format}e(this).trigger("change"),e(this).trigger("blur")}},e.extend(tribe_datepicker_opts,tribe_l10n_datatables.datepicker);e(".tribe-datepicker").datepicker(tribe_datepicker_opts);var u,v=e('select[name="EventStartMonth"], select[name="EventEndMonth"]'),f=e('select[name="EventStartMonth"]'),h=e('select[name="EventEndMonth"]');if(i){var b={start:a.find("#EventStartDate"),end:a.next("tr").find("#EventEndDate")};e.each(b,function(t,n){var a=e(n);""!==a.val()&&a.val(tribeDateFormat(a.val(),d))})}var g=[29,31,28,31,30,31,30,31,31,30,31,30,31],k=[e(document.getElementById("28StartDays")),e(document.getElementById("29StartDays")),e(document.getElementById("30StartDays")),e(document.getElementById("31StartDays"))],w=[e(document.getElementById("28EndDays")),e(document.getElementById("29EndDays")),e(document.getElementById("30EndDays")),e(document.getElementById("31EndDays"))];for(var D in v.on("change",function(){var t=e(this),n=t.attr("name");n="EventStartMonth"==n?"Start":"End";var a=t.attr("value");"0"==a.charAt(0)&&(a=a.replace("0",""));var i=e('select[name="Event'+n+'Year"]').attr("value")%4;2==a&&0==i&&(a=0);var d=e('select[name="Event'+n+'Day"]');e(".event"+n+"DateField").remove(),"Start"==n?((u=k[g[a]-28]).val(d.val()),f.after(u)):((u=w[g[a]-28]).val(d.val()),h.after(u))}),v.trigger("change"),e('select[name="EventStartYear"]').on("change",function(){f.trigger("change")}),e('select[name="EventEndYear"]').on("change",function(){h.trigger("change")}),tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(D)&&o(D)}e("body").on("change","#EventCountry",function(){var t=e(this).parents("div.eventForm").eq(0),n=t.find("#StateProvinceSelect"),a=n.next(".select2-container"),i=t.find("#StateProvinceText"),d=e(this).val();"US"==d||"United States"==d?(i.hide(),n.hide(),a.show()):(i.show(),n.hide(),a.hide())}).find("#EventCountry").trigger("change");var E={$container:e(document.getElementById("overwrite_coordinates"))};E.$lat=E.$container.find("#VenueLatitude"),E.$lng=E.$container.find("#VenueLongitude"),E.$fields=e("").add(E.$lat).add(E.$lng),E.$toggle=E.$container.find("#VenueOverwriteCoords").on("change",function(e){E.$toggle.is(":checked")?E.$fields.prop("disabled",!1).removeClass("hidden"):E.$fields.prop("disabled",!0).addClass("hidden")}),E.$toggle.trigger("change"),e("#EventInfo input, #EventInfo select").on("change",function(){e(".rec-error").hide()}),e('.wp-admin.events-cal #post #publishing-action input[type="submit"]').on("click",function(){e(this).data("clicked",!0)}),e("body").hasClass("post-type-tribe_venue")&&e("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_venue']").parent().addClass("current"),e("body").hasClass("post-type-tribe_organizer")&&e("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_organizer']").parent().addClass("current");var S=e(document.getElementById("tribe-field-tribeEnableViews"));if(S.length){var M=e('select[name="viewOption"]'),C=e('select[name="mobile_default_view"]'),I=S.find("input:checkbox"),x=e("#tribe-field-tribeEnableViews .tribe-field-wrap p.description"),$={};M.find("option").each(function(){var t=e(this);$[t.attr("value")]=t.text()}),C.find("option").each(function(){var t=e(this);$[t.attr("value")]=t.text()}),S.on("change","input:checkbox",function(){var t=e(this);e('[name="tribeEnableViews[]"]:checked').length<1?(t.attr("checked",!0),x.css("color","red")):x.removeAttr("style"),function(t){var n=M.find("option:selected").first().val(),a=C.find("option:selected").first().val();M.find("option").remove(),C.find("option").remove(),I.each(function(){var t=e(this);if(t.is(":checked")){var n=t.val(),a=n.substr(0,1).toUpperCase()+n.substr(1);M.append('<option value="'+n+'">'+a+"</option>"),C.append('<option value="'+n+'">'+a+"</option>")}});var i=M.find("option[value='"+n+"']"),d=C.find("option[value='"+a+"']");if(i.val()==t.val())i.attr("selected","selected");else{var r=S.find("checkbox:checked").first().val();M.find("option").find("option[value='"+r+"']").attr("selected","selected")}d.val()==t.val()?d.attr("selected","selected"):(r=S.find("checkbox:checked").first().val(),C.find("option").find("option[value='"+r+"']").attr("selected","selected"));M.select2("destroy").select2({width:"auto"}),C.select2("destroy").select2({width:"auto"})}(t)})}e("#tribe-community-events.form form").on("submit",function(){var t={start:a.find("#EventStartDate"),end:a.next("tr").find("#EventEndDate")};t.start.val(tribeDateFormat(t.start.datepicker("getDate"),"tribeQuery")),t.end.val(tribeDateFormat(t.end.datepicker("getDate"),"tribeQuery")),a.parent().find(".tribe-no-end-date-update").each(function(){$el=e(this),$el.is(":visible")&&$el.val(tribeDateFormat($el.datepicker("getDate"),"tribeQuery"))})})});