/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_aggregator=tribe_aggregator||{};tribe_aggregator.notice={selector:{notice:".tribe-notice-aggregator-update-msg",progress:".progress",tracker:".tracker",created:".track-created .value",updated:".track-updated .value",skipped:".track-skipped .value",remaining:".track-remaining .value",bar:".bar"},progress:{}},function($,obj,ea){obj.progress.init=function(){obj.progress.data={},obj.progress.$={},obj.progress.$.notice=$(".tribe-notice-aggregator-update-msg"),obj.progress.$.spinner=obj.progress.$.notice.find("img"),obj.progress.$.progress=obj.progress.$.notice.find(obj.selector.progress),obj.progress.$.tracker=obj.progress.$.notice.find(obj.selector.tracker),obj.progress.$.created=obj.progress.$.tracker.find(obj.selector.created),obj.progress.$.updated=obj.progress.$.tracker.find(obj.selector.updated),obj.progress.$.skipped=obj.progress.$.tracker.find(obj.selector.skipped),obj.progress.$.remaining=obj.progress.$.tracker.find(obj.selector.remaining),obj.progress.$.bar=obj.progress.$.notice.find(obj.selector.bar),obj.progress.data.time=Date.now(),obj.progress.hasHeartBeat="undefined"!=typeof wp&&wp.heartbeat,obj.progress.hasHeartBeat&&wp.heartbeat.interval(15),setTimeout(obj.progress.start)},obj.progress.start=function(){"object"==typeof tribe_aggregator_save&&(obj.progress.update(tribe_aggregator_save.progress,tribe_aggregator_save.progressText),obj.progress.hasHeartBeat||obj.progress.send_request())},obj.progress.continue=!0,$(document).on("heartbeat-send",(function(event,data){"object"==typeof tribe_aggregator_save&&obj.progress.continue&&(data.ea_record=tribe_aggregator_save.record_id)})),$(document).on("heartbeat-tick",(function(event,data){data.ea_progress&&obj.progress.handle_response(data.ea_progress)})),obj.progress.handle_response=function(data){data.html&&obj.progress.data.notice.html(data.html),isNaN(parseInt(data.progress,10))||obj.progress.update(data),obj.progress.continue=data.continue,data.continue&&!obj.progress.hasHeartBeat&&setTimeout(obj.progress.send_request,15e3),data.error?(obj.progress.$.notice.find(".tribe-message").html(data.error_text),obj.progress.$.tracker.remove(),obj.progress.$.notice.find(".progress-container").remove(),obj.progress.$.notice.removeClass("notice-warning").addClass("notice-error")):data.complete&&(obj.progress.$.notice.find(".tribe-message").html(data.complete_text),obj.progress.$.tracker.remove(),obj.progress.$.notice.find(".progress-container").remove(),obj.progress.$.notice.removeClass("notice-warning").addClass("notice-success"),obj.progress.$.notice.show())},obj.progress.send_request=function(){var payload={record:tribe_aggregator_save.record_id,check:tribe_aggregator_save.check,action:"tribe_aggregator_realtime_update"};$.post(ajaxurl,payload,obj.progress.handle_response,"json")},obj.progress.update=function(data){var percentage=parseInt(data.progress,10);if(!(percentage<0||percentage>100)&&void 0!==data.counts){var types=["created","updated","skipped"];for(var i in types)if(data.counts[types[i]]){var count=data.counts[types[i]],$target=obj.progress.$[types[i]];if("updated"===types[i]||"skipped"===types[i])count>($target?$target.html():0)&&$target.html(count);else $target.html(count);obj.progress.$.tracker.hasClass("has-"+types[i])||obj.progress.$.tracker.addClass("has-"+types[i])}obj.progress.$.bar.css("width",percentage+"%"),obj.progress.$.progress.attr("title",data.progress_text)}},obj.progress.remove_notice=function(){obj.progress.$.notice.animate({opacity:0,height:"toggle"},1e3,(function(){obj.progress.$.notice.remove()}))},$(document).on("tribe_aggregator_init_notice",(function(){obj.progress.init()})),obj.progress.init()}(jQuery,tribe_aggregator.notice);