(function(t){"use strict";function e(){for(var t=sessionStorage.length;t--;){var e=sessionStorage.key(t);/WPCP/.test(e)&&sessionStorage.removeItem(e)}}var n,o=OutoftheBox_Admin_vars;t("#wpcp-add-account-button, .wpcp-refresh-account-button").on("click",function(n){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").fadeIn(),window.open(t(this).attr("data-url"),"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=600,height=500"),e()}),t(".wpcp-revoke-account-button, .wpc-delete-account-button").on("click",function(e){t(this).addClass("disabled"),t(this).find(".wpcp-spinner").show(),t.ajax({type:"POST",url:o.ajax_url,data:{action:"outofthebox-revoke",account_id:t(this).attr("data-account-id"),force:t(this).attr("data-force"),_ajax_nonce:o.admin_nonce},complete:function(t){location.reload()},dataType:"json"})}),t("#wpcp-read-privacy-policy").on("click",function(t){tb_show("","#TB_inline?height=550&amp;width=800&amp;inlineId=wpcp-privacy-policy")}),t("#wpcp-activate-button").on("click",function(e){t("#purcasecode.outofthebox-option-input-large").val()?t(this).closest("form").submit():window.open(o.activate_url,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=900,height=700")}),t("#wpcp-check-updates-button").on("click",function(t){window.location=o.update_url}),t("#purcasecode.outofthebox-option-input-large").on("focusout",function(){var e="^([a-z0-9]{8})-?([a-z0-9]{4})-?([a-z0-9]{4})-?([a-z0-9]{4})-?([a-z0-9]{12})$";t(this).val().match(e)?t(this).css("color","initial"):t(this).css("color","#dc3232")}),t("#wpcp-deactivate-license-button").on("click",function(e){t("#purchase_code").val(""),t(this).closest("form").submit()}),t(".wpcp-color-picker").wpColorPicker(),t(".ddslickbox").each(function(){var e=t(this);e.ddslick({width:"598px",background:"#f4f4f4",onSelected:function(e){var n=t(e.selectedItem).closest(".dd-container").next();n.val(e.selectedData.value)}})}),t(".wpcp-image-select-button").on("click",function(e){var o=t(this).prev("input").attr("id");n=wp.media.frames.file_frame=wp.media({title:"Select your image",button:{text:"Use this Image"},multiple:!1}),n.on("select",function(){var e=n.state().get("selection").first().toJSON(),a=e.mime,i=/^image\/(?:jpe?g|png|gif|svg)$/i,s=a.match(i);s&&(t("#"+o).val(e.url),t("#"+o).trigger("change"))}),n.open()}),t(".wpcp-image-remove-button").on("click",function(e){t(this).hide();var n=t(this).closest(".upload_row");n.find(".upload").val(""),n.find(".screenshot").slideUp()}),t(".wpcp-default-image-button").on("click",function(e){t(this).parent().find(".upload").val(t(this).attr("data-default")),t("input.upload").trigger("change")}),t("input.upload").on("change",function(){var e='<img src="'+t(this).val()+'" />';e+='<a href="javascript:void(0)" class="wpcp-image-remove-button">Remove</a>',t(this).parent().find(".screenshot").slideDown().html(e);var n=t(this).parent().find(".wpcp-default-image-button");n.hide(),t(this).val()!==n.attr("data-default")&&n.fadeIn()}),t("#wpcp-select-root-button").on("click",function(e){var n=t(this);t(this).parent().addClass("thickbox_opener"),n.addClass("disabled"),n.find(".wpcp-spinner").show(),tb_show("Select Folder","#TB_inline?height=450&amp;width=800&amp;inlineId=oftb-embedded")}),t("#wpcp-shortlinks-selector").on("change",function(){t(".option.bitly, .option.shortest, .option.rebrandly").hide(),"Bit.ly"==t(this).val()&&t(".option.bitly").show(),"Shorte.st"==t(this).val()&&t(".option.shortest").show(),"Rebrandly"==t(this).val()&&t(".option.rebrandly").show()}),t(".wpcp-shareon-toggle-button").on("click",function(e){e.stopImmediatePropagation();var n=t(this).next().val();"disabled"===n?(t(this).removeClass("shareon-disabled").addClass("shareon-enabled"),t(this).next().val("enabled")):(t(this).removeClass("shareon-enabled").addClass("shareon-disabled"),t(this).next().val("disabled"))}),t("#wpcp-reset-notifications-button").on("click",function(e){var n=t(this);n.addClass("disabled"),n.find(".wpcp-spinner").fadeIn(),t('#settings_notifications input[type="text"], #settings_notifications textarea').val(""),t(this).closest("form").submit()}),t("#wpcp-purge-cache").on("click",function(n){var a=t(this);a.addClass("disabled"),a.find(".wpcp-spinner").show(),t.ajax({type:"POST",url:o.ajax_url,data:{action:"outofthebox-reset-cache",_ajax_nonce:o.admin_nonce},complete:function(t){a.removeClass("disabled"),a.find(".wpcp-spinner").hide()},dataType:"json"}),e()}),t("#wpcp-factory-reset-button").on("click",function(n){var a=t(this);a.addClass("disabled"),a.find(".wpcp-spinner").show(),t.ajax({type:"POST",url:o.ajax_url,data:{action:"outofthebox-factory-reset",_ajax_nonce:o.admin_nonce},complete:function(t){location.reload()},dataType:"json"}),e()}),t("#wpcp-open-docs-button").on("click",function(t){window.open(o.documentation_url,"_blank")}),t("#wpcp-network_wide-button").on("click",function(e){t("#wpcp-save-settings-button").trigger("click")}),t("#wpcp-save-settings-button").on("click",function(n){var o=t(this);return o.addClass("disabled"),o.find(".wpcp-spinner").fadeIn(),e(),t(this).closest("form").ajaxSubmit({success:function(){o.removeClass("disabled"),o.find(".wpcp-spinner").fadeOut(),"#settings_advanced"!==location.hash&&"#settings_notifications"!==location.hash||location.reload()},error:function(){o.removeClass("disabled"),o.find(".wpcp-spinner").fadeOut(),location.reload()}}),!1})})(jQuery);