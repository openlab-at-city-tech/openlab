(function(t){"use strict";var e;t(".wpcp-color-picker").wpColorPicker(),t("#wpcp_content_skin_selectbox").ddslick({width:"598px",background:"#f4f4f4",onSelected:function(e){t("#wpcp_content_skin").val(t("#wpcp_content_skin_selectbox").data("ddslick").selectedData.value)}}),t("#wpcp_lightbox_skin_selectbox").ddslick({width:"598px",imagePosition:"right",background:"#f4f4f4",onSelected:function(e){t("#wpcp_lightbox_skin").val(t("#wpcp_lightbox_skin_selectbox").data("ddslick").selectedData.value)}}),t("#wpcp_mediaplayer_skin_selectbox").ddslick({width:"598px",imagePosition:"right",background:"#f4f4f4",onSelected:function(e){t("#wpcp_mediaplayer_skin").val(t("#wpcp_mediaplayer_skin_selectbox").data("ddslick").selectedData.value)}}),t(".wpcp-upload-button").on("click",function(o){var n=t(this).prev("input").attr("id");e=wp.media.frames.file_frame=wp.media({title:"Select your image",button:{text:"Use this Image"},multiple:!1}),e.on("select",function(){var o=e.state().get("selection").first().toJSON(),a=o.mime,i=/^image\/(?:jpe?g|png|gif|svg)$/i,s=a.match(i);s&&(t("#"+n).val(o.url),t("#"+n).trigger("change")),t(".wpcp-upload-remove").on("click",function(e){t(this).hide(),t(this).parent().parent().find(".upload").val(""),t(this).parent().parent().find(".screenshot").slideUp()})}),e.open()}),t(".wpcp-upload-remove").on("click",function(e){t(this).hide(),t(this).parent().parent().find(".upload").val(""),t(this).parent().parent().find(".screenshot").slideUp()}),t(".wpcp-default-image-button").on("click",function(e){t(this).parent().find(".upload").val(t(this).attr("data-default")),t("input.upload").trigger("change")}),t("input.upload").on("change",function(){var e='<img src="'+t(this).val()+'" />';e+='<a href="javascript:void(0)" class="wpcp-upload-remove">Remove</a>',t(this).parent().find(".screenshot").slideDown().html(e);var o=t(this).parent().find(".wpcp-default-image-button");o.hide(),t(this).val()!==o.attr("data-default")&&o.fadeIn()}),t("#wpcp_shortlinks").on("change",function(){t(".option.bitly, .option.shortest, .option.rebrandly").hide(),"Bit.ly"==t(this).val()&&t(".option.bitly").show(),"Shorte.st"==t(this).val()&&t(".option.shortest").show(),"Rebrandly"==t(this).val()&&t(".option.rebrandly").show()}),t(".shareon-setting-button").on("click",function(e){e.stopImmediatePropagation();var o=t(this).next().val();"disabled"===o?(t(this).removeClass("shareon-disabled").addClass("shareon-enabled"),t(this).next().val("enabled")):(t(this).removeClass("shareon-enabled").addClass("shareon-disabled"),t(this).next().val("disabled"))}),t("#add_dropbox_button, .refresh_dropbox_button").on("click",function(e){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").fadeIn(),t("#authorize_dropbox_options").fadeIn(),popup=window.open(t(this).attr("data-url"),"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=600,height=500");for(var n=sessionStorage.length;n--;){var a=sessionStorage.key(n);/CloudPlugin/.test(a)&&sessionStorage.removeItem(a)}}),t(".revoke_dropbox_button, .delete_dropbox_button").on("click",function(e){t(this).addClass("disabled"),t(this).find(".wpcp-spinner").show(),t.ajax({type:"POST",url:OutoftheBox_Admin_vars.ajax_url,data:{action:"outofthebox-revoke",account_id:t(this).attr("data-account-id"),force:t(this).attr("data-force"),_ajax_nonce:OutoftheBox_Admin_vars.admin_nonce},complete:function(t){location.reload()},dataType:"json"})}),t("#resetDropbox_button").on("click",function(e){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").show(),t.ajax({type:"POST",url:OutoftheBox_Admin_vars.ajax_url,data:{action:"outofthebox-reset-cache",_ajax_nonce:OutoftheBox_Admin_vars.admin_nonce},complete:function(t){o.removeClass("disabled"),o.find(".wpcp-spinner").hide()},dataType:"json"});for(var n=sessionStorage.length;n--;){var a=sessionStorage.key(n);/CloudPlugin/.test(a)&&sessionStorage.removeItem(a)}}),t("#wpcp_reset_settings_button").on("click",function(e){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").show(),t.ajax({type:"POST",url:OutoftheBox_Admin_vars.ajax_url,data:{action:"outofthebox-factory-reset",_ajax_nonce:OutoftheBox_Admin_vars.admin_nonce},complete:function(t){location.reload()},dataType:"json"});for(var n=sessionStorage.length;n--;){var a=sessionStorage.key(n);/CloudPlugin/.test(a)&&sessionStorage.removeItem(a)}}),t("#wpcp_updater_button").on("click",function(e){t("#purcasecode.outofthebox-option-input-large").val()?t("#outofthebox-options").submit():popup=window.open(OutoftheBox_Admin_vars.activate_url,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=900,height=700")}),t("#wpcp_check_updates_button").on("click",function(t){window.location=OutoftheBox_Admin_vars.update_url}),t("#purcasecode.outofthebox-option-input-large").on("focusout",function(){var e="^([a-z0-9]{8})-?([a-z0-9]{4})-?([a-z0-9]{4})-?([a-z0-9]{4})-?([a-z0-9]{12})$";t(this).val().match(e)?t(this).css("color","initial"):t(this).css("color","#dc3232")}),t("#wpcp_deactivate_license_button").on("click",function(e){t("#purchase_code").val(""),t("#outofthebox-options").submit()}),t("#wpcp_root_folder_button").on("click",function(e){var o=t(this);t(this).parent().addClass("thickbox_opener"),o.addClass("disabled"),o.find(".wpcp-spinner").show(),tb_show("Select Folder","#TB_inline?height=450&amp;width=800&amp;inlineId=oftb-embedded")}),t("#wpcp_reset_notifications_button").on("click",function(e){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").fadeIn(),t('#settings_notifications input[type="text"], #settings_notifications textarea').val(""),t("#outofthebox-options").submit()}),t("#wpcp_documentation_button").on("click",function(t){popup=window.open(OutoftheBox_Admin_vars.documentation_url,"_blank")}),t("#network_wide").on("click",function(e){t("#save_settings").trigger("click")}),t("#save_settings").on("click",function(e){var o=t(this);o.addClass("disabled"),o.find(".wpcp-spinner").fadeIn();for(var n=sessionStorage.length;n--;){var a=sessionStorage.key(n);/CloudPlugin/.test(a)&&sessionStorage.removeItem(a)}return t("#outofthebox-options").ajaxSubmit({success:function(){o.removeClass("disabled"),o.find(".wpcp-spinner").fadeOut(),"#settings_advanced"!==location.hash&&"#settings_notifications"!==location.hash||location.reload()},error:function(){o.removeClass("disabled"),o.find(".wpcp-spinner").fadeOut(),location.reload()}}),!1})})(jQuery);