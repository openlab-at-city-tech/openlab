function sendGooglePageView(t,e){"1"===OutoftheBox_vars.google_analytics&&("undefined"!=typeof ga&&null!==ga&&ga("send","event","Out-of-the-Box",t,e),"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","Out-of-the-Box",t,e]),"undefined"!=typeof gtag&&null!==gtag&&gtag("event",t,{event_category:"Out-of-the-Box",event_label:e,value:e}))}jQuery(document).ready(function(t){"use strict";t.widget("cp.OutoftheBox",{options:{listtoken:null,searchQuery:null},_create:function(){if(this.element.removeClass("jsdisabled"),this.element.show(),this.element.on("contextmenu",function(t){return!1}),this.options.main=this,this.options.topContainer=this.element.parent(),this.options.loadingContainer=this.element.find(".loading"),this.element.css("width","100%"),this.options.listtoken=this.element.attr("data-token"),this.options.account_id=this.element.attr("data-account-id"),this.options.instance_action=this.element.attr("data-action"),this.searchQuery=this.element.attr("data-query"),this.cache={},this.options.userAgent=navigator.userAgent||navigator.vendor||window.opera,this.options.supportTouch=!!("ontouchstart"in window)&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.options.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this.options.mobile=!1,/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var e=navigator.userAgent.toLowerCase();e.search("android")>-1&&e.search("mobile")>-1?this.options.mobile=!0:e.search("android")>-1&&!(e.search("mobile")>-1)?this.options.mobile=!1:this.options.mobile=!0}else"1"===this.options.is_mobile&&(this.options.mobile=!0);this.options.mobile&&t("html").addClass("oftb-mobile"),this.is_rtl="rtl"===window.getComputedStyle(document.body,null).getPropertyValue("direction"),this.recaptcha_passed=!1,this._initiate()},_destroy:function(){return this._super()},_setOption:function(t,e){this._super(t,e)},_initiate:function(){var t=this;t.options.topContainer.one("inview",function(e,o){t._initResizeHandler(),t._initCache(),t._initLazyLoad(),""!==t.options.recaptcha&&t._initReCaptcha(t),(t.options.topContainer.hasClass("files")||t.options.topContainer.hasClass("gallery")||t.options.topContainer.hasClass("search"))&&(t._initFilebrowser(),t.options.topContainer.hasClass("gallery")&&t.renderContentForGallery()),t.element.find(".fileupload-box").length>0&&t._initUploadBox(),(t.options.topContainer.hasClass("video")||t.options.topContainer.hasClass("audio"))&&t._initMediaPlayer()});var e=new URL(window.location),o=new URLSearchParams(e.search),n=o.get("wpcp_link");if(null!==n){var i=JSON.parse(decodeURIComponent(window.atob(n)));i.source===this.element.attr("data-source")&&t.options.topContainer.addClass("initiate")}t.options.topContainer.hasClass("initiate")&&t.options.topContainer.trigger("inview"),window.setTimeout(function(){t.initated=!0},2e3),t.element.trigger("outofthebox-loaded",t)},_initFilebrowser:function(){var t=this;t.renderNavMenu();var e={},o=new URL(window.location),n=new URLSearchParams(o.search),i=n.get("wpcp_link");if(null!==i){var a=JSON.parse(decodeURIComponent(window.atob(i)));a.source===t.element.attr("data-source")&&(t.options.account_id=a.account_id,t.element.attr("data-path",a.last_path),t.option.focus_id=a.focus_id)}var l=t._cacheGet("CloudPlugin_"+t.options.listtoken+"_view");null!==l&&t.element.attr("data-layout",l),t._getFileList(e)},_initMediaPlayer:function(){var t=this,e=new Event("init_media_player");t.element[0].dispatchEvent(e)},_initUploadBox:function(){var t=this;t.element.find(".fileupload-box").OutoftheBoxUploadbox(t.options)},_getFileList:function(t){var e=this._buildFileListRequest();this.element.find(".no_results").remove(),this.options.loadingContainer.removeClass("initialize upload error").fadeIn(400),this.element.find(".nav-refresh i").addClass("fa-spin"),e(t,this.renderBrowserContent,this)},_buildFileListRequest:function(t){var e=this;return this._pipeline({url:e.options.ajax_url,type:"POST",dataType:"json",data:function(t){return t.listtoken=e.options.listtoken,t.account_id=e.options.account_id,t.lastpath=e.element.attr("data-path"),t.sort=e.element.attr("data-sort"),t.deeplink=e.element.attr("data-deeplink"),t.action="outofthebox-get-filelist",t._ajax_nonce=e.options.refresh_nonce,t.mobile=e.options.mobile,"gallery"===e.element.attr("data-list")&&(t.action="outofthebox-get-gallery",t.type="gallery",t._ajax_nonce=e.options.gallery_nonce),t.query=e.searchQuery,t}})},_initSearchBox:function(){var e=this,o=e.element[0].querySelector(".nav-search");null!=o?(t(o).on("click",function(t){t.stopPropagation()}),o.nextElementSibling.classList.remove("tippy-content-holder"),tippy(o,{trigger:"click",content:o.nextElementSibling,allowHTML:!0,placement:e.is_rtl?"bottom-start":"bottom-end",appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,interactiveDebounce:500,theme:"wpcloudplugins-"+e.options.content_skin,onShown:function(e){t("input",e.popper).focus()},onCreate:function(o){e._initSearchBoxActions(t(o.popper))}})):e._initSearchBoxActions(e.element)},_initSearchBoxActions:function(e){var o=this;e.find(".search-input").on("keyup",function(e){o.searchQuery=t(this).val(),t(this).val().length>0?(o.options.loadingContainer.addClass("search"),o.element.find(".nav-search").addClass("inuse"),clearTimeout(o.updateTimer),o.updateTimer=setTimeout(function(){o.element.find(".loading, .ajax-filelist").show(),o._getFileList({})},1e3)):(o.element.find(".nav-search").removeClass("inuse"),o.element.hasClass("searchlist")?(o.element.find(".loading, .ajax-filelist").hide(),o.element.find(".ajax-filelist").html("")):o._getFileList({}))}),e.find(".submit-search").on("click",function(e){o.searchQuery=t(this).val(),t(this).val().length>0?(clearTimeout(o.updateTimer),o.updateTimer=setTimeout(function(){o.element.find(".loading, .ajax-filelist").show(),o._getFileList({})},1e3)):(o.element.find(".loading, .ajax-filelist").hide(),o.element.find(".ajax-filelist").html(""))}),e.find(".search-remove").on("click",function(t){o.clearSearchBox()}),e.find(".search-input").val(o.searchQuery)},clearSearchBox:function(t){var e=this;e.searchQuery="",e.element.find(".search-input").val(""),void 0===t&&e.element.find(".search-input").trigger("keyup")},_initNavActionMenu:function(){var e=this,o=e.element[0].querySelector(".nav-gear");null!=o&&(t(o).on("click",function(t){t.stopPropagation()}),o.nextElementSibling.classList.remove("tippy-content-holder"),tippy(o,{trigger:"click",content:o.nextElementSibling,maxWidth:350,allowHTML:!0,placement:e.is_rtl?"bottom-start":"bottom-end",appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-"+e.options.content_skin,onShow:function(t){e._initNavActionMenuEvents(t)}}))},_initNavActionMenuEvents:function(e){var o=this,n=t("<div>").attr("data-id",o.element.attr("data-id"));switch(t(e.popper).find("ul").off("click").on("click",function(e){t(this).toggleClass("menu-opened")}),t(e.popper).find(".nav-layout").off("click").on("click",function(t){e.hide(),"list"===o.element.attr("data-layout")?o.element.attr("data-layout","grid"):o.element.attr("data-layout","list"),o._cacheSet("CloudPlugin_"+o.options.listtoken+"_view",o.element.attr("data-layout")),o._getFileList({})}),o.element.attr("data-layout")){case"list":t(e.popper).find(".nav-layout-grid").closest("li").show(),t(e.popper).find(".nav-layout-list").closest("li").hide();break;case"grid":t(e.popper).find(".nav-layout-grid").closest("li").hide(),t(e.popper).find(".nav-layout-list").closest("li").show()}var i=o._helperReadArrCheckBoxes("[data-token='"+o.options.listtoken+"'] input[name='selected-files[]']");0===i.length?(t(e.popper).find(".selected-files-to-zip").parent().hide(),t(e.popper).find(".all-files-to-zip").parent().show(),t(e.popper).find(".selected-files-delete").parent().hide(),t(e.popper).find(".selected-files-move").parent().hide()):(t(e.popper).find(".selected-files-to-zip").parent().show(),t(e.popper).find(".all-files-to-zip").parent().hide(),t(e.popper).find(".selected-files-delete").parent().show(),t(e.popper).find(".selected-files-move").parent().show());var a=t(e.popper).find("ul > li").not(".gear-menu-no-options").filter(function(){return"none"!==t(this).css("display")});a.length>0?t(e.popper).find(".gear-menu-no-options").hide():t(e.popper).find(".gear-menu-no-options").show(),t(e.popper).find(".all-files-to-zip, .selected-files-to-zip").off("click").on("click",function(n){e.hide();var i=[];t(n.target).hasClass("all-files-to-zip")&&(o.element.find(".select-all").trigger("click"),i=o._helperReadArrCheckBoxes("[data-token='"+o.options.listtoken+"'] input[name='selected-files[]']")),t(n.target).hasClass("selected-files-to-zip")&&(i=o._helperReadArrCheckBoxes("[data-token='"+o.options.listtoken+"'] input[name='selected-files[]']")),o._actionDownloadZip(i,n)}),t(e.popper).find(".nav-upload").on("click",function(n){e.hide();var i=o.element.find(".fileupload-box");t("html, body").animate({scrollTop:i.offset().top},1500);for(var a=0;a<3;a++)i.find(".fileupload-buttonbar").fadeTo("slow",.5).fadeTo("slow",1)}),t(e.popper).find(".newentry").off("click").on("click",function(i){if(e.hide(),void 0!==o.searchQuery&&""!==o.searchQuery)return!1;o._actionCreateEntry(n,t(this).data("mimetype"),i)}),t(e.popper).find(".newfolder").off("click").on("click",function(i){if(e.hide(),void 0!==o.searchQuery&&""!==o.searchQuery)return!1;o._actionCreateEntry(n,t(this).data("mimetype"),i)}),!0===o.element.data("selected-all")?t(e.popper).find(".select-all").parent().hide().next().show():t(e.popper).find(".deselect-all").parent().hide().prev().show(),t(e.popper).find(".select-all").on("click",function(n){e.hide(),o.element.find(".selected-files:checkbox").prop("checked",!0),o.element.find('.entry:not(".newfolder"):not(".pf")').addClass("isselected"),o.element.data("selected-all",!0),t(this).parent().hide().next().show()}),t(e.popper).find(".deselect-all").on("click",function(n){e.hide(),o.element.find(".selected-files:checkbox").prop("checked",!1),o.element.find('.entry:not(".newfolder"):not(".pf")').removeClass("isselected"),o.element.data("selected-all",!1),t(this).parent().hide().prev().show()}),t(e.popper).find(".selected-files-move").on("click",function(t){e.hide();var n=o.element.find("input[name='selected-files[]']:checked");if(0===n.length)return!1;o._actionMoveEntries(n)}),t(e.popper).find(".selected-files-delete").on("click",function(t){var e=o.element.find("input[name='selected-files[]']:checked");if(0===e.length)return!1;o._actionDeleteEntries(e,t)}),t(e.popper).find(".entry_action_deeplink_folder").off("click").on("click",function(t){e.hide(),o._actionCreateDeepLink(n,t)}),t(e.popper).find(".entry_action_shortlink_folder").off("click").on("click",function(t){e.hide(),o._actionShareEntry(n,t)})},_initSortMenu:function(){var e=this,o=e.element[0].querySelector(".nav-sort");null!=o&&(t(o).on("click",function(t){t.stopPropagation()}),o.nextElementSibling.classList.remove("tippy-content-holder"),tippy(o,{trigger:"click",content:o.nextElementSibling,maxWidth:350,allowHTML:!0,placement:e.is_rtl?"bottom-start":"bottom-end",appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-"+e.options.content_skin,onShow:function(t){e._initSortEvents(t)}}))},_initSortEvents:function(e){var o=this;t(e.popper).find(".nav-sorting-field").off("click").on("click",function(n){t(e.popper).find(".nav-sorting-field").removeClass("sort-selected"),t(this).addClass("sort-selected");var i=t(e.popper).find(".nav-sorting-field.sort-selected").data("field")+":"+t(e.popper).find(".nav-sorting-order.sort-selected").data("order");o.element.attr("data-sort",i),o._getFileList({}),tippy.hideAll()}),t(e.popper).find(".nav-sorting-order").off("click").on("click",function(n){t(e.popper).find(".nav-sorting-order").removeClass("sort-selected"),t(this).addClass("sort-selected");var i=t(e.popper).find(".nav-sorting-field.sort-selected").data("field")+":"+t(e.popper).find(".nav-sorting-order.sort-selected").data("order");o.element.attr("data-sort",i),o._getFileList({}),tippy.hideAll()})},_initAccountSelector:function(){var t=this;t.element.find(".nav-account-selector").on("click",function(e){t._actionSelectAccount()})},renderBrowserContent:function(e,o){if(!1===o?(e.element.find(".nav-title").html(e.options.str_no_filelist),e.options.loadingContainer.addClass("error")):(e.options.loadingContainer.fadeIn(200),e.element.find(".ajax-filelist").html(o.html),e.element.find(".image-collage").hide(),e.element.find(".nav-title").html(o.breadcrumb),e.element.find(".current-folder-raw").text(o.rawpath),null!==o.lastpath&&e.element.attr("data-path",o.lastpath),e.element.removeClass("-is-virtual-folder"),!0===o.virtual&&e.element.addClass("-is-virtual-folder")),e.element.find(".wpcp-breadcrumb").one("inview",function(t,o){e.renderBreadCrumb()}),e.element.find(".nav-refresh i").removeClass("fa-spin"),"grid"===e.element.attr("data-layout")&&e.element.find(".entry_thumbnail img.hidden").removeClass("hidden"),e.lazyload.update(),e.element.hasClass("gridgallery")?(e.renderContentForGallery(),e._initLoadMore()):e.renderContentForBrowser(),e.lazyload.update(),e.element.find(".entry").off("hover").off("click").on({mouseenter:function(){t(this).addClass("hasfocus")},mouseleave:function(){t(this).removeClass("hasfocus")},mouseover:function(){t(this).addClass("hasfocus")},click:function(){},contextmenu:function(){return t(this).find(".entry-action-menu-button").trigger("click"),!1}}),e.element.find(".folder, .image-folder").off("click").on("click",function(o){if(t(this).hasClass("isdragged")||t(this).hasClass("newfolder"))return!1;o.stopPropagation(),e.clearSearchBox(!1);var n={OutoftheBoxpath:t(this).closest(".folder, .image-folder").attr("data-url")};e._getFileList(n),t(window).scrollTop()>e.element.find(".nav-header").offset().top&&t("html, body").stop().animate({scrollTop:e.element.offset().top-200},1e3)}),e.element.find(".newfolder").off("click").on("click",function(o){if(void 0!==e.searchQuery&&""!==e.searchQuery)return!1;e._actionCreateEntry(t(this),t(this).data("mimetype"),o)}),e.element.find(".entry.file").off("click").on("click",function(o){if("embedded"===e.options.instance_action||"links"===e.options.instance_action)t(this).find(".entry_checkbox :checkbox").trigger("click"),o.stopPropagation();else if("shortcode"===e.options.instance_action);else{var n=t(this).find(".entry_link");e.options.supportTouch&&n.hasClass("ilightbox-group")?n.trigger("itap"):n[0].click()}}),e.element.find(".entry").each(function(){e._initEntryActions(t(this))}),e.element.data("selected-all",!1),e.element.find(".entry_checkbox").off("click").on("click",function(t){return t.stopPropagation(),!0}),e.element.find(".entry_checkbox :checkbox").on("click",function(e){t(this).prop("checked")?t(this).closest(".entry").addClass("isselected"):t(this).closest(".entry").removeClass("isselected"),e.stopPropagation()}),e._initActionMenu(),e._initDescriptionBox(),e._initLightbox(),"list"===e.element.attr("data-layout")&&e._initThumbnailsPopup(),e._initMove(),e._initLinkEvent(),e._initScrollToTop(),"undefined"!=typeof grecaptcha&&""!==e.options.recaptcha&&!1===e.recaptcha_passed&&e._disableDownloadLinks(),e.options.loadingContainer.fadeOut(300),void 0!==e.option.focus_id&&null!==e.option.focus_id){var n=e.element.find('.entry[data-id="'+e.option.focus_id+'"]');n.addClass("hasfocus"),n.find("a.ilightbox-group").length>0&&n.find("a.ilightbox-group").trigger("click"),t("html, body").animate({scrollTop:n.offset().top},1500),e.option.focus_id=null}e.element.trigger("content-loaded",e)},renderContentForBrowser:function(){var t=this,e=t.element.find(".files");switch(this.element.attr("data-layout")){case"list":t.element.removeClass("oftb-grid").addClass("oftb-list");break;case"grid":t.element.removeClass("oftb-list").addClass("oftb-grid"),t.fitEntriesInContainer(e.find(".folders-container "),250),t.fitEntriesInContainer(e.find(".files-container "),250)}e.fadeTo(0,0).delay(100).fadeTo(200,1)},renderContentForGallery:function(){var e=this,o=e.element.find(".image-container"),n=e.element.find(".image-collage");o.on({mouseenter:function(){t(this).find(".image-rollover").stop().animate({opacity:1},400)},mouseleave:function(){t(this).find(".image-rollover").stop().animate({opacity:0},400)}}).find(".image-rollover").css("opacity","0"),n.outerWidth(e.element.find(".ajax-filelist").width()-1,!0);var i=e.element.attr("data-targetheight");n.removeWhitespace().collagePlus({targetHeight:i,fadeSpeed:"slow",allowPartialLastRow:!0}),e.element.find(".image-container.hidden").fadeOut(0),n.fadeTo(200,1),o.each(function(){var e=t(this).find(".folder-thumb");t(this).find(".image-folder-img").width(t(this).width()).height(t(this).height()),e.length>0&&(e.width(t(this).width()).height(t(this).height()),t(this).find(".image-folder-img").hide())}),e.renderImageFolders()},fitEntriesInContainer:function(e,o){var n=e.innerWidth()-1,i=Math.round(n/o),a=Math.floor(n/i);e.removeWhitespace(),e.find(".entry_block").each(function(){var e=parseInt(t(this).css("padding-left"))+parseInt(t(this).css("padding-right"));t(this).parent().outerWidth(a-e,!0)})},renderImageFolders:function(){var e=this;e.element.find(".image-folder").off("mousemove mouseleave").on({mousemove:function(e){var o=t(this).find(".folder-thumb"),n=e.offsetX/e.currentTarget.offsetWidth,i=Math.ceil(n*o.length)-1;o.filter(":gt(0)").stop(!0).fadeOut().filter(":eq("+i+")").stop(!0).fadeIn()},mouseleave:function(){t(this).find(".folder-thumb:gt(0)").stop(!0).fadeOut()}})},_initLoadMore:function(){var t=this,e=t.element.find(".image-container.entry:not(.hidden):last()"),o=t.element.attr("data-loadimages");e.one("inview",function(e,n){var i=t.element.find(".image-container:hidden:lt("+o+")");0!==i.length&&(i.fadeIn(500).removeClass("hidden").find("img").removeClass("hidden"),t._initLoadMore())})},_initScrollToTop:function(){var e=this;this.element.find(".scroll-to-top").off("click").on("click",function(o){t("html, body").animate({scrollTop:e.element.offset().top},1500)}),t(window).off("scroll",null,e._positionScrollToTop).on("scroll",null,{},e._positionScrollToTop)},_initReCaptcha:function(e){if("undefined"==typeof grecaptcha)return setTimeout(function(){e._initReCaptcha(e)},1e3),!1;grecaptcha.ready(function(){grecaptcha.execute(e.options.recaptcha,{action:"wpcloudplugins"}).then(function(o){t.ajax({type:"POST",url:e.options.ajax_url,data:{action:"outofthebox-check-recaptcha",listtoken:e.options.listtoken,response:o,_ajax_nonce:e.options.recaptcha_nonce},success:function(t){if(void 0===t.verified||!0!==t.verified)return!1;e.recaptcha_passed=!0,e._enableDownloadLinks()},dataType:"json"})})})},_disableDownloadLinks:function(){var e=this,o=e.element.find("a.entry_action_download:not(.recaptcha), a.entry_action_export:not(.recaptcha), a.entry_link:not(.recaptcha), a.entry_action_view:not(.recaptcha), a.entry_action_external_view:not(.recaptcha)");0!==o.length&&t.each(o,function(){var e=t(this).attr("href"),o=t(this).attr("download");t(this).attr("href","javascript:void(0)").attr("href-action",e),t(this).removeAttr("download").attr("download-action",o),t(this).addClass("recaptcha")})},_enableDownloadLinks:function(){var e=t("a.entry_action_download.recaptcha, a.entry_action_export.recaptcha, a.entry_link.recaptcha, a.entry_action_view.recaptcha, a.entry_action_external_view.recaptcha");0!==e.length&&t.each(e,function(){t(this).attr("href",t(this).attr("href-action")).attr("download",t(this).attr("download-action")),t(this).removeClass("recaptcha")})},_positionScrollToTop:function(e){clearTimeout(window.scrollTimer),window.scrollTimer=setTimeout(function(){t(".ajax-filelist").each(function(){var e=t(this),o=e.next(".scroll-to-top"),n=e.height(),i=e.offset(),a=i.top+n,l=t(window).scrollTop(),s=l+t(window).height();if(l>i.top&&n>t(window).height()){o.show().fadeIn(40);var r=n,c="50%";a>s&&(r=s-i.top-30,c=0),o.stop().animate({top:Math.round(r-50),right:c})}else o.fadeOut(400)})},50)},_initMove:function(){var e=this;if(0===this.element.find(".moveable").length)return!1;this.element.find(".moveable").draggable({stack:".moveable",zIndex:999999,cursor:"move",cursorAt:{top:10,left:10},containment:e.element,helper:function(){var o=e.element.find(".moveable .entry_checkbox input:checked").closest(".moveable");0===o.length&&(o=t(this));var n=t("<div/>").attr("id","dragging_container");return n.append(o.clone()),n},distance:10,delay:50,start:function(e,o){t(this).addClass("isdragged")},stop:function(e,o){var n=t(this);setTimeout(function(){n.removeClass("isdragged")},100)}}),this.element.find(".folder, .image-folder").droppable({accept:e.element.find(".moveable"),activeClass:"ui-state-hover",hoverClass:"ui-state-active",tolerance:"pointer",drop:function(o,n){e._actionMoveEntry(n.helper.children(),t(this))}})},_initLinkEvent:function(){var e=this;e.element.find(".entry_linkto").off("click").on("click",function(o){var n=t(this).parent().attr("data-name"),i=decodeURIComponent(t(this).parent().attr("data-url")),a=e.element.attr("data-account-id"),l=t(".outofthebox .thickbox_opener").find("[data-user-id]").attr("data-user-id"),s=t(".thickbox_opener");return s.hasClass("private-folders-auto")?(s.find(".private-folders-auto-current").val(i),s.find(".private-folders-auto-input-account").val(a),s.find(".private-folders-auto-input-id").val(i),s.find(".private-folders-auto-input-name").val(i),s.find(".private-folders-auto-button").removeClass("disabled").find(".wpcp-spinner").fadeOut(),tb_remove(),o.stopPropagation(),!0):s.hasClass("woocommerce_upload_location")?(t("#woocommerce_outofthebox-woocommerce_upload_location_id").val(i),t("#woocommerce_outofthebox-woocommerce_upload_location").val(n),tb_remove(),o.stopPropagation(),!0):(t.ajax({type:"POST",url:e.options.ajax_url,data:{action:"outofthebox-linkusertofolder",account_id:a,id:i,text:i,userid:l,_ajax_nonce:e.options.createlink_nonce},beforeSend:function(){tb_remove(),t(".outofthebox .thickbox_opener").find(".wpcp-spinner").show()},complete:function(){t(".wpcp-spinner").hide()},success:function(e){"1"===e?(t(".outofthebox .thickbox_opener").parent().find(".column-private_folder").text(i),t(".outofthebox .thickbox_opener .unlinkbutton").removeClass("hidden"),t(".outofthebox .thickbox_opener .linkbutton").addClass("hidden"),t(".outofthebox .thickbox_opener").removeClass("thickbox_opener")):location.reload()},dataType:"text"}),o.stopPropagation(),!0)}),e.element.find(".entry_woocommerce_link").off("click").on("click",function(o){var n=t(this).closest(".entry").attr("data-url"),i=t(this).closest(".entry").attr("data-name"),a=e.element.attr("data-account-id");return tb_remove(),window.outofthebox_wc.afterFileSelected(n,i,a),o.stopPropagation(),!0})},_initEntryActions:function(t){var e=this;t.find(".entry_action_view").off("click").on("click",function(o){tippy.hideAll(),e._actionPreviewEntry(t,o)}),t.find(".entry_action_download").off("click").on("click",function(o){if(tippy.hideAll(),o.stopPropagation(),!t.hasClass("folder"))return e._actionDownloadEntry(t,o);e._actionDownloadZip([t.attr("data-id")],o)}),t.find(".entry_action_export").off("click").on("click",function(o){return tippy.hideAll(),o.stopPropagation(),e._actionExportEntry(t,o)}),t.find(".entry_action_shortlink").off("click").on("click",function(o){o.stopPropagation(),tippy.hideAll(),e._actionShareEntry(t,o)}),t.find(".entry_action_delete").off("click").on("click",function(o){tippy.hideAll(),t.find(".selected-files:checkbox").prop("checked",!0);var n=e.element.find("input[name='selected-files[]']:checked");e._actionDeleteEntries(n,o)}),t.find(".entry_action_move").off("click").on("click",function(o){tippy.hideAll(),t.find(".selected-files:checkbox").prop("checked",!0);var n=e.element.find("input[name='selected-files[]']:checked");e._actionMoveEntries(n,o)}),t.find(".entry_action_copy").off("click").on("click",function(o){tippy.hideAll(),e._actionCopyEntry(t,o)}),t.find(".entry_action_rename").off("click").on("click",function(o){tippy.hideAll(),e._actionRenameEntry(t,o)}),t.find(".entry_action_description").off("click").on("click",function(o){tippy.hideAll(),e._actionEditDescriptionEntry(t,o)}),t.find(".entry_action_deeplink").off("click").on("click",function(o){o.stopPropagation(),tippy.hideAll(),e._actionCreateDeepLink(t,o)})},_initActionMenu:function(){var e=this,o=e.element[0].querySelectorAll(".entry .entry-action-menu-button");t(o).on("click",function(t){t.stopPropagation()}),tippy(o,{trigger:"click",content:function(e){return t(e).find(".tippy-content-holder").clone(!0).get(0)},maxWidth:350,allowHTML:!0,placement:e.is_rtl?"top-start":"top-end",appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-"+e.options.content_skin,onShow:function(e){t(e.popper).find(".tippy-content-holder").removeClass("tippy-content-holder");var o=t(e.reference).closest(".entry");o.addClass("hasfocus").addClass("popupopen")},onHide:function(e){t(e.reference).closest(".entry").removeClass("hasfocus").removeClass("popupopen")}})},_initDescriptionBox:function(){var e=this,o=e.element[0].querySelectorAll(".entry .entry-description-button");t(o).on("click",function(t){t.stopPropagation()}),tippy(o,{trigger:"mouseenter focus click",content:function(t){return t.querySelector(".tippy-content-holder").innerHTML},maxWidth:350,allowHTML:!0,placement:"bottom",delay:[100,null],offset:[0,-10],interactiveBorder:15,appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-"+e.options.content_skin,onShow:function(e){t(e.reference).closest(".entry").addClass("popupopen")},onHide:function(e){t(e.reference).closest(".entry").removeClass("popupopen")}})},renderBreadCrumb:function(){var e=this,o=e.element.find(".wpcp-breadcrumb");o.asBreadcrumbs("destroy"),o.asBreadcrumbs({namespace:"wpcp",toggleIconClass:"fas fa-caret-down",dropdownMenuClass:"tippy-content",dropdownItem:function(t,e,o){return o?'<li class="'+t.dropdownItemClass+'"><a href="'+o+'"><i class="fas fa-folder fa-lg"></i>  '+e+"</a></li>":'<li class="'+t.dropdownItemClass+" "+t.dropdownItemDisableClass+'"><a href="#"><i class="fas fa-folder fa-lg"></i>  '+e+"</a></li>"}}),o.find(".tippy-content li").on("click",function(e){o.find('li a.folder[href="'+t(this).find("a").attr("href")+'"]').trigger("click"),o.find(".wpcp-dropdown").removeClass("dropdown-open")}),o.find(".wpcp-toggle").on("click",function(t){o.find(".wpcp-dropdown").addClass("dropdown-open")}),t(document).mouseup(function(t){var e=o.find(".tippy-content");e.is(t.target)||0!==e.has(t.target).length||e.parent().removeClass("open")})},_initThumbnailsPopup:function(){var e=this,o=e.element[0].querySelectorAll(".entry[data-tooltip]");tippy(o,{content:function(t){return t.querySelector(".entry_thumbnail-view-center")},maxWidth:e.options.mobile?128:256,allowHTML:!0,placement:"auto",delay:[250,null],offset:[0,10],appendTo:e.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-"+e.options.content_skin,onHide:function(e){t(e.reference).removeClass("hasfocus")}})},_initLazyLoad:function(){var e=this;e.lazyload=new LazyLoad({data_src:window.devicePixelRatio>1?"src-retina":"src",elements_selector:"img.preloading",threshold:300,unobserve_entered:!0,use_native:!0,class_applied:"wpcp-lazy-applied",class_loading:"wpcp-lazy-loading",class_loaded:"wpcp-lazy-loaded",class_error:"wpcp-lazy-error",callback_loaded:function(e){t(e).removeClass("preloading").removeAttr("data-src"),t(e).prev(".preloading").remove()},callback_load:function(e){t(e).removeClass("preloading").removeAttr("data-src"),t(e).prev(".preloading").remove()},callback_error:function(e){void 0!==t(e).attr("data-src-backup")&&!1!==t(e).attr("data-src-backup")?e.src=t(e).attr("data-src-backup"):e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",t(e).removeAttr("data-src"),t(e).prev(".preloading").remove()}})},renderNavMenu:function(){var t=this;this._initSearchBox(),this._initNavActionMenu(),this._initSortMenu(),this._initAccountSelector(),this.element.find(".nav-refresh").off("click").on("click",function(e){t.clearSearchBox(),t.options.forceRefresh=!0,t._getFileList({})}),this.element.find(".nav-home").off("click").on("click",function(e){t.clearSearchBox(),t.element.attr("data-path",t.element.attr("data-org-path")),t._getFileList({OutoftheBoxpath:t.element.attr("data-org-path")})})},_initLightbox:function(){var e,o,n=this,i="1"===n.element.attr("data-lightboxnav"),a=!1,l=!1,s=!1,r=!1;n.options.lightbox_showheader=n.options.topContainer.hasClass("files")?"true":n.options.lightbox_showheader,"click"===n.options.lightbox_showheader?e=l="click":"mouseenter"===n.options.lightbox_showheader?(e=n.options.lightbox_showheader,l="mouseleave"):"false"==n.options.lightbox_showheader?(e=!1,l=!1):(a=!0,e=!0,l=!0),"click"===n.options.lightbox_showcaption?o=r="click":"mouseenter"===n.options.lightbox_showcaption?(o=n.options.lightbox_showcaption,r="mouseleave"):"false"==n.options.lightbox_showcaption?(o=!1,r=!1):(s=!0,o=!0,r=!0);var c={WPCP:this,skin:this.options.lightbox_skin,path:this.options.lightbox_path,maxScale:1,minScale:.05,infinite:!0,slideshow:{pauseOnHover:!1,pauseTime:n.element.attr("data-pausetime"),startPaused:"gallery"!==n.element.attr("data-list")||"1"!==n.element.attr("data-slideshow")},controls:{slideshow:!("gallery"!==n.element.attr("data-list")||!i),arrows:!!i},caption:{start:s,show:o,hide:r},headerHeight:50,header:{start:a,show:e,hide:l},thumbnails:{normalOpacity:.4,activeOpacity:1,maxHeight:100},overlay:{opacity:"gallery"===n.element.attr("data-list")?1:.85},keepAspectRatio:!0,callback:{onBeforeLoad:function(e,o){t(".ilightbox-holder").addClass("OutoftheBox"),t(".ilightbox-holder .oftb-hidepopout").remove(),"0"===n.element.attr("data-popout")&&t(".ilightbox-holder").find(".oftb-embedded").after('<div class="oftb-hidepopout">&nbsp;</div>');var i=t(".ilightbox-holder").find("iframe").addClass("oftb-embedded");n._helperIframeFix(i)},onBeforeChange:function(e){var o=t(".ilightbox-holder video, .ilightbox-holder audio");t.each(o,function(t,e){!1===e.paused&&e.pause()})},onAfterChange:function(e){var o=e.currentElement.find("video, audio");t.each(o,function(t,e){e.paused&&e.play()})},onRender:function(e,o){var n=t(".ilightbox-holder").find("video, audio");t.each(n,function(e,o){var n=t(this);t(this).find("source").attr("src",n.find("source").attr("data-src"))})},onShow:function(e){0===e.currentElement.find(".empty_iframe").length&&e.currentElement.find(".oftb-embedded").after(n.options.str_iframe_loggedin),e.currentElement.find("iframe").length>0&&(setTimeout(function(){e.currentElement.find(".oftb-embedded").width(e.currentElement.find(".ilightbox-container").width()-1)},500),e.currentElement.find("iframe").on("load",function(){e.currentElement.find(".empty_iframe").remove()})),e.currentElement.find(".empty_iframe").hide(),0===e.currentElement.find("img").length&&setTimeout(function(){e.currentElement.find(".empty_iframe").fadeIn(),e.currentElement.find(".empty_iframe_link").attr("href",e.currentElement.find("iframe").attr("src"))},5e3);var o=e.currentElement.find("video, audio");t.each(o,function(t,e){e.paused&&e.play()});var i=this;new LazyLoad({data_src:window.devicePixelRatio>1?"src-retina":"src",unobserve_entered:!0,use_native:!0,elements_selector:".ilightbox-thumbnail img.preloading",class_applied:"wpcp-lazy-applied",class_loading:"wpcp-lazy-loading",class_loaded:"wpcp-lazy-loaded",class_error:"wpcp-lazy-error",callback_loaded:function(e){t(e).removeClass("preloading preloading-lightbox-thumbnail"),t(e).prev(".preloading").remove(),t(e).parent().data({naturalWidth:e.width,naturalHeight:e.height}),i.positionThumbnails(null,null,null)},callback_load:function(e){t(e).removeClass("preloading preloading-lightbox-thumbnail"),t(e).prev(".preloading").remove(),
t(e).parent().data({naturalWidth:e.width,naturalHeight:e.height}),i.positionThumbnails(null,null,null)}}),t(".ilightbox-container .oftb-hidepopout").on("contextmenu",function(t){return!1}),t(".ilightbox-container .ilightbox-wrapper, .ilightbox-container img, .ilightbox-container video, .ilightbox-container audio").on("contextmenu",function(t){return"Yes"===n.options.lightbox_rightclick});var a=e.currentElement.find("[src]");if(a.length>0&&1!==a.data("logged")){var l=t('a[href="'+a.attr("src")+'"]').closest(".entry").data("id");a.data("logged",1),n._logEvent("log_preview_event",l)}}},errors:{loadImage:n.options.str_imgError_title,loadContents:n.options.str_xhrError_title},text:{next:n.options.str_next_title,previous:n.options.str_previous_title,slideShow:n.options.str_startslideshow}};if(i){t.isEmptyObject(this.lightBox)||n.lightBox.destroy();var d=n.element.find(".ilightbox-group");n.lightBox=d.WPCP_iLightBox(c)}else t.isEmptyObject(this.lightBox)||t.each(this.lightBox,function(){this.destroy()}),n.lightBox=[],n.element.find(".ilightbox-group").each(function(){n.lightBox.push(t(this).WPCP_iLightBox(c))})},_actionCreateDeepLink:function(e){var o,n,i,a,l=this;!1===e.hasClass("entry")?(l.element.attr("data-path"),i=l.element.find(".wpcp-breadcrumb li:last").text(),o=!0):(i=e.attr("data-name"),n=e.attr("data-id"),a=e.find("img").attr("src"),o=e.hasClass("folder")||e.hasClass("image-folder"));var s={source:l.element.attr("data-source"),account_id:l.element.attr("data-account-id"),last_path:o?"":l.element.attr("data-path"),focus_id:n},r=window.btoa(encodeURIComponent(JSON.stringify(s))),c=new URL(window.location),d=new URLSearchParams(c.search);d.set("wpcp_link",r),c.search=d.toString(),sendGooglePageView("Create deeplink",i),t("#outofthebox-modal-action").remove();var p="";p+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+l.options.str_close_title+'" >'+l.options.str_close_title+"</button>";var u=t('<a tabindex="0" class="close-button" title="'+l.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),f=t('<div class="outofthebox-modal-body" tabindex="0" ><input type="text" class="direct-link-url" value="'+c.toString()+'" style="width: 98%;" readonly/><div class="shareon outofthebox-shared-social"></div></div>'),h=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+p+"</div></div>"),m=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+l.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(m),t("#outofthebox-modal-action .modal-content").append(u,f,h);var b=t("#outofthebox-modal-action .outofthebox-shared-social");b.attr("data-url",c),b.attr("data-title",i+" | "),t.each(l.options.share_buttons,function(t,e){b.append('<a class="'+e+'" title="'+l.options.str_shareon+" "+e.charAt(0).toUpperCase()+e.slice(1)+'" data-media="'+a+'" data-imageurl="'+a+'" data-image="'+a+'"></a>')}),shareon();t(".shareon .email").attr("href","mailto:?subject="+i+" | &body="+c);var v=new ClipboardJS(".shareon .clipboard",{text:function(e){return t(".direct-link-url").val()}});v.on("success",function(e){t(".shareon .clipboard").addClass("clipboard-check"),e.clearSelection()}),v.on("error",function(e){l.options.mobile?t(".direct-link-url").select():window.prompt("Copy to clipboard: Ctrl+C, Enter",t(".direct-link-url").val())});var _=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){_.keydown(t)},!1),_.open(),window.modal_action=_,t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+l.options.str_processing+"</span>"),!1},_logEvent:function(e,o,n){var i=this;if("0"===i.options.log_events)return!1;void 0===n&&(n={}),t.ajax({type:"POST",url:i.options.ajax_url,data:{action:"outofthebox-event-log",account_id:i.options.account_id,listtoken:i.options.listtoken,type:e,id:o,data:n,_ajax_nonce:i.options.log_nonce}})},_actionPreviewEntry:function(t,e){var o=this,n=t.find(".entry_link");o.options.supportTouch&&n.hasClass("ilightbox-group")?n.trigger("itap"):n[0].click()},_actionDownloadEntry:function(e,o){sendGooglePageView("Download",e.attr("data-filename"));var n=t('<div><i class="fas fa-cog fa-spin fa-1x fa-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"}).delay(5e3).fadeOut("slow",function(){t(this).remove()});e.find(".entry-info-name span").prepend(n),setTimeout(function(){return!0},300)},_actionDownloadZip:function(e,o){var n=this;t("#outofthebox-modal-action").remove();var i="",a=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),l=t('<div class="outofthebox-modal-body" tabindex="0" ><div class="zip-loading-bar label-center" data-preset="circle" data-value="0"></div><h3 class="zip-status">'+n.options.str_processing+"</h3></div>"),s=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+i+"</div></div>"),r=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(r),t("#outofthebox-modal-action .modal-content").append(a,l,s),n.zip_download_bar=new ldBar(l.find(".zip-loading-bar").get(0),{preset:"circle"}),n._zipDownload(e);var c=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){c.keydown(t)},!1),c.open(),window.modal_action=c,t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>"),!1},_zipDownload:function(e,o){var n=this;void 0===o&&(o=(new Date).getTime());var i={action:"outofthebox-create-zip",type:"do-zip",request_id:o,account_id:n.options.account_id,listtoken:n.options.listtoken,lastFolder:n.element.attr("data-id"),_ajax_nonce:n.options.createzip_nonce,files:e};n._helperDownloadUrlInline(n.options.ajax_url+"?"+t.param(i)),setTimeout(function(){n._watchZipProgres(o)},2e3)},_watchZipProgres:function(e){var o=this;o._getZipProgress(e).then(function(n){t.isEmptyObject(n)||void 0===n.status||"failed"===n.status.progress?t("#outofthebox-modal-action").remove():(t(".zip-status").html(n.status.progress_str),o.zip_download_bar.set(n.status.percentage),"finished"!==n.status.progress?setTimeout(function(){o._watchZipProgres(e)},2e3):t("#outofthebox-modal-action").remove())})},_getZipProgress:function(e){var o=this;return t.ajax({type:"POST",url:o.options.ajax_url,data:{action:"outofthebox-create-zip",type:"get-progress",request_id:e,account_id:o.options.account_id,listtoken:o.options.listtoken,lastFolder:o.element.attr("data-id"),_ajax_nonce:o.options.createzip_nonce},dataType:"json"})},_actionShareEntry:function(e,o){var n=this,i=n.element.attr("data-account-id"),a=(e.closest("ul").attr("data-path"),e.attr("data-url")),l=e.attr("data-name"),s=e.find("img").attr("src");if(e.hasClass("entry_action_shortlink_folder"))a=n.element.attr("data-path");t("#outofthebox-modal-action").remove();var r="";r+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_close_title+'" >'+n.options.str_close_title+"</button>",r+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+n.options.str_create_shared_link+'" >'+n.options.str_create_shared_link+"</button>";var c=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),d=t('<div class="outofthebox-modal-body" tabindex="0" ></div>'),p=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+r+"</div></div>"),u=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(u),t("#outofthebox-modal-action .modal-content").append(c,d,p),t.ajax({type:"POST",url:n.options.ajax_url,data:{action:"outofthebox-create-link",account_id:i,listtoken:n.options.listtoken,OutoftheBoxpath:a,_ajax_nonce:n.options.createlink_nonce},complete:function(){t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").remove()},success:function(e){if(null!==e)if(null!==e.link){e.link=e.link.replace("?dl=1",""),t(".outofthebox-modal-body").append('<input type="text" class="shared-link-url" value="'+e.link+'" style="width: 98%;" readonly/><div class="shareon outofthebox-shared-social"></div>'),sendGooglePageView("Create shared link",l);var o=t("#outofthebox-modal-action .outofthebox-shared-social");o.attr("data-url",e.link),o.attr("data-title",l+" | "),t.each(n.options.share_buttons,function(t,e){o.append('<a class="'+e+'" title="'+n.options.str_shareon+" "+e.charAt(0).toUpperCase()+e.slice(1)+'" data-media="'+s+'" data-imageurl="'+s+'" data-image="'+s+'"></a>')}),shareon();t(".shareon .email").attr("href","mailto:?subject="+l+" | &body="+e.link);var i=new ClipboardJS(".shareon .clipboard",{text:function(e){return t(".shared-link-url").val()}});i.on("success",function(e){t(".shareon .clipboard").addClass("clipboard-check"),e.clearSelection()}),i.on("error",function(){n.options.mobile?t(".shared-link-url").select():window.prompt("Copy to clipboard: Ctrl+C, Enter",t(".shared-link-url").val())})}else t(".outofthebox-modal-body").find(".shared-link-url").val(e.error)},dataType:"json"});var f=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){f.keydown(t)},!1),f.open(),window.modal_action=f,t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>"),!1},_actionCreateEntry:function(e,o,n){var i=this;t("#outofthebox-modal-action").remove();var a="";a+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+i.options.str_cancel_title+'" >'+i.options.str_cancel_title+"</button>",a+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+i.options.str_addnew_title+'" >'+i.options.str_addnew_title+"</button>";var l='<input type="text" id="outofthebox-modal-create-entry-input" name="outofthebox-modal-create-entry-input" value="" style="width:100%"/>',s=t('<a tabindex="0" class="close-button" title="'+i.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),r=t('<div class="outofthebox-modal-body" tabindex="0" >'+i.options.str_addnew_name+": <br/>"+l+"</div>"),c=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+a+"</div></div>"),d=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+i.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(d),t("#outofthebox-modal-action .modal-content").append(s,r,c),t("#outofthebox-modal-action #outofthebox-modal-create-entry-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var n=t("#outofthebox-modal-create-entry-input").val();if(/[<>:"/\\|?*]/g.test(t("#outofthebox-modal-create-entry-input").val()))t("#outofthebox-modal-action .outofthebox-modal-error").remove(),t("#outofthebox-modal-create-entry-input").after('<div class="outofthebox-modal-error">'+i.options.str_rename_failed+"</div>"),t("#outofthebox-modal-action .outofthebox-modal-error").fadeIn();else{var a={action:"outofthebox-create-entry",mimetype:o,name:encodeURIComponent(n),_ajax_nonce:i.options.createentry_nonce};i._actionDoModifyEntry(a),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+i.options.str_processing+"</span>")}});var p=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){p.keydown(t)},!1),p.open(),window.modal_action=p,!1},_actionCopyEntry:function(e,o){var n=this,i=(e.attr("data-id"),e.attr("data-name")),a=e.attr("data-url");t("#outofthebox-modal-action").remove();var l="";l+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>",l+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+n.options.str_copy_title+'" >'+n.options.str_copy_title+"</button>";var s='<input id="outofthebox-modal-rename-input" name="outofthebox-modal-rename-input" type="text" value="'+i+'" style="width:100%"/>',r=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),c=t('<div class="outofthebox-modal-body" tabindex="0" >'+n.options.str_copy+"<br/>"+s+"</div>"),d=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+l+"</div></div>"),p=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(p),t("#outofthebox-modal-action .modal-content").append(r,c,d),t("#outofthebox-modal-action #outofthebox-modal-rename-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var o=t("#outofthebox-modal-rename-input").val();if(/[<>:"/\\|?*]/g.test(t("#outofthebox-modal-rename-input").val()))t("#outofthebox-modal-action .outofthebox-modal-error").remove(),t("#outofthebox-modal-rename-input").after('<div class="outofthebox-modal-error">'+n.options.str_rename_failed+"</div>"),t("#outofthebox-modal-action .outofthebox-modal-error").fadeIn();else{var i={action:"outofthebox-copy-entry",OutoftheBoxpath:a,newname:encodeURIComponent(o),_ajax_nonce:n.options.copy_nonce};n._actionDoModifyEntry(i),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")}});var u=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,!1},_actionRenameEntry:function(e,o){var n=this,i=(e.closest("ul").attr("data-path"),e.attr("data-name")),a=e.attr("data-url");t("#outofthebox-modal-action").remove();var l="";l+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>",l+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+n.options.str_rename_title+'" >'+n.options.str_rename_title+"</button>";var s='<input id="outofthebox-modal-rename-input" name="outofthebox-modal-rename-input" type="text" value="'+i+'" style="width:100%"/>',r=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),c=t('<div class="outofthebox-modal-body" tabindex="0" >'+n.options.str_rename+"<br/>"+s+"</div>"),d=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+l+"</div></div>"),p=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(p),t("#outofthebox-modal-action .modal-content").append(r,c,d),t("#outofthebox-modal-action #outofthebox-modal-rename-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var o=t("#outofthebox-modal-rename-input").val();if(/[<>:"/\\|?*]/g.test(t("#outofthebox-modal-rename-input").val()))t("#outofthebox-modal-action .outofthebox-modal-error").remove(),t("#outofthebox-modal-rename-input").after('<div class="outofthebox-modal-error">'+n.options.str_rename_failed+"</div>"),t("#outofthebox-modal-action .outofthebox-modal-error").fadeIn();else{var i={action:"outofthebox-rename-entry",OutoftheBoxpath:a,newname:encodeURIComponent(o),_ajax_nonce:n.options.rename_nonce};n._actionDoModifyEntry(i),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")}});var u=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,!1},_actionEditDescriptionEntry:function(e,o){var n=this,i=e.attr("data-id"),a=n.element.attr("data-account-id"),l=e.find(".description-text").html();void 0===l&&(l=""),t("#outofthebox-modal-action").remove();var s="";s+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>",s+='<button class="button outofthebox-modal-confirm-btn" data-action="editdescription" type="button" title="'+n.options.str_save_title+'" >'+n.options.str_save_title+"</button>";var r=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),c=t('<div class="outofthebox-modal-body" tabindex="0" ><textarea id="outofthebox-modal-description-input" name="outofthebox-modal-description-input" style="width:100%" rows="8" placeholder="'+n.options.str_add_description+'"></textarea></div>'),d=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+s+"</div></div>"),p=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(p),t("#outofthebox-modal-action .modal-content").append(r,c,d),t("#outofthebox-modal-description-input").val(l.replace(/<br\s?\/?>/g,"\r")),t("#outofthebox-modal-action #outofthebox-modal-description-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-description-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var o=t("#outofthebox-modal-description-input").val(),l={action:"outofthebox-edit-description-entry",account_id:a,id:i,newdescription:o,listtoken:n.options.listtoken,_ajax_nonce:n.options.description_nonce};n._actionDoModifyEntry(l),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")});var u=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,!1},_actionMoveEntry:function(e,o,n){var i=this,a=[];t.each(e,function(){a.push(t(this).attr("data-id"))});var l={action:"outofthebox-move-entries",entries:a,copy:!1,target:o.attr("data-url"),_ajax_nonce:i.options.move_nonce};i._actionDoModifyEntry(l)},_actionMoveEntries:function(e,o){t("#outofthebox-modal-action").remove();var n=this,i=[];t.each(e,function(){i.push(t(this).val())});var a="";a+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>",a+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+n.options.str_move_title+'" >'+n.options.str_move_title+" ("+i.length+")</button>";var l=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),s=t('<div class="outofthebox-modal-body" tabindex="0" ><div id="outofthebox-modal-folder-selector"></div></div>'),r=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+a+"</div></div>"),c=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(c),t("#outofthebox-modal-action .modal-content").append(l,s,r),n.options.topContainer.clone().appendTo("#outofthebox-modal-folder-selector").removeClass("gallery").addClass("files"),t("#outofthebox-modal-folder-selector").find(".ajax-filelist").html(""),t("#outofthebox-modal-folder-selector .OutoftheBox").attr("data-list","files").attr("data-layout","list").OutoftheBox(OutoftheBox_vars),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var o={action:"outofthebox-move-entries",entries:i,copy:!1,target:t("#outofthebox-modal-folder-selector .OutoftheBox").attr("data-path"),_ajax_nonce:n.options.move_nonce};n._actionDoModifyEntry(o),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")});var d=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){d.keydown(t)},!1),d.open(),window.modal_action=d,!1},_actionDeleteEntries:function(e,o){t("#outofthebox-modal-action").remove();var n=this,i="",a=[];t.each(e,function(){var e=t(this).closest(".entry"),o=e.find("img:first()"),n=t('<div class="outofthebox-modal-file-icon">');o.length>0&&o.clone().appendTo(n),i+="<li>"+n.html()+"<span>"+e.attr("data-name")+"</span></li>",a.push(t(this).val())});var l="";l+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>",l+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+n.options.str_delete_title+'" >'+n.options.str_delete_title+" ("+a.length+") </button>";var s=t('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),r=t('<div class="outofthebox-modal-body" tabindex="0" >'+n.options.str_delete+'</br></br><ul class="files">'+i+"</ul></div>"),c=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+l+"</div></div>"),d=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(d),t("#outofthebox-modal-action .modal-content").append(s,r,c),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").on("click",function(e){var o={action:"outofthebox-delete-entries",entries:a,_ajax_nonce:n.options.delete_nonce};n._actionDoModifyEntry(o),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")});var p=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){p.keydown(t)},!1),p.open(),window.modal_action=p,!1},_actionSelectAccount:function(){t("#outofthebox-modal-action").remove();var e=this,o=t('<a tabindex="0" class="close-button" title="'+e.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>'),n=t('<div class="outofthebox-modal-body modal-account-selector" tabindex="0" style="text-align: center;"><h1>'+e.options.str_account_title+'</h1><div class="nav-account-selector-content">'+e.element.find(".nav-account-selector-content").html()+"</div></div>"),i=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+e.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(i),t("#outofthebox-modal-action .modal-content").append(o,n),t("#outofthebox-modal-action .nav-account-selector").on("click",function(o){e.element.find(".nav-account-selector:first").html(t(this).html()),e.element.attr("data-id",""),e.element.attr("data-path",""),e.element.attr("data-account-id",t(this).attr("data-account-id")),e.options.account_id=t(this).attr("data-account-id"),e._getFileList({}),a.close()});var a=new RModal(document.getElementById("outofthebox-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){a.keydown(t)},!1),a.open(),window.modal_action=a,!1},_actionDoModifyEntry:function(e){var o=this,n=o.element.attr("data-path");e.listtoken=this.options.listtoken,e.lastpath=n,e.account_id=o.element.attr("data-account-id"),t.ajax({type:"POST",url:o.options.ajax_url,data:e,beforeSend:function(){o.options.loadingContainer.fadeIn(400)},success:function(t){void 0!==t&&void 0!==t.lastpath&&null!==t.lastpath&&o.element.attr("data-path",t.lastpath)},complete:function(){"undefined"!=typeof modal_action&&modal_action.close(),o.options.forceRefresh=!0,o._getFileList({})},dataType:"json"})},_initResizeHandler:function(){var e=this;e._orgininal_width=e.element.width(),t(window).resize(function(){e._orgininal_width!==e.element.width()&&(e._orgininal_width=e.element.width(),e._refreshView())})},_refreshView:function(){var t=this;void 0!==t.resizeTimer&&clearTimeout(t.resizeTimer),t.element.find(".image-collage").fadeTo(100,0),t.element.find(".files").fadeTo(100,0),t.resizeTimer=setTimeout(function(){(t.options.topContainer.hasClass("files")||t.options.topContainer.hasClass("search"))&&t.renderContentForBrowser(),t.options.topContainer.hasClass("gallery")&&t.renderContentForGallery()},100)},_pipeline:function(e){var o=this,n=t.extend({url:o.options.ajax_url,data:null,method:"POST"},e);return function(e,i,a){var l=n.data(e);t.extend(e,l);var s="CloudPlugin_"+(e.listtoken+e._ajax_nonce+(void 0===e.account_id?"":e.account_id)+e.OutoftheBoxpath+e.lastpath+e.sort+e.query).hashCode();if(o.options.clearLocalCache&&(o._cacheRemove("all"),o.options.clearLocalCache=!1),o.options.forceRefresh&&(o._cacheRemove("all"),e.hardrefresh=!0,o.options.forceRefresh=!1),null!==o._cacheGet(s)){var r=o._cacheGet(s);if(r===Object(r))return r.draw=e.draw,i(o,r),!0;o._cacheRemove(s)}void 0!==a.jqXHR&&null!==a.jqXHR&&a.jqXHR.abort(),a.jqXHR=t.ajax({type:n.method,url:n.url,data:e,dataType:"json",cache:!1,beforeSend:function(){},success:function(t){if(t!==Object(t))return o.element.trigger("ajax-error",[t,e,a.jqXHR]),i(o,!1),!1;o.element.trigger("ajax-success",[t,e,a.jqXHR]),o._cacheSet(s,t),i(o,t)},error:function(t){return o.element.trigger("ajax-error",[t,e,a.jqXHR]),i(o,!1),!1}})}},_initCache:function(){var t=this;t._isCacheStorageAvailable=t._cacheStorageAvailable(),setInterval(function(){t._cacheRemove("all")},9e5)},_cacheStorageAvailable:function(){try{var t=window.sessionStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}},_cacheGet:function(t){if(void 0===this.cache.expires){var e=new Date;e.setMinutes(e.getMinutes()+15),this.cache.expires=e}return this.cache.expires.getTime()<(new Date).getTime()&&this._cacheRemove(t),this._isCacheStorageAvailable?JSON.parse(sessionStorage.getItem(t)):void 0===this.cache[t]?null:this.cache[t]},_cacheSet:function(t,e){if(this._isCacheStorageAvailable)try{sessionStorage.setItem(t,JSON.stringify(e))}catch(t){return this._cacheRemove("all"),!1}else void 0===this.cache[t]&&(this.cache[t]={}),this.cache[t]=e},_cacheRemove:function(t){if(this._isCacheStorageAvailable)if("all"===t)for(var e=sessionStorage.length;e--;){t=sessionStorage.key(e);/CloudPlugin/.test(t)&&sessionStorage.removeItem(t)}else sessionStorage.removeItem(t);else"all"===t?delete this.cache:delete this.cache[t]},_helperDownloadUrlInline:function(t){var e="hiddenDownloader",o=document.getElementById(e);null===o&&(o=document.createElement("iframe"),o.id=e,o.style.display="none",document.body.appendChild(o)),o.src=t},_helperFormatBytes:function(t,e){if(0==t)return"";var o=1e3,n=e+1||3,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,a)).toFixed(n))+" "+i[a]},_helperReturnBytes:function(t){if(""==t)return 0;var e=t.charAt(t.length-1);switch("B"!==e&&"b"!==e||!isNaN(t.charAt(t.length-2))||(e=t.charAt(t.length-2)),e){case"M":case"m":return 1048576*parseInt(t);case"k":case"k":return 1024*parseInt(t);case"G":case"g":return 1073741824*parseInt(t);default:return parseInt(t)}},_helperIframeFix:function(e){/iPhone|iPod|iPad/.test(navigator.userAgent)&&e.each(function(){0===t(this).closest("#safari_fix").length&&t(this).wrap(function(){return t('<div id="safari_fix"/>').css({width:"100%",height:"100%",overflow:"auto","z-index":"2","-webkit-overflow-scrolling":"touch"})})})},_helperCachedScript:function(t,e){return e=jQuery.extend(e||{},{dataType:"script",cache:!0,url:t}),jQuery.ajax(e)},_helperReadArrCheckBoxes:function(e){var o=t(e+":checked").map(function(){
return t(this).closest(".entry").attr("data-id")}).get();return o},_helperIsIE:function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")&&parseInt(t.split("msie")[1])}});var e=t({});t.ajaxQueue=function(o){var n=o.complete;e.queue(function(e){o.complete=function(){n&&n.apply(this,arguments),e()},t.ajax(o)})}}),jQuery(document).ready(function(t){t(".OutoftheBox").OutoftheBox(OutoftheBox_vars)});var WPCP_OutoftheBox_mutationCallback=function(t,e){for(var o in t)if("childList"===o.type)for(var n in o.addedNodes)n instanceof HTMLElement&&n.matches('div[id*="OutoftheBox-"]')&&jQuery(n).OutoftheBox(OutoftheBox_vars)},WPCP_OutoftheBox_mutationObserver=new MutationObserver(WPCP_OutoftheBox_mutationCallback);WPCP_OutoftheBox_mutationObserver.observe(document.documentElement,{childList:!0,subtree:!0});var wpcp_playlists={};