/*Minified*/
(function(b){b.widget("cp.OutoftheBox",{options:{listtoken:null,searchQuery:null},_create:function(){this.element.removeClass("jsdisabled");this.element.show();this.options.topContainer=this.element.parent();this.options.loadingContainer=this.element.find(".loading");this.element.css("width","100%");this.options.listtoken=this.element.attr("data-token");this.options.account_id=this.element.attr("data-account-id");this.cache={};this.uploaded_files=[];this.uploaded_files_storage={};this.number_of_uploaded_files={Max:this.element.find('input[name="maxnumberofuploads"]').val(),Counter:0};this.options.mobile=false;if(/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var c=navigator.userAgent.toLowerCase();if((c.search("android")>-1)&&(c.search("mobile")>-1)){this.options.mobile=true}else{if((c.search("android")>-1)&&!(c.search("mobile")>-1)){this.options.mobile=false}else{this.options.mobile=true}}}else{if(this.options.is_mobile==="1"){this.options.mobile=true}}if(this.options.mobile){b("html").addClass("oftb-mobile")}this.recaptcha_passed=false;this._initiate()},_destroy:function(){return this._super()},_setOption:function(c,d){this._super(c,d)},_initiate:function(){var c=this;c.options.topContainer.one("inview",function(e,d){c._initResizeHandler();c._refreshView();c._initCache();if(c.options.recaptcha!==""){c._initReCaptcha()}if(c.options.topContainer.hasClass("files")||c.options.topContainer.hasClass("gallery")||c.options.topContainer.hasClass("search")){c._initFilebrowser()}if(c.element.find(".fileuploadform").length>0){c._initUploadBox()}if(c.options.topContainer.hasClass("video")||c.options.topContainer.hasClass("audio")){c._initMediaPlayer()}});if(c.options.topContainer.hasClass("initiate")){c.options.topContainer.trigger("inview")}window.setTimeout(function(){c.initated=true},2000)},_initFilebrowser:function(){this.renderNavMenu();var g={};var e=new URL(window.location);var f=new URLSearchParams(e.search);var d=f.get("wpcp_link");if(d!==null){var c=JSON.parse(decodeURIComponent(window.atob(d)));if(c.org_path===this.element.attr("data-org-path")){this.options.account_id=c.account_id;this.element.attr("data-path",c.last_path);this.option.focus_id=c.focus_id}}this._getFileList(g)},_initMediaPlayer:function(){var c=this;var d=new Event("init_media_player");c.element[0].dispatchEvent(d)},_initUploadBox:function(){var q=this;var i=q.options.topContainer.hasClass("upload");var r=q.element.find(".fileuploadform");var g=r.closest("form");var p=true;this._initDragDrop();if(q._helperIsIE()!==false&&q._helperIsIE()<10){b(".upload-multiple-files").parent().remove()}if(i&&document.cookie.indexOf("OftB-ID=")==-1){var e=new Date();e.setTime(e.getTime()+(7*24*60*60*1000));var d="; expires="+e.toUTCString();var c=Math.random().toString(36).substr(2,16);document.cookie="OftB-ID="+c+d+"; path="+q.options.cookie_path+"; domain="+q.options.cookie_domain+";"}if(g.length>0){var o=g.find('input[type="submit"]:visible, input[type="button"].gform_next_button:visible, button[id^="gform_submit_button"]:visible, button[class*="cf7md-submit-btn"]:visible');var m=g.find("#wpcp_form_submit");if(m.length===0){m=o.clone().attr("id","wpcp_form_submit").prop("onclick",null).prop("onkeypress",null).off().addClass("wpcf7-submit")}m.click(function(s){if((r.closest(".gfield_contains_required").length)&&(q.number_of_uploaded_files.Counter===0)){r.css("border-color","red");return false}b(this).addClass("firing").prop("disabled",true).fadeTo(400,0.3);if(r.find(".template-upload").length>0){r.css("border-color","");r.trigger("outofthebox-startupload");b(this).val(q.options.str_processing);return false}if(g.find(".template-upload").length===0&&g.hasClass("submitting")===false){g.addClass("submitting");b(this).remove();o.prop("disabled",false).show().fadeTo(400,0.3).trigger("click").prop("disabled",true);b("html, body").animate({scrollTop:o.offset().top},1500)}})}if(g.length>0&&g.find("#gravityflow_update_button").length===0&&!q.options.topContainer.hasClass("auto_upload")){p=false;if(g.find("#wpcp_form_submit").length===0){m.insertBefore(o);o.prop("disabled",true).hide();r.trigger("outofthebox-removeupload")}}if(g.length>0&&q.element.find('input[name="fileupload-filelist_'+q.options.listtoken+'"]').val().length>0){q.uploaded_files_storage=JSON.parse(q.element.find('input[name="fileupload-filelist_'+q.options.listtoken+'"]').val());b.each(q.uploaded_files_storage,function(s,t){q._uploadRenderRow(t);q._uploadRenderRowOnFinish(t,true);q.number_of_uploaded_files.Counter++})}q.element.find(".fileupload-filelist").change(function(){q.element.parent().next(".fileupload-input-filelist").val(b(this).val())});q.element.find(".fileupload-filelist").trigger("change");q.element.find(".fileupload-list").click(function(){q.element.find(".upload-input-button:first").trigger("click")});var k=b.support.xhrFileUpload;var j=false;var h=(k)?false:true;var l="POST";var f=true;var n=(j)?20*320*1000:0;q.element.find('input[name="maxfilesize"]').val("");r.fileupload({url:q.options.ajax_url,type:l,maxChunkSize:n,singleFileUploads:f,multipart:h,dataType:"json",autoUpload:p,maxFileSize:(k&&q.element.find('input[name="maxfilesize"]').attr("data-limit")==="0")?"undefined":q.options.post_max_size,acceptFileTypes:new RegExp(q.element.find('input[name="acceptfiletypes"]').val(),"i"),dropZone:q.element,messages:{maxNumberOfFiles:q.options.maxNumberOfFiles,acceptFileTypes:q.options.acceptFileTypes,maxFileSize:q.options.maxFileSize,minFileSize:q.options.minFileSize},limitConcurrentUploads:3,disableImageLoad:true,disableImageResize:true,disableImagePreview:true,disableAudioPreview:true,disableVideoPreview:true,uploadTemplateId:null,downloadTemplateId:null,add:function(t,s){b.each(s.files,function(u,v){q.number_of_uploaded_files.Counter++;v.hash=v.name.hashCode()+"_"+Math.floor(Math.random()*1000000);v.listtoken=q.options.listtoken;if("webkitRelativePath" in v){v.path=v.webkitRelativePath.replace(v.name,"")}else{v.path=""}v.directupload=k&&(v.size<314572800);v=q._uploadValidateFile(v);var w=q._uploadRenderRow(v);if(v.error!==false){r.trigger("outofthebox-removeupload",[s.files[u]]);s.files.splice(u,1)}w.find(".cancel-upload").on("click",function(x){x.preventDefault();x.stopPropagation();s.files.splice(u,1);q.number_of_uploaded_files.Counter--;q._uploadDeleteRow(v,0);r.trigger("outofthebox-removeupload",[s.files[u]])})});r.trigger("outofthebox-addupload",[s]);if(s.autoUpload||(s.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){if(s.files.length>0){s.process().done(function(){q._uploadDoRequest(s)})}}else{b(this).on("outofthebox-startupload",function(){if(s.files.length>0){s.process().done(function(){q._uploadDoRequest(s)})}})}},submit:function(w,u){window.onbeforeunload=function(){return true};q.element.attr("uploading","true");var t;var s;b.each(u.files,function(x,y){s=y;q._uploadRenderRowOnStart(s);t=s.hash});if(p===false&&q.element.visible(true)===false){b("html, body").stop().animate({scrollTop:q.element.offset().top-200},1000)}if(s.directupload){var v=b(this);q.element.find(".fileuploadform").fileupload("option","multipart",false);b.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-upload-file",account_id:q.options.account_id,type:"get-direct-url",filename:s.name,file_size:s.size,file_path:s.path,mimetype:s.type,orgin:(!window.location.origin)?window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):window.location.origin,lastpath:q.element.attr("data-path"),listtoken:q.options.listtoken,_ajax_nonce:q.options.upload_nonce,},error:function(){s.error=q.options.str_error;q._uploadRenderRowOnFinish(s)},success:function(x){if(typeof x.result==="undefined"||typeof x.url==="undefined"){s.error=q.options.str_error;q._uploadRenderRowOnFinish(s)}else{u.url=x.url;s.fileid=x.id;s.convert=x.convert;u.jqXHR=v.fileupload("send",u)}},dataType:"json"});return false}else{q.element.find(".fileuploadform").fileupload("option","multipart",true);u.formData={action:"outofthebox-upload-file",account_id:q.options.account_id,type:"do-upload",hash:t,file_path:s.path,lastpath:q.element.attr("data-path"),listtoken:q.options.listtoken,_ajax_nonce:q.options.upload_nonce}}}}).on("fileuploadsubmit",function(t,s){}).on("fileuploadprogress",function(v,u){var t=u.files[0];if(t.directupload){var s=parseInt(u.loaded/u.total*100,10);q._uploadRenderRowOnProgress(t,{percentage:s,progress:"uploading_to_cloud"})}else{var s=parseInt(u.loaded/u.total*100,10)/2;q._uploadRenderRowOnProgress(t,{percentage:s,progress:"uploading_to_server"});if(s>=50){q._uploadRenderRowOnProgress(t,{percentage:50,progress:"uploading_to_cloud"});setTimeout(function(){q._uploadGetProgress(t)},2000)}}}).on("fileuploadstopped",function(){}).on("fileuploaddone",function(t,s){sendGooglePageView("Upload file")}).on("fileuploadalways",function(u,t){var s=t.files[0];if(t.result===null){s.error=q.options.str_error;q._uploadRenderRowOnFinish(s)}if(s.directupload){if(s.convert){q._uploadDoConvert(s)}else{q._uploadRenderRowOnFinish(s)}}else{if(typeof t.result!=="undefined"){if(typeof t.result.status!=="undefined"){if(t.result.status.progress==="finished"||t.result.status.progress==="failed"){q._uploadRenderRowOnFinish(t.result.file)}}else{t.result.file.error=q.options.str_error;q._uploadRenderRowOnFinish(t.result.file)}}else{s.error=q.options.str_error;q._uploadRenderRowOnFinish(s)}}}).on("fileuploaddrop",function(u,t){var s=b(this);b("html, body").animate({scrollTop:s.offset().top},1500)}).on("outofthebox-upload-finished",function(s){q.element.attr("uploading","");if(b(".OutoftheBox[uploading=true]").length>0){return}if(g.length>0&&g.find("#gravityflow_update_button").length===0&&!q.options.topContainer.hasClass("auto_upload")){m.trigger("click")}})},_getFileList:function(d){var c=this._buildFileListRequest();this.element.find(".no_results").remove();this.options.loadingContainer.removeClass("initialize upload error").fadeIn(400);this.element.find(".nav-refresh i").addClass("fa-spin");c(d,this.renderBrowserContent,this)},_buildFileListRequest:function(d){var c=this;return this._pipeline({url:c.options.ajax_url,type:"POST",dataType:"json",data:function(e){e.listtoken=c.options.listtoken;e.account_id=c.options.account_id;e.lastpath=c.element.attr("data-path");e.sort=c.element.attr("data-sort");e.deeplink=c.element.attr("data-deeplink");e.filelayout=c.element.attr("data-layout");e.action="outofthebox-get-filelist";e._ajax_nonce=c.options.refresh_nonce;e.mobile=c.options.mobile;if(c.element.attr("data-list")==="gallery"){e.action="outofthebox-get-gallery";e._ajax_nonce=c.options.gallery_nonce}e.query=c.searchQuery;return e}})},_initSearchBox:function(){var c=this;var d=this.element.find(".nav-search");d.qtip({prerender:false,id:"search-"+c.options.listtoken,content:{text:d.next(".search-div"),button:d.next(".search-div").find(".search-remove")},position:{my:"top right",at:"bottom center",target:d,viewport:b(window),adjust:{scroll:false}},style:{classes:"OutoftheBox search "+c.options.content_skin},show:{effect:function(){b(this).fadeTo(90,1,function(){b("input",this).focus()})}},hide:{fixed:true,delay:1500,event:"unfocus"}});c.element.find(".search-input").on("keyup",function(e){c.searchQuery=b(this).val();if(b(this).val().length>0){c.options.loadingContainer.addClass("search");c.element.find(".nav-search").addClass("inuse");clearTimeout(c.updateTimer);c.updateTimer=setTimeout(function(){c.element.find(".loading, .ajax-filelist").show();c._getFileList({})},1000)}else{c.element.find(".nav-search").removeClass("inuse");if(c.element.hasClass("searchlist")){c.element.find(".loading, .ajax-filelist").hide();c.element.find(".ajax-filelist").html("")}}});c.element.find(".submit-search").click(function(){c.searchQuery=b(this).val();if(b(this).val().length>0){clearTimeout(c.updateTimer);c.updateTimer=setTimeout(function(){c.element.find(".loading, .ajax-filelist").show();c._getFileList({})},1000)}else{c.element.find(".loading, .ajax-filelist").hide();c.element.find(".ajax-filelist").html("")}});c.element.find(".search-remove").click(function(){if(b(this).parent().find(".search-input").val()!==""){c.clearSearchBox()}})},clearSearchBox:function(){b('[data-qtip-id="search-'+this.options.listtoken+'"] .search-input').val("").trigger("keyup")},_initGearMenu:function(){var c=this;var d=this.element.find(".nav-gear");d.qtip({prerender:false,id:"nav-"+c.options.listtoken,content:{text:d.next(".gear-menu")},position:{my:"top right",at:"bottom center",target:d,viewport:b(window),adjust:{scroll:false}},style:{classes:"OutoftheBox "+c.options.content_skin},show:{event:"click, mouseenter",solo:true},hide:{event:"mouseleave unfocus",fixed:true,delay:200},events:{show:function(g,e){var f=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']");if(f.length===0){e.elements.content.find(".selected-files-to-zip").parent().hide();e.elements.content.find(".all-files-to-zip").parent().show();e.elements.content.find(".selected-files-delete").parent().hide();e.elements.content.find(".selected-files-move").parent().hide()}else{e.elements.content.find(".selected-files-to-zip").parent().show();e.elements.content.find(".all-files-to-zip").parent().hide();e.elements.content.find(".selected-files-delete").parent().show();e.elements.content.find(".selected-files-move").parent().show()}var h=e.elements.content.find("ul > li").not(".gear-menu-no-options").filter(function(){return b(this).css("display")!=="none"});if(h.length>0){e.elements.content.find(".gear-menu-no-options").hide()}else{e.elements.content.find(".gear-menu-no-options").show()}}}});this.element.find(".nav-layout").unbind("click").click(function(){if(c.element.attr("data-layout")==="list"){c.element.attr("data-layout","grid")}else{c.element.attr("data-layout","list")}c._getFileList({})});this.element.find(".select-all-files").unbind("click").click(function(){c.element.find(".selected-files:checkbox").prop("checked",b(this).prop("checked"));if(b(this).prop("checked")===true){c.element.find('.entry:not(".newfolder")').addClass("isselected")}else{c.element.find('.entry:not(".newfolder")').removeClass("isselected")}});this.element.find(".all-files-to-zip, .selected-files-to-zip").unbind("click").click(function(f){var e=[];if(b(f.target).hasClass("all-files-to-zip")){c.element.find(".select-all-files").trigger("click");e=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']")}if(b(f.target).hasClass("selected-files-to-zip")){e=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']")}var h={action:"outofthebox-create-zip",account_id:c.options.account_id,listtoken:c.options.listtoken,lastpath:c.element.attr("data-path"),_ajax_nonce:c.options.createzip_nonce,files:e};var g=b('<div class="processor_icon"><i class="fas fa-cog fa-spin fa-1x fa-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"});c.element.find(".layout-grid input:checked[name='selected-files[]']").closest(".entry").find(".entry-name-view").prepend(g);c.element.find(".layout-list input:checked[name='selected-files[]']").closest(".entry").find(".entry_name").prepend(g);c.element.find(".processor_icon").delay(5000).fadeOut("slow",function(){b(this).remove()});if(b(f.target).hasClass("all-files-to-zip")){c.element.find(".select-all-files").trigger("click")}b(".qtip").qtip("hide");b(this).attr("href",c.options.ajax_url+"?"+b.param(h));return});c.element.find(".nav-upload").click(function(){b(".qtip").qtip("hide");var f=c.element.find(".fileupload-container");b("html, body").animate({scrollTop:f.offset().top},1500);for(var e=0;e<3;e++){f.find(".fileupload-buttonbar").fadeTo("slow",0.5).fadeTo("slow",1)}});c.element.find(".selected-files-move").click(function(){b(".qtip").qtip("hide");var e=c.element.find("input[name='selected-files[]']:checked");if(e.length===0){return false}c._actionMoveEntries(e)});c.element.find(".selected-files-delete").click(function(){b(".qtip").qtip("hide");var e=c.element.find("input[name='selected-files[]']:checked");if(e.length===0){return false}c._actionDeleteEntries(e)});c.element.find(".entry_action_deeplink_folder").unbind("click").click(function(f){c._actionCreateDeepLink(b(this))});c.element.find(".entry_action_shortlink_folder").unbind("click").click(function(f){c._actionShareEntry(b(this))})},_initAccountSelector:function(){var c=this;c.element.find(".nav-account-selector").click(function(){c._actionSelectAccount()})},renderBrowserContent:function(c,d){if(d===false){c.element.find(".nav-title").html(c.options.str_no_filelist);c.options.loadingContainer.addClass("error")}else{c.options.loadingContainer.fadeIn(200);c.element.find(".ajax-filelist").html(d.html);c.element.find(".image-collage").hide();c.element.find(".nav-title").html(d.breadcrumb);c.element.find(".current-folder-raw").text(d.rawpath);if(d.lastpath!==null){c.element.attr("data-path",d.lastpath)}}c.element.find(".breadcrumb").one("inview",function(g,f){c.renderBreadCrumb()});c.element.find(".nav-refresh i").removeClass("fa-spin");c.unveilImages();if(c.element.hasClass("gridgallery")){c.renderContentForGallery();c._initLazyLoading()}else{c.renderContentForBrowser()}c.element.find(".ajax-filelist").scroll(function(){clearTimeout(window.scrollUnveilTimer);window.scrollTimer=setTimeout(function(){c.unveilImages()},500)});b("#TB_ajaxContent").scroll(function(){clearTimeout(window.scrollUnveilTimer);window.scrollTimer=setTimeout(function(){c.unveilImages()},500)});c.unveilImages();c.element.find(".entry").unbind("hover").hover(function(){b(this).addClass("hasfocus")},function(){b(this).removeClass("hasfocus")}).on("mouseover",function(){b(this).addClass("hasfocus")}).unbind("click").click(function(){}).on("contextmenu",function(f){return false});c.element.find(".folder, .image-folder").unbind("click").click(function(g){if(b(this).hasClass("isdragged")||b(this).hasClass("newfolder")){return false}g.stopPropagation();c.clearSearchBox();var f={OutoftheBoxpath:b(this).closest(".folder, .image-folder").attr("data-url"),};c._getFileList(f);if(b(window).scrollTop()>c.element.find(".nav-header").offset().top){b("html, body").stop().animate({scrollTop:c.element.offset().top-200},1000)}});c.element.find(".newfolder").unbind("click").click(function(f){if(typeof c.searchQuery!="undefined"&&c.searchQuery!==""){return false}c._actionCreateEntry(b(this))});c.element.find(".entry_checkbox").unbind("click").click(function(f){f.stopPropagation();return true});c.element.find(".entry_checkbox :checkbox").click(function(f){if(b(this).prop("checked")){b(this).closest(".entry").addClass("isselected")}else{b(this).closest(".entry").removeClass("isselected")}});c._initEditMenu();c._initLightbox();c.renderThumbnailsPopup();c._initMove();c._initLinkEvent();c._initScrollToTop();if(typeof grecaptcha!=="undefined"&&c.options.recaptcha!==""&&c.recaptcha_passed===false){c._disableDownloadLinks()}c.options.loadingContainer.fadeOut(300);if(c.option.focus_id!==null){var e=c.element.find('.entry[data-id="'+c.option.focus_id+'"]');e.addClass("hasfocus");if(e.find("a.ilightbox-group").length>0){e.find("a.ilightbox-group").trigger("click")}c.option.focus_id=null}c.element.trigger("content-loaded",c)},renderContentForBrowser:function(){var c=this;switch(this.element.attr("data-layout")){case"list":c.element.removeClass("oftb-grid").addClass("oftb-list");b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-large").closest("li").show();c.element.find(".fa-th-large").closest("li").show();b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-list").closest("li").hide();c.element.find(".fa-th-list").closest("li").hide();break;case"grid":c.element.removeClass("oftb-list").addClass("oftb-grid");b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-large").closest("li").hide();c.element.find(".fa-th-large").closest("li").hide();b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-list").closest("li").show();c.element.find(".fa-th-list").closest("li").show();var d=c.element.find(".files.layout-grid");c.fitEntriesInContainer(d.find(".folders-container "),250);c.fitEntriesInContainer(d.find(".files-container "),250);d.fadeTo(0,0).delay(100).fadeTo(200,1);break}},renderContentForGallery:function(){var c=this;var e=c.element.find(".image-container");var f=c.element.find(".image-collage");e.hover(function(){b(this).find(".image-rollover").stop().animate({opacity:1},400)},function(){b(this).find(".image-rollover").stop().animate({opacity:0},400)}).find(".image-rollover").css("opacity","0");f.outerWidth(c.element.find(".ajax-filelist").width()-1,true);var d=c.element.attr("data-targetheight");f.removeWhitespace().collagePlus({targetHeight:d,fadeSpeed:"slow",allowPartialLastRow:true});c.element.find(".image-container.hidden").fadeOut(0);f.fadeTo(200,1);e.each(function(){var g=b(this).find(".folder-thumb");b(this).find(".image-folder-img").width(b(this).width()).height(b(this).height());if(g.length>0){g.width(b(this).width()).height(b(this).height());b(this).find(".image-folder-img").hide()}});c.renderImageFolders()},fitEntriesInContainer:function(f,h){var c=this;var e=f.innerWidth()-1;var d=Math.round(e/h);var g=Math.floor(e/d);f.removeWhitespace();f.find(".entry_block").each(function(){var i=parseInt(b(this).css("padding-left"))+parseInt(b(this).css("padding-right"));b(this).parent().outerWidth(g-i,true)})},renderImageFolders:function(){var c=this;c.element.find(".image-folder").unbind("mousemove").mousemove(function(g){var h=b(this).find(".folder-thumb");var f=g.offsetX/g.currentTarget.offsetWidth;var d=Math.ceil(f*h.length)-1;h.filter(":gt(0)").stop(true).fadeOut().filter(":eq("+d+")").stop(true).fadeIn()});c.element.find(".image-folder").unbind("mouseleave").mouseleave(function(){b(this).find(".folder-thumb:gt(0)").stop(true).fadeOut()})},_initLazyLoading:function(){var c=this;var d=c.element.find(".image-container.entry:not(.hidden):last()");var e=c.element.attr("data-loadimages");d.one("inview",function(h,g){var f=c.element.find(".image-container:hidden:lt("+e+")");if(f.length===0){return}f.fadeIn(500).removeClass("hidden").find("img").removeClass("hidden");c.unveilImages();c._initLazyLoading()})},_initScrollToTop:function(){var c=this;this.element.find(".scroll-to-top").unbind("click").click(function(){b("html, body").animate({scrollTop:c.element.offset().top},1500)});b(window).off("scroll",null,c._positionScrollToTop).on("scroll",null,{},c._positionScrollToTop)},_initReCaptcha:function(){var c=this;if(typeof grecaptcha==="undefined"){setTimeout(c._initReCaptcha.bind(c),1000);return false}grecaptcha.ready(function(){grecaptcha.execute(c.options.recaptcha,{action:"wpcloudplugins"}).then(function(d){b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"outofthebox-check-recaptcha",listtoken:c.options.listtoken,response:d,_ajax_nonce:c.options.recaptcha_nonce},success:function(e){if(typeof e.verified==="undefined"||e.verified!==true){return false}c.recaptcha_passed=true;c._enableDownloadLinks()},dataType:"json"})})})},_disableDownloadLinks:function(){var c=this;var d=c.element.find("a.entry_action_download:not(.recaptcha), a.entry_action_export:not(.recaptcha), a.entry_link:not(.recaptcha), a.entry_action_view:not(.recaptcha), a.entry_action_external_view:not(.recaptcha)");if(d.length===0){return}b.each(d,function(){var f=b(this).attr("href");var e=b(this).attr("download");b(this).attr("href","javascript:void(0)").attr("href-action",f);b(this).removeAttr("download").attr("download-action",e);b(this).addClass("recaptcha")})},_enableDownloadLinks:function(){var c=this;var d=b("a.entry_action_download.recaptcha, a.entry_action_export.recaptcha, a.entry_link.recaptcha, a.entry_action_view.recaptcha, a.entry_action_external_view.recaptcha");if(d.length===0){return}b.each(d,function(){b(this).attr("href",b(this).attr("href-action")).attr("download",b(this).attr("download-action"));b(this).removeClass("recaptcha")})},_positionScrollToTop:function(c){clearTimeout(window.scrollTimer);window.scrollTimer=setTimeout(function(){b(".ajax-filelist").each(function(){var k=b(this);var i=k.next(".scroll-to-top");var h=k.height();var g=k.offset();var f=g.top+h;var d=b(window).scrollTop();var e=d+b(window).height();if(d>g.top&&h>b(window).height()){i.show().fadeIn(40);var j=h;if(f>e){j=e-g.top-30}i.stop().animate({top:Math.round(j-50)})}else{i.fadeOut(400)}})},50)},_initMove:function(){var c=this;if(this.element.find(".moveable").length===0){return false}this.element.find(".moveable").draggable({stack:".moveable",cursor:"move",cursorAt:{top:10,left:10},containment:c.element,helper:"clone",distance:10,delay:50,start:function(d,e){b(this).addClass("isdragged")},stop:function(d,e){setTimeout(function(){b(this).removeClass("isdragged")},300)}});this.element.find(".folder, .image-folder").droppable({accept:c.element.find(".moveable"),activeClass:"ui-state-hover",hoverClass:"ui-state-active",tolerance:"pointer",drop:function(d,e){c._actionMoveEntry(e.draggable,b(this))}})},_initLinkEvent:function(){var c=this;c.element.find(".entry_linkto").unbind("click").click(function(j){var h=b(this).parent().attr("data-name");var f=decodeURIComponent(b(this).parent().attr("data-url"));var g=c.element.attr("data-account-id");var d=b(".outofthebox .thickbox_opener").find("[data-user-id]").attr("data-user-id");var i=b(".thickbox_opener");if(i.hasClass("private-folders-auto")){i.find(".private-folders-auto-current").val(f);i.find(".private-folders-auto-input-account").val(g);i.find(".private-folders-auto-input-id").val(f);i.find(".private-folders-auto-input-name").val(f);i.find(".private-folders-auto-button").removeClass("disabled").find(".oftb-spinner").fadeOut();tb_remove();j.stopPropagation();return true}if(i.hasClass("woocommerce_upload_location")){b("#woocommerce_outofthebox-woocommerce_upload_location_id").val(f);b("#woocommerce_outofthebox-woocommerce_upload_location").val(h);tb_remove();j.stopPropagation();return true}b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"outofthebox-linkusertofolder",account_id:g,id:f,text:f,userid:d,_ajax_nonce:c.options.createlink_nonce},beforeSend:function(){tb_remove();b(".outofthebox .thickbox_opener").find(".oftb-spinner").show()},complete:function(){b(".oftb-spinner").hide()},success:function(e){if(e==="1"){b(".outofthebox .thickbox_opener").parent().find(".column-private_folder").text(f);b(".outofthebox .thickbox_opener .unlinkbutton").removeClass("hidden");b(".outofthebox .thickbox_opener .linkbutton").addClass("hidden");b(".outofthebox .thickbox_opener").removeClass("thickbox_opener")}else{location.reload(true)}},dataType:"text"});j.stopPropagation();return true});c.element.find(".entry_woocommerce_link").unbind("click").click(function(g){var f=b(this).closest(".entry").attr("data-url");var h=b(this).closest(".entry").attr("data-name");var d=c.element.attr("data-account-id");tb_remove();window.wc_outofthebox.afterFileSelected(f,h,d);g.stopPropagation();return true})},_initEditMenu:function(){var c=this;c.element.find(" .entry .entry_edit_menu").each(function(){b(this).click(function(d){d.stopPropagation()});b(this).qtip({content:{text:b(this).next(".oftb-dropdown-menu")},position:{my:"top center",at:"bottom center",target:b(this),scroll:false,viewport:c.element},show:{event:"click",solo:true},hide:{event:"mouseleave unfocus",delay:200,fixed:true},events:{show:function(e,d){d.elements.target.closest(".entry").addClass("hasfocus").addClass("popupopen")},hide:function(e,d){d.elements.target.closest(".entry").removeClass("hasfocus").removeClass("popupopen")}},style:{classes:"OutoftheBox "+c.options.content_skin}})});c.element.find(".entry_action_view").unbind("click").click(function(){c._actionPreviewEntry(b(this))});c.element.find(".entry_action_download").unbind("click").click(function(d){c._actionDownloadEntry(b(this))});c.element.find(".entry_action_shortlink").unbind("click").click(function(d){c._actionShareEntry(b(this))});c.element.find(".entry_action_delete").unbind("click").click(function(g){var f=b(this).closest("ul").attr("data-path");c.element.find(".entry[data-url='"+f+"'] .selected-files:checkbox").prop("checked",true);var d=c.element.find("input[name='selected-files[]']:checked");c._actionDeleteEntries(d)});c.element.find(".entry_action_move").unbind("click").click(function(g){var f=b(this).closest("ul").attr("data-path");c.element.find(".entry[data-url='"+f+"'] .selected-files:checkbox").prop("checked",true);var d=c.element.find("input[name='selected-files[]']:checked");c._actionMoveEntries(d)});c.element.find(".entry_action_rename").unbind("click").click(function(d){c._actionRenameEntry(b(this))});c.element.find(".entry_action_deeplink").unbind("click").click(function(d){c._actionCreateDeepLink(b(this))})},renderBreadCrumb:function(){var c=this;var d=c.element.find(".breadcrumb");d.asBreadcrumbs("destroy");d.asBreadcrumbs({namespace:"oftb",toggleIconClass:"fas fa-caret-down",dropdownMenuClass:"oftb-dropdown-menu",dropdownItem:function e(h,g,f){if(!f){return('<li class="'+h.dropdownItemClass+" "+h.dropdownItemDisableClass+'"><a href="#"><i class="fas fa-folder fa-lg"></i>  '+g+"</a></li>")}return('<li class="'+h.dropdownItemClass+'"><a href="'+f+'"><i class="fas fa-folder fa-lg"></i>  '+g+"</a></li>")}});d.find(".oftb-dropdown-menu li").click(function(){d.find('li a.folder[href="'+b(this).find("a").attr("href")+'"]').trigger("click");d.find(".oftb-dropdown").removeClass("open")});d.find(".oftb-toggle").click(function(){d.find(".oftb-dropdown").addClass("open")});b(document).mouseup(function(g){var f=d.find(".oftb-dropdown-menu");if(!f.is(g.target)&&f.has(g.target).length===0){f.parent().removeClass("open")}})},renderThumbnailsPopup:function(){var c=this;c.element.find(".entry[data-tooltip] .entry_name, .entry[data-tooltip] .entry_lastedit").each(function(){b(this).qtip({suppress:true,content:{text:function(f,e){var d=b(this).parent().find(".description_textbox").clone();d.find("img.preloading").removeClass("hidden").unveil(200,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove()})}).trigger("unveil");return d}},position:{target:"mouse",adjust:{x:5,y:5,scroll:false},viewport:c.element},show:{delay:500,solo:true},hide:{event:"click mouseleave unfocus"},style:{classes:"OutoftheBox description "+c.options.content_skin}})})},unveilImages:function(){var c=this;c.element.find("img.preloading").one("error",function(){if(typeof b(this).attr("data-src-backup")!==typeof undefined&&b(this).attr("data-src-backup")!==false){this.src=b(this).attr("data-src-backup")}else{this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}b(this).removeAttr("data-src");b(this).prev(".preloading").remove()});c.element.find("img.preloading").not(".hidden").unveil(200,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove()})});setTimeout(function(){},200)},renderNavMenu:function(){var c=this;this._initSearchBox();this._initGearMenu();this._initAccountSelector();this.element.find(".nav-refresh").unbind("click");this.element.find(".nav-refresh").click(function(){c.clearSearchBox();c.options.forceRefresh=true;c._getFileList({})});this.element.find(".nav-home").unbind("click");this.element.find(".nav-home").click(function(){c.clearSearchBox();c.element.attr("data-path",c.element.attr("data-org-path"));c._getFileList({OutoftheBoxpath:c.element.attr("data-org-path")})});c.element.find(".sortable").click(function(){var e="asc";if(b(this).hasClass("asc")){e="desc"}c.element.find(".sortable").removeClass("asc").removeClass("desc");b(this).addClass(e);var d=b(this).attr("data-sortname")+":"+e;c.element.attr("data-sort",d);c._getFileList({})})},_initLightbox:function(){var c=this;var e=(c.element.attr("data-lightboxnav")==="1");var d={skin:this.options.lightbox_skin,path:this.options.lightbox_path,maxScale:1,minScale:0.05,slideshow:{pauseOnHover:true,pauseTime:c.element.attr("data-pausetime"),startPaused:((c.element.attr("data-list")==="gallery")&&(c.element.attr("data-slideshow")==="1"))?false:true},controls:{slideshow:(c.element.attr("data-list")==="gallery"&&e)?true:false,arrows:(e)?true:false,thumbnail:(c.options.mobile?false:true)},caption:{start:(c.options.lightbox_showcaption==="mouseenter")?true:false,show:c.options.lightbox_showcaption,hide:(c.options.lightbox_showcaption==="mouseenter")?"mouseleave":c.options.lightbox_showcaption,},keepAspectRatio:true,callback:{onBeforeLoad:function(i,g){b(".ilightbox-holder").addClass("OutoftheBox");b(".ilightbox-holder .oftb-hidepopout").remove();if(c.element.attr("data-popout")==="0"){b(".ilightbox-holder").find(".oftb-embedded").after('<div class="oftb-hidepopout">&nbsp;</div>')}var h=b(".ilightbox-holder").find("iframe").addClass("oftb-embedded");c._helperIframeFix(h)},onBeforeChange:function(){var g=b(".ilightbox-holder video, .ilightbox-holder audio");b.each(g,function(j,h){if(h.paused===false){h.pause()}})},onAfterChange:function(h){var g=h.currentElement.find("video, audio");b.each(g,function(k,j){if(j.paused){j.play()}})},onRender:function(i,g){var h=b(".ilightbox-holder").find("video, audio");b.each(h,function(k,j){var l=b(this);j.addEventListener("playing",function(){var n=i.currentElement.find(".ilightbox-container").width()-1;var m=i.currentElement.find(".ilightbox-container").height()-1;l.width(n);l.parent().width(n);if(l.height()>i.currentElement.find(".ilightbox-container").height()-2){l.height(m)}},false);l.find("source").attr("src",l.find("source").attr("data-src"))})},onShow:function(k){if(k.currentElement.find(".empty_iframe").length===0){k.currentElement.find(".oftb-embedded").after(c.options.str_iframe_loggedin)}if(k.currentElement.find("iframe").length>0){setTimeout(function(){k.currentElement.find(".oftb-embedded").width(k.currentElement.find(".ilightbox-container").width()-1)},500);k.currentElement.find("iframe").on("load",function(){k.currentElement.find(".empty_iframe").remove()})}k.currentElement.find(".empty_iframe").hide();if(k.currentElement.find("img").length===0){setTimeout(function(){k.currentElement.find(".empty_iframe").fadeIn();k.currentElement.find(".empty_iframe_link").attr("href",k.currentElement.find("iframe").attr("src"))},5000)}var j=k.currentElement.find("video, audio");b.each(j,function(m,l){if(l.paused){l.play()}});var h=this;b(".ilightbox-thumbnail img.preloading").unveil(null,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove();b(this).parent().data({naturalWidth:this.width,naturalHeight:this.height});h.positionThumbnails(null,null,null);b(".ilightbox-thumbnail img.preloading").unveil()})});b(".ilightbox-container .oftb-hidepopout").on("contextmenu",function(l){return false});b(".ilightbox-container .ilightbox-wrapper, .ilightbox-container img, .ilightbox-container video, .ilightbox-container audio").on("contextmenu",function(l){return(c.options.lightbox_rightclick==="Yes")});if(c.options.mobile){b(".ilightbox-container img").panzoom({disablePan:true,minScale:1,contain:"invert"});b(".ilightbox-container img").on("panzoomzoom",function(m,l,n){if(n==1){l.options.disablePan=true}else{l.options.disablePan=false}})}var i=k.currentElement.find("img");if(i.length>0&&i.data("logged")!==1&&(i.attr("src").indexOf("action=outofthebox-")===-1)){var g=b('a[href="'+i.attr("src")+'"]').closest("[data-id]").data("id");i.data("logged",1);c._logEvent("log_preview_event",g)}}},errors:{loadImage:c.options.str_imgError_title,loadContents:c.options.str_xhrError_title},text:{next:c.options.str_next_title,previous:c.options.str_previous_title,slideShow:c.options.str_startslideshow}};if(e){if(!b.isEmptyObject(this.lightBox)){c.lightBox.destroy()}var f=c.element.find(".ilightbox-group");c.lightBox=f.iLightBox(d)}else{if(!b.isEmptyObject(this.lightBox)){b.each(this.lightBox,function(){this.destroy()})}c.lightBox=[];c.element.find(".ilightbox-group").each(function(){c.lightBox.push(b(this).iLightBox(d))})}},_actionCreateDeepLink:function(d){var m=this;b(".qtip").qtip("hide");var s=d.closest("ul").attr("data-path");var e,n;if(d.hasClass("entry_action_deeplink_folder")){var s=m.element.attr("data-path");e=true}else{var t=m.element.find(".entry[data-url='"+s+"']");var g=t.attr("data-name");n=t.attr("data-id");e=t.hasClass("folder")||t.hasClass("image-folder")}var q={account_id:m.element.attr("data-account-id"),last_path:(e)?s:m.element.attr("data-path"),org_path:m.element.attr("data-org-path"),focus_id:n};var c=window.btoa(encodeURIComponent(JSON.stringify(q)));var f=new URL(window.location);var j=new URLSearchParams(f.search);j.set("wpcp_link",c);f.search=j.toString();b("#outofthebox-modal-action").remove();var r="";r+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+m.options.str_close_title+'" >'+m.options.str_close_title+"</button>";var o=b('<a tabindex="0" class="close-button" title="'+m.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var h=b('<div class="outofthebox-modal-body" tabindex="0" ><input type="text" class="direct-link-url" value="'+f.toString()+'" style="width: 98%;" readonly/><div class="outofthebox-shared-social"></div></div>');var k=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+r+"</div></div>");var p=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+m.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(p);b("#outofthebox-modal-action .modal-content").append(o,h,k);b.extend(jsSocials.shares,{directlink:{label:"Copy",logo:"fas fa-clipboard",shareIn:"self",shareUrl:function(){return"#"},countUrl:""}});b(".outofthebox-shared-social").jsSocials({url:f.toString(),text:g+" | ",showLabel:false,showCount:"inside",shareIn:"popup",shares:["directlink","email","twitter","facebook","googleplus","linkedin","pinterest","whatsapp"]});var i=new ClipboardJS(".jssocials-share-directlink",{text:function(u){return b(".direct-link-url").val()}});i.on("success",function(u){b(".jssocials-share-directlink i").removeClass("fa-copy").addClass("fa-clipboard-check");u.clearSelection()});i.on("error",function(u){if(m.options.mobile){b(".direct-link-url").select()}else{window.prompt("Copy to clipboard: Ctrl+C, Enter",b(".direct-link-url").val())}});var l=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(u){l.keydown(u)},false);l.open();window.modal_action=l;b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+m.options.str_processing+"</span>");return false},_logEvent:function(d,e){var c=this;if(c.options.log_events==="0"){return false}b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"outofthebox-event-stats",account_id:c.options.account_id,type:d,id:e,_ajax_nonce:c.options.log_nonce}})},_actionPreviewEntry:function(e){var c=this;b(".qtip").qtip("hide");var f=e.closest("ul").attr("data-path");var d=c.element.find(".entry[data-url='"+f+"']").find(".entry_link")[0].click()},_actionDownloadEntry:function(f){var d=this;var e=f.attr("data-filename");sendGooglePageView("Download",e);var c=f.closest("ul").attr("data-path");if(typeof c==="undefined"){c=f.closest(".entry").attr("data-url")}var g=b('<div><i class="fas fa-cog fa-spin fa-1x fa-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"}).delay(5000).fadeOut("slow",function(){b(this).remove()});d.element.find(".layout-grid .entry[data-url='"+c+"'] .entry-name-view").prepend(g);d.element.find(".layout-list .entry[data-url='"+c+"'] .entry_name").prepend(g);setTimeout(function(){b(".qtip").qtip("hide");return true},300)},_actionShareEntry:function(k){var n=this;b(".qtip").qtip("hide");var m=n.element.attr("data-account-id");var j=k.closest("ul").attr("data-path");var i=n.element.find(".entry[data-url='"+j+"']").attr("data-url");var l=n.element.find(".entry[data-url='"+j+"']").attr("data-name");if(k.hasClass("entry_action_shortlink_folder")){var i=n.element.attr("data-path")}b("#outofthebox-modal-action").remove();var h="";h+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_close_title+'" >'+n.options.str_close_title+"</button>";h+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+n.options.str_create_shared_link+'" >'+n.options.str_create_shared_link+"</button>";var d=b('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var g=b('<div class="outofthebox-modal-body" tabindex="0" ></div>');var f=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+h+"</div></div>");var e=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#outofthebox-modal-action .modal-content").append(d,g,f);b.ajax({type:"POST",url:n.options.ajax_url,data:{action:"outofthebox-create-link",account_id:m,listtoken:n.options.listtoken,OutoftheBoxpath:i,_ajax_nonce:n.options.createlink_nonce},complete:function(){b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").remove()},success:function(o){if(o!==null){if(o.link!==null){b(".outofthebox-modal-body").append('<input type="text" class="shared-link-url" value="'+o.link+'" style="width: 98%;" readonly/><div class="outofthebox-shared-social"></div>');sendGooglePageView("Create shared link");b.extend(jsSocials.shares,{directlink:{label:"Copy",logo:"fas fa-clipboard",shareIn:"self",shareUrl:function(){return"#"},countUrl:""}});b(".outofthebox-shared-social").jsSocials({url:o.link,text:l+" | ",showLabel:false,showCount:"inside",shareIn:"popup",shares:["directlink","email","twitter","facebook","googleplus","linkedin","pinterest","whatsapp"]});var p=new ClipboardJS(".jssocials-share-directlink",{text:function(q){return b(".shared-link-url").val()}});p.on("success",function(q){b(".jssocials-share-directlink i").removeClass("fa-copy").addClass("fa-clipboard-check");q.clearSelection()});p.on("error",function(q){if(n.options.mobile){b(".shared-link-url").select()}else{window.prompt("Copy to clipboard: Ctrl+C, Enter",b(".shared-link-url").val())}})}else{b(".outofthebox-modal-body").find(".shared-link-url").val(o.error)}}},dataType:"json"});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(o){c.keydown(o)},false);c.open();window.modal_action=c;b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>");return false},_actionCreateEntry:function(j){var k=this;b(".qtip").qtip("hide");b("#outofthebox-modal-action").remove();var i="";i+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+k.options.str_cancel_title+'" >'+k.options.str_cancel_title+"</button>";i+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+k.options.str_addfolder_title+'" >'+k.options.str_addfolder_title+"</button>";var h='<input type="text" id="outofthebox-modal-addfolder-input" name="outofthebox-modal-addfolder-input" value="" style="width:100%"/>';var d=b('<a tabindex="0" class="close-button" title="'+k.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var g=b('<div class="outofthebox-modal-body" tabindex="0" >'+k.options.str_addfolder+" <br/>"+h+"</div>");var f=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+i+"</div></div>");var e=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+k.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#outofthebox-modal-action .modal-content").append(d,g,f);b("#outofthebox-modal-action #outofthebox-modal-addfolder-input").unbind("keyup");b("#outofthebox-modal-action #outofthebox-modal-addfolder-input").on("keyup",function(l){if(l.which==13||l.keyCode==13){b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}});b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click");b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var m=b("#outofthebox-modal-addfolder-input").val();if(/[<>:"/\\|?*]/g.test(b("#outofthebox-modal-addfolder-input").val())){b("#outofthebox-modal-action .outofthebox-modal-error").remove();b("#outofthebox-modal-addfolder-input").after('<div class="outofthebox-modal-error">'+k.options.str_rename_failed+"</div>");b("#outofthebox-modal-action .outofthebox-modal-error").fadeIn()}else{var l={action:"outofthebox-add-folder",newfolder:encodeURIComponent(m),_ajax_nonce:k.options.addfolder_nonce};k._actionDoModifyEntry(l);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+k.options.str_processing+"</span>")}});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(l){c.keydown(l)},false);c.open();window.modal_action=c;return false},_actionRenameEntry:function(l){var n=this;b(".qtip").qtip("hide");var k=l.closest("ul").attr("data-path");var m=n.element.find(".entry[data-url='"+k+"']").attr("data-name");var j=n.element.find(".entry[data-url='"+k+"']").attr("data-url");b("#outofthebox-modal-action").remove();var i="";i+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+n.options.str_cancel_title+'" >'+n.options.str_cancel_title+"</button>";i+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+n.options.str_rename_title+'" >'+n.options.str_rename_title+"</button>";var h='<input id="outofthebox-modal-rename-input" name="outofthebox-modal-rename-input" type="text" value="'+m+'" style="width:100%"/>';var d=b('<a tabindex="0" class="close-button" title="'+n.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var g=b('<div class="outofthebox-modal-body" tabindex="0" >'+n.options.str_rename+"<br/>"+h+"</div>");var f=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+i+"</div></div>");var e=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+n.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#outofthebox-modal-action .modal-content").append(d,g,f);b("#outofthebox-modal-action #outofthebox-modal-rename-input").unbind("keyup");b("#outofthebox-modal-action #outofthebox-modal-rename-input").on("keyup",function(o){if(o.which==13||o.keyCode==13){b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}});b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click");b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var p=b("#outofthebox-modal-rename-input").val();if(/[<>:"/\\|?*]/g.test(b("#outofthebox-modal-rename-input").val())){b("#outofthebox-modal-action .outofthebox-modal-error").remove();b("#outofthebox-modal-rename-input").after('<div class="outofthebox-modal-error">'+n.options.str_rename_failed+"</div>");b("#outofthebox-modal-action .outofthebox-modal-error").fadeIn()}else{var o={action:"outofthebox-rename-entry",OutoftheBoxpath:j,newname:encodeURIComponent(p),_ajax_nonce:n.options.rename_nonce};n._actionDoModifyEntry(o);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+n.options.str_processing+"</span>")}});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(o){c.keydown(o)},false);c.open();window.modal_action=c;return false},_actionMoveEntry:function(d,c){var e={action:"outofthebox-move-entries",entries:[d.attr("data-url")],copy:false,target:c.attr("data-url"),listtoken:this.options.listtoken,_ajax_nonce:this.options.move_nonce};this._actionDoModifyEntry(e)},_actionMoveEntries:function(j){b(".qtip").qtip("hide");b("#outofthebox-modal-action").remove();var l=this,f="",e=[];b.each(j,function(){e.push(b(this).val())});var k="";k+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+l.options.str_cancel_title+'" >'+l.options.str_cancel_title+"</button>";k+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+l.options.str_move_title+'" >'+l.options.str_move_title+" ("+e.length+")</button>";var d=b('<a tabindex="0" class="close-button" title="'+l.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var i=b('<div class="outofthebox-modal-body" tabindex="0" ><div id="outofthebox-modal-folder-selector"></div></div>');var h=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+k+"</div></div>");var g=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+l.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#outofthebox-modal-action .modal-content").append(d,i,h);l.options.topContainer.clone().appendTo("#outofthebox-modal-folder-selector").removeClass("gallery").addClass("files");b("#outofthebox-modal-folder-selector").find(".ajax-filelist").html("");b("#outofthebox-modal-folder-selector .OutoftheBox").attr("data-list","files").attr("data-layout","list").OutoftheBox(OutoftheBox_vars);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click");b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var m={action:"outofthebox-move-entries",entries:e,copy:false,target:b("#outofthebox-modal-folder-selector .OutoftheBox").attr("data-path"),_ajax_nonce:l.options.move_nonce};l._actionDoModifyEntry(m);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+l.options.str_processing+"</span>")});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(m){c.keydown(m)},false);c.open();window.modal_action=c;return false},_actionDeleteEntries:function(j){b(".qtip").qtip("hide");b("#outofthebox-modal-action").remove();var l=this,f="",e=[];b.each(j,function(){var n=b(this).closest(".entry");var o=n.find("img:first()");var m=b('<div class="outofthebox-modal-file-icon">');if(o.length>0){o.clone().appendTo(m)}f+="<li>"+m.html()+"<span>"+n.attr("data-name")+"</span></li>";e.push(b(this).val())});var k="";k+='<button class="button outofthebox-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+l.options.str_cancel_title+'" >'+l.options.str_cancel_title+"</button>";k+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+l.options.str_delete_title+'" >'+l.options.str_delete_title+" ("+e.length+") </button>";var d=b('<a tabindex="0" class="close-button" title="'+l.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var i=b('<div class="outofthebox-modal-body" tabindex="0" >'+l.options.str_delete+'</br></br><ul class="files">'+f+"</ul></div>");var h=b('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+k+"</div></div>");var g=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+l.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#outofthebox-modal-action .modal-content").append(d,i,h);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click");b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var m={action:"outofthebox-delete-entries",entries:e,_ajax_nonce:l.options.delete_nonce};l._actionDoModifyEntry(m);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",true);b("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+l.options.str_processing+"</span>")});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(m){c.keydown(m)},false);c.open();window.modal_action=c;return false},_actionSelectAccount:function(){b(".qtip").qtip("hide");b("#outofthebox-modal-action").remove();var d=this;var e=b('<a tabindex="0" class="close-button" title="'+d.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var f=b('<div class="outofthebox-modal-body modal-account-selector" tabindex="0" style="text-align: center;"><h1>'+d.options.str_account_title+'</h1><div class="nav-account-selector-content">'+d.element.find(".nav-account-selector-content").html()+"</div></div>");var g=b('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+d.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#outofthebox-modal-action .modal-content").append(e,f);b("#outofthebox-modal-action .nav-account-selector").unbind("click");b("#outofthebox-modal-action .nav-account-selector").click(function(){d.element.find(".nav-account-selector:first").html(b(this).html());d.element.attr("data-id","");d.element.attr("data-path","");d.element.attr("data-account-id",b(this).attr("data-account-id"));d.options.account_id=b(this).attr("data-account-id");d._getFileList({});c.close()});var c=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(h){c.keydown(h)},false);c.open();window.modal_action=c;return false},_actionDoModifyEntry:function(e){var d=this;var c=d.element.attr("data-path");e.listtoken=this.options.listtoken;e.lastpath=c;e.account_id=d.element.attr("data-account-id");b.ajax({type:"POST",url:d.options.ajax_url,data:e,beforeSend:function(){d.options.loadingContainer.fadeIn(400)},success:function(f){if(typeof f!=="undefined"){if(typeof f.lastpath!=="undefined"&&(f.lastpath!==null)){d.element.attr("data-path",f.lastpath)}}},complete:function(){if(typeof modal_action!=="undefined"){modal_action.close()}d.options.forceRefresh=true;d._getFileList({})},dataType:"json"})},_uploadValidateFile:function(h,d){var f=this;var e=f.element.find('input[name="minfilesize"]').val();var i=f.element.find('input[name="maxfilesize"]').val();var g=new RegExp(f.element.find('input[name="acceptfiletypes"]').val(),"i");h.error=false;if(h.name.length&&!g.test(h.name)){h.error=f.options.acceptFileTypes}if(e!==""&&h.size<=e){h.error=f.options.minFileSize}if(i!==""&&h.size>0&&h.size>i){h.error=f.options.maxFileSize}if(f.number_of_uploaded_files.Max>0&&(f.number_of_uploaded_files.Counter>f.number_of_uploaded_files.Max)){var c=true;b.each(f.uploaded_files_storage,function(){if(this.name===h.name){c=false;f.number_of_uploaded_files.Counter--}});if(c){h.error=f.options.maxNumberOfFiles}}return h},_uploadGetProgress:function(d){var c=this;b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"outofthebox-upload-file",account_id:c.element.attr("data-account-id"),type:"get-status",listtoken:c.options.listtoken,hash:d.hash,_ajax_nonce:c.options.upload_nonce},dataType:"json",success:function(e){if(e!==null){if(typeof e.status!=="undefined"){if(e.status.progress==="starting"||e.status.progress==="uploading"){setTimeout(function(){c._uploadGetProgress(e.file)},1500)}c._uploadRenderRowOnProgress(e.file,{percentage:50+(e.status.percentage/2),progress:e.status.progress})}else{d.error=c.options.str_error;c._uploadRenderRowOnFinish(d)}}},error:function(e){d.error=c.options.str_error;c._uploadRenderRowOnFinish(d)}})},_uploadRenderRow:function(e){var c=this;var f=c.element.find(".template-row").clone().removeClass("template-row");var d=b('<a class="cancel-upload"><i class="fas fa-ban" aria-hidden="true"></i> '+c.options.str_delete_title+"</a>");f.attr("data-file",e.name).attr("data-id",e.hash);f.find(".file-name").text(e.path.replace(e.name,"")+e.name);if(e.size!=="undefined"&&e.size>0){f.find(".file-size").text(c._helperFormatBytes(e.size,1))}f.find(".upload-thumbnail img").attr("src",c._uploadGetThumbnail(e));f.addClass("template-upload");f.find(".upload-status").removeClass().addClass("upload-status queue").append(d);f.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-circle").hide();c.element.find(".fileupload-list .files").append(f);c.element.find("div.fileupload-drag-drop").fadeOut();if(typeof e.error!=="undefined"&&e.error!==false){c._uploadRenderRowOnFinish(e,"invalid_file")}return f},_uploadRenderRowOnStart:function(d){var c=this;var e=c.element.find(".fileupload-list [data-id='"+d.hash+"']");e.find(".upload-status").removeClass().addClass("upload-status succes").text(c.options.str_uploading_local);e.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-circle-notch fa-spin").fadeIn();e.find(".upload-progress").slideDown()},_uploadRenderRowOnProgress:function(f,d){var e=this;var h=e.element.find(".fileupload-list [data-id='"+f.hash+"']");var g=h.find(".ui-progressbar");var c=g.find(".ui-progressbar-value");c.fadeIn().animate({width:(d.percentage/100)*g.width()},50);if(d.progress==="uploading_to_cloud"){h.find(".upload-status").text(e.options.str_uploading_cloud)}},_uploadRenderRowOnFinish:function(d,e){var c=this;var f=c.element.find(".fileupload-list [data-id='"+d.hash+"']");f.addClass("template-download").removeClass("template-upload");f.find(".file-name").text(d.path.replace(d.name,"")+d.name);f.find(".upload-thumbnail img").attr("src",c._uploadGetThumbnail(d));f.find(".upload-progress").slideUp();if(typeof d.error!=="undefined"&&d.error!==false){f.find(".upload-error").html('<i class="fas fa-exclamation-circle"></i> <strong>'+c.options.str_error+":</strong> "+d.error).slideUp().delay(500).slideDown()}else{f.find(".upload-status").removeClass().addClass("upload-status succes").text(c.options.str_success);f.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-check-circle");c.uploaded_files.push(d.fileid)}if(typeof e==="undefined"&&c.element.find(".template-upload").length<1){clearTimeout(c.uploadPostProcessTimer);c.uploadPostProcessTimer=setTimeout(function(){c._uploadDoPostProcess()},500)}if(f.closest(".gform_wrapper").length>0||f.closest(".wpcf7").length>0||(c.element.hasClass("upload")===true)){}else{c._uploadDeleteRow(d,5000)}},_uploadDeleteRow:function(e,d){var c=this;var f=c.element.find(".fileupload-list [data-id='"+e.hash+"']");f.delay(d).animate({opacity:"0"},"slow",function(){b(this).remove();if(c.element.find(".template-upload").length<1){c.element.find("div.fileupload-drag-drop").fadeIn()}});if(typeof e.error!=="undefined"&&e.error!==false){c.number_of_uploaded_files.Counter--}},_uploadDoRequest:function(d){var c=this;if(b.active===0){d.submit()}else{window.setTimeout(function(){c._uploadDoRequest(d)},200)}},_uploadDoPostProcess:function(){var c=this;b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"outofthebox-upload-file",account_id:c.element.attr("data-account-id"),type:"upload-postprocess",listtoken:c.options.listtoken,files:c.uploaded_files,lastpath:c.element.attr("data-path"),_ajax_nonce:c.options.upload_nonce},success:function(d){if(d!==null){c.uploaded_files=[];b.each(d.files,function(f,e){c.uploaded_files_storage[f]={hash:f,name:e.name,type:e.type,path:e.completepath,size:e.filesize,link:e.link,account_id:e.account_id,folderurl:e.folderurl,}});c.element.find(".fileupload-filelist").val(JSON.stringify(c.uploaded_files_storage)).trigger("change")}},complete:function(d){if(c.element.hasClass("upload")===false){c.options.clearLocalCache=true;clearTimeout(c.updateTimer);c._getFileList({})}if(c.element.find(".fileupload-list").find(".template-upload").length<1){window.onbeforeunload=null;c.element.find(".fileuploadform").trigger("outofthebox-upload-finished")}},dataType:"json"})},_uploadGetThumbnail:function(d){var c=this;var f=c.options.icons_set+"128x128/";if(typeof d.thumbnail==="undefined"||d.thumbnail===null||d.thumbnail===""){var e;if(typeof d.type==="undefined"||d.type===null){e="unknown"}else{if(d.type.indexOf("word")>=0){e="application-msword"}else{if(d.type.indexOf("excel")>=0||d.type.indexOf("spreadsheet")>=0){e="application-vnd.ms-excel"}else{if(d.type.indexOf("powerpoint")>=0||d.type.indexOf("presentation")>=0){e="application-vnd.ms-powerpoint"}else{if(d.type.indexOf("access")>=0||d.type.indexOf("mdb")>=0){e="application-vnd.ms-access"}else{if(d.type.indexOf("image")>=0){e="image-x-generic"}else{if(d.type.indexOf("audio")>=0){e="audio-x-generic"}else{if(d.type.indexOf("video")>=0){e="video-x-generic"}else{if(d.type.indexOf("pdf")>=0){e="application-pdf"}else{if(d.type.indexOf("zip")>=0||d.type.indexOf("archive")>=0||d.type.indexOf("tar")>=0||d.type.indexOf("compressed")>=0){e="application-zip"}else{if(d.type.indexOf("html")>=0){e="text-xml"}else{if(d.type.indexOf("application/exe")>=0||d.type.indexOf("application/x-msdownload")>=0||d.type.indexOf("application/x-exe")>=0||d.type.indexOf("application/x-winexe")>=0||d.type.indexOf("application/msdos-windows")>=0||d.type.indexOf("application/x-executable")>=0){e="application-x-executable"}else{if(d.type.indexOf("text")>=0){e="text-x-generic"}else{e="unknown"}}}}}}}}}}}}}return f+e+".png"}else{return d.thumbnail}},_initDragDrop:function(){var c=this;b(document).bind("dragover",function(h){var i=c.element,g=window.dropZoneTimeout;if(!g){i.addClass("in")}else{clearTimeout(g)}var f=false,d=h.target;do{if(b(d).is(i)){f=true;break}d=d.parentNode}while(d!==null);if(f){b(d).addClass("hover")}else{i.removeClass("hover")}window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null;i.removeClass("in hover")},100)});b(document).bind("drop dragover",function(d){d.preventDefault()})},_initResizeHandler:function(){var c=this;c._orgininal_width=c.element.width();b(window).resize(function(){if(c._orgininal_width===c.element.width()){return}c._orgininal_width=c.element.width();c._refreshView()})},_refreshView:function(){var c=this;if(typeof c.resizeTimer!=="undefined"){clearTimeout(c.resizeTimer)}c.element.find(".image-collage").fadeTo(100,0);c.element.find(".layout-grid").fadeTo(100,0);c.resizeTimer=setTimeout(function(){if(c.options.topContainer.hasClass("files")||c.options.topContainer.hasClass("search")){c.renderContentForBrowser()}if(c.options.topContainer.hasClass("gallery")){c.renderContentForGallery()}},100)},_pipeline:function(e){var c=this;var d=b.extend({url:c.options.ajax_url,data:null,method:"POST"},e);return function(h,k,g){var j=d.data(h);b.extend(h,j);var i="CloudPlugin_"+(h.listtoken+h._ajax_nonce+(typeof h.account_id==="undefined"?"":h.account_id)+h.filelayout+h.OutoftheBoxpath+h.lastpath+h.sort+h.query).hashCode();if(c.options.clearLocalCache){c._cacheRemove("all");c.options.clearLocalCache=false}if(c.options.forceRefresh){c._cacheRemove("all");h.hardrefresh=true;c.options.forceRefresh=false}if(c._cacheGet(i)!==null){var f=c._cacheGet(i);if(f===Object(f)){f.draw=h.draw;k(c,f);return true}else{c._cacheRemove(i)}}if(typeof g.jqXHR!=="undefined"&&g.jqXHR!==null){g.jqXHR.abort()}g.jqXHR=b.ajax({type:d.method,url:d.url,data:h,dataType:"json",cache:false,beforeSend:function(){},success:function(l){if(l===Object(l)){c.element.trigger("ajax-success",[l,h,g.jqXHR]);c._cacheSet(i,l);k(c,l)}else{c.element.trigger("ajax-error",[l,h,g.jqXHR]);k(c,false);return false}},error:function(l){c.element.trigger("ajax-error",[l,h,g.jqXHR]);k(c,false);return false}})}},_initCache:function(){var c=this;c._isCacheStorageAvailable=c._cacheStorageAvailable();setInterval(function(){c._cacheRemove("all")},1000*60*15)},_cacheStorageAvailable:function(){try{var f=window.sessionStorage,c="__storage_test__";f.setItem(c,c);f.removeItem(c);return true}catch(d){return d instanceof DOMException&&(d.code===22||d.code===1014||d.name==="QuotaExceededError"||d.name==="NS_ERROR_DOM_QUOTA_REACHED")&&f.length!==0}},_cacheGet:function(d){if(typeof this.cache.expires==="undefined"){var c=new Date();c.setMinutes(c.getMinutes()+15);this.cache.expires=c}if(this.cache.expires.getTime()<new Date().getTime()){this._cacheRemove(d)}if(this._isCacheStorageAvailable){return JSON.parse(sessionStorage.getItem(d))}else{if(typeof this.cache[d]==="undefined"){return null}return this.cache[d]}},_cacheSet:function(c,d){if(this._isCacheStorageAvailable){try{sessionStorage.setItem(c,JSON.stringify(d))}catch(f){this._cacheRemove("all");return false}}else{if(typeof this.cache[c]==="undefined"){this.cache[c]={}}this.cache[c]=d}},_cacheRemove:function(d){if(this._isCacheStorageAvailable){if(d==="all"){var c=sessionStorage.length;while(c--){var d=sessionStorage.key(c);if(/CloudPlugin/.test(d)){sessionStorage.removeItem(d)}}}else{sessionStorage.removeItem(d)}}else{if(d==="all"){delete this.cache}else{delete this.cache[d]}}},_helperDownloadUrlInline:function(c){var e="hiddenDownloader";var d=document.getElementById(e);if(d===null){d=document.createElement("iframe");d.id=e;d.style.display="none";document.body.appendChild(d)}d.src=c},_helperFormatBytes:function(d,c){if(d==0){return""}var f=1000;var e=c+1||3;var h=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];var g=Math.floor(Math.log(d)/Math.log(f));return parseFloat((d/Math.pow(f,g)).toFixed(e))+" "+h[g]},_helperIframeFix:function(c){if(/iPhone|iPod|iPad/.test(navigator.userAgent)){c.each(function(){if(b(this).closest("#safari_fix").length===0){b(this).wrap(function(){return b('<div id="safari_fix"/>').css({width:"100%",height:"100%",overflow:"auto","z-index":"2","-webkit-overflow-scrolling":"touch"})})}})}},_helperCachedScript:function(d,c){c=jQuery.extend(c||{},{dataType:"script",cache:true,url:d});return jQuery.ajax(c)},_helperReadArrCheckBoxes:function(d){var c=b(d+":checked").map(function(){return this.value}).get();return c},_helperIsIE:function(){var c=navigator.userAgent.toLowerCase();return(c.indexOf("msie")!=-1)?parseInt(c.split("msie")[1]):false}});var a=b({});b.ajaxQueue=function(d){var c=d.complete;a.queue(function(e){d.complete=function(){if(c){c.apply(this,arguments)}e()};b.ajax(d)})}})(jQuery);(function(a){a(".OutoftheBox").OutoftheBox(OutoftheBox_vars)})(jQuery);var wpcp_playlists={};function sendGooglePageView(b,a){if(OutoftheBox_vars.google_analytics==="1"){if(typeof ga!=="undefined"&&ga!==null){ga("send","event","Out-of-the-Box",b,a)}if(typeof _gaq!=="undefined"&&_gaq!==null){_gaq.push(["_trackEvent","Out-of-the-Box",b,a])}if(typeof gtag!=="undefined"&&gtag!==null){gtag("event",b,{event_category:"Out-of-the-Box",event_label:a,value:a})}}};