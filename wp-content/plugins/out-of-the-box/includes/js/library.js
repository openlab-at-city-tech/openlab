/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright 2015 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});

/**
 * jQuery Unveil
 * A very lightweight jQuery plugin to lazy load images
 * http://luis-almeida.github.com/unveil
 *
 * Licensed under the MIT license.
 * Copyright 2013 Luís Almeida
 * https://github.com/luis-almeida
 */

!function(t){t.fn.unveil = function(i, e, o){function n(){s = a.filter(function(){var i = t(this), e = c.offset()?c.offset().top:0, o = c.offset()?c.offset().left:0, n = c.scrollTop() + e, f = c.scrollLeft() + o, s = n + c.height(), r = f + c.width(), u = i.offset().top, h = i.offset().left, a = u + i.height(), d = h + i.width(); return a >= n - l && s + l >= u && d >= f - l && r + l >= h}), f = s.trigger("unveil"), a = a.not(f)}var f, s, r, c = t(e?e:window), l = i || 0, u = window.devicePixelRatio > 1, h = u?"data-src-retina":"data-src", a = this; return this.one("unveil", function(){r = this.getAttribute(h), r = r || this.getAttribute("data-src"), r && (this.setAttribute("src", r), "function" == typeof o && o.call(this))}), c.scroll(n), c.resize(n), n(), this}}(window.jQuery || window.Zepto);

/**
 * jQuery Inview
 * author Christopher Blum
 *    - based on the idea of Remy Sharp, http://remysharp.com/2009/01/26/element-in-view-event-plugin/
 *    - forked from http://github.com/zuk/jquery.inview/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function i(){var b,c,d={height:f.innerHeight,width:f.innerWidth};return d.height||(b=e.compatMode,(b||!a.support.boxModel)&&(c="CSS1Compat"===b?g:e.body,d={height:c.clientHeight,width:c.clientWidth})),d}function j(){return{top:f.pageYOffset||g.scrollTop||e.body.scrollTop,left:f.pageXOffset||g.scrollLeft||e.body.scrollLeft}}function k(){if(b.length){var e=0,f=a.map(b,function(a){var b=a.data.selector,c=a.$element;return b?c.find(b):c});for(c=c||i(),d=d||j();e<b.length;e++)if(a.contains(g,f[e][0])){var h=a(f[e]),k={height:h[0].offsetHeight,width:h[0].offsetWidth},l=h.offset(),m=h.data("inview");if(!d||!c)return;l.top+k.height>d.top&&l.top<d.top+c.height&&l.left+k.width>d.left&&l.left<d.left+c.width?m||h.data("inview",!0).trigger("inview",[!0]):m&&h.data("inview",!1).trigger("inview",[!1])}}}var c,d,h,b=[],e=document,f=window,g=e.documentElement;a.event.special.inview={add:function(c){b.push({data:c,$element:a(this),element:this}),!h&&b.length&&(h=setInterval(k,250))},remove:function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.element===this&&d.data.guid===a.guid){b.splice(c,1);break}}b.length||(clearInterval(h),h=null)}},a(f).on("scroll resize scrollstop",function(){c=d=null}),!g.addEventListener&&g.attachEvent&&g.attachEvent("onfocusin",function(){d=null})});

/*!
 *
 * jQuery collagePlus Plugin v0.3.3
 * https://github.com/ed-lea/jquery-collagePlus
 *
 * Copyright 2012, Ed Lea twitter.com/ed_lea
 *
 * built for http://qiip.me
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 */
(function(e){e.fn.collagePlus=function(t){function n(t,n,i,s){var o=i.padding*(t.length-1)+t.length*t[0][3],u=i.albumWidth-o,a=u/(n-o),f=o,l=n<i.albumWidth?true:false;for(var c=0;c<t.length;c++){var h=e(t[c][0]),p=Math.floor(t[c][1]*a),d=Math.floor(t[c][2]*a),v=!!(c<t.length-1);if(i.allowPartialLastRow===true&&l===true){p=t[c][1];d=t[c][2]}f+=p;if(!v&&f<i.albumWidth){if(i.allowPartialLastRow===true&&l===true){p=p}else{p=p+(i.albumWidth-f)}}p--;var m=h.is("img")?h:h.find("img");m.width(p);if(!h.is("img")){h.width(p+t[c][3])}m.height(d);if(!h.is("img")){h.height(d+t[c][4])}r(h,v,i);m.one("load",function(e){return function(){if(i.effect=="default"){e.animate({opacity:"1"},{duration:i.fadeSpeed})}else{if(i.direction=="vertical"){var t=s<=10?s:10}else{var t=c<=9?c+1:10}e.removeClass(function(e,t){return(t.match(/\beffect-\S+/g)||[]).join(" ")});e.addClass(i.effect);e.addClass("effect-duration-"+t)}}}(h)).each(function(){if(this.complete)e(this).trigger("load")})}}function r(e,t,n){var r={"margin-bottom":n.padding+"px","margin-right":t?n.padding+"px":"0px",display:n.display,"vertical-align":"bottom",overflow:"hidden"};return e.css(r)}function i(t){$img=e(t);var n=new Array;n["w"]=parseFloat($img.css("border-left-width"))+parseFloat($img.css("border-right-width"));n["h"]=parseFloat($img.css("border-top-width"))+parseFloat($img.css("border-bottom-width"));return n}return this.each(function(){var r=0,s=[],o=1,u=e(this);e.fn.collagePlus.defaults.albumWidth=u.width();e.fn.collagePlus.defaults.padding=parseFloat(u.css("padding-left"));e.fn.collagePlus.defaults.images=u.children();var a=e.extend({},e.fn.collagePlus.defaults,t);a.images.each(function(t){var u=e(this),f=u.is("img")?u:e(this).find("img");var l=typeof f.data("width")!="undefined"?f.data("width"):f.width(),c=typeof f.data("height")!="undefined"?f.data("height"):f.height();var h=i(f);f.data("width",l);f.data("height",c);var p=Math.ceil(l/c*a.targetHeight),d=Math.ceil(a.targetHeight);s.push([this,p,d,h["w"],h["h"]]);r+=p+h["w"]+a.padding;if(r>a.albumWidth&&s.length!=0){n(s,r-a.padding,a,o);delete r;delete s;r=0;s=[];o+=1}if(a.images.length-1==t&&s.length!=0){n(s,r,a,o);delete r;delete s;r=0;s=[];o+=1}})})};e.fn.collagePlus.defaults={targetHeight:400,fadeSpeed:"fast",display:"inline-block",effect:"default",direction:"vertical",allowPartialLastRow:false}})(jQuery);

/**
 * Custom DropDown plugin by PC
 * http://designwithpc.com/Plugins/ddslick
 */
(function(e){e.fn.ddslick=function(l){if(c[l]){return c[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return c.init.apply(this,arguments)}else{e.error("Method "+l+" does not exists.")}}};var c={},d={data:[],keepJSONItemsOnTop:false,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:true,imagePosition:"left",showSelectedHTML:true,clickOffToClose:true,embedCSS:true,onSelected:function(){}},i='<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>',a='<ul class="dd-options"></ul>',b='<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>';c.init=function(l){var l=e.extend({},d,l);if(e("#css-ddslick").length<=0&&l.embedCSS){e(b).appendTo("head")}return this.each(function(){var p=e(this),q=p.data("ddslick");if(!q){var n=[],o=l.data;p.find("option").each(function(){var w=e(this),v=w.data();n.push({text:e.trim(w.text()),value:w.val(),selected:w.is(":selected"),description:v.description,imageSrc:v.imagesrc})});if(l.keepJSONItemsOnTop){e.merge(l.data,n)}else{l.data=e.merge(n,l.data)}var m=p,s=e('<div id="'+p.attr("id")+'"></div>');p.replaceWith(s);p=s;p.addClass("dd-container").append(i).append(a);var n=p.find(".dd-select"),u=p.find(".dd-options");u.css({width:l.width});n.css({width:l.width,background:l.background});p.css({width:l.width});if(l.height!=null){u.css({height:l.height,overflow:"auto"})}e.each(l.data,function(v,w){if(w.selected){l.defaultSelectedIndex=v}u.append('<li><a class="dd-option">'+(w.value?' <input class="dd-option-value" type="hidden" value="'+w.value+'" />':"")+(w.imageSrc?' <img class="dd-option-image'+(l.imagePosition=="right"?" dd-image-right":"")+'" src="'+w.imageSrc+'" />':"")+(w.text?' <label class="dd-option-text">'+w.text+"</label>":"")+(w.description?' <small class="dd-option-description dd-desc">'+w.description+"</small>":"")+"</a></li>")});var t={settings:l,original:m,selectedIndex:-1,selectedItem:null,selectedData:null};p.data("ddslick",t);if(l.selectText.length>0&&l.defaultSelectedIndex==null){p.find(".dd-selected").html(l.selectText)}else{var r=(l.defaultSelectedIndex!=null&&l.defaultSelectedIndex>=0&&l.defaultSelectedIndex<l.data.length)?l.defaultSelectedIndex:0;j(p,r)}p.find(".dd-select").on("click.ddslick",function(){f(p)});p.find(".dd-option").on("click.ddslick",function(){j(p,e(this).closest("li").index())});if(l.clickOffToClose){u.addClass("dd-click-off-close");p.on("click.ddslick",function(v){v.stopPropagation()});e("body").on("click",function(){e(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})}}})};c.select=function(l){return this.each(function(){if(l.index!==undefined){j(e(this),l.index)}})};c.open=function(){return this.each(function(){var m=e(this),l=m.data("ddslick");if(l){f(m)}})};c.close=function(){return this.each(function(){var m=e(this),l=m.data("ddslick");if(l){k(m)}})};c.destroy=function(){return this.each(function(){var n=e(this),m=n.data("ddslick");if(m){var l=m.original;n.removeData("ddslick").unbind(".ddslick").replaceWith(l)}})};function j(q,s){var u=q.data("ddslick");var r=q.find(".dd-selected"),n=r.siblings(".dd-selected-value"),v=q.find(".dd-options"),l=r.siblings(".dd-pointer"),p=q.find(".dd-option").eq(s),m=p.closest("li"),o=u.settings,t=u.settings.data[s];q.find(".dd-option").removeClass("dd-option-selected");p.addClass("dd-option-selected");u.selectedIndex=s;u.selectedItem=m;u.selectedData=t;if(o.showSelectedHTML){r.html((t.imageSrc?'<img class="dd-selected-image'+(o.imagePosition=="right"?" dd-image-right":"")+'" src="'+t.imageSrc+'" />':"")+(t.text?'<label class="dd-selected-text">'+t.text+"</label>":"")+(t.description?'<small class="dd-selected-description dd-desc'+(o.truncateDescription?" dd-selected-description-truncated":"")+'" >'+t.description+"</small>":""))}else{r.html(t.text)}n.val(t.value);u.original.val(t.value);q.data("ddslick",u);k(q);g(q);if(typeof o.onSelected=="function"){o.onSelected.call(this,u)}}function f(p){var o=p.find(".dd-select"),m=o.siblings(".dd-options"),l=o.find(".dd-pointer"),n=m.is(":visible");e(".dd-click-off-close").not(m).slideUp(50);e(".dd-pointer").removeClass("dd-pointer-up");if(n){m.slideUp("fast");l.removeClass("dd-pointer-up")}else{m.slideDown("fast");l.addClass("dd-pointer-up")}h(p)}function k(l){l.find(".dd-options").slideUp(50);l.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function g(o){var n=o.find(".dd-select").css("height");var m=o.find(".dd-selected-description");var l=o.find(".dd-selected-image");if(m.length<=0&&l.length>0){o.find(".dd-selected-text").css("lineHeight",n)}}function h(l){l.find(".dd-option").each(function(){var p=e(this);var n=p.css("height");var o=p.find(".dd-option-description");var m=l.find(".dd-option-image");if(o.length<=0&&m.length>0){p.find(".dd-option-text").css("lineHeight",n)}})}})(jQuery);

/**
 * jquery.removeWhitespace.js
 */
(function(a){a.fn.removeWhitespace=function(){this.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove();return this}})(jQuery)


/*!
 * imagesLoaded PACKAGED v4.1.1
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});


/* qtip2 v3.0.3 | Plugins: tips viewport imagemap svg modal ie6 | Styles: core css3 | qtip2.com | Licensed MIT | Thu May 26 2016 13:38:18 */
!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=F,this.elements={target:a},this._id=S+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:E,attr:e,onTooltip:E,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=E}function f(a){return a===F||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?E:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?(c=g(b)?E:b,b=a.content={text:c}):c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==E,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,F,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||E)&&(b.title=E))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===D?{ready:D}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(R,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)if(this.checks.hasOwnProperty(c))for(d in this.checks[c])this.checks[c].hasOwnProperty(d)&&(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return V.concat("").join(a?"-"+a+" ":" ")}function l(a,b){return b>0?setTimeout(d.proxy(a,this),b):void a.call(this)}function m(a){this.tooltip.hasClass(aa)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(D,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass(aa)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(W)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=l.call(this,function(){this.toggle(E,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass(aa)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+S+" "))+"."+S,function(){var a=y.api[d.attr(this,U)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):F,p="html5"===f.metadata.type&&o?o[f.metadata.name]:F,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(r){}if(k=d.extend(D,{},y.defaults,f,"object"==typeof q?h(q):F,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===E||!j)return E;k.content.text=j}if(i.container.length||(i.container=m),i.target===E&&(i.target=n),k.show.target===E&&(k.show.target=n),k.show.solo===D&&(k.show.solo=i.container.closest("body")),k.hide.target===E&&(k.hide.target=n),k.position.viewport===D&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new A(i.at,D),i.my=new A(i.my),a.data(S))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===E)return E;return a.attr(T,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(ca,l).attr("title",""),g=new e(a,k,c,!!j),a.data(S,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+va.join(f+" ")+f).split(" "),h=0;if(ua[b])return a.css(ua[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return ua[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.qtip=a,this.init(a)}function w(a,b){this.options=b,this._ns="-modal",this.qtip=a,this.init(a)}function x(a){this._ns="ie6",this.qtip=a,this.init(a)}var y,z,A,B,C,D=!0,E=!1,F=null,G="x",H="y",I="width",J="height",K="top",L="left",M="bottom",N="right",O="center",P="flipinvert",Q="shift",R={},S="qtip",T="data-hasqtip",U="data-qtip-id",V=["ui-widget","ui-tooltip"],W="."+S,X="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=S+"-fixed",Z=S+"-default",$=S+"-focus",_=S+"-hover",aa=S+"-disabled",ba="_replacedByqTip",ca="oldtitle",da={ie:function(){var a,c;for(a=4,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||E};z=e.prototype,z._when=function(a){return d.when.apply(d,a)},z.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,c=this.options,e=this.cache,f=this.elements,g=c.content.text,h=c.content.title,i=c.content.button,j=c.position,k=[];return d.attr(this.target[0],"aria-describedby",this._id),e.posClass=this._createPosClass((this.position={my:j.my,at:j.at}).my),this.tooltip=f.tooltip=d("<div/>",{id:this._id,"class":[S,Z,c.style.classes,e.posClass].join(" "),width:c.style.width||"",height:c.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":E,"aria-describedby":this._id+"-content","aria-hidden":D}).toggleClass(aa,this.disabled).attr(U,this.id).data(S,this).appendTo(j.container).append(f.content=d("<div />",{"class":S+"-content",id:this._id+"-content","aria-atomic":D})),this.rendered=-1,this.positioning=D,h&&(this._createTitle(),d.isFunction(h)||k.push(this._updateTitle(h,E))),i&&this._createButton(),d.isFunction(g)||k.push(this._updateContent(g,E)),this.rendered=D,this._setWidget(),d.each(R,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)}),this._unassignEvents(),this._assignEvents(),this._when(k).then(function(){b._trigger("render"),b.positioning=E,b.hiddenDuringWait||!c.show.ready&&!a||b.toggle(D,e.event,E),b.hiddenDuringWait=E}),y.api[this.id]=this,this},z.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=D;var a,b=this.target,c=b.attr(ca);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy()});for(a in this.timers)this.timers.hasOwnProperty(a)&&clearTimeout(this.timers[a]);b.removeData(S).removeAttr(U).removeAttr(T).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(ca),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=F,delete y.api[this.id]}}return this.destroyed?this.target:(a===D&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},B=z.checks={builtin:{"^id$":function(a,b,c,e){var f=c===D?y.nextid:c,g=S+"-"+f;f!==E&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),void this._updateTitle(c)):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new A(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(D)||this.toggle(D))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(Z,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},z.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var ea=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,fa=/^prerender|show\.ready/i;z.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=E,g=this.options;return"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&fa.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=ea.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=D,d.each(a,d.proxy(j,this)),this.positioning=E,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?F:this.cache.event),this},z._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=D,a.then(function(a){return e.waiting=E,c._update(a,b)},F,function(a){return c._update(a,b)})):a===E||!a&&""!==a?E:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length)}))):E},z._waitForContent=function(a){var b=this.cache;return b.waiting=D,(d.fn.imagesLoaded?a.imagesLoaded():(new d.Deferred).resolve([])).done(function(){b.waiting=E}).promise()},z._updateContent=function(a,b){this._update(a,this.elements.content,b)},z._updateTitle=function(a,b){this._update(a,this.elements.title,b)===E&&this._removeTitle(E)},z._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":S+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":S+"-title","aria-atomic":D})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},z._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=F,a!==E&&this.reposition())},z._createPosClass=function(a){return S+"-pos-"+(a||this.options.position.my).abbrev()},z.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=D;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(E),u=k.outerHeight(E),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,B=d(a),C=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:L,y:K},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:L,y:K},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),C.body.offsetWidth!==(a.innerWidth||C.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-B.scrollLeft(),y.top-=(F.scrollY||0)-B.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=da.iOS?a.innerWidth:m.width(),w=da.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):R.imagemap&&m.is("area")?f=R.imagemap(this,m,o,R.viewport?s:E):R.svg&&m&&m[0].ownerSVGElement?f=R.svg(this,m,o,R.viewport?s:E):(v=m.outerWidth(E),w=m.outerHeight(E),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(da.iOS>3.1&&da.iOS<4.1||da.iOS>=4.3&&da.iOS<4.33||!da.iOS&&"fixed"===x)&&(y.left-=B.scrollLeft(),y.top-=B.scrollTop()),(!f||f&&f.adjustable!==E)&&(y.left+=o.x===N?v:o.x===O?v/2:0,y.top+=o.y===M?w:o.y===O?w/2:0)}return y.left+=r.x+(n.x===N?-t:n.x===O?-t/2:0),y.top+=r.y+(n.y===M?-u:n.y===O?-u/2:0),R.viewport?(h=y.adjusted=R.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&(j.posClass=i,k.removeClass(j.posClass).addClass(i)),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===E||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),da.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=E,this):this},z.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!da.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var ga=(A=z.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,O).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?H:G}).prototype;ga.invert=function(a,b){this[a]=this[a]===L?N:this[a]===N?L:b||this[a]},ga.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===H||this.forceY)?[c,b]:[b,c]:[b];return a!==!1?d.join(" "):d},ga.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},ga.clone=function(){return new A(this.string(),this.forceY)},z.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=D),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=this.options.position,n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?F:!!this._trigger(k,[90]),this.destroyed?this:(i!==E&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,E),d.isFunction(n.title)&&this._updateTitle(n.title,E),!C&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+S,this._storeMouse),C=D),o||g.css("width",g.outerWidth(E)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(W,l.solo)).not(g).not(l.target).qtip("hide",new d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,C&&!d(W+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+S),C=E),this.blur(c)),j=d.proxy(function(){a?(da.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===E||q===E?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},z.show=function(a){return this.toggle(D,a)},z.hide=function(a){return this.toggle(E,a)},z.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(W),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=y.zindex+b.length;return c.hasClass($)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+$).qtip("blur",a)),c.addClass($)[0].style.zIndex=f),this},z.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass($),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},z.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(aa):this.disabled):"boolean"!=typeof a&&(a=D),this.rendered&&this.tooltip.toggleClass(aa,a).attr("aria-disabled",a),this.disabled=!!a,this)},z.enable=function(){return this.disable(E)},z._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),e.jquery?b.button=e:b.button=d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":S+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(aa)||a.hide(b),E})},z._updateButton=function(a){if(!this.rendered)return E;var b=this.elements.button;a?this._createButton():b.remove()},z._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(aa);c.removeClass(aa),aa=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(aa,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(Z,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(S+"-icon",!a)},z._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},z._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},z._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},z._trigger=function(a,b,c){var e=new d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||F,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=E,!e.isDefaultPrevented()},z._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){var b=this.rendered?this.tooltip[0].offsetWidth>0:!1;(b?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},z._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?E:(this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),void(this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)))}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=D}),this._bindEvents(g,h,e,f,b,function(){return this.timers?void clearTimeout(this.timers.show):E}),(c.show.ready||c.prerender)&&b.call(this,a)},z._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=d(a),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(Y)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0,e=b.parents(W).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),y.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){return this.cache?void(this.cache.onTarget="mouseenter"===a.type):E}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},z._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(W,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(Y)&&!c.hasClass(aa)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(_,b)}),q("["+U+"]",X,o)}),y=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=F,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],S):F;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,S);if(!a)return D;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),E;a.set(b,e)}}),g!==F?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(D,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===E||c.length<1||y.api[c]?y.nextid++:c,b=r(d(this),c,k),b===E?D:(y.api[c]=b,d.each(R,function(){"initialize"===this.initialize&&this(b)}),void b._assignInitialEvents(j))}))},d.qtip=e,y.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&f.options&&"object"==typeof f&&"object"==typeof f.options&&f.options.suppress)return arguments.length<2?d.attr(c,ca):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(ca,b))}return d.fn["attr"+ba].apply(this,arguments)},clone:function(a){var b=d.fn["clone"+ba].apply(this,arguments);return a||b.filter("["+ca+"]").attr("title",function(){return d.attr(this,ca)}).removeAttr(ca),b}},function(a,b){if(!b||d.fn[a+ba])return D;var c=d.fn[a+ba]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+ba]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(T))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+ba].apply(this,arguments)}),y.version="3.0.3",y.nextid=0,y.inactiveEvents=X,y.zindex=15e3,y.defaults={prerender:E,id:E,overwrite:D,suppress:D,content:{text:D,attr:"title",title:E,button:E},position:{my:"top left",at:"bottom right",target:E,container:E,viewport:E,adjust:{x:0,y:0,mouse:D,scroll:D,resize:D,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:E})}},show:{target:E,event:"mouseenter",effect:D,delay:90,solo:E,ready:E,autofocus:E},hide:{target:E,event:"mouseleave",effect:D,delay:0,fixed:E,inactive:E,leave:"window",distance:E},style:{classes:"",widget:E,width:E,height:E,def:D},events:{render:F,move:F,show:F,hide:F,toggle:F,visible:F,hidden:F,focus:F,blur:F}};var ha,ia,ja,ka,la,ma="margin",na="border",oa="color",pa="background-color",qa="transparent",ra=" !important",sa=!!b.createElement("canvas").getContext,ta=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ua={},va=["Webkit","O","Moz","ms"];sa?(ka=a.devicePixelRatio||1,la=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),ja=ka/la):ia=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'},d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":S+"-tip"}).prependTo(a.tooltip),sa?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=ia("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===K||a.y===O&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(D))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===E||b===E?a=E:a===D?a=new A(b.string()):a.string||(a=new A(a),a.fixed=D),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=na+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=na+s(a.y)+s(a.x)+"Radius";return da.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||ta.test(d)?E:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=na+s(a[a.precedance])+s(oa),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,pa)||g(f,pa)||g(b.content,pa)||g(b.tooltip,pa)||c.css(pa),h[1]=g(c,e,oa)||g(f,e,oa)||g(b.content,e,oa)||g(b.tooltip,e,oa)||b.tooltip.css(e),d("*",c).add(c).css("cssText",pa+":"+qa+ra+";"+na+":0"+ra+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===H,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(sa||da.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&"c"!==this.corner.abbrev(),this.enabled&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===E?r=b:(r=new A(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===G?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==qa?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&1>l&&!ta.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==D?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===H?[s(r.x===L?l:r.x===N?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===K?k[1]-q[1]:0)]:[s(r.x===L?k[0]-q[0]:0),s(r.y===K?l:r.y===M?k[1]-q[1]-l:(k[1]-q[1])/2)],sa?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,ja),i=this._calculateTip(r,this.size,ja),o.attr(I,k[0]*ja).attr(J,k[1]*ja),o.css(I,k[0]).css(J,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*ja,j[1]*ja),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===da.ie?2:1:0,o.css({coordsize:k[0]+l+" "+k[1]+l,antialias:""+(r.string().indexOf(O)>-1),left:j[0]-j[2]*Number(f===G),top:j[1]-j[2]*Number(f===H),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+k[1]+l,path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(ia("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==E&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return E;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j={};
return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===G&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===O?(h=c===H?L:K,j[h]="50%",j[ma+"-"+h]=-Math.round(b[c===H?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===G?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,e){a===Q&&j.precedance===b&&k[d]&&j[c]!==O?j.precedance=j.precedance===G?H:G:a!==Q&&k[d]&&(j[b]=j[b]===O?k[d]>0?d:e:j[b]===d?e:d)}function f(a,b,e){j[a]===O?p[ma+"-"+b]=o[a]=g[ma+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=E),p[g[e]!==c?e:b]=o[a])}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:E,top:E,x:0,y:0},p={};this.corner.fixed!==D&&(e(m,G,H,L,N),e(n,H,G,K,M),j.string()===i.corner.string()&&i.cornerTop===k.top&&i.cornerLeft===k.left||this.update(j,E)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,o.left=m===Q&&!!k.left,o.left&&f(G,L,N),o.top=n===Q&&!!k.top,o.top&&f(H,K,M),this.element.css(p).toggle(!(o.x&&o.y||j.x===O&&o.y||j.y===O&&o.x)),d.left-=g.left.charAt?g.user:m!==Q||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==Q||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ha=R.tip=function(a){return new v(a,a.options.style.tip)},ha.initialize="render",ha.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=D)}},B.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(D,y.defaults,{style:{tip:{corner:D,mimic:E,width:6,height:6,border:D,offset:0}}}),R.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===Q,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===I?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===O?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===I?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===P?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===O?-C:C)+e,l.invert(a,g)),d[f]<q[f]&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,C={left:0,top:0};return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||C,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(E),p=A[0]===a?A.height():A.outerHeight(E),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||C,"shift"===y&&"shift"===z||(l=u.clone()),C={left:"none"!==y?j(G,H,y,w.x,L,N,I,f,h):0,top:"none"!==z?j(H,G,z,w.y,K,M,J,g,i):0,my:l}):C},R.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:E},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===L?i=d:b.x===N?i=f.width-d:i+=Math.floor(d/2),b.y===K?j=e:b.y===M?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===L&&k>=i||b.x===N&&i>=k||b.x===O&&(i>k||k>f.width-i)||b.y===K&&l>=j||b.y===M&&j>=l||b.y===O&&(j>l||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]}}return f},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=R.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:E}},circle:function(a,b,c,d){return R.polys.ellipse(a,b,c,c,d)}},R.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=(b.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return E;if("polygon"===j)h=R.polys.polygon(m,c);else{if(!R.polys[j])return E;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=R.polys[j].apply(this,f.concat(c))}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(E)-k.width())/2),e.top+=Math.ceil((k.outerHeight(E)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h},R.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o=c[0],p=d(o.ownerSVGElement),q=o.ownerDocument,r=(parseInt(c.css("stroke-width"),10)||0)/2;!o.getBBox;)o=o.parentNode;if(!o.getBBox||!o.parentNode)return E;switch(o.nodeName){case"ellipse":case"circle":m=R.polys.ellipse(o.cx.baseVal.value,o.cy.baseVal.value,(o.rx||o.r).baseVal.value+r,(o.ry||o.r).baseVal.value+r,e);break;case"line":case"polygon":case"polyline":for(l=o.points||[{x:o.x1.baseVal.value,y:o.y1.baseVal.value},{x:o.x2.baseVal.value,y:o.y2.baseVal.value}],m=[],k=-1,i=l.numberOfItems||l.length;++k<i;)j=l.getItem?l.getItem(k):l[k],m.push.apply(m,[j.x,j.y]);m=R.polys.polygon(m,e);break;default:m=o.getBBox(),m={width:m.width,height:m.height,position:{left:m.x,top:m.y}}}return n=m.position,p=p[0],p.createSVGPoint&&(g=o.getScreenCTM(),l=p.createSVGPoint(),l.x=n.left,l.y=n.top,h=l.matrixTransform(g),n.left=h.x,n.top=h.y),q!==b&&"mouse"!==a.position.target&&(f=d((q.defaultView||q.parentWindow).frameElement).offset(),f&&(n.left+=f.left,n.top+=f.top)),q=d(q),n.left+=q.scrollLeft(),n.top+=q.scrollTop(),m};var wa,xa,ya="qtip-modal",za="."+ya;xa=function(){function a(a){if(d.expr[":"].focusable)return d.expr[":"].focusable;var b,c,e,f=!isNaN(d.attr(a,"tabindex")),g=a.nodeName&&a.nodeName.toLowerCase();return"area"===g?(b=a.parentNode,c=b.name,a.href&&c&&"map"===b.nodeName.toLowerCase()?(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible")):!1):/input|select|textarea|button|object/.test(g)?!a.disabled:"a"===g?a.href||f:f}function c(a){j.length<1&&a.length?a.not("body").blur():j.first().focus()}function e(a){if(h.is(":visible")){var b,e=d(a.target),g=f.tooltip,i=e.closest(W);b=i.length<1?E:parseInt(i[0].style.zIndex,10)>parseInt(g[0].style.zIndex,10),b||e.closest(W)[0]===g[0]||c(e)}}var f,g,h,i=this,j={};d.extend(i,{init:function(){return h=i.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return E}}).hide(),d(b.body).bind("focusin"+za,e),d(b).bind("keydown"+za,function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a)}),h.bind("click"+za,function(a){f&&f.options.show.modal.blur&&f.hide(a)}),i},update:function(b){f=b,j=b.options.show.modal.stealfocus!==E?b.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(a,e,j){var k=a.tooltip,l=a.options.show.modal,m=l.effect,n=e?"show":"hide",o=h.is(":visible"),p=d(za).filter(":visible:not(:animated)").not(k);return i.update(a),e&&l.stealfocus!==E&&c(d(":focus")),h.toggleClass("blurs",l.blur),e&&h.appendTo(b.body),h.is(":animated")&&o===e&&g!==E||!e&&p.length?i:(h.stop(D,E),d.isFunction(m)?m.call(h,e):m===E?h[n]():h.fadeTo(parseInt(j,10)||90,e?1:0,function(){e||h.hide()}),e||h.queue(function(a){h.css({left:"",top:""}),d(za).length||h.detach(),a()}),g=e,f.destroyed&&(f=F),i)}}),i.init()},xa=new xa,d.extend(w.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=xa.elem,b.addClass(ya).css("z-index",y.modal_zindex+d(za).length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){var f=a.originalEvent;if(a.target===b[0])if(f&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(f.type)&&d(f.relatedTarget).closest(xa.elem[0]).length)try{a.preventDefault()}catch(g){}else(!f||f&&"tooltipsolo"!==f.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(za),f=y.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);xa.elem[0].style.zIndex=f-1,e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)}),e.filter("."+$).qtip("blur",a.originalEvent),b.addClass($)[0].style.zIndex=f,xa.update(c);try{a.preventDefault()}catch(h){}}},this._ns,this),void a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(za).filter(":visible").not(b).last().qtip("focus",a)},this._ns,this)):this},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:void xa.toggle(this.qtip,!!b,c)},destroy:function(){this.qtip.tooltip.removeClass(ya),this.qtip._unbind(this.qtip.tooltip,this._ns),xa.toggle(this.qtip,E),delete this.qtip.elements.overlay}}),wa=R.modal=function(a){return new w(a,a.options.show.modal)},wa.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=D))},y.modal_zindex=y.zindex-200,wa.initialize="render",B.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},d.extend(D,y.defaults,{show:{modal:{on:E,effect:D,blur:D,stealfocus:D,escape:D}}});var Aa,Ba='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';d.extend(x.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px")},init:function(c){var e=c.tooltip;d("select, object").length<1&&(this.bgiframe=c.elements.bgiframe=d(Ba).appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=d("<div/>",{id:S+"-rcontainer"}).appendTo(b.body),c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var a,b,c=this.qtip.tooltip,d={height:c.outerHeight(E),width:c.outerWidth(E)},e=this.qtip.plugins.tip,f=this.qtip.elements.tip;b=parseInt(c.css("borderLeftWidth"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?[I,L]:[J,K],b[a[1]]-=f[a[0]]()),this.bgiframe.css(b).css(d)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css(J,f.height),f.width?e.css(I,f.width):(e.css(I,"").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=(c+d).indexOf("%")>-1?g.width()/100:0,c=(c.indexOf("%")>-1?a:1*parseInt(c,10))||b,d=(d.indexOf("%")>-1?a:1*parseInt(d,10))||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(I,Math.round(b)).appendTo(g)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([a,this.qtip.tooltip],this._ns)}}),Aa=R.ie6=function(a){return 6===da.ie?new x(a):E},Aa.initialize="render",B.ie6={"^content|style$":function(){this.redraw()}}})}(window,document);
    
/**
 * jQuery iLightBox - Revolutionary Lightbox Plugin
 * http://www.ilightbox.net/
 *
 * @version: 2.2.3 - June 03, 2017
 *
 * @author: Hemn Chawroka
 *          http://www.iprodev.com/
 *
 */
!function($,window,undefined){var extensions={flash:["swf"],image:["bmp","gif","jpeg","jpg","png","tiff","tif","jfif","jpe"],iframe:["asp","aspx","cgi","cfm","htm","html","jsp","php","pl","php3","php4","php5","phtml","rb","rhtml","shtml","txt"],video:["avi","mov","mpg","mpeg","movie","mp4","webm","ogv","ogg","3gp","m4v"]},$win=$(window),$doc=$(document),browser,transform,gpuAcceleration,fullScreenApi="",userAgent=navigator.userAgent||navigator.vendor||window.opera,supportTouch=!!("ontouchstart"in window)&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,isMobile="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(userAgent.substr(0,4)),clickEvent=supportTouch?"itap.iLightBox":"click.iLightBox",touchStartEvent=supportTouch?"touchstart.iLightBox":"mousedown.iLightBox",touchStopEvent=supportTouch?"touchend.iLightBox":"mouseup.iLightBox",touchMoveEvent=supportTouch?"touchmove.iLightBox":"mousemove.iLightBox",abs=Math.abs,sqrt=Math.sqrt,round=Math.round,max=Math.max,min=Math.min,floor=Math.floor,random=Math.random,pluginspages={quicktime:"http://www.apple.com/quicktime/download",flash:"http://www.adobe.com/go/getflash"},iLightBox=function(e,t,i,o){var n=this;if(n.options=t,n.selector=e.selector||e,n.context=e.context,n.instant=o,i.length<1?n.attachItems():n.items=i,n.vars={total:n.items.length,start:0,current:null,next:null,prev:null,BODY:$("body"),loadRequests:0,overlay:$('<div class="ilightbox-overlay"></div>'),loader:$('<div class="ilightbox-loader"><div></div></div>'),toolbar:$('<div class="ilightbox-toolbar"></div>'),innerToolbar:$('<div class="ilightbox-inner-toolbar"></div>'),title:$('<div class="ilightbox-title"></div>'),closeButton:$('<a class="ilightbox-close" title="'+n.options.text.close+'"></a>'),fullScreenButton:$('<a class="ilightbox-fullscreen" title="'+n.options.text.enterFullscreen+'"></a>'),innerPlayButton:$('<a class="ilightbox-play" title="'+n.options.text.slideShow+'"></a>'),innerNextButton:$('<a class="ilightbox-next-button" title="'+n.options.text.next+'"></a>'),innerPrevButton:$('<a class="ilightbox-prev-button" title="'+n.options.text.previous+'"></a>'),holder:$('<div class="ilightbox-holder'+(supportTouch?" supportTouch":"")+'" ondragstart="return false;"><div class="ilightbox-container"></div></div>'),nextPhoto:$('<div class="ilightbox-holder'+(supportTouch?" supportTouch":"")+' ilightbox-next" ondragstart="return false;"><div class="ilightbox-container"></div></div>'),prevPhoto:$('<div class="ilightbox-holder'+(supportTouch?" supportTouch":"")+' ilightbox-prev" ondragstart="return false;"><div class="ilightbox-container"></div></div>'),nextButton:$('<a class="ilightbox-button ilightbox-next-button" ondragstart="return false;" title="'+n.options.text.next+'"><span></span></a>'),prevButton:$('<a class="ilightbox-button ilightbox-prev-button" ondragstart="return false;" title="'+n.options.text.previous+'"><span></span></a>'),thumbnails:$('<div class="ilightbox-thumbnails" ondragstart="return false;"><div class="ilightbox-thumbnails-container"><a class="ilightbox-thumbnails-dragger"></a><div class="ilightbox-thumbnails-grid"></div></div></div>'),thumbs:!1,nextLock:!1,prevLock:!1,hashLock:!1,isMobile:!1,mobileMaxWidth:980,isInFullScreen:!1,isSwipe:!1,mouseID:0,cycleID:0,isPaused:0},n.vars.hideableElements=n.vars.nextButton.add(n.vars.prevButton),n.normalizeItems(),n.availPlugins(),n.options.startFrom=0<n.options.startFrom&&n.options.startFrom>=n.vars.total?n.vars.total-1:n.options.startFrom,n.options.startFrom=n.options.randomStart?floor(random()*n.vars.total):n.options.startFrom,n.vars.start=n.options.startFrom,o?n.instantCall():n.patchItemsEvents(),n.options.linkId&&(n.hashChangeHandler(),$win.iLightBoxHashChange(function(){n.hashChangeHandler()})),supportTouch){var a=/(click|mouseenter|mouseleave|mouseover|mouseout)/gi,r="itap";n.options.caption.show=n.options.caption.show.replace(a,r),n.options.caption.hide=n.options.caption.hide.replace(a,r),n.options.social.show=n.options.social.show.replace(a,r),n.options.social.hide=n.options.social.hide.replace(a,r)}n.options.controls.arrows&&$.extend(n.options.styles,{nextOffsetX:0,prevOffsetX:0,nextOpacity:0,prevOpacity:0})},ti,wi,xi;function getPixel(e,t){return parseInt(e.css(t),10)||0}function within(e,t,i){return e<t?t:i<e?i:e}function getViewport(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}function removeHash(){var e=getScrollXY();window.location.hash="",window.scrollTo(e.x,e.y)}function doAjax(e,t){e="//ilightbox.net/getSource/jsonp.php?url="+encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A");$.ajax({url:e,dataType:"jsonp"}),iLCallback=function(e){t.call(this,e)}}function findImageInElement(e){var t=$("*",e),a=new Array;return t.each(function(){var e="",t=this;if("none"!=$(t).css("background-image")?e=$(t).css("background-image"):void 0!==$(t).attr("src")&&"img"==t.nodeName.toLowerCase()&&(e=$(t).attr("src")),-1==e.indexOf("gradient"))for(var i=(e=(e=(e=(e=e.replace(/url\(\"/g,"")).replace(/url\(/g,"")).replace(/\"\)/g,"")).replace(/\)/g,"")).split(","),o=0;o<i.length;o++)if(0<i[o].length&&-1==$.inArray(i[o],a)){var n="";browser.msie&&browser.version<9&&(n="?"+floor(3e3*random())),a.push(i[o]+n)}}),a}function getExtension(e){var t=e.split(".").pop().toLowerCase(),i=-1!==t.indexOf("?")?t.split("?").pop():"";return t.replace(i,"")}function getTypeByExtension(e){var t=getExtension(e);return-1!==extensions.image.indexOf(t)?"image":-1!==extensions.flash.indexOf(t)?"flash":-1!==extensions.video.indexOf(t)?"video":"iframe"}function percentToValue(e,t){return parseInt(t/100*e)}function parseURI(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function absolutizeURI(e,t){var i,o;return t=parseURI(t||""),e=parseURI(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(i=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,o=[],i.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?o.pop():o.push(e)}),o.join("").replace(/^\//,"/"===i.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function version_compare(e,t,i){this.php_js=this.php_js||{},this.php_js.ENV=this.php_js.ENV||{};function o(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]}function n(e){return e?isNaN(e)?l[e]||-7:parseInt(e,10):0}var a,r=0,s=0,l={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1};for(e=o(e),t=o(t),a=max(e.length,t.length),r=0;r<a;r++)if(e[r]!=t[r]){if(e[r]=n(e[r]),t[r]=n(t[r]),e[r]<t[r]){s=-1;break}if(e[r]>t[r]){s=1;break}}if(!i)return s;switch(i){case">":case"gt":return 0<s;case">=":case"ge":return 0<=s;case"<=":case"le":return s<=0;case"==":case"=":case"eq":return 0===s;case"<>":case"!=":case"ne":return 0!==s;case"":case"<":case"lt":return s<0;default:return null}}function getScrollXY(){var e=0,t=0;return"number"==typeof window.pageYOffset?(t=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft),{x:e,y:t}}function yi(e){for(var t=0,i=wi.length;t<i;t++){var o=wi[t]?wi[t]+e.charAt(0).toUpperCase()+e.slice(1):e;if(xi.style[o]!==undefined)return o}}iLightBox.prototype={showLoader:function(){var e=this;e.vars.loadRequests+=1,"horizontal"==e.options.path.toLowerCase()?e.vars.loader.addClass("ilightbox-show").stop().animate({top:"-30px"},e.options.show.speed,"easeOutCirc"):e.vars.loader.addClass("ilightbox-show").stop().animate({left:"-30px"},e.options.show.speed,"easeOutCirc")},hideLoader:function(){var e=this;e.vars.loadRequests-=1,e.vars.loadRequests=e.vars.loadRequests<0?0:e.vars.loadRequests,"horizontal"==e.options.path.toLowerCase()?e.vars.loadRequests<=0&&e.vars.loader.removeClass("ilightbox-show").stop().animate({top:"-192px"},e.options.show.speed,"easeInCirc"):e.vars.loadRequests<=0&&e.vars.loader.removeClass("ilightbox-show").stop().animate({left:"-192px"},e.options.show.speed,"easeInCirc")},createUI:function(){var e=this;e.ui={currentElement:e.vars.holder,nextElement:e.vars.nextPhoto,prevElement:e.vars.prevPhoto,currentItem:e.vars.current,nextItem:e.vars.next,prevItem:e.vars.prev,hide:function(){e.closeAction()},refresh:function(){0<arguments.length?e.repositionPhoto(!0):e.repositionPhoto()},fullscreen:function(){e.fullScreenAction()}}},attachItems:function(){var iL=this,itemsObject=new Array,items=new Array;$(iL.selector,iL.context).each(function(){var t=$(this),URL=t.attr(iL.options.attr)||null,options=t.data("options")&&eval("({"+t.data("options")+"})")||{},caption=t.data("caption"),title=t.data("title"),type=t.data("type")||getTypeByExtension(URL);items.push({URL:URL,caption:caption,title:title,type:type,options:options}),iL.instant||itemsObject.push(t)}),iL.items=items,iL.itemsObject=itemsObject},normalizeItems:function(){var l=this,c=new Array;$.each(l.items,function(e,t){"string"==typeof t&&(t={url:t});var i=t.url||t.URL||null,o=t.options||{},n=t.caption||null,a=t.title||null,r=t.type?t.type.toLowerCase():getTypeByExtension(i),s="object"!=typeof i?getExtension(i):"";o.thumbnail=o.thumbnail||("image"==r?i:null),o.videoType=o.videoType||null,o.skin=o.skin||l.options.skin,o.width=o.width||null,o.height=o.height||null,o.mousewheel=void 0===o.mousewheel||o.mousewheel,o.swipe=void 0===o.swipe||o.swipe,o.social=void 0!==o.social?o.social:l.options.social.buttons&&$.extend({},{},l.options.social.buttons),"video"==r&&(o.html5video=void 0!==o.html5video?o.html5video:{},o.html5video.webm=o.html5video.webm||o.html5video.WEBM||null,o.html5video.controls=void 0!==o.html5video.controls?o.html5video.controls:"controls",o.html5video.preload=o.html5video.preload||"metadata",o.html5video.autoplay=void 0!==o.html5video.autoplay&&o.html5video.autoplay),o.width&&o.height||("video"==r?(o.width=1280,o.height=720):"iframe"==r?(o.width="100%",o.height="90%"):"flash"==r&&(o.width=1280,o.height=720)),delete t.url,t.index=e,t.URL=i,t.caption=n,t.title=a,t.type=r,t.options=o,t.ext=s,c.push(t)}),l.items=c},instantCall:function(){var e=this,t=e.vars.start;e.vars.current=t,e.vars.next=e.items[t+1]?t+1:null,e.vars.prev=e.items[t-1]?t-1:null,e.addContents(),e.patchEvents()},addContents:function(){var i=this,a=i.vars,r=i.options,e=getViewport(),t=r.path.toLowerCase(),o=0<a.total&&i.items.filter(function(e,t,i){return-1===["image","flash","video"].indexOf(e.type)&&void 0===e.recognized&&(r.smartRecognition||e.options.smartRecognition)}),n=0<o.length;r.mobileOptimizer&&!r.innerToolbar&&(a.isMobile=e.width<=a.mobileMaxWidth),a.overlay.addClass(r.skin).hide().css("opacity",r.overlay.opacity),r.linkId&&a.overlay[0].setAttribute("linkid",r.linkId),r.controls.toolbar&&(a.toolbar.addClass(r.skin).append(a.closeButton),r.controls.fullscreen&&a.toolbar.append(a.fullScreenButton),r.controls.slideshow&&a.toolbar.append(a.innerPlayButton),1<a.total&&a.toolbar.append(a.innerPrevButton).append(a.innerNextButton)),a.BODY.addClass("ilightbox-noscroll").append(a.overlay).append(a.loader).append(a.holder).append(a.nextPhoto).append(a.prevPhoto),r.innerToolbar||a.BODY.append(a.toolbar),r.controls.arrows&&a.BODY.append(a.nextButton).append(a.prevButton),r.controls.thumbnail&&1<a.total&&(a.BODY.append(a.thumbnails),a.thumbnails.addClass(r.skin).addClass("ilightbox-"+t),$("div.ilightbox-thumbnails-grid",a.thumbnails).empty(),a.thumbs=!0);var s="horizontal"==r.path.toLowerCase()?{left:parseInt(e.width/2-a.loader.outerWidth()/2)}:{top:parseInt(e.height/2-a.loader.outerHeight()/2)};a.loader.addClass(r.skin).css(s),a.nextButton.add(a.prevButton).addClass(r.skin),"horizontal"==t&&a.loader.add(a.nextButton).add(a.prevButton).addClass("horizontal"),a.BODY[a.isMobile?"addClass":"removeClass"]("isMobile"),r.infinite||(a.prevButton.add(a.prevButton).add(a.innerPrevButton).add(a.innerNextButton).removeClass("disabled"),0==a.current&&a.prevButton.add(a.innerPrevButton).addClass("disabled"),a.current>=a.total-1&&a.nextButton.add(a.innerNextButton).addClass("disabled")),r.show.effect?(a.overlay.stop().fadeIn(r.show.speed),a.toolbar.stop().fadeIn(r.show.speed)):(a.overlay.show(),a.toolbar.show());var l=o.length;n?(i.showLoader(),$.each(o,function(e,t){i.ogpRecognition(this,function(o){console.log(o);var n=-1,e=(i.items.filter(function(e,t,i){return e.URL==o.url&&(n=t),e.URL==o.url}),i.items[n]);o&&$.extend(!0,e,{URL:o.source,type:o.type,recognized:!0,options:{html5video:o.html5video,width:"image"==o.type?0:o.width||e.width,height:"image"==o.type?0:o.height||e.height,thumbnail:e.options.thumbnail||o.thumbnail}}),0==--l&&(i.hideLoader(),a.dontGenerateThumbs=!1,i.generateThumbnails(),r.show.effect?setTimeout(function(){i.generateBoxes()},r.show.speed):i.generateBoxes())})})):r.show.effect?setTimeout(function(){i.generateBoxes()},r.show.speed):i.generateBoxes(),i.createUI(),window.iLightBox={close:function(){i.closeAction()},fullscreen:function(){i.fullScreenAction()},moveNext:function(){i.moveTo("next")},movePrev:function(){i.moveTo("prev")},goTo:function(e){i.goTo(e)},refresh:function(){i.refresh()},reposition:function(){0<arguments.length?i.repositionPhoto(!0):i.repositionPhoto()},setOption:function(e){i.setOption(e)},destroy:function(){i.closeAction(),i.dispatchItemsEvents()}},r.linkId&&(a.hashLock=!0,window.location.hash=r.linkId+"/"+a.current,setTimeout(function(){a.hashLock=!1},55)),r.slideshow.startPaused||(i.resume(),a.innerPlayButton.removeClass("ilightbox-play").addClass("ilightbox-pause")),"function"==typeof i.options.callback.onOpen&&i.options.callback.onOpen.call(i)},loadContent:function(e,t,i){var o,n,a=this;switch(a.createUI(),e.speed=i||a.options.effects.loadedFadeSpeed,"current"==t&&(e.options.mousewheel?a.vars.lockWheel=!1:a.vars.lockWheel=!0,e.options.swipe?a.vars.lockSwipe=!1:a.vars.lockSwipe=!0),t){case"current":o=a.vars.holder,n=a.vars.current;break;case"next":o=a.vars.nextPhoto,n=a.vars.next;break;case"prev":o=a.vars.prevPhoto,n=a.vars.prev}if(o.removeAttr("style class").addClass("ilightbox-holder"+(supportTouch?" supportTouch":"")).addClass(e.options.skin),$("div.ilightbox-inner-toolbar",o).remove(),e.title||a.options.innerToolbar){var r=a.vars.innerToolbar.clone();if(e.title&&a.options.show.title){var s=a.vars.title.clone();s.empty().html(e.title),r.append(s)}a.options.innerToolbar&&r.append(1<a.vars.total?a.vars.toolbar.clone():a.vars.toolbar),o.prepend(r)}console.warn("loadContent",arguments),a.loadSwitcher(e,o,n,t)},loadSwitcher:function(c,u,h,d){var p=this,f=p.options,g={element:u,position:h};switch(c.type){case"image":"function"==typeof f.callback.onBeforeLoad&&f.callback.onBeforeLoad.call(p,p.ui,h),"function"==typeof c.options.onBeforeLoad&&c.options.onBeforeLoad.call(p,g),p.loadImage(c.URL,function(e){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g);var t=e?e.width:400,i=e?e.height:200;u.data({naturalWidth:t,naturalHeight:i}),$("div.ilightbox-container",u).empty().append(e?'<img src="'+c.URL+'" class="ilightbox-image" />':'<span class="ilightbox-alert">'+f.errors.loadImage+"</span>"),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g),p.configureHolder(c,d,u)});break;case"video":u.data({naturalWidth:c.options.width,naturalHeight:c.options.height}),"current"===d?(p.addContent(u,c),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g)):$("div.ilightbox-container",u).empty(),p.configureHolder(c,d,u);break;case"iframe":if(u.data({naturalWidth:c.options.width,naturalHeight:c.options.height}),p.configureHolder(c,d,u),"current"===d){var e=p.addContent(u,c);"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g),"function"==typeof f.callback.onBeforeLoad&&f.callback.onBeforeLoad.call(p,p.ui,h),"function"==typeof c.options.onBeforeLoad&&c.options.onBeforeLoad.call(p,g),e.bind("load",function(){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g),e.unbind("load")})}else $("div.ilightbox-container",u).empty();break;case"inline":e=$(c.URL);var t=p.addContent(u,c),i=findImageInElement(u);u.data({naturalWidth:p.items[h].options.width||e.outerWidth(),naturalHeight:p.items[h].options.height||e.outerHeight()}),t.children().eq(0).show(),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g),"function"==typeof f.callback.onBeforeLoad&&f.callback.onBeforeLoad.call(p,p.ui,h),"function"==typeof c.options.onBeforeLoad&&c.options.onBeforeLoad.call(p,g),p.loadImage(i,function(){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g),p.configureHolder(c,d,u)});break;case"flash":e=p.addContent(u,c);u.data({naturalWidth:p.items[h].options.width||e.outerWidth(),naturalHeight:p.items[h].options.height||e.outerHeight()}),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g),p.configureHolder(c,d,u);break;case"ajax":var m=c.options.ajax||{};"function"==typeof f.callback.onBeforeLoad&&f.callback.onBeforeLoad.call(p,p.ui,h),"function"==typeof c.options.onBeforeLoad&&c.options.onBeforeLoad.call(p,g),p.showLoader(),$.ajax({url:c.URL||f.ajaxSetup.url,data:m.data||null,dataType:m.dataType||"html",type:m.type||f.ajaxSetup.type,cache:m.cache||f.ajaxSetup.cache,crossDomain:m.crossDomain||f.ajaxSetup.crossDomain,global:m.global||f.ajaxSetup.global,ifModified:m.ifModified||f.ajaxSetup.ifModified,username:m.username||f.ajaxSetup.username,password:m.password||f.ajaxSetup.password,beforeSend:m.beforeSend||f.ajaxSetup.beforeSend,complete:m.complete||f.ajaxSetup.complete,success:function(e,t,i){p.hideLoader();var o=$(e),n=$("div.ilightbox-container",u),a=p.items[h].options.width||parseInt(o[0].getAttribute("width")),r=p.items[h].options.height||parseInt(o[0].getAttribute("height")),s=o[0].getAttribute("width")&&o[0].getAttribute("height")?{overflow:"hidden"}:{};n.empty().append($('<div class="ilightbox-wrapper"></div>').css(s).html(o)),u.show().data({naturalWidth:a||n.outerWidth(),naturalHeight:r||n.outerHeight()}).hide(),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g);var l=findImageInElement(u);p.loadImage(l,function(){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g),p.configureHolder(c,d,u)}),f.ajaxSetup.success(e,t,i),"function"==typeof m.success&&m.success(e,t,i)},error:function(e,t,i){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g),p.hideLoader(),$("div.ilightbox-container",u).empty().append('<span class="ilightbox-alert">'+f.errors.loadContents+"</span>"),p.configureHolder(c,d,u),f.ajaxSetup.error(e,t,i),"function"==typeof m.error&&m.error(e,t,i)}});break;case"html":var o=c.URL;if(container=$("div.ilightbox-container",u),o[0].nodeName)e=o.clone();else{var n=$(o);e=n.selector?$("<div>"+n+"</div>"):n}var a=p.items[h].options.width||parseInt(e.attr("width")),r=p.items[h].options.height||parseInt(e.attr("height"));p.addContent(u,c),e.appendTo(document.documentElement).hide(),"function"==typeof f.callback.onRender&&f.callback.onRender.call(p,p.ui,h),"function"==typeof c.options.onRender&&c.options.onRender.call(p,g);i=findImageInElement(u);"function"==typeof f.callback.onBeforeLoad&&f.callback.onBeforeLoad.call(p,p.ui,h),"function"==typeof c.options.onBeforeLoad&&c.options.onBeforeLoad.call(p,g),p.loadImage(i,function(){"function"==typeof f.callback.onAfterLoad&&f.callback.onAfterLoad.call(p,p.ui,h),"function"==typeof c.options.onAfterLoad&&c.options.onAfterLoad.call(p,g),u.show().data({naturalWidth:a||container.outerWidth(),naturalHeight:r||container.outerHeight()}).hide(),e.remove(),p.configureHolder(c,d,u)})}},configureHolder:function(o,e,n){var a=this,t=a.vars,r=a.options;if("current"!=e&&("next"==e?n.addClass("ilightbox-next"):n.addClass("ilightbox-prev")),"current"==e)var s=t.current;else if("next"==e){var i=r.styles.nextOpacity;s=t.next}else i=r.styles.prevOpacity,s=t.prev;var l={element:n,position:s};a.items[s].options.width=a.items[s].options.width||0,a.items[s].options.height=a.items[s].options.height||0,"current"==e?r.show.effect?n.css(transform,gpuAcceleration).fadeIn(o.speed,function(){if(n.css(transform,""),o.caption){a.setCaption(o,n);var e=$("div.ilightbox-caption",n),t=parseInt(e.outerHeight()/n.outerHeight()*100);r.caption.start&t<=50&&e.fadeIn(r.effects.fadeSpeed)}var i=o.options.social;i&&(a.setSocial(i,o.URL,n),r.social.start&&$("div.ilightbox-social",n).fadeIn(r.effects.fadeSpeed)),a.generateThumbnails(),"function"==typeof r.callback.onShow&&r.callback.onShow.call(a,a.ui,s),"function"==typeof o.options.onShow&&o.options.onShow.call(a,l)}):(n.show(),a.generateThumbnails(),"function"==typeof r.callback.onShow&&r.callback.onShow.call(a,a.ui,s),"function"==typeof o.options.onShow&&o.options.onShow.call(a,l)):r.show.effect?n.fadeTo(o.speed,i,function(){"next"==e?t.nextLock=!1:t.prevLock=!1,a.generateThumbnails(),"function"==typeof r.callback.onShow&&r.callback.onShow.call(a,a.ui,s),"function"==typeof o.options.onShow&&o.options.onShow.call(a,l)}):(n.css({opacity:i}).show(),"next"==e?t.nextLock=!1:t.prevLock=!1,a.generateThumbnails(),"function"==typeof r.callback.onShow&&r.callback.onShow.call(a,a.ui,s),"function"==typeof o.options.onShow&&o.options.onShow.call(a,l)),setTimeout(function(){a.repositionPhoto()},0)},generateBoxes:function(){var e=this,t=e.vars,i=e.options;i.infinite&&3<=t.total?(t.current==t.total-1&&(t.next=0),0==t.current&&(t.prev=t.total-1)):i.infinite=!1,e.loadContent(e.items[t.current],"current",i.show.speed),e.items[t.next]&&e.loadContent(e.items[t.next],"next",i.show.speed),e.items[t.prev]&&e.loadContent(e.items[t.prev],"prev",i.show.speed)},generateThumbnails:function(){var s=this,l=s.vars,c=s.options,u=null;if(l.thumbs&&!s.vars.dontGenerateThumbs){var h=l.thumbnails,d=$("div.ilightbox-thumbnails-container",h),p=$("div.ilightbox-thumbnails-grid",d),f=0;p.removeAttr("style").empty(),$.each(s.items,function(e,t){var i=l.current==e?"ilightbox-active":"",o=l.current==e?c.thumbnails.activeOpacity:c.thumbnails.normalOpacity,n=t.options.thumbnail,a=$('<div class="ilightbox-thumbnail"></div>'),r=$('<div class="ilightbox-thumbnail-icon"></div>');a.css({opacity:0}).addClass(i),"video"!=t.type&&"flash"!=t.type||void 0!==t.options.icon?t.options.icon&&(r.addClass("ilightbox-thumbnail-"+t.options.icon),a.append(r)):(r.addClass("ilightbox-thumbnail-video"),a.append(r)),n&&(f++,a.append('<img class="preloading" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="'+n+'" data-src-retina="'+n+'" data-src-backup="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" border="0" />'),clearTimeout(u),u=setTimeout(function(){s.positionThumbnails(h,d,p)},20),setTimeout(function(){a.fadeTo(c.effects.loadedFadeSpeed,o)},20*f)),p.append(a)}),s.vars.dontGenerateThumbs=!0}},positionThumbnails:function(e,t,i){var n=this,o=n.vars,a=n.options,r=getViewport(),s=a.path.toLowerCase();e=e||o.thumbnails,t=t||$("div.ilightbox-thumbnails-container",e),i=i||$("div.ilightbox-thumbnails-grid",t);var l=$(".ilightbox-thumbnail",i),c="horizontal"==s?r.width-a.styles.pageOffsetX:l.eq(0).outerWidth()-a.styles.pageOffsetX,u="horizontal"==s?l.eq(0).outerHeight()-a.styles.pageOffsetY:r.height-a.styles.pageOffsetY,h="horizontal"==s?0:c,d="horizontal"==s?u:0,p=$(".ilightbox-active",i),f={};arguments.length<3&&(l.css({opacity:a.thumbnails.normalOpacity}),p.css({opacity:a.thumbnails.activeOpacity})),l.each(function(e){var t=$(this),i=t.data(),o="horizontal"==s?0:a.thumbnails.maxWidth;height="horizontal"==s?a.thumbnails.maxHeight:0,dims=n.getNewDimenstions(o,height,i.naturalWidth,i.naturalHeight,!0),t.css({width:dims.width,height:dims.height}),"horizontal"==s&&t.css({float:"left"}),"horizontal"==s?h+=t.outerWidth():d+=t.outerHeight()}),f={width:h,height:d},i.css(f),f={};var g=i.offset(),m=p.length?p.offset():{top:parseInt(u/2),left:parseInt(c/2)};g.top=g.top-$doc.scrollTop(),g.left=g.left-$doc.scrollLeft(),m.top=m.top-g.top-$doc.scrollTop(),m.left=m.left-g.left-$doc.scrollLeft(),"horizontal"==s?(f.top=0,f.left=parseInt(c/2-m.left-p.outerWidth()/2)):(f.top=parseInt(u/2-m.top-p.outerHeight()/2),f.left=0),arguments.length<3?i.stop().animate(f,a.effects.repositionSpeed,"easeOutCirc"):i.css(f)},loadImage:function(o,n){$.isArray(o)||(o=[o]);var a=this,r=o.length;0<r?(a.showLoader(),$.each(o,function(e,t){var i=new Image;i.onload=function(){0==(r-=1)&&(a.hideLoader(),n(i))},i.onerror=i.onabort=function(){0==(r-=1)&&(a.hideLoader(),n(!1))},i.src=o[e]})):n(!1)},patchItemsEvents:function(){var i=this,o=i.vars,n=supportTouch?"itap.iL":"click.iL",a=supportTouch?"click.iL":"itap.iL";if(i.context&&i.selector){var r=$(i.selector,i.context);$(i.context).on(n,i.selector,function(){var e=$(this),t=r.index(e);return o.current=t,o.next=i.items[t+1]?t+1:null,o.prev=i.items[t-1]?t-1:null,i.addContents(),i.patchEvents(),!1}).on(a,i.selector,function(){return!1})}else $.each(i.itemsObject,function(e,t){t.on(n,function(){return o.current=e,o.next=i.items[e+1]?e+1:null,o.prev=i.items[e-1]?e-1:null,i.addContents(),i.patchEvents(),!1}).on(a,function(){return!1})})},dispatchItemsEvents:function(){var e=this;e.vars,e.options;e.context&&e.selector?$(e.context).off(".iL",e.selector):$.each(e.itemsObject,function(e,t){t.off(".iL")})},refresh:function(){this.dispatchItemsEvents(),this.attachItems(),this.normalizeItems(),this.patchItemsEvents()},patchEvents:function(){var h=this,d=h.vars,p=h.options,f=p.path.toLowerCase(),g=$(".ilightbox-holder"),e=fullScreenApi.fullScreenEventName+".iLightBox",m=verticalDistanceThreshold=100,t=[d.nextButton[0],d.prevButton[0],d.nextButton[0].firstChild,d.prevButton[0].firstChild];$win.bind("resize.iLightBox",function(){var e=getViewport();p.mobileOptimizer&&!p.innerToolbar&&(d.isMobile=e.width<=d.mobileMaxWidth),d.BODY[d.isMobile?"addClass":"removeClass"]("isMobile"),h.repositionPhoto(null),supportTouch&&(clearTimeout(d.setTime),d.setTime=setTimeout(function(){var e=getScrollXY().y;window.scrollTo(0,e-30),window.scrollTo(0,e+30),window.scrollTo(0,e)},2e3)),d.thumbs&&h.positionThumbnails()}).bind("keydown.iLightBox",function(e){if(p.controls.keyboard)switch(e.keyCode){case 13:e.shiftKey&&p.keyboard.shift_enter&&h.fullScreenAction();break;case 27:p.keyboard.esc&&h.closeAction();break;case 37:p.keyboard.left&&!d.lockKey&&h.moveTo("prev");break;case 38:p.keyboard.up&&!d.lockKey&&h.moveTo("prev");break;case 39:p.keyboard.right&&!d.lockKey&&h.moveTo("next");break;case 40:p.keyboard.down&&!d.lockKey&&h.moveTo("next")}}),fullScreenApi.supportsFullScreen&&$win.bind(e,function(){h.doFullscreen()});var i=[p.caption.show+".iLightBox",p.caption.hide+".iLightBox",p.social.show+".iLightBox",p.social.hide+".iLightBox"].filter(function(e,t,i){return i.lastIndexOf(e)===t}),o="";$.each(i,function(e,t){0!=e&&(o+=" "),o+=t}),$doc.on(clickEvent,".ilightbox-overlay",function(){p.overlay.blur&&h.closeAction()}).on(clickEvent,".ilightbox-next, .ilightbox-next-button",function(){h.moveTo("next")}).on(clickEvent,".ilightbox-prev, .ilightbox-prev-button",function(){h.moveTo("prev")}).on(clickEvent,".ilightbox-thumbnail",function(){var e=$(this),t=$(".ilightbox-thumbnail",d.thumbnails).index(e);t!=d.current&&h.goTo(t)}).on(o,".ilightbox-holder:not(.ilightbox-next, .ilightbox-prev)",function(e){var t=$("div.ilightbox-caption",d.holder),i=$("div.ilightbox-social",d.holder),o=p.effects.fadeSpeed;d.nextLock||d.prevLock?(e.type!=p.caption.show||t.is(":visible")?e.type==p.caption.hide&&t.is(":visible")&&t.fadeOut(o):t.fadeIn(o),e.type!=p.social.show||i.is(":visible")?e.type==p.social.hide&&i.is(":visible")&&i.fadeOut(o):i.fadeIn(o)):(e.type!=p.caption.show||t.is(":visible")?e.type==p.caption.hide&&t.is(":visible")&&t.stop().fadeOut(o):t.stop().fadeIn(o),e.type!=p.social.show||i.is(":visible")?e.type==p.social.hide&&i.is(":visible")&&i.stop().fadeOut(o):i.stop().fadeIn(o))}).on("mouseenter.iLightBox mouseleave.iLightBox",".ilightbox-wrapper",function(e){"mouseenter"==e.type?d.lockWheel=!0:d.lockWheel=!1}).on(clickEvent,".ilightbox-toolbar a.ilightbox-close, .ilightbox-toolbar a.ilightbox-fullscreen, .ilightbox-toolbar a.ilightbox-play, .ilightbox-toolbar a.ilightbox-pause",function(){var e=$(this);e.hasClass("ilightbox-fullscreen")?h.fullScreenAction():e.hasClass("ilightbox-play")?(h.resume(),e.addClass("ilightbox-pause").removeClass("ilightbox-play")):e.hasClass("ilightbox-pause")?(h.pause(),e.addClass("ilightbox-play").removeClass("ilightbox-pause")):h.closeAction()}).on(touchMoveEvent,".ilightbox-overlay, .ilightbox-thumbnails-container",function(e){e.preventDefault()}),p.controls.arrows&&!supportTouch&&$doc.on("mousemove.iLightBox",function(e){d.isMobile||(d.mouseID||d.hideableElements.show(),d.mouseID=clearTimeout(d.mouseID),-1===t.indexOf(e.target)&&(d.mouseID=setTimeout(function(){d.hideableElements.hide(),d.mouseID=clearTimeout(d.mouseID)},3e3)))}),p.controls.slideshow&&p.slideshow.pauseOnHover&&$doc.on("mouseenter.iLightBox mouseleave.iLightBox",".ilightbox-holder:not(.ilightbox-next, .ilightbox-prev)",function(e){"mouseenter"==e.type&&d.cycleID?h.pause():"mouseleave"==e.type&&d.isPaused&&h.resume()});var n=$(".ilightbox-overlay, .ilightbox-holder, .ilightbox-thumbnails");p.controls.mousewheel&&n.on("mousewheel.iLightBox",function(e,t){d.lockWheel||(e.preventDefault(),t<0?h.moveTo("next"):0<t&&h.moveTo("prev"))}),p.controls.swipe&&g.on(touchStartEvent,function(e){if(!(d.nextLock||d.prevLock||1==d.total||d.lockSwipe)){d.BODY.addClass("ilightbox-closedhand");var n,t=e.originalEvent.touches?e.originalEvent.touches[0]:e,a=$doc.scrollTop(),r=$doc.scrollLeft(),i=[g.eq(0).offset(),g.eq(1).offset(),g.eq(2).offset()],s=[{top:i[0].top-a,left:i[0].left-r},{top:i[1].top-a,left:i[1].left-r},{top:i[2].top-a,left:i[2].left-r}],l={time:(new Date).getTime(),coords:[t.pageX-r,t.pageY-a]};g.bind(touchMoveEvent,c),$doc.one(touchStopEvent,function(e){g.unbind(touchMoveEvent,c),d.BODY.removeClass("ilightbox-closedhand"),l&&n&&("horizontal"==f&&n.time-l.time<1e3&&abs(l.coords[0]-n.coords[0])>m&&abs(l.coords[1]-n.coords[1])<verticalDistanceThreshold?l.coords[0]>n.coords[0]?d.current!=d.total-1||p.infinite?(d.isSwipe=!0,h.moveTo("next")):u():0!=d.current||p.infinite?(d.isSwipe=!0,h.moveTo("prev")):u():"vertical"==f&&n.time-l.time<1e3&&abs(l.coords[1]-n.coords[1])>m&&abs(l.coords[0]-n.coords[0])<verticalDistanceThreshold?l.coords[1]>n.coords[1]?d.current!=d.total-1||p.infinite?(d.isSwipe=!0,h.moveTo("next")):u():0!=d.current||p.infinite?(d.isSwipe=!0,h.moveTo("prev")):u():u()),l=n=undefined})}function o(e){var t=$(this),i=s[e],o=[l.coords[0]-n.coords[0],l.coords[1]-n.coords[1]];t[0].style["horizontal"==f?"left":"top"]=("horizontal"==f?i.left-o[0]:i.top-o[1])+"px"}function c(e){if(l){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;n={time:(new Date).getTime(),coords:[t.pageX-r,t.pageY-a]},g.each(o),e.preventDefault()}}function u(){g.each(function(){var e=$(this),t=e.data("offset")||{top:e.offset().top-a,left:e.offset().left-r},i=t.top,o=t.left;e.css(transform,gpuAcceleration).stop().animate({top:i,left:o},500,"easeOutCirc",function(){e.css(transform,"")})})}})},goTo:function(e){var t=this,i=t.vars,o=t.options,n=e-i.current;if(o.infinite&&(e==i.total-1&&0==i.current&&(n=-1),i.current==i.total-1&&0==e&&(n=1)),1==n)t.moveTo("next");else if(-1==n)t.moveTo("prev");else{if(i.nextLock||i.prevLock)return!1;"function"==typeof o.callback.onBeforeChange&&o.callback.onBeforeChange.call(t,t.ui),o.linkId&&(i.hashLock=!0,window.location.hash=o.linkId+"/"+e),t.items[e]&&(t.items[e].options.mousewheel?t.vars.lockWheel=!1:i.lockWheel=!0,t.items[e].options.swipe?i.lockSwipe=!1:i.lockSwipe=!0),$.each([i.holder,i.nextPhoto,i.prevPhoto],function(e,t){t.css(transform,gpuAcceleration).fadeOut(o.effects.loadedFadeSpeed)}),i.current=e,i.next=e+1,i.prev=e-1,t.createUI(),setTimeout(function(){t.generateBoxes()},o.effects.loadedFadeSpeed+50),$(".ilightbox-thumbnail",i.thumbnails).removeClass("ilightbox-active").eq(e).addClass("ilightbox-active"),t.positionThumbnails(),o.linkId&&setTimeout(function(){i.hashLock=!1},55),o.infinite||(i.nextButton.add(i.prevButton).add(i.innerPrevButton).add(i.innerNextButton).removeClass("disabled"),0==i.current&&i.prevButton.add(i.innerPrevButton).addClass("disabled"),i.current>=i.total-1&&i.nextButton.add(i.innerNextButton).addClass("disabled")),t.resetCycle(),"function"==typeof o.callback.onAfterChange&&o.callback.onAfterChange.call(t,t.ui)}},moveTo:function(e){var t=this,i=t.vars,o=t.options,n=o.path.toLowerCase(),a=getViewport(),r=o.effects.switchSpeed;if(i.nextLock||i.prevLock)return!1;var s="next"==e?i.next:i.prev;if(o.linkId&&(i.hashLock=!0,window.location.hash=o.linkId+"/"+s),"next"==e){if(!t.items[s])return!1;var l=i.nextPhoto,c=i.holder,u=i.prevPhoto,h="ilightbox-prev",d="ilightbox-next"}else if("prev"==e){if(!t.items[s])return!1;l=i.prevPhoto,c=i.holder,u=i.nextPhoto,h="ilightbox-next",d="ilightbox-prev"}"function"==typeof o.callback.onBeforeChange&&o.callback.onBeforeChange.call(t,t.ui),"next"==e?i.nextLock=!0:i.prevLock=!0;var p=$("div.ilightbox-caption",c),f=$("div.ilightbox-social",c);if(p.length&&p.stop().fadeOut(r,function(){$(this).remove()}),f.length&&f.stop().fadeOut(r,function(){$(this).remove()}),t.items[s].caption){t.setCaption(t.items[s],l);var g=$("div.ilightbox-caption",l),m=parseInt(g.outerHeight()/l.outerHeight()*100);o.caption.start&&m<=50&&g.fadeIn(r)}var v=t.items[s].options.social;v&&(t.setSocial(v,t.items[s].URL,l),o.social.start&&$("div.ilightbox-social",l).fadeIn(o.effects.fadeSpeed)),$.each([l,c,u],function(e,t){t.removeClass("ilightbox-next ilightbox-prev")});var b=l.data("offset"),x=a.width-o.styles.pageOffsetX,w=a.height-o.styles.pageOffsetY,y=b.newDims.width,A=b.newDims.height,k=b.thumbsOffset,S=b.diff,T=parseInt(w/2-A/2-S.H-k.H/2),L=parseInt(x/2-y/2-S.W-k.W/2);l.css(transform,gpuAcceleration).animate({top:T,left:L,opacity:1},r,i.isSwipe?"easeOutCirc":"easeInOutCirc",function(){l.css(transform,"")}),$("div.ilightbox-container",l).animate({width:y,height:A},r,i.isSwipe?"easeOutCirc":"easeInOutCirc");var I=c.data("offset"),C=I.object;S=I.diff,y=I.newDims.width,A=I.newDims.height,y=parseInt(y*o.styles["next"==e?"prevScale":"nextScale"]),A=parseInt(A*o.styles["next"==e?"prevScale":"nextScale"]),T="horizontal"==n?parseInt(w/2-C.offsetY-A/2-S.H-k.H/2):parseInt(w-C.offsetX-S.H-k.H/2),L="prev"==e?"horizontal"==n?parseInt(x-C.offsetX-S.W-k.W/2):parseInt(x/2-y/2-S.W-C.offsetY-k.W/2):(T="horizontal"==n?T:parseInt(C.offsetX-S.H-A-k.H/2),"horizontal"==n?parseInt(C.offsetX-S.W-y-k.W/2):parseInt(x/2-C.offsetY-y/2-S.W-k.W/2)),$("div.ilightbox-container",c).animate({width:y,height:A},r,i.isSwipe?"easeOutCirc":"easeInOutCirc"),c.addClass(h).css(transform,gpuAcceleration).animate({top:T,left:L,opacity:o.styles.prevOpacity},r,i.isSwipe?"easeOutCirc":"easeInOutCirc",function(){c.css(transform,""),$(".ilightbox-thumbnail",i.thumbnails).removeClass("ilightbox-active").eq(s).addClass("ilightbox-active"),t.positionThumbnails(),t.items[s]&&(t.items[s].options.mousewheel?i.lockWheel=!1:i.lockWheel=!0,t.items[s].options.swipe?i.lockSwipe=!1:i.lockSwipe=!0),i.isSwipe=!1,-1!==["iframe","video"].indexOf(t.items[i.current].type)&&$("div.ilightbox-container",c).empty(),"next"==e?(i.nextPhoto=u,i.prevPhoto=c,i.holder=l,i.nextPhoto.hide(),i.next=i.next+1,i.prev=i.current,i.current=i.current+1,o.infinite&&(i.current>i.total-1&&(i.current=0),i.current==i.total-1&&(i.next=0),0==i.current&&(i.prev=i.total-1)),t.createUI(),t.items[i.next]?t.loadContent(t.items[i.next],"next"):i.nextLock=!1):(i.prevPhoto=u,i.nextPhoto=c,i.holder=l,i.prevPhoto.hide(),i.next=i.current,i.current=i.prev,i.prev=i.current-1,o.infinite&&(i.current==i.total-1&&(i.next=0),0==i.current&&(i.prev=i.total-1)),t.createUI(),t.items[i.prev]?t.loadContent(t.items[i.prev],"prev"):i.prevLock=!1),-1!==["iframe","video"].indexOf(t.items[i.current].type)&&t.loadContent(t.items[i.current],"current"),o.linkId&&setTimeout(function(){i.hashLock=!1},55),o.infinite||(i.nextButton.add(i.prevButton).add(i.innerPrevButton).add(i.innerNextButton).removeClass("disabled"),0==i.current&&i.prevButton.add(i.innerPrevButton).addClass("disabled"),i.current>=i.total-1&&i.nextButton.add(i.innerNextButton).addClass("disabled")),t.repositionPhoto(),t.resetCycle(),"function"==typeof o.callback.onAfterChange&&o.callback.onAfterChange.call(t,t.ui)}),T="horizontal"==n?getPixel(u,"top"):"next"==e?parseInt(-w/2-u.outerHeight()):parseInt(2*T),L="horizontal"==n?"next"==e?parseInt(-x/2-u.outerWidth()):parseInt(2*L):getPixel(u,"left"),u.css(transform,gpuAcceleration).animate({top:T,left:L,opacity:o.styles.nextOpacity},r,i.isSwipe?"easeOutCirc":"easeInOutCirc",function(){u.css(transform,"")}).addClass(d)},setCaption:function(e,t){var i=$('<div class="ilightbox-caption"></div>');e.caption&&(i.html(e.caption),$("div.ilightbox-container",t).append(i))},normalizeSocial:function(n,a){this.vars;var r=this.options,s=window.location.href;return $.each(n,function(e,t){if(!t)return!0;var i,o;switch(e.toLowerCase()){case"facebook":i="http://www.facebook.com/share.php?v=4&src=bm&u={URL}",o="Share on Facebook";break;case"twitter":i="http://twitter.com/home?status={URL}",o="Share on Twitter";break;case"googleplus":i="https://plus.google.com/share?url={URL}",o="Share on Google+";break;case"delicious":i="http://delicious.com/post?url={URL}",o="Share on Delicious";break;case"digg":i="http://digg.com/submit?phase=2&url={URL}",o="Share on Digg";break;case"reddit":i="http://reddit.com/submit?url={URL}",o="Share on reddit"}n[e]={URL:t.URL&&absolutizeURI(s,t.URL)||r.linkId&&window.location.href||"string"!=typeof a&&s||a&&absolutizeURI(s,a)||s,source:t.source||i||t.URL&&absolutizeURI(s,t.URL)||a&&absolutizeURI(s,a),text:t.text||o||"Share on "+e,width:void 0===t.width||isNaN(t.width)?640:parseInt(t.width),height:t.height||360}}),n},setSocial:function(e,t,i){var o=$('<div class="ilightbox-social"></div>'),n="<ul>";e=this.normalizeSocial(e,t),$.each(e,function(e,t){e.toLowerCase();var i=t.source.replace(/\{URL\}/g,encodeURIComponent(t.URL).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+"));n+='<li class="'+e+'"><a href="'+i+'" onclick="javascript:window.open(this.href'+(t.width<=0||t.height<=0?"":", '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+t.height+",width="+t.width+",left=40,top=40'")+');return false;" title="'+t.text+'" target="_blank"></a></li>'}),n+="</ul>",o.html(n),$("div.ilightbox-container",i).append(o)},fullScreenAction:function(){this.vars;fullScreenApi.supportsFullScreen?fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen(document.documentElement):fullScreenApi.requestFullScreen(document.documentElement):this.doFullscreen()},doFullscreen:function(){var e=this,t=e.vars,i=getViewport(),o=e.options;if(o.fullAlone){var n=t.holder,a=e.items[t.current],r=i.width,s=i.height,l=[n,t.nextPhoto,t.prevPhoto,t.nextButton,t.prevButton,t.overlay,t.toolbar,t.thumbnails,t.loader],c=[t.nextPhoto,t.prevPhoto,t.nextButton,t.prevButton,t.loader,t.thumbnails];if(t.isInFullScreen)t.isInFullScreen=t.lockKey=t.lockWheel=t.lockSwipe=!1,t.overlay.css({opacity:e.options.overlay.opacity}),$.each(c,function(e,t){t.show()}),t.fullScreenButton.attr("title",o.text.enterFullscreen),n.data({naturalWidth:n.data("naturalWidthOld"),naturalHeight:n.data("naturalHeightOld"),naturalWidthOld:null,naturalHeightOld:null}),$.each(l,function(e,t){t.removeClass("ilightbox-fullscreen")}),"function"==typeof o.callback.onExitFullScreen&&o.callback.onExitFullScreen.call(e,e.ui);else{if(t.isInFullScreen=t.lockKey=t.lockWheel=t.lockSwipe=!0,t.overlay.css({opacity:1}),$.each(c,function(e,t){t.hide()}),t.fullScreenButton.attr("title",o.text.exitFullscreen),-1!=o.fullStretchTypes.indexOf(a.type))n.data({naturalWidthOld:n.data("naturalWidth"),naturalHeightOld:n.data("naturalHeight"),naturalWidth:r,naturalHeight:s});else{i=a.options.fullViewPort||o.fullViewPort||"";var u=r,h=s,d=n.data("naturalWidth"),p=n.data("naturalHeight");if("fill"==i.toLowerCase())(h=u/d*p)<s&&(u=s/p*d,h=s);else if("fit"==i.toLowerCase()){u=(f=e.getNewDimenstions(u,h,d,p,!0)).width,h=f.height}else if("stretch"==i.toLowerCase())u=u,h=h;else{var f,g=u<d||h<p;u=(f=e.getNewDimenstions(u,h,d,p,g)).width,h=f.height}n.data({naturalWidthOld:n.data("naturalWidth"),naturalHeightOld:n.data("naturalHeight"),naturalWidth:u,naturalHeight:h})}$.each(l,function(e,t){t.addClass("ilightbox-fullscreen")}),"function"==typeof o.callback.onEnterFullScreen&&o.callback.onEnterFullScreen.call(e,e.ui)}}else t.isInFullScreen?t.isInFullScreen=!1:t.isInFullScreen=!0;e.repositionPhoto(!0)},closeAction:function(){var e=this.vars,t=this.options;$win.unbind(".iLightBox"),$doc.off(".iLightBox"),e.isInFullScreen&&fullScreenApi.cancelFullScreen(document.documentElement),$(".ilightbox-overlay, .ilightbox-holder, .ilightbox-thumbnails").off(".iLightBox"),t.hide.effect?e.overlay.stop().fadeOut(t.hide.speed,function(){e.overlay.remove(),e.BODY.removeClass("ilightbox-noscroll").off(".iLightBox")}):(e.overlay.remove(),e.BODY.removeClass("ilightbox-noscroll").off(".iLightBox"));var i=[e.toolbar,e.holder,e.nextPhoto,e.prevPhoto,e.nextButton,e.prevButton,e.loader,e.thumbnails];$.each(i,function(e,t){t.removeAttr("style").remove()}),e.dontGenerateThumbs=e.isInFullScreen=!1,window.iLightBox=null,t.linkId&&(e.hashLock=!0,removeHash(),setTimeout(function(){e.hashLock=!1},55)),"function"==typeof t.callback.onHide&&t.callback.onHide.call(this,this.ui)},repositionPhoto:function(){var e=this,t=e.vars,i=e.options,o=i.path.toLowerCase(),n=getViewport(),a=n.width,r=n.height,s=t.isInFullScreen&&i.fullAlone||t.isMobile?0:"horizontal"==o?0:t.thumbnails.outerWidth(),l=t.isMobile?t.toolbar.outerHeight():t.isInFullScreen&&i.fullAlone?0:"horizontal"==o?t.thumbnails.outerHeight():0,c=t.isInFullScreen&&i.fullAlone?a:a-i.styles.pageOffsetX,u=t.isInFullScreen&&i.fullAlone?r:r-i.styles.pageOffsetY,h="horizontal"==o?parseInt(e.items[t.next]||e.items[t.prev]?2*(i.styles.nextOffsetX+i.styles.prevOffsetX):c/10<=30?30:c/10):parseInt(c/10<=30?30:c/10)+s,d="horizontal"==o?parseInt(u/10<=30?30:u/10)+l:parseInt(e.items[t.next]||e.items[t.prev]?2*(i.styles.nextOffsetX+i.styles.prevOffsetX):u/10<=30?30:u/10),p={type:"current",width:c,height:u,item:e.items[t.current],offsetW:h,offsetH:d,thumbsOffsetW:s,thumbsOffsetH:l,animate:arguments.length,holder:t.holder};e.repositionEl(p),e.items[t.next]&&(p=$.extend(p,{type:"next",item:e.items[t.next],offsetX:i.styles.nextOffsetX,offsetY:i.styles.nextOffsetY,holder:t.nextPhoto}),e.repositionEl(p)),e.items[t.prev]&&(p=$.extend(p,{type:"prev",item:e.items[t.prev],offsetX:i.styles.prevOffsetX,offsetY:i.styles.prevOffsetY,holder:t.prevPhoto}),e.repositionEl(p));var f="horizontal"==o?{left:parseInt(c/2-t.loader.outerWidth()/2)}:{top:parseInt(u/2-t.loader.outerHeight()/2)};t.loader.css(f)},repositionEl:function(e){var t=this.vars,i=this.options,o=i.path.toLowerCase(),n="current"==e.type&&t.isInFullScreen&&i.fullAlone?e.width:e.width-e.offsetW,a="current"==e.type&&t.isInFullScreen&&i.fullAlone?e.height:e.height-e.offsetH,r=e.item,s=e.item.options,l=e.holder,c=e.offsetX||0,u=e.offsetY||0,h=e.thumbsOffsetW,d=e.thumbsOffsetH;"current"==e.type?("number"==typeof s.width&&s.width&&(n=t.isInFullScreen&&i.fullAlone&&(-1!=i.fullStretchTypes.indexOf(r.type)||s.fullViewPort||i.fullViewPort)?n:s.width>n?n:s.width),"number"==typeof s.height&&s.height&&(a=t.isInFullScreen&&i.fullAlone&&(-1!=i.fullStretchTypes.indexOf(r.type)||s.fullViewPort||i.fullViewPort)?a:s.height>a?a:s.height)):("number"==typeof s.width&&s.width&&(n=s.width>n?n:s.width),"number"==typeof s.height&&s.height&&(a=s.height>a?a:s.height)),i.innerToolbar&&(a=parseInt(a-$(".ilightbox-inner-toolbar",l).outerHeight()));var p="string"==typeof s.width&&-1!=s.width.indexOf("%")?percentToValue(parseInt(s.width.replace("%","")),e.width):l.data("naturalWidth"),f="string"==typeof s.height&&-1!=s.height.indexOf("%")?percentToValue(parseInt(s.height.replace("%","")),e.height):l.data("naturalHeight"),g="string"==typeof s.width&&-1!=s.width.indexOf("%")||"string"==typeof s.height&&-1!=s.height.indexOf("%")?{width:p,height:f}:this.getNewDimenstions(n,a,p,f),m=$.extend({},g,{});f="prev"==e.type||"next"==e.type?(p=parseInt(g.width*("next"==e.type?i.styles.nextScale:i.styles.prevScale)),parseInt(g.height*("next"==e.type?i.styles.nextScale:i.styles.prevScale))):(p=g.width,g.height);var v=parseInt((getPixel(l,"padding-left")+getPixel(l,"padding-right")+getPixel(l,"border-left-width")+getPixel(l,"border-right-width"))/2),b=parseInt((getPixel(l,"padding-top")+getPixel(l,"padding-bottom")+getPixel(l,"border-top-width")+getPixel(l,"border-bottom-width")+($(".ilightbox-inner-toolbar",l).outerHeight()||0))/2);switch(e.type){case"current":var x=parseInt(e.height/2-f/2-b-d/2),w=parseInt(e.width/2-p/2-v-h/2);break;case"next":x="horizontal"==o?parseInt(e.height/2-u-f/2-b-d/2):parseInt(e.height-c-b-d/2),w="horizontal"==o?parseInt(e.width-c-v-h/2):parseInt(e.width/2-p/2-v-u-h/2);break;case"prev":x="horizontal"==o?parseInt(e.height/2-u-f/2-b-d/2):parseInt(c-b-f-d/2),w="horizontal"==o?parseInt(c-v-p-h/2):parseInt(e.width/2-u-p/2-v-h/2)}l.data("offset",{top:x,left:w,newDims:m,diff:{W:v,H:b},thumbsOffset:{W:h,H:d},object:e}),0<e.animate&&i.effects.reposition?(l.css(transform,gpuAcceleration).stop().animate({top:x,left:w},i.effects.repositionSpeed,"easeOutCirc",function(){l.css(transform,"")}),$("div.ilightbox-container",l).stop().animate({width:p,height:f},i.effects.repositionSpeed,"easeOutCirc"),$("div.ilightbox-inner-toolbar",l).stop().animate({width:p},i.effects.repositionSpeed,"easeOutCirc",function(){$(this).css("overflow","visible")})):(l.css({top:x,left:w}),$("div.ilightbox-container",l).css({width:p,height:f}),$("div.ilightbox-inner-toolbar",l).css({width:p}))},resume:function(e){var t=this,i=t.vars,o=t.options;!o.slideshow.pauseTime||o.controls.slideshow&&i.total<=1||e<i.isPaused||(i.isPaused=0,i.cycleID&&(i.cycleID=clearTimeout(i.cycleID)),i.cycleID=setTimeout(function(){i.current==i.total-1?t.goTo(0):t.moveTo("next")},o.slideshow.pauseTime))},pause:function(e){var t=this.vars;this.options;e<t.isPaused||(t.isPaused=e||100,t.cycleID&&(t.cycleID=clearTimeout(t.cycleID)))},resetCycle:function(){var e=this.vars;this.options.controls.slideshow&&e.cycleID&&!e.isPaused&&this.resume()},getNewDimenstions:function(e,t,i,o,n){var a=this;return factor=e?t?min(e/i,t/o):e/i:t/o,n||(factor>a.options.maxScale?factor=a.options.maxScale:factor<a.options.minScale&&(factor=a.options.minScale)),{width:a.options.keepAspectRatio?round(i*factor):e,height:a.options.keepAspectRatio?round(o*factor):t,ratio:factor}},setOption:function(e){this.options=$.extend(!0,this.options,e||{}),this.refresh()},availPlugins:function(){var e=document.createElement("video");this.plugins={flash:!isMobile,quicktime:0<=parseInt(PluginDetect.getVersion("QuickTime")),html5H264:!(!e.canPlayType||!e.canPlayType("video/mp4").replace(/no/,"")),html5WebM:!(!e.canPlayType||!e.canPlayType("video/webm").replace(/no/,"")),html5Vorbis:!(!e.canPlayType||!e.canPlayType("video/ogg").replace(/no/,"")),html5QuickTime:!(!e.canPlayType||!e.canPlayType("video/quicktime").replace(/no/,""))}},addContent:function(e,t){var i=this;switch(t.type){case"video":var o=!1,n=t.videoType,a=t.options.html5video;("video/mp4"==n||"mp4"==t.ext||"m4v"==t.ext||a.h264)&&i.plugins.html5H264?(t.ext="mp4",t.URL=a.h264||t.URL):a.webm&&i.plugins.html5WebM?(t.ext="webm",t.URL=a.webm||t.URL):a.ogg&&i.plugins.html5Vorbis&&(t.ext="ogv",t.URL=a.ogg||t.URL),!i.plugins.html5H264||"video/mp4"!=n&&"mp4"!=t.ext&&"m4v"!=t.ext?!i.plugins.html5WebM||"video/webm"!=n&&"webm"!=t.ext?!i.plugins.html5Vorbis||"video/ogg"!=n&&"ogv"!=t.ext?!i.plugins.html5QuickTime||"video/quicktime"!=n&&"mov"!=t.ext&&"qt"!=t.ext||(o=!0,n="video/quicktime"):(o=!0,n="video/ogg"):(o=!0,n="video/webm"):(o=!0,n="video/mp4"),o?l=$("<video />",{width:"100%",height:"100%",preload:a.preload,autoplay:a.autoplay,poster:a.poster,controls:a.controls}).append($("<source />",{src:t.URL,type:n})):i.plugins.quicktime?(l=$("<object />",{type:"video/quicktime",pluginspage:pluginspages.quicktime}).attr({data:t.URL,width:"100%",height:"100%"}).append($("<param />",{name:"src",value:t.URL})).append($("<param />",{name:"autoplay",value:"false"})).append($("<param />",{name:"loop",value:"false"})).append($("<param />",{name:"scale",value:"tofit"})),browser.msie&&(l=QT_GenerateOBJECTText(t.URL,"100%","100%","","SCALE","tofit","AUTOPLAY","false","LOOP","false"))):l=$("<span />",{class:"ilightbox-alert",html:i.options.errors.missingPlugin.replace("{pluginspage}",pluginspages.quicktime).replace("{type}","QuickTime")});break;case"flash":if(i.plugins.flash){var r="",s=0;t.options.flashvars?$.each(t.options.flashvars,function(e,t){0!=s&&(r+="&"),r+=e+"="+encodeURIComponent(t),s++}):r=null,l=$("<embed />").attr({type:"application/x-shockwave-flash",src:t.URL,width:"number"==typeof t.options.width&&t.options.width&&"1"==i.options.minScale&&"1"==i.options.maxScale?t.options.width:"100%",height:"number"==typeof t.options.height&&t.options.height&&"1"==i.options.minScale&&"1"==i.options.maxScale?t.options.height:"100%",quality:"high",bgcolor:"#000000",play:"true",loop:"true",menu:"true",wmode:"transparent",scale:"showall",allowScriptAccess:"always",allowFullScreen:"true",flashvars:r,fullscreen:"yes"})}else l=$("<span />",{class:"ilightbox-alert",html:i.options.errors.missingPlugin.replace("{pluginspage}",pluginspages.flash).replace("{type}","Adobe Flash player")});break;case"iframe":l=$("<iframe />").attr({width:"number"==typeof t.options.width&&t.options.width&&"1"==i.options.minScale&&"1"==i.options.maxScale?t.options.width:"100%",height:"number"==typeof t.options.height&&t.options.height&&"1"==i.options.minScale&&"1"==i.options.maxScale?t.options.height:"100%",src:t.URL,frameborder:0,hspace:0,vspace:0,scrolling:supportTouch?"auto":"scroll",webkitAllowFullScreen:"",mozallowfullscreen:"",allowFullScreen:""});break;case"inline":l=$('<div class="ilightbox-wrapper"></div>').html($(t.URL).clone(!0));break;case"html":var l,c=t.URL;if(c[0].nodeName)l=$('<div class="ilightbox-wrapper"></div>').html(c);else{var u=$(t.URL),h=u.selector?$("<div>"+u+"</div>"):u;l=$('<div class="ilightbox-wrapper"></div>').html(h)}}return $("div.ilightbox-container",e).empty().html(l),"video"===l[0].tagName.toLowerCase()&&browser.webkit&&setTimeout(function(){var e=l[0].currentSrc+"?"+floor(3e4*random());l[0].currentSrc=e,l[0].src=e}),l},ogpRecognition:function(e,a){var r=this,t=e.URL;r.showLoader(),doAjax(t,function(e){if(r.hideLoader(),e){var t=new Object;if(t.length=!1,t.url=e.url,200==e.status){var i=e.results,o=i.type,n=i.source;t.source=n.src,t.width=n.width&&parseInt(n.width)||0,t.height=n.height&&parseInt(n.height)||0,t.type=o,t.thumbnail=n.thumbnail||i.images&&i.images[0],t.html5video=i.html5video||{},t.length=!0,"application/x-shockwave-flash"==n.type?t.type="flash":-1!=n.type.indexOf("video/")?t.type="video":-1!=n.type.indexOf("/html")?t.type="iframe":-1!=n.type.indexOf("image/")&&(t.type="image")}else if(void 0!==e.response)throw e.response;a.call(this,!!t.length&&t)}})},hashChangeHandler:function(e){var t=this,i=t.vars,o=t.options,n=parseURI(e||window.location.href).hash,a=n.split("/"),r=a[1];if(!(i.hashLock||"#"+o.linkId!=a[0]&&1<n.length))if(r){var s=a[1]||0;if(t.items[s])(l=$(".ilightbox-overlay")).length&&l.attr("linkid")==o.linkId?t.goTo(s):t.itemsObject[s].trigger(supportTouch?"itap":"click");else(l=$(".ilightbox-overlay")).length&&t.closeAction()}else{var l;(l=$(".ilightbox-overlay")).length&&t.closeAction()}}},$.fn.iLightBox=function(){var e=arguments,t=$.isPlainObject(e[0])?e[0]:e[1],i=$.isArray(e[0])||"string"==typeof e[0]?e[0]:e[1];t=t||{};var o=$.extend(!0,{attr:"href",path:"vertical",skin:"dark",linkId:!1,infinite:!1,startFrom:0,randomStart:!1,keepAspectRatio:!0,maxScale:1,minScale:.2,innerToolbar:!1,smartRecognition:!1,mobileOptimizer:!0,fullAlone:!0,fullViewPort:null,fullStretchTypes:"flash, video",overlay:{blur:!0,opacity:.85},controls:{arrows:!1,slideshow:!1,toolbar:!0,fullscreen:!0,thumbnail:!0,keyboard:!0,mousewheel:!0,swipe:!0},keyboard:{left:!0,right:!0,up:!0,down:!0,esc:!0,shift_enter:!0},show:{effect:!0,speed:300,title:!0},hide:{effect:!0,speed:300},caption:{start:!0,show:"mouseenter",hide:"mouseleave"},social:{start:!0,show:"mouseenter",hide:"mouseleave",buttons:!1},styles:{pageOffsetX:0,pageOffsetY:0,nextOffsetX:45,nextOffsetY:0,nextOpacity:1,nextScale:1,prevOffsetX:45,prevOffsetY:0,prevOpacity:1,prevScale:1},thumbnails:{maxWidth:120,maxHeight:80,normalOpacity:1,activeOpacity:.6},effects:{reposition:!0,repositionSpeed:200,switchSpeed:500,loadedFadeSpeed:180,fadeSpeed:200},slideshow:{pauseTime:5e3,pauseOnHover:!1,startPaused:!0},text:{close:"Press Esc to close",enterFullscreen:"Enter Fullscreen (Shift+Enter)",exitFullscreen:"Exit Fullscreen (Shift+Enter)",slideShow:"Slideshow",next:"Next",previous:"Previous"},errors:{loadImage:"An error occurred when trying to load photo.",loadContents:"An error occurred when trying to load contents.",missingPlugin:"The content your are attempting to view requires the <a href='{pluginspage}' target='_blank'>{type} plugin</a>."},ajaxSetup:{url:"",beforeSend:function(e,t){},cache:!1,complete:function(e,t){},crossDomain:!1,error:function(e,t,i){},success:function(e,t,i){},global:!0,ifModified:!1,username:null,password:null,type:"GET"},callback:{}},t),n=!(!$.isArray(i)&&"string"!=typeof i);if(i=$.isArray(i)?i:new Array,"string"==typeof e[0]&&(i[0]=e[0]),version_compare($.fn.jquery,"1.8",">=")){var a=new iLightBox($(this),o,i,n);return{close:function(){a.closeAction()},fullscreen:function(){a.fullScreenAction()},moveNext:function(){a.moveTo("next")},movePrev:function(){a.moveTo("prev")},goTo:function(e){a.goTo(e)},refresh:function(){a.refresh()},reposition:function(){0<arguments.length?a.repositionPhoto(!0):a.repositionPhoto()},setOption:function(e){a.setOption(e)},destroy:function(){a.closeAction(),a.dispatchItemsEvents()}}}throw"The jQuery version that was loaded is too old. iLightBox requires jQuery 1.8+"},$.iLightBox=function(){return $.fn.iLightBox(arguments[0],arguments[1])},$.extend($.easing,{easeInCirc:function(e,t,i,o,n){return-o*(sqrt(1-(t/=n)*t)-1)+i},easeOutCirc:function(e,t,i,o,n){return o*sqrt(1-(t=t/n-1)*t)+i},easeInOutCirc:function(e,t,i,o,n){return(t/=n/2)<1?-o/2*(sqrt(1-t*t)-1)+i:o/2*(sqrt(1-(t-=2)*t)+1)+i}}),function(){$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){$.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},$.attrFn&&($.attrFn[t]=!0)});var e="touchstart.iTap",a="touchend.iTap";$.event.special.itap={setup:function(){var i,o,n=this,t=$(this);t.bind(e,function(e){i=getScrollXY(),t.one(a,function(e){o=getScrollXY();var t=e||window.event;(e=$.event.fix(t)).type="itap",i&&o&&i.x==o.x&&i.y==o.y&&($.event.dispatch||$.event.handle).call(n,e),i=o=undefined})})},teardown:function(){$(this).unbind(e)}}}(),function(){if(fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" "),void 0!==document.cancelFullScreen)fullScreenApi.supportsFullScreen=!0;else for(var e=0,t=browserPrefixes.length;e<t;e++)if(fullScreenApi.prefix=browserPrefixes[e],void 0!==document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.supportsFullScreen=!0;break}fullScreenApi.supportsFullScreen&&(fullScreenApi.fullScreenEventName=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancelFullScreen=function(e){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()})}(),ti=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent),browser={},ti.browser&&(browser[ti.browser]=!0,browser.version=ti.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),wi=["","webkit","moz","ms","o"],xi=document.createElement("div"),transform=yi("transform")||"",gpuAcceleration=yi("perspective")?"translateZ(0) ":"";var PluginDetect={version:"0.7.9",name:"PluginDetect",handler:function(e,t,i){return function(){e(t,i)}},openTag:"<",isDefined:function(e){return void 0!==e},isArray:function(e){return/array/i.test(Object.prototype.toString.call(e))},isFunc:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNum:function(e){return"number"==typeof e},isStrNum:function(e){return"string"==typeof e&&/\d/.test(e)},getNumRegx:/[\d][\d\.\_,-]*/,splitNumRegx:/[\.\_,-]/g,getNum:function(e,t){var i=this.isStrNum(e)?(this.isDefined(t)?new RegExp(t):this.getNumRegx).exec(e):null;return i?i[0]:null},compareNums:function(e,t,i){var o,n,a,r=this,s=parseInt;if(r.isStrNum(e)&&r.isStrNum(t)){if(r.isDefined(i)&&i.compareNums)return i.compareNums(e,t);for(o=e.split(r.splitNumRegx),n=t.split(r.splitNumRegx),a=0;a<min(o.length,n.length);a++){if(s(o[a],10)>s(n[a],10))return 1;if(s(o[a],10)<s(n[a],10))return-1}}return 0},formatNum:function(e,t){var i,o;if(!this.isStrNum(e))return null;for(this.isNum(t)||(t=4),t--,o=e.replace(/\s/g,"").split(this.splitNumRegx).concat(["0","0","0","0"]),i=0;i<4;i++)/^(0+)(.+)$/.test(o[i])&&(o[i]=RegExp.$2),(t<i||!/\d/.test(o[i]))&&(o[i]="0");return o.slice(0,4).join(",")},$$hasMimeType:function(a){return function(e){if(!a.isIE&&e){var t,i,o,n=a.isArray(e)?e:a.isString(e)?[e]:[];for(o=0;o<n.length;o++)if(a.isString(n[o])&&/[^\s]/.test(n[o])&&(i=(t=navigator.mimeTypes[n[o]])?t.enabledPlugin:0)&&(i.name||i.description))return t}return null}},findNavPlugin:function(e,t,i){var o,n,a,r=new RegExp(e,"i"),s=!this.isDefined(t)||t?/\d/:0,l=i?new RegExp(i,"i"):0,c=navigator.plugins;for(o=0;o<c.length;o++)if(a=c[o].description||"",n=c[o].name||"",(r.test(a)&&(!s||s.test(RegExp.leftContext+RegExp.rightContext))||r.test(n)&&(!s||s.test(RegExp.leftContext+RegExp.rightContext)))&&(!l||!l.test(a)&&!l.test(n)))return c[o];return null},getMimeEnabledPlugin:function(e,t,i){var o,n,a,r,s=new RegExp(t,"i"),l=i?new RegExp(i,"i"):0,c=this.isString(e)?[e]:e;for(r=0;r<c.length;r++)if((o=this.hasMimeType(c[r]))&&(o=o.enabledPlugin)&&(a=o.description||"",n=o.name||"",(s.test(a)||s.test(n))&&(!l||!l.test(a)&&!l.test(n))))return o;return 0},getPluginFileVersion:function(e,t){var i,o,n,a,r=this,s=-1;if(2<r.OS||!e||!e.version||!(i=r.getNum(e.version)))return t;if(!t)return i;for(i=r.formatNum(i),o=(t=r.formatNum(t)).split(r.splitNumRegx),n=i.split(r.splitNumRegx),a=0;a<o.length;a++){if(-1<s&&s<a&&"0"!=o[a])return t;if(n[a]!=o[a]&&(-1==s&&(s=a),"0"!=o[a]))return t}return i},AXO:window.ActiveXObject,getAXO:function(e){var t=null;try{t=new this.AXO(e)}catch(e){}return t},convertFuncs:function(e){var t,i,o=/^[\$][\$]/;for(t in e)if(o.test(t))try{0<(i=t.slice(2)).length&&!e[i]&&(e[i]=e[t](e),delete e[t])}catch(e){}},initObj:function(e,t,i){var o,n;if(e){if(1==e[t[0]]||i)for(o=0;o<t.length;o+=2)e[t[o]]=t[o+1];for(o in e)(n=e[o])&&1==n[t[0]]&&this.initObj(n,t)}},initScript:function(){var e=this,t=navigator,i=document,o=t.userAgent||"",n=t.vendor||"",a=t.platform||"",r=t.product||"";for(u in e.initObj(e,["$",e]),e.Plugins)e.Plugins[u]&&e.initObj(e.Plugins[u],["$",e,"$$",e.Plugins[u]],1);if(e.convertFuncs(e),e.OS=100,a){var s=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(u=s.length-2;0<=u;u-=2)if(s[u]&&new RegExp(s[u],"i").test(a)){e.OS=s[u+1];break}}if(e.head=i.getElementsByTagName("head")[0]||i.getElementsByTagName("body")[0]||i.body||null,e.isIE=new Function("return/*@cc_on!@*/!1")(),e.verIE=e.isIE&&/MSIE\s*(\d+\.?\d*)/i.test(o)?parseFloat(RegExp.$1,10):null,e.verIEfull=null,e.docModeIE=null,e.isIE){var l,c=document.createElement("div");try{c.style.behavior="url(#default#clientcaps)",e.verIEfull=c.getComponentVersion("{89820200-ECBD-11CF-8B85-00AA005B4383}","componentid").replace(/,/g,".")}catch(e){}l=parseFloat(e.verIEfull||"0",10),e.docModeIE=i.documentMode||(/back/i.test(i.compatMode||"")?5:l)||e.verIE,e.verIE=l||e.docModeIE}if(e.ActiveXEnabled=!1,e.isIE){var u,h=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(u=0;u<h.length;u++)if(e.getAXO(h[u])){e.ActiveXEnabled=!0;break}}e.isGecko=/Gecko/i.test(r)&&/Gecko\s*\/\s*\d/i.test(o),e.verGecko=e.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(o)?RegExp.$1:"0.9"):null,e.isChrome=/Chrome\s*\/\s*(\d[\d\.]*)/i.test(o),e.verChrome=e.isChrome?e.formatNum(RegExp.$1):null,e.isSafari=(/Apple/i.test(n)||!n&&!e.isChrome)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(o),e.verSafari=e.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(o)?e.formatNum(RegExp.$1):null,e.isOpera=/Opera\s*[\/]?\s*(\d+\.?\d*)/i.test(o),e.verOpera=e.isOpera&&(/Version\s*\/\s*(\d+\.?\d*)/i.test(o),1)?parseFloat(RegExp.$1,10):null,e.addWinEvent("load",e.handler(e.runWLfuncs,e))},init:function(e){var t,i=this,o={status:-3,plugin:0};return i.isString(e)?1==e.length?(i.getVersionDelimiter=e,o):(e=e.toLowerCase().replace(/\s/g,""),(t=i.Plugins[e])&&t.getVersion?(o.plugin=t,i.isDefined(t.installed)||(t.installed=null,t.version=null,t.version0=null,t.getVersionDone=null,t.pluginName=e),i.garbage=!1,i.isIE&&!i.ActiveXEnabled&&"java"!==e?o.status=-2:o.status=1,o):o):o},fPush:function(e,t){this.isArray(t)&&(this.isFunc(e)||this.isArray(e)&&0<e.length&&this.isFunc(e[0]))&&t.push(e)},callArray:function(e){var t;if(this.isArray(e))for(t=0;t<e.length;t++){if(null===e[t])return;this.call(e[t]),e[t]=null}},call:function(e){var t=this,i=t.isArray(e)?e.length:-1;0<i&&t.isFunc(e[0])?e[0](t,1<i?e[1]:0,2<i?e[2]:0,3<i?e[3]:0):t.isFunc(e)&&e(t)},getVersionDelimiter:",",$$getVersion:function(r){return function(e,t,i){var o,n,a=r.init(e);return a.status<0?null:(1!=(o=a.plugin).getVersionDone&&(o.getVersion(null,t,i),null===o.getVersionDone&&(o.getVersionDone=1)),r.cleanup(),n=(n=o.version||o.version0)?n.replace(r.splitNumRegx,r.getVersionDelimiter):n)}},cleanup:function(){this.garbage&&this.isDefined(window.CollectGarbage)&&window.CollectGarbage()},isActiveXObject:function(e,t){var i=this,o=!1,n='<object width="1" height="1" style="display:none" '+e.getCodeBaseVersion(t)+">"+e.HTML+i.openTag+"/object>";if(!i.head)return o;i.head.insertBefore(document.createElement("object"),i.head.firstChild),i.head.firstChild.outerHTML=n;try{i.head.firstChild.classid=e.classID}catch(e){}try{i.head.firstChild.object&&(o=!0)}catch(e){}try{o&&i.head.firstChild.readyState<4&&(i.garbage=!0)}catch(e){}return i.head.removeChild(i.head.firstChild),o},codebaseSearch:function(o,e){var n=this;if(!n.ActiveXEnabled||!o)return null;o.BIfuncs&&o.BIfuncs.length&&null!==o.BIfuncs[o.BIfuncs.length-1]&&n.callArray(o.BIfuncs);var t,i=o.SEARCH;if(n.isStrNum(e))return!!(i.match&&i.min&&n.compareNums(e,i.min)<=0)||!(i.match&&i.max&&0<=n.compareNums(e,i.max))&&((t=n.isActiveXObject(o,e))&&(!i.min||0<n.compareNums(e,i.min))&&(i.min=e),t||i.max&&!(n.compareNums(e,i.max)<0)||(i.max=e),t);function a(e,t){var i=[].concat(h);return i[e]=t,n.isActiveXObject(o,i.join(","))}var r,s,l,c,u,h=[0,0,0,0],d=[].concat(i.digits),p=i.min?1:0;if(i.max){for(c=i.max.split(n.splitNumRegx),r=0;r<c.length;r++)c[r]=parseInt(c[r],10);c[0]<d[0]&&(d[0]=c[0])}if(i.min){for(u=i.min.split(n.splitNumRegx),r=0;r<u.length;r++)u[r]=parseInt(u[r],10);u[0]>h[0]&&(h[0]=u[0])}if(u&&c)for(r=1;r<u.length&&u[r-1]==c[r-1];r++)c[r]<d[r]&&(d[r]=c[r]),u[r]>h[r]&&(h[r]=u[r]);if(i.max)for(r=1;r<d.length;r++)if(0<c[r]&&0==d[r]&&d[r-1]<i.digits[r-1]){d[r-1]+=1;break}for(r=0;r<d.length;r++){for(l={},s=0;s<20&&!(d[r]-h[r]<1)&&!l["a"+(t=round((d[r]+h[r])/2))];s++)l["a"+t]=1,a(r,t)?(h[r]=t,p=1):d[r]=t;if(d[r]=h[r],!p&&a(r,h[r])&&(p=1),!p)break}return p?h.join(","):null},addWinEvent:function(e,t){var i,o=window;this.isFunc(t)&&(o.addEventListener?o.addEventListener(e,t,!1):o.attachEvent?o.attachEvent("on"+e,t):(i=o["on"+e],o["on"+e]=this.winHandler(t,i)))},winHandler:function(e,t){return function(){e(),"function"==typeof t&&t()}},WLfuncs0:[],WLfuncs:[],runWLfuncs:function(e){e.winLoaded=!0,e.callArray(e.WLfuncs0),e.callArray(e.WLfuncs),e.onDoneEmptyDiv&&e.onDoneEmptyDiv()},winLoaded:!1,$$onWindowLoaded:function(t){return function(e){t.winLoaded?t.call(e):t.fPush(e,t.WLfuncs)}},div:null,divID:"plugindetect",divWidth:50,pluginSize:1,emptyDiv:function(){var e,t,i,o,n,a=this;if(a.div&&a.div.childNodes)for(e=a.div.childNodes.length-1;0<=e;e--){if((i=a.div.childNodes[e])&&i.childNodes)for(t=i.childNodes.length-1;0<=t;t--){n=i.childNodes[t];try{i.removeChild(n)}catch(e){}}if(i)try{a.div.removeChild(i)}catch(e){}}if(a.div||(o=document.getElementById(a.divID))&&(a.div=o),a.div&&a.div.parentNode){try{a.div.parentNode.removeChild(a.div)}catch(e){}a.div=null}},DONEfuncs:[],onDoneEmptyDiv:function(){var e,t,i=this;if(i.winLoaded&&(!i.WLfuncs||!i.WLfuncs.length||null===i.WLfuncs[i.WLfuncs.length-1])){for(e in i)if((t=i[e])&&t.funcs){if(3==t.OTF)return;if(t.funcs.length&&null!==t.funcs[t.funcs.length-1])return}for(e=0;e<i.DONEfuncs.length;e++)i.callArray(i.DONEfuncs);i.emptyDiv()}},getWidth:function(e){if(e){var t=e.scrollWidth||e.offsetWidth;if(this.isNum(t))return t}return-1},getTagStatus:function(e,t,i,o){var n=this,a=e.span,r=n.getWidth(a),s=i.span,l=n.getWidth(s),c=t.span,u=n.getWidth(c);if(!(a&&s&&c&&n.getDOMobj(e)))return-2;if(l<u||r<0||l<0||u<0||u<=n.pluginSize||n.pluginSize<1)return 0;if(u<=r)return-1;try{if(r==n.pluginSize&&(!n.isIE||4==n.getDOMobj(e).readyState)){if(!e.winLoaded&&n.winLoaded)return 1;if(e.winLoaded&&n.isNum(o)&&(n.isNum(e.count)||(e.count=o),10<=o-e.count))return 1}}catch(e){}return 0},getDOMobj:function(e,t){var i=e?e.span:0,o=i&&i.firstChild?1:0;try{o&&t&&this.div.focus()}catch(e){}return o?i.firstChild:null},setStyle:function(e,t){var i,o=e.style;if(o&&t)for(i=0;i<t.length;i+=2)try{o[t[i]]=t[i+1]}catch(e){}},insertDivInBody:function(e,t){var i="pd33993399",o=null,n=t?window.top.document:window.document,a=n.getElementsByTagName("body")[0]||n.body;if(!a)try{n.write('<div id="'+i+'">.'+this.openTag+"/div>"),o=n.getElementById(i)}catch(e){}(a=n.getElementsByTagName("body")[0]||n.body)&&(a.insertBefore(e,a.firstChild),o&&a.removeChild(o))},insertHTML:function(e,t,i,o,n){var a,r,s,l=document,c=this,u=l.createElement("span"),h=["outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"];if(c.isDefined(o)||(o=""),c.isString(e)&&/[^\s]/.test(e)){for(e=e.toLowerCase().replace(/\s/g,""),a=c.openTag+e+' width="'+c.pluginSize+'" height="'+c.pluginSize+'" ',a+='style="outline-style:none;border-style:none;padding:0px;margin:0px;visibility:visible;display:inline;" ',r=0;r<t.length;r+=2)/[^\s]/.test(t[r+1])&&(a+=t[r]+'="'+t[r+1]+'" ');for(a+=">",r=0;r<i.length;r+=2)/[^\s]/.test(i[r+1])&&(a+=c.openTag+'param name="'+i[r]+'" value="'+i[r+1]+'" />');a+=o+c.openTag+"/"+e+">"}else a=o;if(c.div||((s=l.getElementById(c.divID))?c.div=s:(c.div=l.createElement("div"),c.div.id=c.divID),c.setStyle(c.div,h.concat(["width",c.divWidth+"px","height",c.pluginSize+3+"px","fontSize",c.pluginSize+3+"px","lineHeight",c.pluginSize+3+"px","verticalAlign","baseline","display","block"])),s||(c.setStyle(c.div,["position","absolute","right","0px","top","0px"]),c.insertDivInBody(c.div))),c.div&&c.div.parentNode){c.setStyle(u,h.concat(["fontSize",c.pluginSize+3+"px","lineHeight",c.pluginSize+3+"px","verticalAlign","baseline","display","inline"]));try{u.innerHTML=a}catch(e){}try{c.div.appendChild(u)}catch(e){}return{span:u,winLoaded:c.winLoaded,tagName:e,outerHTML:a}}return{span:null,winLoaded:c.winLoaded,tagName:"",outerHTML:a}},Plugins:{quicktime:{mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime"],progID:"QuickTimeCheckObject.QuickTimeCheck.1",progID0:"QuickTime.QuickTime",classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",minIEver:7,HTML:'<param name="src" value="" /><param name="controller" value="false" />',getCodeBaseVersion:function(e){return'codebase="#version='+e+'"'},SEARCH:{min:0,max:0,match:0,digits:[16,128,128,0]},getVersion:function(e){var t,i=this,o=i.$,n=null,a=null;if(o.isIE){if(o.isStrNum(e)&&(3<(t=e.split(o.splitNumRegx)).length&&0<parseInt(t[3],10)&&(t[3]="9999"),e=t.join(",")),o.isStrNum(e)&&o.verIE>=i.minIEver&&0<i.canUseIsMin())return i.installed=i.isMin(e),void(i.getVersionDone=0);i.getVersionDone=1,!n&&o.verIE>=i.minIEver&&(n=i.CDBASE2VER(o.codebaseSearch(i))),n||(a=o.getAXO(i.progID))&&a.QuickTimeVersion&&(n=a.QuickTimeVersion.toString(16),n=parseInt(n.charAt(0),16)+"."+parseInt(n.charAt(1),16)+"."+parseInt(n.charAt(2),16))}else o.hasMimeType(i.mimeType)&&(a=3!=o.OS?o.findNavPlugin("QuickTime.*Plug-?in",0):null)&&a.name&&(n=o.getNum(a.name));i.installed=n?1:a?0:-1,i.version=o.formatNum(n,3)},cdbaseUpper:["7,60,0,0","0,0,0,0"],cdbaseLower:["7,50,0,0",null],cdbase2ver:[function(e,t){var i=t.split(e.$.splitNumRegx);return[i[0],i[1].charAt(0),i[1].charAt(1),i[2]].join(",")},null],CDBASE2VER:function(e){var t,i=this,o=i.$,n=i.cdbaseUpper,a=i.cdbaseLower;if(e)for(e=o.formatNum(e),t=0;t<n.length;t++)if(n[t]&&o.compareNums(e,n[t])<0&&a[t]&&0<=o.compareNums(e,a[t])&&i.cdbase2ver[t])return i.cdbase2ver[t](i,e);return e},canUseIsMin:function(){var e,t=this,i=t.$,o=t.canUseIsMin,n=t.cdbaseUpper,a=t.cdbaseLower;if(!o.value)for(o.value=-1,e=0;e<n.length;e++){if(n[e]&&i.codebaseSearch(t,n[e])){o.value=1;break}if(a[e]&&i.codebaseSearch(t,a[e])){o.value=-1;break}}return t.SEARCH.match=1==o.value?1:0,o.value},isMin:function(e){return this.$.codebaseSearch(this,e)?.7:-1}},flash:{mimeType:"application/x-shockwave-flash",progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",getVersion:function(){function e(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null}var t,i,o,n,a=this,r=a.$,s=null,l=null,c=null;if(r.isIE){for(t=15;2<t;t--)if(l=r.getAXO(a.progID+"."+t)){c=t.toString();break}if(l=l||r.getAXO(a.progID),"6"==c)try{l.AllowScriptAccess="always"}catch(e){return"6,0,21,0"}try{s=e(l.GetVariable("$version"))}catch(e){}!s&&c&&(s=c)}else{if(o=r.hasMimeType(a.mimeType)){i=r.getDOMobj(r.insertHTML("object",["type",a.mimeType],[],"",a));try{s=r.getNum(i.GetVariable("$version"))}catch(e){}}s||((n=o?o.enabledPlugin:null)&&n.description&&(s=e(n.description)),s=s&&r.getPluginFileVersion(n,s))}return a.installed=s?1:-1,a.version=r.formatNum(s),!0}},shockwave:{mimeType:"application/x-director",progID:"SWCtl.SWCtl",classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",getVersion:function(){var e,t=null,i=null,o=this,n=o.$;if(n.isIE){try{i=n.getAXO(o.progID).ShockwaveVersion("")}catch(e){}n.isString(i)&&0<i.length?t=n.getNum(i):n.getAXO(o.progID+".8")?t="8":n.getAXO(o.progID+".7")?t="7":n.getAXO(o.progID+".1")&&(t="6")}else(e=n.findNavPlugin("Shockwave\\s*for\\s*Director"))&&e.description&&n.hasMimeType(o.mimeType)&&(t=n.getNum(e.description)),t=t&&n.getPluginFileVersion(e,t);o.installed=t?1:-1,o.version=n.formatNum(t)}},zz:0}};PluginDetect.initScript();var gArgCountErr='The "%%" function requires an even number of arguments.\nArguments should be in the form "atttributeName", "attributeValue", ...',gTagAttrs=null,gQTGeneratorVersion=1,Ln,Tn,_n,ao,Sn,Un,Wn,Xn,Kn,Mn,Nn,On;function AC_QuickTimeVersion(){return gQTGeneratorVersion}function _QTComplain(e,t){t=t.replace("%%",e),alert(t)}function _QTAddAttribute(e,t,i){var o;return null==(o=gTagAttrs[e+t])&&(o=gTagAttrs[t]),null!=o?(0==t.indexOf(e)&&null==i&&(i=t.substring(e.length)),null==i&&(i=t),i+'="'+o+'" '):""}function _QTAddObjectAttr(e,t){return 0==e.indexOf("emb#")?"":(0==e.indexOf("obj#")&&null==t&&(t=e.substring(4)),_QTAddAttribute("obj#",e,t))}function _QTAddEmbedAttr(e,t){return 0==e.indexOf("obj#")?"":(0==e.indexOf("emb#")&&null==t&&(t=e.substring(4)),_QTAddAttribute("emb#",e,t))}function _QTAddObjectParam(e,t){var i,o="",n=t?" />":">";return-1==e.indexOf("emb#")&&(null==(i=gTagAttrs["obj#"+e])&&(i=gTagAttrs[e]),0==e.indexOf("obj#")&&(e=e.substring(4)),null!=i&&(o='  <param name="'+e+'" value="'+i+'"'+n+"\n")),o}function _QTDeleteTagAttrs(){for(var e=0;e<arguments.length;e++){var t=arguments[e];delete gTagAttrs[t],delete gTagAttrs["emb#"+t],delete gTagAttrs["obj#"+t]}}function _QTGenerate(e,t,i){if(i.length<4||0!=i.length%2)return _QTComplain(e,gArgCountErr),"";(gTagAttrs=[]).src=i[0],gTagAttrs.width=i[1],gTagAttrs.height=i[2],gTagAttrs.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",gTagAttrs.pluginspage="http://www.apple.com/quicktime/download/",null!=(e=i[3])&&""!=e||(e="6,0,2,0"),gTagAttrs.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version="+e;for(var o,n=4;n<i.length;n+=2)o=i[n].toLowerCase(),e=i[n+1],"name"==o||"id"==o?gTagAttrs.name=e:gTagAttrs[o]=e;for(o in i="<object "+_QTAddObjectAttr("classid")+_QTAddObjectAttr("width")+_QTAddObjectAttr("height")+_QTAddObjectAttr("codebase")+_QTAddObjectAttr("name","id")+_QTAddObjectAttr("tabindex")+_QTAddObjectAttr("hspace")+_QTAddObjectAttr("vspace")+_QTAddObjectAttr("border")+_QTAddObjectAttr("align")+_QTAddObjectAttr("class")+_QTAddObjectAttr("title")+_QTAddObjectAttr("accesskey")+_QTAddObjectAttr("noexternaldata")+">\n"+_QTAddObjectParam("src",t),n="  <embed "+_QTAddEmbedAttr("src")+_QTAddEmbedAttr("width")+_QTAddEmbedAttr("height")+_QTAddEmbedAttr("pluginspage")+_QTAddEmbedAttr("name")+_QTAddEmbedAttr("align")+_QTAddEmbedAttr("tabindex"),_QTDeleteTagAttrs("src","width","height","pluginspage","classid","codebase","name","tabindex","hspace","vspace","border","align","noexternaldata","class","title","accesskey"),gTagAttrs)null!=(e=gTagAttrs[o])&&(n+=_QTAddEmbedAttr(o),i+=_QTAddObjectParam(o,t));return i+n+"> </embed>\n</object>"}function QT_GenerateOBJECTText(){return _QTGenerate("QT_GenerateOBJECTText",!1,arguments)}function Jn(e){return"#"+(e=e||location.href).replace(/^[^#]*#?(.*)$/,"$1")}function Rn(){var e=Jn(),t=Xn(Un);e!==Un?(Wn(Un=e,t),$(window).trigger("iLightBoxHashChange")):t!==Un&&(location.href=location.href.replace(/#.*/,"")+t),Tn=setTimeout(Rn,$.fn.iLightBoxHashChange.delay)}function Vn(e){return e}Kn=document,Mn=$.event.special,Nn=Kn.documentMode,On="oniLightBoxHashChange"in window&&(void 0===Nn||7<Nn),$.fn.iLightBoxHashChange=function(e){return e?this.bind("iLightBoxHashChange",e):this.trigger("iLightBoxHashChange")},$.fn.iLightBoxHashChange.delay=50,Mn.iLightBoxHashChange=$.extend(Mn.iLightBoxHashChange,{setup:function(){if(On)return!1;$(Ln.start)},teardown:function(){if(On)return!1;$(Ln.stop)}}),Sn={},Un=Jn(),Xn=Wn=Vn,Sn.start=function(){Tn||Rn()},Sn.stop=function(){Tn&&clearTimeout(Tn),Tn=void 0},browser.msie&&!On&&(Sn.start=function(){_n||(ao=(ao=$.fn.iLightBoxHashChange.src)&&ao+Jn(),_n=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){ao||Wn(Jn()),Rn()}).attr("src",ao||"javascript:0").insertAfter("body")[0].contentWindow,Kn.onpropertychange=function(){try{"title"===event.propertyName&&(_n.document.title=Kn.title)}catch(e){}})},Sn.stop=Vn,Xn=function(){return Jn(_n.location.href)},Wn=function(e,t){var i=_n.document,o=$.fn.iLightBoxHashChange.domain;e!==t&&(i.title=Kn.title,i.open(),o&&i.write('<script>document.domain="'+o+'"<\/script>'),i.close(),_n.location.hash=e)}),Ln=Sn,Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var o=[],n=arguments[1],a=0;a<i;a++)if(a in t){var r=t[a];e.call(n,r,a,t)&&o.push(r)}return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0==n)return-1;var a=+t||0;if(abs(a)===1/0&&(a=0),n<=a)return-1;for(i=max(0<=a?a:n-abs(a),0);i<n;){if(i in o&&o[i]===e)return i;i++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0==i)return-1;var o=i;1<arguments.length&&((o=Number(arguments[1]))!=o?o=0:0!=o&&o!=1/0&&o!=-1/0&&(o=(0<o||-1)*floor(abs(o))));for(var n=0<=o?min(o,i-1):i-abs(o);0<=n;n--)if(n in t&&t[n]===e)return n;return-1})}(jQuery,this);

!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.RModal=o()}(this,function(){var t=function(t,o){return Object.prototype.toString.call(t).toLowerCase()==="[object "+o+"]"},o=function(t,o){var e=t.className.split(/\s+/).filter(function(t){return!!t&&t==o});e.length||(t.className+=" "+o)},e=function(t,o){t.className=t.className.split(/\s+/).filter(function(t){return!!t&&t!=o}).join(" ")},s=function(t,o){var e=this;this.opened=!1,this.opts={bodyClass:"modal-open",dialogClass:"modal-dialog",dialogOpenClass:"bounceInDown",dialogCloseClass:"bounceOutUp",focus:!0,focusElements:["a[href]","area[href]","input:not([disabled]):not([type=hidden])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"],escapeClose:!0,content:null,closeTimeout:500},Object.keys(o||{}).forEach(function(t){void 0!==o[t]&&(e.opts[t]=o[t])}),this.overlay=t,this.dialog=t.querySelector("."+this.opts.dialogClass),this.opts.content&&this.content(this.opts.content)};return s.prototype.open=function(o){var e=this;return this.content(o),t(this.opts.beforeOpen,"function")?void this.opts.beforeOpen(function(){e._doOpen()}):this._doOpen()},s.prototype._doOpen=function(){o(document.body,this.opts.bodyClass),e(this.dialog,this.opts.dialogCloseClass),o(this.dialog,this.opts.dialogOpenClass),this.overlay.style.display="block",this.opts.focus&&(this.focusOutElement=document.activeElement,this.focus()),t(this.opts.afterOpen,"function")&&this.opts.afterOpen(),this.opened=!0},s.prototype.close=function(){var o=this;return t(this.opts.beforeClose,"function")?void this.opts.beforeClose(function(){o._doClose()}):this._doClose()},s.prototype._doClose=function(){var s=this;e(this.dialog,this.opts.dialogOpenClass),o(this.dialog,this.opts.dialogCloseClass),e(document.body,this.opts.bodyClass),this.opts.focus&&this.focus(this.focusOutElement),t(this.opts.afterClose,"function")&&this.opts.afterClose(),this.opened=!1,setTimeout(function(){s.overlay.style.display="none"},this.opts.closeTimeout)},s.prototype.content=function(t){return void 0===t?this.dialog.innerHTML:void(this.dialog.innerHTML=t)},s.prototype.elements=function(o,e){return e=e||window.navigator.appVersion.indexOf("MSIE 9.0")>-1,o=t(o,"array")?o.join(","):o,[].filter.call(this.dialog.querySelectorAll(o),function(t){if(e){var o=window.getComputedStyle(t);return"none"!==o.display&&"hidden"!==o.visibility}return null!==t.offsetParent})},s.prototype.focus=function(o){o=o||this.elements(this.opts.focusElements)[0]||this.dialog.firstChild,o&&t(o.focus,"function")&&o.focus()},s.prototype.keydown=function(t){function o(){t.preventDefault(),t.stopPropagation()}if(this.opts.escapeClose&&27==t.which&&this.close(),this.opened&&9==t.which&&this.dialog.contains(t.target)){var e=this.elements(this.opts.focusElements),s=e[0],i=e[e.length-1];s==i?o():t.target==s&&t.shiftKey?(o(),i.focus()):t.target!=i||t.shiftKey||(o(),s.focus())}},s.prototype.version="1.0.24",s.version="1.0.24",s});

(function ($) {
  $.fn.extend({
    animateCss: function (animationName) {
      var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
      $(this).addClass('animated ' + animationName).one(animationEnd, function () {
        $(this).removeClass('animated ' + animationName);
      });
    }
  });
})(jQuery);

/*! jssocials - v1.5.0 - 2017-04-30
* http://js-socials.com
* Copyright (c) 2017 Artem Tabalin; Licensed MIT */
!function(a,b,c){function d(a,c){var d=b(a);d.data(f,this),this._$element=d,this.shares=[],this._init(c),this._render()}var e="JSSocials",f=e,g=function(a,c){return b.isFunction(a)?a.apply(c,b.makeArray(arguments).slice(2)):a},h=/(\.(jpeg|png|gif|bmp|svg)$|^data:image\/(jpeg|png|gif|bmp|svg\+xml);base64)/i,i=/(&?[a-zA-Z0-9]+=)?\{([a-zA-Z0-9]+)\}/g,j={G:1e9,M:1e6,K:1e3},k={};d.prototype={url:"",text:"",shareIn:"blank",showLabel:function(a){return this.showCount===!1?a>this.smallScreenWidth:a>=this.largeScreenWidth},showCount:function(a){return a<=this.smallScreenWidth?"inside":!0},smallScreenWidth:640,largeScreenWidth:1024,resizeTimeout:200,elementClass:"jssocials",sharesClass:"jssocials-shares",shareClass:"jssocials-share",shareButtonClass:"jssocials-share-button",shareLinkClass:"jssocials-share-link",shareLogoClass:"jssocials-share-logo",shareLabelClass:"jssocials-share-label",shareLinkCountClass:"jssocials-share-link-count",shareCountBoxClass:"jssocials-share-count-box",shareCountClass:"jssocials-share-count",shareZeroCountClass:"jssocials-share-no-count",_init:function(a){this._initDefaults(),b.extend(this,a),this._initShares(),this._attachWindowResizeCallback()},_initDefaults:function(){this.url=a.location.href,this.text=b.trim(b("meta[name=description]").attr("content")||b("title").text())},_initShares:function(){this.shares=b.map(this.shares,b.proxy(function(a){"string"==typeof a&&(a={share:a});var c=a.share&&k[a.share];if(!c&&!a.renderer)throw Error("Share '"+a.share+"' is not found");return b.extend({url:this.url,text:this.text},c,a)},this))},_attachWindowResizeCallback:function(){b(a).on("resize",b.proxy(this._windowResizeHandler,this))},_detachWindowResizeCallback:function(){b(a).off("resize",this._windowResizeHandler)},_windowResizeHandler:function(){(b.isFunction(this.showLabel)||b.isFunction(this.showCount))&&(a.clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(b.proxy(this.refresh,this),this.resizeTimeout))},_render:function(){this._clear(),this._defineOptionsByScreen(),this._$element.addClass(this.elementClass),this._$shares=b("<div>").addClass(this.sharesClass).appendTo(this._$element),this._renderShares()},_defineOptionsByScreen:function(){this._screenWidth=b(a).width(),this._showLabel=g(this.showLabel,this,this._screenWidth),this._showCount=g(this.showCount,this,this._screenWidth)},_renderShares:function(){b.each(this.shares,b.proxy(function(a,b){this._renderShare(b)},this))},_renderShare:function(a){var c;c=b.isFunction(a.renderer)?b(a.renderer()):this._createShare(a),c.addClass(this.shareClass).addClass(a.share?"jssocials-share-"+a.share:"").addClass(a.css).appendTo(this._$shares)},_createShare:function(a){var c=b("<div>"),d=this._createShareLink(a).appendTo(c);if(this._showCount){var e="inside"===this._showCount,f=e?d:b("<div>").addClass(this.shareCountBoxClass).appendTo(c);f.addClass(e?this.shareLinkCountClass:this.shareCountBoxClass),this._renderShareCount(a,f)}return c},_createShareLink:function(a){var c=this._getShareStrategy(a),d=c.call(a,{shareUrl:this._getShareUrl(a)});return d.addClass(this.shareLinkClass).append(this._createShareLogo(a)),this._showLabel&&d.append(this._createShareLabel(a)),b.each(this.on||{},function(c,e){b.isFunction(e)&&d.on(c,b.proxy(e,a))}),d},_getShareStrategy:function(a){var b=m[a.shareIn||this.shareIn];if(!b)throw Error("Share strategy '"+this.shareIn+"' not found");return b},_getShareUrl:function(a){var b=g(a.shareUrl,a);return this._formatShareUrl(b,a)},_createShareLogo:function(a){var c=a.logo,d=h.test(c)?b("<img>").attr("src",a.logo):b("<i>").addClass(c);return d.addClass(this.shareLogoClass),d},_createShareLabel:function(a){return b("<span>").addClass(this.shareLabelClass).text(a.label)},_renderShareCount:function(a,c){var d=b("<span>").addClass(this.shareCountClass);c.addClass(this.shareZeroCountClass).append(d),this._loadCount(a).done(b.proxy(function(a){a&&(c.removeClass(this.shareZeroCountClass),d.text(a))},this))},_loadCount:function(a){var c=b.Deferred(),d=this._getCountUrl(a);if(!d)return c.resolve(0).promise();var e=b.proxy(function(b){c.resolve(this._getCountValue(b,a))},this);return b.getJSON(d).done(e).fail(function(){b.get(d).done(e).fail(function(){c.resolve(0)})}),c.promise()},_getCountUrl:function(a){var b=g(a.countUrl,a);return this._formatShareUrl(b,a)},_getCountValue:function(a,c){var d=(b.isFunction(c.getCount)?c.getCount(a):a)||0;return"string"==typeof d?d:this._formatNumber(d)},_formatNumber:function(a){return b.each(j,function(b,c){return a>=c?(a=parseFloat((a/c).toFixed(2))+b,!1):void 0}),a},_formatShareUrl:function(b,c){return b.replace(i,function(b,d,e){var f=c[e]||"";return f?(d||"")+a.encodeURIComponent(f):""})},_clear:function(){a.clearTimeout(this._resizeTimer),this._$element.empty()},_passOptionToShares:function(a,c){var d=this.shares;b.each(["url","text"],function(e,f){f===a&&b.each(d,function(b,d){d[a]=c})})},_normalizeShare:function(a){return b.isNumeric(a)?this.shares[a]:"string"==typeof a?b.grep(this.shares,function(b){return b.share===a})[0]:a},refresh:function(){this._render()},destroy:function(){this._clear(),this._detachWindowResizeCallback(),this._$element.removeClass(this.elementClass).removeData(f)},option:function(a,b){return 1===arguments.length?this[a]:(this[a]=b,this._passOptionToShares(a,b),void this.refresh())},shareOption:function(a,b,c){return a=this._normalizeShare(a),2===arguments.length?a[b]:(a[b]=c,void this.refresh())}},b.fn.jsSocials=function(a){var e=b.makeArray(arguments),g=e.slice(1),h=this;return this.each(function(){var e,i=b(this),j=i.data(f);if(j)if("string"==typeof a){if(e=j[a].apply(j,g),e!==c&&e!==j)return h=e,!1}else j._detachWindowResizeCallback(),j._init(a),j._render();else new d(i,a)}),h};var l=function(a){var c;b.isPlainObject(a)?c=d.prototype:(c=k[a],a=arguments[1]||{}),b.extend(c,a)},m={popup:function(c){return b("<a>").attr("href","#").on("click",function(){return a.open(c.shareUrl,null,"width=600, height=400, location=0, menubar=0, resizeable=0, scrollbars=0, status=0, titlebar=0, toolbar=0"),!1})},blank:function(a){return b("<a>").attr({target:"_blank",href:a.shareUrl})},self:function(a){return b("<a>").attr({target:"_self",href:a.shareUrl})}};a.jsSocials={Socials:d,shares:k,shareStrategies:m,setDefaults:l}}(window,jQuery),function(a,b,c){b.extend(c.shares,{email:{label:"E-mail",logo:"fas fa-at",shareUrl:"mailto:{to}?subject={text}&body={url}",countUrl:"",shareIn:"self"},twitter:{label:"Tweet",logo:"fab fa-twitter",shareUrl:"https://twitter.com/share?url={url}&text={text}&via={via}&hashtags={hashtags}",countUrl:""},facebook:{label:"Like",logo:"fab fa-facebook",shareUrl:"https://facebook.com/sharer/sharer.php?u={url}",countUrl:"https://graph.facebook.com/?id={url}",getCount:function(a){return a.share&&a.share.share_count||0}},vkontakte:{label:"Like",logo:"fab fa-vk",shareUrl:"https://vk.com/share.php?url={url}&title={title}&description={text}",countUrl:"https://vk.com/share.php?act=count&index=1&url={url}",getCount:function(a){return parseInt(a.slice(15,-2).split(", ")[1])}},googleplus:{label:"+1",logo:"fab fa-google",shareUrl:"https://plus.google.com/share?url={url}",countUrl:""},linkedin:{label:"Share",logo:"fab fa-linkedin",shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url={url}",countUrl:"",getCount:function(a){return a.count}},pinterest:{label:"Pin it",logo:"fab fa-pinterest",shareUrl:"https://pinterest.com/pin/create/bookmarklet/?media={media}&url={url}&description={text}",countUrl:"https://api.pinterest.com/v1/urls/count.json?&url={url}&callback=?",getCount:function(a){return a.count}},stumbleupon:{label:"Share",logo:"fab fa-stumbleupon",shareUrl:"http://www.stumbleupon.com/submit?url={url}&title={title}",countUrl:"https://cors-anywhere.herokuapp.com/https://www.stumbleupon.com/services/1.01/badge.getinfo?url={url}",getCount:function(a){return a.result&&a.result.views}},telegram:{label:"Telegram",logo:"fab fa-telegram",shareUrl:"tg://msg?text={url} {text}",countUrl:"",shareIn:"self"},whatsapp:{label:"WhatsApp",logo:"fab fa-whatsapp",shareUrl:"whatsapp://send?text={url} {text}",countUrl:"",shareIn:"self"},line:{label:"LINE",logo:"fas fa-comment",shareUrl:"http://line.me/R/msg/text/?{text} {url}",countUrl:""},viber:{label:"Viber",logo:"fas fa-volume-control-phone",shareUrl:"viber://forward?text={url} {text}",countUrl:"",shareIn:"self"},pocket:{label:"Pocket",logo:"fab fa-get-pocket",shareUrl:"https://getpocket.com/save?url={url}&title={title}",countUrl:""},messenger:{label:"Share",logo:"fas fa-commenting",shareUrl:"fb-messenger://share?link={url}",countUrl:"",shareIn:"self"},rss:{label:"RSS",logo:"fas fa-rss",shareUrl:"/feeds/",countUrl:"",shareIn:"blank"}})}(window,jQuery,window.jsSocials);

/* jquery.panzoom.min.js 3.2.2 (c) Timmy Willison - MIT License */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){for(var c=a.length;--c;)if(Math.round(+a[c])!==Math.round(+b[c]))return!1;return!0}function d(a){var c={range:!0,animate:!0};return"boolean"==typeof a?c.animate=a:b.extend(c,a),c}function e(a,c,d,e,f,g,h,i,j){"array"===b.type(a)?this.elements=[+a[0],+a[2],+a[4],+a[1],+a[3],+a[5],0,0,1]:this.elements=[a,c,d,e,f,g,h||0,i||0,j||1]}function f(a,b,c){this.elements=[a,b,c]}function g(a,c){if(!(this instanceof g))return new g(a,c);1!==a.nodeType&&b.error("Panzoom called on non-Element node"),b.contains(h,a)||b.error("Panzoom element must be attached to the document");var d=b.data(a,i);if(d)return d;this.options=c=b.extend({},g.defaults,c),this.elem=a;var e=this.$elem=b(a);this.$set=c.$set&&c.$set.length?c.$set:e,this.$doc=b(a.ownerDocument||h),this.$parent=e.parent(),this.parent=this.$parent[0],this.isSVG=n.test(a.namespaceURI)&&"svg"!==a.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=b.cssProps.transform.replace(m,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var f=b(),j=this;b.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(a,b){j[b]=c[b]||f}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),b.data(a,i,this)}var h=a.document,i="__pz__",j=Array.prototype.slice,k=/trident\/7./i,l=function(){if(k.test(navigator.userAgent))return!1;var a=h.createElement("input");return a.setAttribute("oninput","return"),"function"==typeof a.oninput}(),m=/([A-Z])/g,n=/^http:[\w\.\/]+svg$/,o="(\\-?\\d[\\d\\.e-]*)",p=new RegExp("^matrix\\("+o+"\\,?\\s*"+o+"\\,?\\s*"+o+"\\,?\\s*"+o+"\\,?\\s*"+o+"\\,?\\s*"+o+"\\)$");return e.prototype={x:function(a){var b=a instanceof f,c=this.elements,d=a.elements;return b&&3===d.length?new f(c[0]*d[0]+c[1]*d[1]+c[2]*d[2],c[3]*d[0]+c[4]*d[1]+c[5]*d[2],c[6]*d[0]+c[7]*d[1]+c[8]*d[2]):d.length===c.length&&new e(c[0]*d[0]+c[1]*d[3]+c[2]*d[6],c[0]*d[1]+c[1]*d[4]+c[2]*d[7],c[0]*d[2]+c[1]*d[5]+c[2]*d[8],c[3]*d[0]+c[4]*d[3]+c[5]*d[6],c[3]*d[1]+c[4]*d[4]+c[5]*d[7],c[3]*d[2]+c[4]*d[5]+c[5]*d[8],c[6]*d[0]+c[7]*d[3]+c[8]*d[6],c[6]*d[1]+c[7]*d[4]+c[8]*d[7],c[6]*d[2]+c[7]*d[5]+c[8]*d[8])},inverse:function(){var a=1/this.determinant(),b=this.elements;return new e(a*(b[8]*b[4]-b[7]*b[5]),a*-(b[8]*b[1]-b[7]*b[2]),a*(b[5]*b[1]-b[4]*b[2]),a*-(b[8]*b[3]-b[6]*b[5]),a*(b[8]*b[0]-b[6]*b[2]),a*-(b[5]*b[0]-b[3]*b[2]),a*(b[7]*b[3]-b[6]*b[4]),a*-(b[7]*b[0]-b[6]*b[1]),a*(b[4]*b[0]-b[3]*b[1]))},determinant:function(){var a=this.elements;return a[0]*(a[8]*a[4]-a[7]*a[5])-a[3]*(a[8]*a[1]-a[7]*a[2])+a[6]*(a[5]*a[1]-a[4]*a[2])}},f.prototype.e=e.prototype.e=function(a){return this.elements[a]},g.rmatrix=p,g.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,linearZoom:!1,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},g.prototype={constructor:g,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),b.removeData(this.elem,i)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var a=this.elem,c=a.getBoundingClientRect(),d=Math.abs(this.scale);this.dimensions={width:c.width,height:c.height,left:b.css(a,"left",!0)||0,top:b.css(a,"top",!0)||0,border:{top:b.css(a,"borderTopWidth",!0)*d||0,bottom:b.css(a,"borderBottomWidth",!0)*d||0,left:b.css(a,"borderLeftWidth",!0)*d||0,right:b.css(a,"borderRightWidth",!0)*d||0},margin:{top:b.css(a,"marginTop",!0)*d||0,left:b.css(a,"marginLeft",!0)*d||0}}},reset:function(a){a=d(a);var b=this.setMatrix(this._origTransform,a);a.silent||this._trigger("reset",b)},resetZoom:function(a){a=d(a);var b=this.getMatrix(this._origTransform);a.dValue=b[3],this.zoom(b[0],a)},resetPan:function(a){var b=this.getMatrix(this._origTransform);this.pan(b[4],b[5],d(a))},setTransform:function(a){for(var c=this.$set,d=c.length;d--;)b.style(c[d],"transform",a),this.isSVG&&c[d].setAttribute("transform",a)},getTransform:function(a){var c=this.$set,d=c[0];return a?this.setTransform(a):(a=b.style(d,"transform"),!this.isSVG||a&&"none"!==a||(a=b.attr(d,"transform")||"none")),"none"===a||p.test(a)||this.setTransform(a=b.css(d,"transform")),a||"none"},getMatrix:function(a){var b=p.exec(a||this.getTransform());return b&&b.shift(),b||[1,0,0,1,0,0]},setMatrix:function(a,c){if(!this.disabled){c||(c={}),"string"==typeof a&&(a=this.getMatrix(a));var d=+a[0],e=void 0!==c.contain?c.contain:this.options.contain;if(e){var f=c.dims;f||(this.resetDimensions(),f=this.dimensions);var g,h,i,j=this.container,k=f.width,l=f.height,m=j.width,n=j.height,o=m/k,p=n/l;"center"!==this.$parent.css("textAlign")||"inline"!==b.css(this.elem,"display")?(i=(k-this.elem.offsetWidth)/2,g=i-f.border.left,h=k-m-i+f.border.right):g=h=(k-m)/2;var q=(l-n)/2+f.border.top,r=(l-n)/2-f.border.top-f.border.bottom;a[4]="invert"===e||"automatic"===e&&o<1.01?Math.max(Math.min(a[4],g-f.border.left),-h):Math.min(Math.max(a[4],g),-h),a[5]="invert"===e||"automatic"===e&&p<1.01?Math.max(Math.min(a[5],q-f.border.top),-r):Math.min(Math.max(a[5],q),-r)}if("skip"!==c.animate&&this.transition(!c.animate),c.range&&this.$zoomRange.val(d),this.options.disableXAxis||this.options.disableYAxis){var s=this.getMatrix();this.options.disableXAxis&&(a[4]=s[4]),this.options.disableYAxis&&(a[5]=s[5])}return this.setTransform("matrix("+a.join(",")+")"),this.scale=d,this._checkPanWhenZoomed(d),c.silent||this._trigger("change",a),a}},isPanning:function(){return this.panning},transition:function(a){if(this._transition)for(var c=a||!this.options.transition?"none":this._transition,d=this.$set,e=d.length;e--;)b.style(d[e],"transition")!==c&&b.style(d[e],"transition",c)},pan:function(a,b,c){if(!this.options.disablePan){c||(c={});var d=c.matrix;d||(d=this.getMatrix()),c.relative&&(a+=+d[4],b+=+d[5]),d[4]=a,d[5]=b,this.setMatrix(d,c),c.silent||this._trigger("pan",d[4],d[5])}},zoom:function(a,c){"object"==typeof a?(c=a,a=null):c||(c={});var d=b.extend({},this.options,c);if(!d.disableZoom){var g=!1,h=d.matrix||this.getMatrix(),i=+h[0];"number"!=typeof a&&(a=d.linearZoom?i+d.increment*(a?-1:1):a?i/(1+d.increment):i*(1+d.increment),g=!0),a=Math.max(Math.min(a,d.maxScale),d.minScale);var j=d.focal;if(j&&!d.disablePan){this.resetDimensions();var k=d.dims=this.dimensions,l=j.clientX,m=j.clientY;this.isSVG||(l-=k.width/i/2,m-=k.height/i/2);var n=new f(l,m,1),o=new e(h),p=this.parentOffset||this.$parent.offset(),q=new e(1,0,p.left-this.$doc.scrollLeft(),0,1,p.top-this.$doc.scrollTop()),r=o.inverse().x(q.inverse().x(n)),s=a/h[0];o=o.x(new e([s,0,0,s,0,0])),n=q.x(o.x(r)),h[4]=+h[4]+(l-n.e(0)),h[5]=+h[5]+(m-n.e(1))}h[0]=a,h[3]="number"==typeof d.dValue?d.dValue:a,this.setMatrix(h,{animate:void 0!==d.animate?d.animate:g,range:!d.noSetRange}),d.silent||this._trigger("zoom",h[0],d)}},option:function(a,c){var d;if(!a)return b.extend({},this.options);if("string"==typeof a){if(1===arguments.length)return void 0!==this.options[a]?this.options[a]:null;d={},d[a]=c}else d=a;this._setOptions(d)},_setOptions:function(a){b.each(a,b.proxy(function(a,c){switch(a){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[a]=c,a){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[a]=c;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":b.style(this.elem,"cursor",c);break;case"minScale":this.$zoomRange.attr("min",c);break;case"maxScale":this.$zoomRange.attr("max",c);break;case"rangeStep":this.$zoomRange.attr("step",c);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":c instanceof b&&c.length&&(this.$set=c,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(a){var b=this.options;if(b.panOnlyWhenZoomed){a||(a=this.getMatrix()[0]);var c=a<=b.minScale;b.disablePan!==c&&this.option("disablePan",c)}},_initStyle:function(){var a={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(a.cursor=this.options.cursor),this.$set.css(a);var c=this.$parent;c.length&&!b.nodeName(this.parent,"body")&&(a={overflow:"hidden"},"static"===c.css("position")&&(a.position="relative"),c.css(a))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var a=this,c=this.options,d=c.eventNamespace,e="mousedown"+d+" pointerdown"+d+" MSPointerDown"+d,f="touchstart"+d+" "+e,h="touchend"+d+" click"+d+" pointerup"+d+" MSPointerUp"+d,i={},j=this.$reset,k=this.$zoomRange;if(b.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var a=c["on"+this];b.isFunction(a)&&(i["panzoom"+this.toLowerCase()+d]=a)}),c.disablePan&&c.disableZoom||(i[f]=function(b){var d;(/touchstart|pointerdown/.test(b.type)?!(d=b.touches||b.originalEvent.touches)||(1!==d.length||c.disablePan)&&2!==d.length:c.disablePan||(b.which||b.originalEvent.which)!==c.which)||(b.preventDefault(),b.stopPropagation(),a._startMove(b,d))},3===c.which&&(i.contextmenu=!1)),this.$elem.on(i),j.length&&j.on(h,function(b){b.preventDefault(),a.reset()}),k.length&&k.attr({step:c.rangeStep===g.defaults.rangeStep&&k.attr("step")||c.rangeStep,min:c.minScale,max:c.maxScale}).prop({value:this.getMatrix()[0]}),!c.disableZoom){var m=this.$zoomIn,n=this.$zoomOut;m.length&&n.length&&(m.on(h,function(b){b.preventDefault(),a.zoom()}),n.on(h,function(b){b.preventDefault(),a.zoom(!0)})),k.length&&(i={},i[e]=function(){a.transition(!0)},i[(l?"input":"change")+d]=function(){a.zoom(+this.value,{noSetRange:!0})},k.on(i))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var a=this.options;this._transition=this._transform+" "+a.duration+"ms "+a.easing}},_getDistance:function(a){var b=a[0],c=a[1];return Math.sqrt(Math.pow(Math.abs(c.clientX-b.clientX),2)+Math.pow(Math.abs(c.clientY-b.clientY),2))},_getMiddle:function(a){var b=a[0],c=a[1];return{clientX:(c.clientX-b.clientX)/2+b.clientX,clientY:(c.clientY-b.clientY)/2+b.clientY}},_trigger:function(a){"string"==typeof a&&(a="panzoom"+a),this.$elem.triggerHandler(a,[this].concat(j.call(arguments,1)))},_startMove:function(a,d){if(!this.panning){var e,f,g,i,j,k,l,m,n=this,o=this.options,p=o.eventNamespace,q=this.getMatrix(),r=q.slice(0),s=+r[4],t=+r[5],u={matrix:q,animate:"skip"},v=a.type;"pointerdown"===v?(e="pointermove",f="pointerup"):"touchstart"===v?(e="touchmove",f="touchend"):"MSPointerDown"===v?(e="MSPointerMove",f="MSPointerUp"):(e="mousemove",f="mouseup"),e+=p,f+=p,this.transition(!0),this._trigger("start",a,d);var w=function(a,b){if(b){if(2===b.length){if(null!=g)return;return g=n._getDistance(b),i=+q[0],void(j=n._getMiddle(b))}if(null!=k)return;(m=b[0])&&(k=m.pageX,l=m.pageY)}null==k&&(k=a.pageX,l=a.pageY)};w(a,d);var x=function(a){var b;if(a.stopPropagation(),d=a.touches||a.originalEvent.touches,w(a,d),d){if(2===d.length){var c=n._getMiddle(d),e=n._getDistance(d)-g;return n.zoom(e*(o.increment/100)+i,{focal:c,matrix:q,animate:"skip"}),n.pan(+q[4]+c.clientX-j.clientX,+q[5]+c.clientY-j.clientY,u),void(j=c)}b=d[0]||{pageX:0,pageY:0}}b||(b=a),this.panning=!0,n.pan(s+b.pageX-k,t+b.pageY-l,u)};b(h).off(p).on(e,x).on(f,function(a){a.preventDefault(),b(this).off(p),n.panning=!1,a.type="panzoomend",n._trigger(a,q,!c(q,r))})}}},b.Panzoom=g,b.fn.panzoom=function(a){var c,d,e,f;return"string"==typeof a?(f=[],d=j.call(arguments,1),this.each(function(){c=b.data(this,i),c?"_"!==a.charAt(0)&&"function"==typeof(e=c[a])&&void 0!==(e=e.apply(c,d))&&f.push(e):f.push(void 0)}),f.length?1===f.length?f[0]:f:this):this.each(function(){new g(this,a)})},g});
                                                                        
/* String -> Hash*/
String.prototype.hashCode=function(){var t,h=0;if(0===this.length)return h;for(t=0,l=this.length;t<l;t++)h=(h<<5)-h+this.charCodeAt(t),h|=0;return Math.abs(h)};

/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return o={},r.m=n=[function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()}return e}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){var d=n(3),h=n(4);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!d.string(e))throw new TypeError("Second argument must be a String");if(!d.fn(n))throw new TypeError("Third argument must be a Function");if(d.node(t))return s=e,f=n,(u=t).addEventListener(s,f),{destroy:function(){u.removeEventListener(s,f)}};if(d.nodeList(t))return a=t,c=e,l=n,Array.prototype.forEach.call(a,function(t){t.addEventListener(c,l)}),{destroy:function(){Array.prototype.forEach.call(a,function(t){t.removeEventListener(c,l)})}};if(d.string(t))return o=t,r=e,i=n,h(document.body,o,r,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,i,a,c,l,u,s,f}},function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var a=n(5);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=a(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.resolveOptions(t),this.initSelection()}var l=(function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(c,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=r()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=r()(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(t){var e=0<arguments.length&&void 0!==t?t:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),c),u=n(1),s=n.n(u),f=n(2),d=n.n(f),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t};function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,s.a),p(v,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=d()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return b("action",t)}},{key:"defaultTarget",value:function(t){var e=b("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return b("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(t){var e=0<arguments.length&&void 0!==t?t:["copy","cut"],n="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),v);function v(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return n.resolveOptions(e),n.listenClick(t),n}function b(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}e.default=m}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6).default;function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});
    
/**
* Copyright 2012, Digital Fusion
* Licensed under the MIT license.
* https://github.com/customd/jquery-visible
*
* @author Sam Sehnert
* @desc A small plugin that checks whether elements are within
*       the user visible viewport of a web browser.
*       can accounts for vertical position, horizontal, or both
*       
*       $('#element').visible( true );
*/
!function(t){var i=t(window);t.fn.visible=function(t,e,o){if(!(this.length<1)){var r=this.length>1?this.eq(0):this,n=r.get(0),f=i.width(),h=i.height(),o=o?o:"both",l=e===!0?n.offsetWidth*n.offsetHeight:!0;if("function"==typeof n.getBoundingClientRect){var g=n.getBoundingClientRect(),u=g.top>=0&&g.top<h,s=g.bottom>0&&g.bottom<=h,c=g.left>=0&&g.left<f,a=g.right>0&&g.right<=f,v=t?u||s:u&&s,b=t?c||a:c&&a;if("both"===o)return l&&v&&b;if("vertical"===o)return l&&v;if("horizontal"===o)return l&&b}else{var d=i.scrollTop(),p=d+h,w=i.scrollLeft(),m=w+f,y=r.offset(),z=y.top,B=z+r.height(),C=y.left,R=C+r.width(),j=t===!0?B:z,q=t===!0?z:B,H=t===!0?R:C,L=t===!0?C:R;if("both"===o)return!!l&&p>=q&&j>=d&&m>=L&&H>=w;if("vertical"===o)return!!l&&p>=q&&j>=d;if("horizontal"===o)return!!l&&m>=L&&H>=w}}}}(jQuery);

/**
* jQuery asBreadcrumbs v0.2.3
* https://github.com/amazingSurge/jquery-asBreadcrumbs
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(s,e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("undefined"!=typeof exports)e(require("jquery"));else{var t={exports:{}};e(s.jQuery),s.jqueryAsBreadcrumbsEs=t.exports}}(this,function(s){"use strict";function e(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function(s){return s&&s.__esModule?s:{default:s}}(s),i=function(){function s(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}(),n={namespace:"breadcrumb",overflow:"left",responsive:!0,ellipsisText:"&#8230;",ellipsisClass:null,hiddenClass:"is-hidden",dropdownClass:null,dropdownMenuClass:null,dropdownItemClass:null,dropdownItemDisableClass:"disabled",toggleClass:null,toggleIconClass:"caret",getItems:function(s){return s.children()},getItemLink:function(s){return s.find("a")},ellipsis:function(s,e){return'<li class="'+s.ellipsisClass+'">'+e+"</li>"},dropdown:function(s){var e="dropdown-menu";return"right"===this.options.overflow&&(e+=" dropdown-menu-right"),'<li class="dropdown '+s.dropdownClass+'">\n      <a href="javascript:void(0);" class="'+s.toggleClass+'" data-toggle="dropdown">\n        <i class="'+s.toggleIconClass+'"></i>\n      </a>\n      <ul class="'+e+" "+s.dropdownMenuClass+'"></ul>\n    </li>'},dropdownItem:function(s,e,t){return t?'<li class="'+s.dropdownItemClass+'"><a href="'+t+'">'+e+"</a></li>":'<li class="'+s.dropdownItemClass+" "+s.dropdownItemDisableClass+'"><a href="#">'+e+"</a></li>"},onInit:null,onReady:null},o=0,l=function(){function s(i,l){e(this,s),this.element=i,this.$element=(0,t.default)(i),this.options=t.default.extend({},n,l,this.$element.data()),this.namespace=this.options.namespace,this.$element.addClass(this.namespace),this.classes={toggleClass:this.options.toggleClass?this.options.toggleClass:this.namespace+"-toggle",toggleIconClass:this.options.toggleIconClass,dropdownClass:this.options.dropdownClass?this.options.dropdownClass:this.namespace+"-dropdown",dropdownMenuClass:this.options.dropdownMenuClass?this.options.dropdownMenuClass:this.namespace+"-dropdown-menu",dropdownItemClass:this.options.dropdownItemClass?this.options.dropdownItemClass:"",dropdownItemDisableClass:this.options.dropdownItemDisableClass?this.options.dropdownItemDisableClass:"",ellipsisClass:this.options.ellipsisClass?this.options.ellipsisClass:this.namespace+"-ellipsis",hiddenClass:this.options.hiddenClass},this.initialized=!1,this.instanceId=++o,this.$children=this.options.getItems(this.$element),this.$firstChild=this.$children.eq(0),this.$dropdown=null,this.$dropdownMenu=null,this.gap=6,this.items=[],this._trigger("init"),this.init()}return i(s,[{key:"init",value:function(){var s=this;this.$element.addClass(this.namespace+"-"+this.options.overflow),this._prepareItems(),this._createDropdown(),this._createEllipsis(),this.render(),this.options.responsive&&(0,t.default)(window).on(this.eventNameWithId("resize"),this._throttle(function(){s.resize()},250)),this.initialized=!0,this._trigger("ready")}},{key:"_prepareItems",value:function(){var s=this;this.$children.each(function(){var e=(0,t.default)(this),i=s.options.getItemLink(e),n=(0,t.default)(s.options.dropdownItem.call(s,s.classes,e.text(),i.attr("href")));s.items.push({$this:e,outerWidth:e.outerWidth(),$item:n})}),"left"===this.options.overflow&&this.items.reverse()}},{key:"_createDropdown",value:function(){this.$dropdown=(0,t.default)(this.options.dropdown.call(this,this.classes)).addClass(this.classes.hiddenClass).appendTo(this.$element),this.$dropdownMenu=this.$dropdown.find("."+this.classes.dropdownMenuClass),this._createDropdownItems(),"right"===this.options.overflow?this.$dropdown.appendTo(this.$element):this.$dropdown.prependTo(this.$element)}},{key:"_createDropdownItems",value:function(){for(var s=0;s<this.items.length;s++)this.items[s].$item.appendTo(this.$dropdownMenu).addClass(this.classes.hiddenClass)}},{key:"_createEllipsis",value:function(){this.options.ellipsisText&&(this.$ellipsis=(0,t.default)(this.options.ellipsis.call(this,this.classes,this.options.ellipsisText)).addClass(this.classes.hiddenClass),"right"===this.options.overflow?this.$ellipsis.insertBefore(this.$dropdown):this.$ellipsis.insertAfter(this.$dropdown))}},{key:"render",value:function(){for(var s=this.getDropdownWidth(),e=0,t=this.getConatinerWidth(),i=!1,n=0;n<this.items.length;n++)(e+=this.items[n].outerWidth)+s>t?(i=!0,this._showDropdownItem(n)):this._hideDropdownItem(n);i?(this.$ellipsis.removeClass(this.classes.hiddenClass),this.$dropdown.removeClass(this.classes.hiddenClass)):(this.$ellipsis.addClass(this.classes.hiddenClass),this.$dropdown.addClass(this.classes.hiddenClass)),this._trigger("update")}},{key:"resize",value:function(){this.render()}},{key:"getDropdownWidth",value:function(){return this.$dropdown.outerWidth()+(this.options.ellipsisText?this.$ellipsis.outerWidth():0)}},{key:"getConatinerWidth",value:function(){var s=0,e=this;return this.$element.children().each(function(){"inline-block"===(0,t.default)(this).css("display")&&"none"===(0,t.default)(this).css("float")&&(s+=e.gap)}),this.$element.width()-s}},{key:"_showDropdownItem",value:function(s){this.items[s].$item.removeClass(this.classes.hiddenClass),this.items[s].$this.addClass(this.classes.hiddenClass)}},{key:"_hideDropdownItem",value:function(s){this.items[s].$this.removeClass(this.classes.hiddenClass),this.items[s].$item.addClass(this.classes.hiddenClass)}},{key:"_trigger",value:function(s){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var n=[this].concat(t);this.$element.trigger("asBreadcrumbs::"+s,n);var o="on"+(s=s.replace(/\b\w+\b/g,function(s){return s.substring(0,1).toUpperCase()+s.substring(1)}));"function"==typeof this.options[o]&&this.options[o].apply(this,t)}},{key:"eventName",value:function(s){if("string"!=typeof s||""===s)return"."+this.options.namespace;for(var e=(s=s.split(" ")).length,t=0;t<e;t++)s[t]=s[t]+"."+this.options.namespace;return s.join(" ")}},{key:"eventNameWithId",value:function(s){if("string"!=typeof s||""===s)return"."+this.options.namespace+"-"+this.instanceId;for(var e=(s=s.split(" ")).length,t=0;t<e;t++)s[t]=s[t]+"."+this.options.namespace+"-"+this.instanceId;return s.join(" ")}},{key:"_throttle",value:function(s,e){var t=this,i=Date.now||function(){return(new Date).getTime()},n=void 0,o=void 0,l=void 0,a=void 0,r=0,d=function(){r=i(),n=null,a=s.apply(o,l),n||(o=l=null)};return function(){for(var h=arguments.length,p=Array(h),u=0;u<h;u++)p[u]=arguments[u];var c=i(),f=e-(c-r);return o=t,l=p,f<=0||f>e?(n&&(clearTimeout(n),n=null),r=c,a=s.apply(o,l),n||(o=l=null)):n||(n=setTimeout(d,f)),a}}},{key:"destroy",value:function(){this.$element.children().removeClass(this.classes.hiddenClass),this.$dropdown.remove(),this.options.ellipsisText&&this.$ellipsis.remove(),this.initialized=!1,this.$element.data("asBreadcrumbs",null),(0,t.default)(window).off(this.eventNameWithId("resize")),this._trigger("destroy")}}],[{key:"setDefaults",value:function(s){t.default.extend(n,t.default.isPlainObject(s)&&s)}}]),s}(),a={version:"0.2.3"},r="asBreadcrumbs",d=t.default.fn.asBreadcrumbs,h=function(s){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if("string"==typeof s){var o=s;if(/^_/.test(o))return!1;if(!/^(get)/.test(o))return this.each(function(){var s=t.default.data(this,r);s&&"function"==typeof s[o]&&s[o].apply(s,i)});var a=this.first().data(r);if(a&&"function"==typeof a[o])return a[o].apply(a,i)}return this.each(function(){(0,t.default)(this).data(r)||(0,t.default)(this).data(r,new l(this,s))})};t.default.fn.asBreadcrumbs=h,t.default.asBreadcrumbs=t.default.extend({setDefaults:l.setDefaults,noConflict:function(){return t.default.fn.asBreadcrumbs=d,h}},a)});

/**
 * Tagify (v 2.31.2)- tags input component
 * By Yair Even-Or, Copyright 2019
 * Licensed under the MIT license.
 * https://github.com/yairEO/tagify
 */
!function (t, e) { "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? module.exports = e() : t.Tagify = e() }(this, function () { "use strict"; function c(t) { return function (t) { if (Array.isArray(t)) { for (var e = 0, i = new Array(t.length); e < t.length; e++)i[e] = t[e]; return i } }(t) || function (t) { if (Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t)) return Array.from(t) }(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance") }() } function s(e, t) { var i = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); t && (s = s.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), i.push.apply(i, s) } return i } function u(e) { for (var t = 1; t < arguments.length; t++) { var i = null != arguments[t] ? arguments[t] : {}; t % 2 ? s(i, !0).forEach(function (t) { r(e, t, i[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : s(i).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t)) }) } return e } function r(t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t } function t(t, e) { if (!t) return console.warn("Tagify: ", "invalid input element ", t), this; this.applySettings(t, e), this.state = {}, this.value = [], this.listeners = {}, this.DOM = {}, this.extend(this, new this.EventDispatcher(this)), this.build(t), this.loadOriginalValues(), this.events.customBinding.call(this), this.events.binding.call(this), t.autofocus && this.DOM.input.focus() } return t.prototype = { isIE: window.document.documentMode, TEXTS: { empty: "empty", exceed: "number of tags exceeded", pattern: "pattern mismatch", duplicate: "already exists", notAllowed: "not allowed" }, DEFAULTS: { delimiters: ",", pattern: null, maxTags: 1 / 0, callbacks: {}, addTagOnBlur: !0, duplicates: !1, whitelist: [], blacklist: [], enforceWhitelist: !1, keepInvalidTags: !1, autoComplete: !0, mixTagsAllowedAfter: /,|\.|\:|\s/, mixTagsInterpolator: ["[[", "]]"], backspace: !0, skipInvalid: !1, editTags: 2, transformTag: function () { }, dropdown: { classname: "", enabled: 2, maxItems: 10, itemTemplate: "", fuzzySearch: !0, highlightFirst: !1, closeOnSelect: !0 } }, templates: { wrapper: function (t, e) { return '<tags class="tagify '.concat(e.mode ? "tagify--" + e.mode : "", " ").concat(t.className, '"\n                          ').concat(e.readonly ? 'readonly aria-readonly="true"' : 'aria-haspopup="true" aria-expanded="false"', '\n                          role="tagslist">\n                <span contenteditable data-placeholder="').concat(e.placeholder || "&#8203;", '" aria-placeholder="').concat(e.placeholder || "", '"\n                      class="tagify__input"\n                      role="textbox"\n                      aria-multiline="false"></span>\n            </tags>') }, tag: function (t, e) { return "<tag title='".concat(e.title || t, "'\n                         contenteditable='false'\n                         spellcheck='false'\n                         class='tagify__tag ").concat(e.class ? e.class : "", "'\n                         ").concat(this.getAttributes(e), ">\n                <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>\n                <div>\n                    <span class='tagify__tag-text'>").concat(t, "</span>\n                </div>\n            </tag>") }, dropdownItem: function (t) { var e = (t.value || t).replace(/`|'/g, "&#39;"); return "<div ".concat(this.getAttributes(t), "\n                         class='tagify__dropdown__item ").concat(t.class ? t.class : "", '\'\n                         tabindex="0"\n                         role="menuitem"\n                         aria-labelledby="dropdown-label">').concat(e, "</div>") } }, customEventsList: ["click", "add", "remove", "invalid", "input", "edit"], applySettings: function (t, e) { var i = t.getAttribute("data-whitelist"), s = t.getAttribute("data-blacklist"); if (this.DEFAULTS.templates = this.templates, this.DEFAULTS.dropdown.itemTemplate = this.templates.dropdownItem, this.settings = this.extend({}, this.DEFAULTS, e), this.settings.readonly = t.hasAttribute("readonly"), this.settings.placeholder = t.getAttribute("placeholder") || this.settings.placeholder || "", this.isIE && (this.settings.autoComplete = !1), s && (s = s.split(this.settings.delimiters)) instanceof Array && (this.settings.blacklist = s), i && (i = i.split(this.settings.delimiters)) instanceof Array && (this.settings.whitelist = i), t.pattern) try { this.settings.pattern = new RegExp(t.pattern) } catch (t) { } if (this.settings && this.settings.delimiters) try { this.settings.delimiters = new RegExp(this.settings.delimiters, "g") } catch (t) { } "select" == this.settings.mode && (this.settings.dropdown.enabled = 0) }, parseHTML: function (t) { return (new DOMParser).parseFromString(t.trim(), "text/html").body.firstElementChild }, escapeHTML: function (t) { var e = document.createTextNode(t), i = document.createElement("p"); return i.appendChild(e), i.innerHTML }, build: function (t) { var e = this.DOM, i = this.settings.templates.wrapper(t, this.settings); e.originalInput = t, e.scope = this.parseHTML(i), e.input = e.scope.querySelector("[contenteditable]"), t.parentNode.insertBefore(e.scope, t), 0 <= this.settings.dropdown.enabled && this.dropdown.init.call(this) }, destroy: function () { this.DOM.scope.parentNode.removeChild(this.DOM.scope), this.dropdown.hide.call(this, !0) }, loadOriginalValues: function (t) { var e = 0 < arguments.length && void 0 !== t ? t : this.DOM.originalInput.value; if (e) { this.removeAllTags(); try { e = JSON.parse(e) } catch (t) { } "mix" == this.settings.mode ? this.parseMixTags(e) : this.addTags(e).forEach(function (t) { return t && t.classList.add("tagify--noAnim") }) } }, extend: function (t, e, i) { function s(t) { var e = Object.prototype.toString.call(t).split(" ")[1].slice(0, -1); return t === Object(t) && "Array" != e && "Function" != e && "RegExp" != e && "HTMLUnknownElement" != e } function n(t, e) { for (var i in e) e.hasOwnProperty(i) && (s(e[i]) ? s(t[i]) ? n(t[i], e[i]) : t[i] = Object.assign({}, e[i]) : t[i] = e[i]) } return t instanceof Object || (t = {}), n(t, e), i && n(t, i), t }, EventDispatcher: function (s) { var n = document.createTextNode(""); this.off = function (t, e) { return e && n.removeEventListener.call(n, t, e), this }, this.on = function (t, e) { return e && n.addEventListener.call(n, t, e), this }, this.trigger = function (t, e) { var i; if (t) if (s.settings.isJQueryPlugin) $(s.DOM.originalInput).triggerHandler(t, [e]); else { try { i = new CustomEvent(t, { detail: e }) } catch (t) { console.warn(t) } n.dispatchEvent(i) } } }, events: { customBinding: function () { var e = this; this.customEventsList.forEach(function (t) { e.on(t, e.settings.callbacks[t]) }) }, binding: function (t) { var e, i = !(0 < arguments.length && void 0 !== t) || t, s = this.events.callbacks, n = i ? "addEventListener" : "removeEventListener", a = 1 == this.settings.editTags ? "click_" : 2 == this.settings.editTags ? "dblclick" : ""; for (var o in i && !this.listeners.main && (this.DOM.input.addEventListener(this.isIE ? "keydown" : "input", s[this.isIE ? "onInputIE" : "onInput"].bind(this)), this.settings.isJQueryPlugin && $(this.DOM.originalInput).on("tagify.removeAllTags", this.removeAllTags.bind(this))), e = this.listeners.main = this.listeners.main || r({ paste: ["input", s.onPaste.bind(this)], focus: ["input", s.onFocusBlur.bind(this)], blur: ["input", s.onFocusBlur.bind(this)], keydown: ["input", s.onKeydown.bind(this)], click: ["scope", s.onClickScope.bind(this)] }, a, ["scope", s.onDoubleClickScope.bind(this)])) this.DOM[e[o][0]][n](o.replace(/_/g, ""), e[o][1]); this.DOM.input.removeEventListener("blur", e.blur[1]), this.DOM.input.addEventListener("blur", e.blur[1]) }, callbacks: { onFocusBlur: function (t) { var e = t.target ? t.target.textContent.trim() : ""; if ("mix" != this.settings.mode) { if ("focus" == t.type) return this.DOM.scope.classList.add("tagify--focus"), this.trigger("focus"), void (0 === this.settings.dropdown.enabled && this.dropdown.show.call(this)); "blur" == t.type && (this.DOM.scope.classList.remove("tagify--focus"), this.trigger("blur"), e && this.settings.addTagOnBlur && this.addTags(e, !0).length), this.DOM.input.removeAttribute("style"), this.dropdown.hide.call(this) } }, onKeydown: function (t) { var e, i = this, s = t.target.textContent.trim(); if ("mix" == this.settings.mode) { switch (t.key) { case "Delete": case "Backspace": var n = []; e = this.DOM.input.children, setTimeout(function () { [].forEach.call(e, function (t) { return n.push(t.getAttribute("value")) }), i.value = i.value.filter(function (t) { return -1 != n.indexOf(t.value) }) }, 20) }return !0 } switch (t.key) { case "Backspace": "" != s && 8203 != s.charCodeAt(0) || (!0 === this.settings.backspace ? this.removeTag() : "edit" == this.settings.backspace && setTimeout(this.editTag.bind(this), 0)); break; case "Esc": case "Escape": t.target.blur(); break; case "Down": case "ArrowDown": "select" == this.settings.mode && this.dropdown.show.call(this); break; case "ArrowRight": case "Tab": if (!s) return !0; case "Enter": t.preventDefault(), this.addTags(s, !0) } }, onInput: function (t) { var e = "mix" == this.settings.mode ? this.DOM.input.textContent : this.input.normalize.call(this), i = e.length >= this.settings.dropdown.enabled, s = { value: e, inputElm: this.DOM.input }; if ("mix" == this.settings.mode) return this.events.callbacks.onMixTagsInput.call(this, t); e ? this.input.value != e && (s.isValid = this.validateTag(e), this.input.set.call(this, e, !1), this.trigger("input", s), -1 != e.search(this.settings.delimiters) ? this.addTags(e).length && this.input.set.call(this) : 0 <= this.settings.dropdown.enabled && this.dropdown[i ? "show" : "hide"].call(this, e)) : this.input.set.call(this, "") }, onMixTagsInput: function (t) { var e, i, s, n, a; if (this.maxTagsReached()) return !0; window.getSelection && 0 < (e = window.getSelection()).rangeCount && ((i = e.getRangeAt(0).cloneRange()).collapse(!0), i.setStart(window.getSelection().focusNode, 0), (n = (s = i.toString().split(this.settings.mixTagsAllowedAfter))[s.length - 1].match(this.settings.pattern)) && (this.state.tag = { prefix: n[0], value: n.input.split(n[0])[1] }, n = this.state.tag, a = this.state.tag.value.length >= this.settings.dropdown.enabled)), this.update(), this.trigger("input", this.extend({}, this.state.tag, { textContent: this.DOM.input.textContent })), this.state.tag && this.dropdown[a ? "show" : "hide"].call(this, this.state.tag.value) }, onInputIE: function (t) { var e = this; setTimeout(function () { e.events.callbacks.onInput.call(e, t) }) }, onPaste: function (t) { }, onClickScope: function (t) { var e, i = t.target.closest("tag"); if ("TAGS" == t.target.tagName) this.DOM.input.focus(); else { if ("X" == t.target.tagName) return void this.removeTag(t.target.parentNode); i && (e = this.getNodeIndex(i), this.trigger("click", { tag: i, index: e, data: this.value[e] })) } "select" != this.settings.mode && 0 !== this.settings.dropdown.enabled || this.dropdown.show.call(this) }, onEditTagInput: function (t) { var e = t.closest("tag"), i = this.getNodeIndex(e), s = this.input.normalize(t), n = s.toLowerCase() == t.originalValue.toLowerCase() || this.validateTag(s); e.classList.toggle("tagify--invalid", !0 !== n), e.isValid = n, this.trigger("input", { tag: e, index: i, data: this.extend({}, this.value[i], { newValue: s }) }) }, onEditTagBlur: function (t) { var e = t.closest("tag"), i = this.getNodeIndex(e), s = this.input.normalize(t), n = s || t.originalValue, a = this.input.normalize(t) != t.originalValue, o = e.isValid, r = u({}, this.value[i], { value: n }); this.DOM.input.focus(), s ? a ? (this.settings.transformTag.call(this, r), void 0 !== (o = this.validateTag(r.value)) && !0 !== o || (this.editTagDone(e, r), this.trigger("edit", { tag: e, index: i, data: this.value[i] }))) : this.editTagDone(e) : this.removeTag(e) }, onEditTagkeydown: function (t) { switch (t.key) { case "Esc": case "Escape": t.target.textContent = t.target.originalValue; case "Enter": case "Tab": t.preventDefault(), t.target.blur() } }, onDoubleClickScope: function (t) { var e, i, s = t.target.closest("tag"), n = this.settings; s && (e = s.classList.contains("tagify--editable"), i = s.hasAttribute("readonly"), "mix" == n.mode || "select" == n.mode || n.readonly || n.enforceWhitelist || e || i || this.editTag(s)) } } }, editTag: function (t) { var e = this, i = 0 < arguments.length && void 0 !== t ? t : this.getLastTag(), s = i.querySelector(".tagify__tag-text"), n = this.events.callbacks; if (s) return i.classList.add("tagify--editable"), s.originalValue = s.textContent, s.setAttribute("contenteditable", !0), s.addEventListener("blur", n.onEditTagBlur.bind(this, s)), s.addEventListener("input", n.onEditTagInput.bind(this, s)), s.addEventListener("keydown", function (t) { return n.onEditTagkeydown.call(e, t) }), s.focus(), this.setRangeAtStartEnd(!1, s), this; console.warn("Cannot find element in Tag template: ", ".tagify__tag-text") }, editTagDone: function (t, e) { var i, s = t.querySelector(".tagify__tag-text"), n = s.cloneNode(!0); n.removeAttribute("contenteditable"), t.classList.remove("tagify--editable"), s.parentNode.replaceChild(n, s), e && (s.textContent = e.value, t.title = e.value, i = this.getNodeIndex(t), this.value[i].value = e.value, this.update()) }, setRangeAtStartEnd: function (t, e) { var i, s; document.createRange && ((i = document.createRange()).selectNodeContents(e || this.DOM.input), i.collapse(!!t), (s = window.getSelection()).removeAllRanges(), s.addRange(i)) }, input: { value: "", set: function (t, e, i) { var s = 0 < arguments.length && void 0 !== t ? t : "", n = !(1 < arguments.length && void 0 !== e) || e, a = 0 < this.settings.dropdown.enabled || this.settings.dropdown.closeOnSelect; this.input.value = s, n && (this.DOM.input.innerHTML = s), !s && a && setTimeout(this.dropdown.hide.bind(this), 20), this.input.autocomplete.suggest.call(this, ""), this.input.validate.call(this) }, validate: function () { var t = !this.input.value || this.validateTag(this.input.value); "select" == this.settings.mode ? this.DOM.scope.classList.toggle("tagify--invalid", !0 !== t) : this.DOM.input.classList.toggle("tagify__input--invalid", !0 !== t) }, normalize: function (t) { var e = (0 < arguments.length && void 0 !== t ? t : this.DOM.input).innerText; return "settings" in this && this.settings.delimiters && (e = e.replace(/(?:\r\n|\r|\n)/g, this.settings.delimiters.source.charAt(1))), e = e.replace(/\s/g, " ").replace(/^\s+/, "") }, autocomplete: { suggest: function (t) { t && this.input.value ? this.DOM.input.setAttribute("data-suggest", t.substring(this.input.value.length)) : this.DOM.input.removeAttribute("data-suggest") }, set: function (t) { var e = this.DOM.input.getAttribute("data-suggest"), i = t || (e ? this.input.value + e : null); return !!i && (this.input.set.call(this, i), this.input.autocomplete.suggest.call(this, ""), this.dropdown.hide.call(this), this.setRangeAtStartEnd(), !0) } } }, getNodeIndex: function (t) { var e = 0; if (t) for (; t = t.previousElementSibling;)e++; return e }, getTagElms: function () { return this.DOM.scope.querySelectorAll("tag") }, getLastTag: function () { var t = this.DOM.scope.querySelectorAll("tag:not(.tagify--hide):not([readonly])"); return t[t.length - 1] }, isTagDuplicate: function (e) { return "select" != this.settings.mode && this.value.some(function (t) { return "string" == typeof e ? e.trim().toLowerCase() === t.value.toLowerCase() : JSON.stringify(t).toLowerCase() === JSON.stringify(e).toLowerCase() }) }, getTagIndexByValue: function (i) { var s = []; return this.getTagElms().forEach(function (t, e) { t.textContent.trim().toLowerCase() == i.toLowerCase() && s.push(e) }), s }, getTagElmByValue: function (t) { var e = this.getTagIndexByValue(t)[0]; return this.getTagElms()[e] }, markTagByValue: function (t, e) { return !!(e = e || this.getTagElmByValue(t)) && (e.classList.add("tagify--mark"), e) }, isTagBlacklisted: function (e) { return e = e.toLowerCase().trim(), this.settings.blacklist.filter(function (t) { return e == t.toLowerCase() }).length }, isTagWhitelisted: function (e) { return this.settings.whitelist.some(function (t) { return "string" == typeof e ? e.trim().toLowerCase() === (t.value || t).toLowerCase() : JSON.stringify(t).toLowerCase() === JSON.stringify(e).toLowerCase() }) }, validateTag: function (t) { var e = t.trim(), i = !0; return e ? this.settings.pattern && !this.settings.pattern.test(e) ? i = this.TEXTS.pattern : !this.settings.duplicates && this.isTagDuplicate(e) ? i = this.TEXTS.duplicate : (this.isTagBlacklisted(e) || this.settings.enforceWhitelist && !this.isTagWhitelisted(e)) && (i = this.TEXTS.notAllowed) : i = this.TEXTS.empty, i }, maxTagsReached: function () { return this.value.length >= this.settings.maxTags && this.TEXTS.exceed }, normalizeTags: function (t) { function i(t) { return t.split(a).filter(function (t) { return t }).map(function (t) { return { value: t.trim() } }) } var e, s = this.settings, n = s.whitelist, a = s.delimiters, o = s.mode, r = !!n && n[0] instanceof Object, l = t instanceof Array && t[0] instanceof Object && "value" in t[0], d = []; if (l) return t = (e = []).concat.apply(e, c(t.map(function (e) { return i(e.value).map(function (t) { return u({}, e, {}, t) }) }))); if ("number" == typeof t && (t = t.toString()), "string" == typeof t) { if (!t.trim()) return []; t = i(t) } else if (!l && t instanceof Array) { var h; t = (h = []).concat.apply(h, c(t.map(function (t) { return i(t) }))) } return r && (t.forEach(function (e) { var t = n.filter(function (t) { return t.value.toLowerCase() == e.value.toLowerCase() }); t[0] ? d.push(t[0]) : "mix" != o && d.push(e) }), t = d), t }, parseMixTags: function (t) { var a = this, e = this.settings, o = e.mixTagsInterpolator, r = e.duplicates, l = e.transformTag; return t = t.split(o[0]).map(function (t) { var e, i, s = t.split(o[1]), n = s[0]; try { e = JSON.parse(n) } catch (t) { e = a.normalizeTags(n)[0] } return !(1 < s.length && a.isTagWhitelisted(e.value)) || r && a.isTagDuplicate(e) || (l.call(a, e), i = a.createTagElem(e), s[0] = i.outerHTML, a.value.push(e)), s.join("") }).join(""), this.DOM.input.innerHTML = t, this.update(), t }, addMixTag: function (t) { if (t && this.state.tag) { for (var e, i, s, n, a = this.state.tag.prefix + this.state.tag.value, o = document.createNodeIterator(this.DOM.input, NodeFilter.SHOW_TEXT, null, !1), r = 100; (e = o.nextNode()) && r--;)if (e.nodeType === Node.TEXT_NODE) { if (-1 == (s = e.nodeValue.indexOf(a))) continue; n = e.splitText(s), this.settings.transformTag.call(this, t), i = this.createTagElem(t), n.nodeValue = n.nodeValue.replace(a, ""), e.parentNode.insertBefore(i, n) } i && (this.value.push(t), this.update(), this.trigger("add", this.extend({}, { index: this.value.length, tag: i }, t))), this.state.tag = null } }, addEmptyTag: function () { var t = { value: "" }, e = this.createTagElem(t); this.appendTag.call(this, e), this.value.push(t), this.update(), this.editTag(e) }, addTags: function (t, n, e) { var a = this, o = 2 < arguments.length && void 0 !== e ? e : this.settings.skipInvalid, r = []; return t && t.length ? (t = this.normalizeTags.call(this, t), "mix" == this.settings.mode ? this.addMixTag(t[0]) : ("select" == this.settings.mode && (t.length = 1), this.DOM.input.removeAttribute("style"), t.forEach(function (t) { var e, i, s = {}; if (t = Object.assign({}, t), a.settings.transformTag.call(a, t), !0 !== (e = a.maxTagsReached() || a.validateTag(t.value))) { if (o) return; s["aria-invalid"] = !0, s.class = (t.class || "") + " tagify--notAllowed", s.title = e, a.markTagByValue(t.value), a.trigger("invalid", { data: t, index: a.value.length, message: e }) } if (s.role = "tag", t.readonly && (s["aria-readonly"] = !0), i = a.createTagElem(a.extend({}, t, s)), r.push(i), "select" == a.settings.mode && (a.settings.dropdown.closeOnSelect && (a.dropdown.hide.call(a), a.events.callbacks.onFocusBlur.call(a, { type: "blur" })), n = !1, a.input.set.call(a, t.value, !0, !0), a.getLastTag())) return a.editTagDone(a.getLastTag(), t), a.value[0] = t, a.update(), a.trigger("add", { tag: i, data: t }), [i]; a.appendTag(i), !0 === e ? (a.value.push(t), a.update(), a.trigger("add", { tag: i, index: a.value.length - 1, data: t })) : a.settings.keepInvalidTags || setTimeout(function () { a.removeTag(i, !0) }, 1e3), a.dropdown.position.call(a) }), t.length && n && this.input.set.call(this), r)) : ("select" == this.settings.mode && this.removeAllTags(), r) }, appendTag: function (t) { var e = this.DOM.scope.lastElementChild; e === this.DOM.input ? this.DOM.scope.insertBefore(t, e) : this.DOM.scope.appendChild(t) }, minify: function (t) { return t.replace(new RegExp(">[\r\n ]+<", "g"), "><") }, createTagElem: function (t) { var e = this.escapeHTML(t.value), i = this.settings.templates.tag.call(this, e, t); return this.settings.readonly && (t.readonly = !0), i = this.minify(i), this.parseHTML(i) }, removeTag: function (t, e, i) { var s = 0 < arguments.length && void 0 !== t ? t : this.getLastTag(), n = 1 < arguments.length ? e : void 0, a = 2 < arguments.length && void 0 !== i ? i : 250; if ("string" == typeof s && (s = this.getTagElmByValue(s)), s instanceof HTMLElement) { var o, r = this, l = this.getNodeIndex(s); "select" == this.settings.mode && (a = 0, this.input.set.call(this)), s.classList.contains("tagify--notAllowed") && (n = !0), a && 10 < a ? (s.style.width = parseFloat(window.getComputedStyle(s).width) + "px", document.body.clientTop, s.classList.add("tagify--hide"), setTimeout(d, 400)) : d() } function d() { s.parentNode && (s.parentNode.removeChild(s), n ? r.settings.keepInvalidTags && r.trigger("remove", { tag: s, index: l }) : (o = r.value.splice(l, 1)[0], r.update(), r.trigger("remove", { tag: s, index: l, data: o }), r.dropdown.render.call(r), r.dropdown.position.call(r))) } }, removeAllTags: function () { this.value = [], this.update(), Array.prototype.slice.call(this.getTagElms()).forEach(function (t) { return t.parentNode.removeChild(t) }), this.dropdown.position.call(this) }, getAttributes: function (t) { if ("[object Object]" != Object.prototype.toString.call(t)) return ""; var e, i, s = Object.keys(t), n = ""; for (i = s.length; i--;)"class" != (e = s[i]) && t.hasOwnProperty(e) && t[e] && (n += " " + e + (t[e] ? '="'.concat(t[e], '"') : "")); return n }, preUpdate: function () { this.DOM.scope.classList.toggle("hasMaxTags", this.value.length >= this.settings.maxTags) }, update: function () { this.preUpdate(), this.DOM.originalInput.value = "mix" == this.settings.mode ? this.getMixedTagsAsString() : this.value.length ? JSON.stringify(this.value) : "" }, getMixedTagsAsString: function () { var e = this, i = "", s = 0, n = this.settings.mixTagsInterpolator; return this.DOM.input.childNodes.forEach(function (t) { 1 == t.nodeType && t.classList.contains("tagify__tag") ? i += n[0] + JSON.stringify(e.value[s++]) + n[1] : i += t.textContent }), i }, dropdown: { init: function () { this.DOM.dropdown = this.dropdown.build.call(this) }, build: function () { var t = this.settings.dropdown, e = t.position, i = t.classname, s = "".concat("manual" == e ? "" : "tagify__dropdown", " ").concat(i).trim(), n = '<div class="'.concat(s, '" role="menu"></div>'); return this.parseHTML(n) }, show: function (t) { var e, i, s, n = this.settings, a = "manual" == n.dropdown.position; if (n.whitelist.length) { if (this.suggestedListItems = this.dropdown.filterListItems.call(this, t), !this.suggestedListItems.length) return this.input.autocomplete.suggest.call(this), void this.dropdown.hide.call(this); s = (i = this.suggestedListItems[0]).value || i, this.settings.autoComplete && 0 == s.indexOf(t) && this.input.autocomplete.suggest.call(this, s), e = this.dropdown.createListHTML.call(this, this.suggestedListItems), this.DOM.dropdown.innerHTML = this.minify(e), (n.enforceWhitelist && !a || n.dropdown.highlightFirst) && this.dropdown.highlightOption.call(this, this.DOM.dropdown.children[0]), this.DOM.scope.setAttribute("aria-expanded", !0), this.trigger("dropdown:show", this.DOM.dropdown), document.body.contains(this.DOM.dropdown) || (a || (this.dropdown.position.call(this), document.body.appendChild(this.DOM.dropdown), this.events.binding.call(this, !1)), this.dropdown.events.binding.call(this)) } }, hide: function (t) { var e = this.DOM, i = e.scope, s = e.dropdown, n = "manual" == this.settings.dropdown.position && !t; s && document.body.contains(s) && !n && (window.removeEventListener("resize", this.dropdown.position), this.dropdown.events.binding.call(this, !1), setTimeout(this.events.binding.bind(this), 250), i.setAttribute("aria-expanded", !1), s.parentNode.removeChild(s), this.trigger("dropdown:hide", s)) }, render: function () { this.suggestedListItems = this.dropdown.filterListItems.call(this, ""); var t = this.dropdown.createListHTML.call(this, this.suggestedListItems); this.DOM.dropdown.innerHTML = this.minify(t) }, position: function () { var t = this.DOM.scope.getBoundingClientRect(); this.DOM.dropdown.style.cssText = "left: " + (t.left + window.pageXOffset) + "px;                                                top: " + (t.top + t.height - 1 + window.pageYOffset) + "px;                                                width: " + t.width + "px" }, events: { binding: function (t) { var e = !(0 < arguments.length && void 0 !== t) || t, i = this.dropdown.events.callbacks, s = this.listeners.dropdown = this.listeners.dropdown || { position: this.dropdown.position.bind(this), onKeyDown: i.onKeyDown.bind(this), onMouseOver: i.onMouseOver.bind(this), onMouseLeave: i.onMouseLeave.bind(this), onClick: i.onClick.bind(this) }, n = e ? "addEventListener" : "removeEventListener"; "manual" != this.settings.dropdown.position && (window[n]("resize", s.position), window[n]("keydown", s.onKeyDown)), window[n]("mousedown", s.onClick), this.DOM.dropdown[n]("mouseover", s.onMouseOver), this.DOM.dropdown[n]("mouseleave", s.onMouseLeave), this.DOM[this.listeners.main.click[0]][n]("click", this.listeners.main.click[1]) }, callbacks: { onKeyDown: function (t) { var e = this, i = this.DOM.dropdown.querySelector("[class$='--active']"), s = i, n = ""; switch (t.key) { case "ArrowDown": case "ArrowUp": case "Down": case "Up": t.preventDefault(), s = (s = s && s[("ArrowUp" == t.key || "Up" == t.key ? "previous" : "next") + "ElementSibling"]) || this.DOM.dropdown.children["ArrowUp" == t.key || "Up" == t.key ? this.DOM.dropdown.children.length - 1 : 0], this.dropdown.highlightOption.call(this, s, !0); break; case "Escape": case "Esc": this.dropdown.hide.call(this); break; case "ArrowRight": case "Tab": try { var a = s ? s.textContent : this.suggestedListItems[0].value; this.input.autocomplete.set.call(this, a) } catch (t) { } return !1; case "Enter": t.preventDefault(); var o = this.settings.dropdown.enabled || this.settings.dropdown.closeOnSelect; if (i) return n = this.suggestedListItems[this.getNodeIndex(i)] || this.input.value, this.trigger("dropdown:select", n), this.addTags([n], !0), this.dropdown[o ? "hide" : "show"].call(this), "select" == this.settings.mode && setTimeout(function () { return e.DOM.input.blur() }), !1; this.addTags(this.input.value, !0); break; case "Backspace": if ("mix" == this.settings.mode) return; "" != (a = this.input.value.trim()) && 8203 != a.charCodeAt(0) || (!0 === this.settings.backspace ? this.removeTag() : "edit" == this.settings.backspace && setTimeout(this.editTag.bind(this), 0)) } }, onMouseOver: function (t) { t.target.className.includes("__item") && this.dropdown.highlightOption.call(this, t.target) }, onMouseLeave: function (t) { this.dropdown.highlightOption.call(this) }, onClick: function (t) { var e, i, s = this; if (0 == t.button && t.target != this.DOM.dropdown) if (i = t.target.closest(".tagify__dropdown__item")) { if (i.parentNode !== this.DOM.dropdown) return; e = this.suggestedListItems[this.getNodeIndex(i)] || this.input.value, this.trigger("dropdown:select", e), this.addTags([e], !0), "select" != this.settings.mode && setTimeout(function () { return s.DOM.input.focus() }), this.settings.dropdown.closeOnSelect && this.dropdown.hide.call(this) } else this.dropdown.hide.call(this), t.target.closest(".tagify") || this.events.callbacks.onFocusBlur.call(this, { type: "blur", target: this.DOM.input }) } } }, highlightOption: function (t, e) { var i, s = "tagify__dropdown__item--active"; this.DOM.dropdown.querySelectorAll("[class$='--active']").forEach(function (t) { t.classList.remove(s), t.removeAttribute("aria-selected") }), t ? (t.classList.add(s), t.setAttribute("aria-selected", !0), e && (t.parentNode.scrollTop = t.clientHeight + t.offsetTop - t.parentNode.clientHeight), this.settings.autoComplete && (i = this.suggestedListItems[this.getNodeIndex(t)].value || this.input.value, this.input.autocomplete.suggest.call(this, i))) : this.input.autocomplete.suggest.call(this) }, filterListItems: function (t) { var e, i, s, n, a = this, o = [], r = this.settings.whitelist, l = this.settings.dropdown.maxItems || 1 / 0, d = 0; if (!t) return r.filter(function (t) { return !a.isTagDuplicate(t.value || t) }).slice(0, l); for (; d < r.length && (s = (((e = r[d] instanceof Object ? r[d] : { value: r[d] }).searchBy || "") + " " + e.value).toLowerCase().indexOf(t.toLowerCase()), i = this.settings.dropdown.fuzzySearch ? 0 <= s : 0 == s, n = !this.settings.duplicates && this.isTagDuplicate(e.value), i && !n && l-- && o.push(e), 0 != l); d++); return o }, createListHTML: function (t) { var e = this.settings.templates.dropdownItem.bind(this); return t.map(e).join("") } } }, t });