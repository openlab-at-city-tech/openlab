{"version":3,"file":"gf_image_choices_admin.js","names":["imageChoicesAdmin","$","GF_MARKUP_VERSION","markupDetect","window","form","hasOwnProperty","markupVersion","parseInt","toString","isLegacyMode","imageChoicesVars","useNewFeatures","formHasImageChoicesFields","hasImageChoicesFields","each","fields","i","field","imageChoices_enableImages","markup","removeChoicesButton","imageChoicesFieldStrings","removeAllChoices","choicesAdminRow","index","image","id","undefined","img","uploadImage","removeImage","join","choicesPreviewRow","labelText","getChoices","GetSelectedField","getSettingsElement","find","$row","this","data","choices","length","imageChoices_image","imgID","imageChoices_imageID","$firstInput","before","val","addClass","updateFieldPreview","RemovePreview","btnEl","$choice","closest","css","removeClass","UpdateFieldChoicesObject","imageID","$field","imagesEnabled","imageChoices_showLabels","toggleShowLabels","$fieldChoices","hasClass","$label","html","getField","trigger","$settingsWrap","isColorPickerPluginActive","colorPickerFieldVars","toggleEnableImages","enable","$settings","$toggle","$coloPickerToggle","is","confirm","confirmImagesToggle","colorPicker_toggleEnableColors","onToggleEnableImages","prop","imageChoices_toggleEnableImages","SetFieldProperty","toggle","choicesContainerSelector","type","toLowerCase","toggleClass","$removeChoicesBtn","remove","$enableOtherChoicesSetting","inputType","show","toggleShowPrices","toggleUseLightboxCaption","toggleUseLightbox","fieldChoice","hasImage","hasImageID","alert","useLightboxWarning","updateEntrySetting","value","OpenMediaLibrary","imageChoices_fileFrame","open","wp","media","title","button","text","frame","state","multiple","setTimeout","jQuery","on","selection","get","attachment","first","display","toJSON","sizes","size","unshift","imageSize","url","$choicesFlyout","fieldCanHaveImages","canHave","gform","applyFilters","fieldSettingsSelector","previewHeight","$el","height","outerHeight","updateThemeSetting","$previewImg","$previewWrap","hide","gf_image_choices_theme","globals","theme","defaults","updateFeatureColorSetting","$customColorLabel","$customColorInput","$customColorPicker","customColor","wpColorPicker","change","e","ui","updateCustomFeatureColor","color","updateAlignSetting","updateImageStyleSetting","validateNumericValue","numVal","trim","num","isNaN","updateColumnsSetting","updateColumnsWidthSetting","updateColumnsMediumSetting","updateColumnsMediumWidthSetting","updateColumnsSmallSetting","updateColumnsSmallWidthSetting","updateHeightSetting","updateMediumHeightSetting","updateSmallHeightSetting","formEditorInit","document","addAction","$fieldSettings","useLightbox","imageChoices_useLightbox","displayLabels","showPrices","imageChoices_showPrices","entryValue","imageChoices_entrySetting","selectedTheme","imageChoices_theme","featureColor","imageChoices_featureColor","featureColorCustom","imageChoices_featureColorCustom","alignSetting","imageChoices_align","imageStyle","imageChoices_imageStyle","columnsSetting","imageChoices_columns","columnsWidthSetting","imageChoices_columnsWidth","columnsMediumSetting","imageChoices_columnsMedium","columnsMediumWidthSetting","imageChoices_columnsWidthMedium","columnsSmallSetting","imageChoices_columnsSmall","columnsSmallWidthSetting","imageChoices_columnsWidthSmall","useLightboxCaption","imageChoices_useLightboxCaption","heightSetting","imageChoices_height","mediumHeightSetting","imageChoices_heightMedium","smallHeightSetting","imageChoices_heightSmall","bind","event","imageChoices_GF_UpdateFieldChoices","UpdateFieldChoices","apply","arguments","formEditorLegacyWarning","$customCssBoxes","editorSettings","codeEditor","defaultSettings","_","clone","codemirror","extend","indentUnit","tabSize","mode","lineNumbers","autoCloseBrackets","continueComments","indentWithTabs","inputStyle","lineWrapping","lint","matchBrackets","styleActiveLine","gutters","extraKeys","initialize","$legacyCssSectionToggle","ref","attr","refresh","$legacyModeToggle","$newFeaturesElements","useLegacyMode","click","$settingsTabNavLinks","$numericSettingsInputs","currentTarget","$settingsThemeSelect","$settingsThemePreview","settingsCustomFeatureColor","$settingsFeatureColorPicker","$settingsFeatureColorSelect","$settingsFeatureColorCustom","$settingsFeatureColorInput","$urlReplacementTool","$urlReplacementSubmit","$urlReplacementProgress","$urlReplacementProgressBar","$urlReplacementStatus","urlReplacements","old","new","forms","replacements","processUrlReplacement","$sizeReplacementTool","ajax","ajaxurl","method","action","beforeSend","jqXHR","settings","success","response","total","error","Math","ceil","preventDefault","formId","oldUrl","newUrl","form_id","$sizeReplacementSubmit","$sizeReplacementProgress","$sizeReplacementProgressBar","$sizeReplacementStatus","sizeReplacements","processSizeReplacement","newSize"],"sources":["gf_image_choices_admin.js"],"sourcesContent":["var imageChoicesAdmin = imageChoicesAdmin || {};\n\n(function($){\n\n\tvar GF_MARKUP_VERSION = 2;\n\n\timageChoicesAdmin.markupDetect = function() {\n\t\tif ( typeof window.form !== 'undefined' && window.form.hasOwnProperty('markupVersion') ) {\n\t\t\tGF_MARKUP_VERSION = ( window.form.markupVersion !== '' ) ? parseInt( window.form.markupVersion.toString(), 10 ) : 1;\n\t\t}\n\t\treturn GF_MARKUP_VERSION;\n\t};\n\n\timageChoicesAdmin.isLegacyMode = function() {\n\t\tvar useNewFeatures = ( imageChoicesVars.hasOwnProperty('useNewFeatures') && imageChoicesVars.useNewFeatures.toString() === 'true');\n\t\treturn !useNewFeatures;\n\t};\n\n\timageChoicesAdmin.formHasImageChoicesFields = function() {\n\t\tvar hasImageChoicesFields = false;\n\t\t$.each(window.form.fields, function(i, field){\n\t\t\tif ( field.hasOwnProperty('imageChoices_enableImages') && field.imageChoices_enableImages ) {\n\t\t\t\thasImageChoicesFields = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn hasImageChoicesFields;\n\t};\n\n\timageChoicesAdmin.markup = {\n\t\tremoveChoicesButton: function(){\n\t\t\treturn '<button class=\"button image-choices-remove-choices-btn\" type=\"button\" onclick=\"imageChoicesAdmin.removeAllChoices();\">'+imageChoicesFieldStrings.removeAllChoices+'</button>';\n\t\t},\n\t\tchoicesAdminRow: function(index, image, id){\n\t\t\tvar i = (index !== undefined) ? index : 0;\n\t\t\tvar img = (image !== undefined) ? image : '';\n\t\t\tvar id = (id !== undefined) ? id : '';\n\t\t\tvar buttonLabel = '<i class=\"ic-select-icon\"></i>';// GF 2.5+\n\t\t\treturn [\n\t\t\t\t'<button type=\"button\" id=\"image-choices-option-upload-button-'+i+'\" class=\"button image-choices-option-upload-button\" onclick=\"imageChoicesAdmin.OpenMediaLibrary(this);\" title=\"'+imageChoicesFieldStrings.uploadImage+'\">'+buttonLabel+'</button>',\n\t\t\t\t'<span id=\"image-choices-option-preview-'+i+'\" class=\"image-choices-option-preview-wrap\">',\n\t\t\t\t\t'<span class=\"image-choices-option-preview\" style=\"background-image:url('+img+');\"></span>',\n\t\t\t\t\t'<a href=\"javascript:void(0);\" class=\"image-choices-option-image-remove\" onclick=\"imageChoicesAdmin.RemovePreview(this);\" title=\"'+imageChoicesFieldStrings.removeImage+'\"><i class=\"dashicons dashicons-no\"></i></a>',\n\t\t\t\t'</span>',\n\t\t\t\t'<input type=\"hidden\" id=\"image-choices-option-image-'+i+'\" class=\"image-choices-option-image\" value=\"'+img+'\" />',\n\t\t\t\t'<input type=\"hidden\" id=\"image-choices-option-image-id-'+i+'\" class=\"image-choices-option-image-id\" value=\"'+id+'\" />'\n\t\t\t].join('');\n\t\t},\n\t\tchoicesPreviewRow: function(index, labelText, image) {\n\t\t\tvar i = (index !== undefined) ? index : 0;\n\t\t\tvar label = (labelText !== undefined) ? labelText : '';\n\t\t\tvar img = (image !== undefined) ? image : '';\n\t\t\treturn [\n\t\t\t\t'<span class=\"image-choices-choice-image-wrap\" style=\"background-image:url('+img+')\">',\n\t\t\t\t\t'<img src=\"'+img+'\" alt=\"\" class=\"image-choices-choice-image\" />',\n\t\t\t\t'</span>',\n\t\t\t\t'<span class=\"image-choices-choice-text\">'+label+'</span>'\n\t\t\t].join('');\n\t\t}\n\t};\n\n\timageChoicesAdmin.getChoices = function( field ) {\n\t\tif ( typeof field === 'undefined' ) {\n\t\t\tfield = GetSelectedField();\n\t\t}\n\n\t\tvar choicesSelector = '[class*=\"-choice-row\"]';\n\n\t\timageChoicesAdmin.getSettingsElement().find(choicesSelector).each(function(){\n\t\t\tvar $row = $(this);\n\t\t\tvar i = $row.data('index');\n\t\t\tvar img = (field.choices.length && field.choices[i].imageChoices_image !== undefined) ? field.choices[i].imageChoices_image : '';\n\t\t\tvar imgID = (field.choices.length && field.choices[i].imageChoices_imageID !== undefined) ? field.choices[i].imageChoices_imageID : '';\n\n\t\t\tif ( !$row.find('.image-choices-option-image').length ) {\n\t\t\t\tvar $firstInput = $row.find('input[id*=\"_choice_text\"]:first');\n\t\t\t\tif ( !$firstInput.length ) {\n\t\t\t\t\t$firstInput = $row.find('input[id*=\"-choice-text\"]:first');\n\t\t\t\t}\n\t\t\t\tif ( $firstInput.length ) {\n\t\t\t\t\t$firstInput.before(imageChoicesAdmin.markup.choicesAdminRow(i, img, imgID));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar $imageInput = $row.find('.image-choices-option-image');\n\t\t\tif ($imageInput.val() !== '') {\n\t\t\t\t$row.addClass('image-choices-has-image');\n\t\t\t}\n\t\t});\n\n\t\timageChoicesAdmin.updateFieldPreview(field);\n\t};\n\n\timageChoicesAdmin.RemovePreview = function( btnEl ) {\n\t\tif (typeof btnEl === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $choice = $(btnEl).closest('[class*=\"-choice-row\"]');\n\t\t$choice.find('.image-choices-option-image').val('');\n\t\t$choice.find('.image-choices-option-image-id').val('');\n\t\t$choice.find('.image-choices-option-preview').css('background-image', '');\n\t\t$choice.removeClass('image-choices-has-image');\n\n\t\timageChoicesAdmin.UpdateFieldChoicesObject();\n\n\t\tvar field = GetSelectedField();\n\t\timageChoicesAdmin.updateFieldPreview(field);\n\t};\n\n\timageChoicesAdmin.UpdateFieldChoicesObject = function() {\n\t\tvar field = GetSelectedField();\n\n\t\tvar $fieldSettings = imageChoicesAdmin.getSettingsElement();\n\n\t\tvar selector = '[class*=\"-choice-row\"]';\n\n\t\t$fieldSettings.find(selector).each(function(index) {\n\t\t\tvar $choice = $(this);\n\t\t\tvar image = $choice.find('.image-choices-option-image').val();\n\t\t\tvar imageID = $choice.find('.image-choices-option-image-id').val();\n\t\t\tvar i = $choice.data(\"index\");\n\t\t\tif (image !== '') {\n\t\t\t\t$choice.addClass('image-choices-has-image');\n\t\t\t\t$choice.find('.gf-image-choices-option-preview').css('background-image', 'url('+image+')');\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$choice.removeClass('image-choices-has-image');\n\t\t\t}\n\t\t\tfield.choices[i].imageChoices_image = image;\n\t\t\tfield.choices[i].imageChoices_imageID = imageID;\n\t\t});\n\t};\n\n\timageChoicesAdmin.updateFieldPreview = function( field ) {\n\n\t\tvar $field = $('#field_'+field.id);\n\n\t\tvar imagesEnabled = (field.hasOwnProperty('imageChoices_enableImages') && field.imageChoices_enableImages === true);\n\t\tif ( !imagesEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( imagesEnabled && field.imageChoices_showLabels === undefined ) {\n\t\t\timageChoicesAdmin.toggleShowLabels(true);\n\t\t}\n\n\t\t// inject the preview if not there\n\t\timageChoicesAdmin.$fieldChoices( $field ).each(function(i){\n\t\t\tvar $choice = $(this);\n\n\t\t\tif ( !$choice.hasClass('gchoice_total') ) {\n\n\t\t\t\t$choice.addClass('image-choices-choice');\n\n\t\t\t\tvar $label = $choice.find('label');\n\t\t\t\tvar labelText = ($label.find('.image-choices-choice-text').length) ? $label.find('.image-choices-choice-text').html() : $label.html();\n\n\t\t\t\tif (field.imageChoices_enableImages) {\n\t\t\t\t\tif (field.choices.length > i) {\n\t\t\t\t\t\tvar img = (field.choices[i].imageChoices_image !== undefined) ? field.choices[i].imageChoices_image : '';\n\t\t\t\t\t\t$label.html(imageChoicesAdmin.markup.choicesPreviewRow(i, labelText, img));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$label.html(labelText);\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\n\t};\n\n\timageChoicesAdmin.getField = function() {\n\t\tvar field = GetSelectedField();\n\t\treturn $('#field_'+field.id);\n\t};\n\n\timageChoicesAdmin.removeAllChoices = function() {\n\t\timageChoicesAdmin.getSettingsElement().find('.image-choices-option-image-remove').each(function(){\n\t\t\t$(this).trigger('click');\n\t\t});\n\n\t\t$settingsWrap.find('.gf_delete_field_choice').each(function(){\n\t\t\t$(this).trigger('click');\n\t\t});\n\n\t\t$settingsWrap.find('.field-choice-row input[type=\"text\"], .gquiz-choice-row input[type=\"text\"]').val('');\n\t};\n\n\timageChoicesAdmin.isColorPickerPluginActive = function() {\n\t\treturn (window.hasOwnProperty('colorPickerFieldVars') && typeof window.colorPickerFieldVars !== 'undefined');\n\t};\n\n\timageChoicesAdmin.toggleEnableImages = function( enable ) {\n\n\t\tvar $settings = imageChoicesAdmin.getSettingsElement();\n\t\tvar $toggle = $settings.find('input.field_choice_images_enabled');\n\t\tvar $coloPickerToggle = $settings.find('input.field_color_picker_enabled');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\t// if user is enabling image choices, and color picker is currently in use on this field, confirm the switch\n\t\tif (enable && imageChoicesAdmin.isColorPickerPluginActive() && $coloPickerToggle.length && $coloPickerToggle.is(':checked')) {\n\t\t\tif (window.confirm(imageChoicesFieldStrings.confirmImagesToggle)) {\n\t\t\t\tif (window.hasOwnProperty('colorPicker_toggleEnableColors') && typeof window.colorPicker_toggleEnableColors === 'function') {\n\t\t\t\t\twindow.colorPicker_toggleEnableColors(false);\n\t\t\t\t}\n\t\t\t\timageChoicesAdmin.onToggleEnableImages(enable);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$toggle.prop('checked', false);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\timageChoicesAdmin.onToggleEnableImages(enable);\n\t\t}\n\t};\n\twindow.imageChoices_toggleEnableImages = imageChoicesAdmin.toggleEnableImages;// legacy support\n\n\timageChoicesAdmin.onToggleEnableImages = function( enable ) {\n\n\t\tvar field = GetSelectedField();\n\t\tvar $field = imageChoicesAdmin.getField();\n\t\tvar $settings = imageChoicesAdmin.getSettingsElement();\n\t\tvar $toggle = $settings.find('input.field_choice_images_enabled');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\tSetFieldProperty('imageChoices_enableImages', enable);\n\n\t\t$toggle.prop('checked', enable);\n\n\t\t//console.log('onToggleEnableImages', enable, $toggle);\n\n\t\t$('#image_choices_tab_toggle').toggle( enable );\n\n\t\tvar choicesContainerSelector = ( field.type.toLowerCase() === \"quiz\" ) ? '#gquiz_gfield_settings_choices_container' : '#gfield_settings_choices_container';\n\t\tvar $choicesContainer = $(choicesContainerSelector);\n\t\t$choicesContainer.toggleClass('image-choices-enabled', enable);\n\n\t\t$field.toggleClass('image-choices-use-images', enable);\n\t\t$settings.toggleClass('image-choices-use-images', enable);\n\n\t\tvar $removeChoicesBtn = $settings.find('.image-choices-remove-choices-btn');\n\n\t\tif (!enable) {\n\t\t\tif ($removeChoicesBtn.length) {\n\t\t\t\t$removeChoicesBtn.remove();\n\t\t\t}\n\t\t}\n\n\t\tvar $enableOtherChoicesSetting = $('.field_setting.other_choice_setting');\n\t\tvar isFieldWithOtherChoiceOption = (field.type === 'radio' || (field.type === 'poll' && field.inputType === 'radio'));\n\n\t\tif (isFieldWithOtherChoiceOption) {\n\t\t\t$enableOtherChoicesSetting.show();\n\t\t}\n\n\t\timageChoicesAdmin.updateFieldPreview(field);\n\t};\n\n\timageChoicesAdmin.toggleShowLabels = function( enable ) {\n\t\tvar $field = imageChoicesAdmin.getField();\n\t\tvar $toggle = imageChoicesAdmin.getSettingsElement().find('input.image_choices_show_labels');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\tSetFieldProperty('imageChoices_showLabels', enable);\n\n\t\t$toggle.prop('checked', enable);\n\n\t\t$field.toggleClass('image-choices-show-labels', enable);\n\t};\n\n\timageChoicesAdmin.toggleShowPrices = function( enable ) {\n\t\tvar $field = imageChoicesAdmin.getField();\n\t\tvar $toggle = imageChoicesAdmin.getSettingsElement().find('input.image_choices_show_prices');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\tSetFieldProperty('imageChoices_showPrices', enable);\n\n\t\t$toggle.prop('checked', enable);\n\n\t\t$field.toggleClass('image-choices-show-prices', enable);\n\t};\n\n\timageChoicesAdmin.toggleUseLightboxCaption = function( enable ) {\n\t\tvar $field = imageChoicesAdmin.getField();\n\t\tvar $toggle = imageChoicesAdmin.getSettingsElement().find('input.image_choices_use_lightbox_caption');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\tSetFieldProperty('imageChoices_useLightboxCaption', enable);\n\n\t\t$toggle.prop('checked', enable);\n\n\t\t//$field.toggleClass('image-choices-use-lightbox-caption', enable);\n\t};\n\n\timageChoicesAdmin.toggleUseLightbox = function( enable ) {\n\t\tvar $field = imageChoicesAdmin.getField();\n\t\tvar $toggle = imageChoicesAdmin.getSettingsElement().find('input.image_choices_use_lightbox');\n\n\t\tif (enable === undefined) {\n\t\t\tenable = $toggle.is(':checked');\n\t\t}\n\n\t\tSetFieldProperty('imageChoices_useLightbox', enable);\n\n\t\t$toggle.prop('checked', enable);\n\n\t\t$field.toggleClass('image-choices-use-lightbox', enable);\n\n\t\tif (enable) {\n\t\t\tvar field = GetSelectedField();\n\t\t\t$.each(field.choices, function(i, fieldChoice){\n\n\t\t\t\tvar hasImage = ( fieldChoice.hasOwnProperty('imageChoices_image') && fieldChoice.imageChoices_image !== '' );\n\t\t\t\tvar hasImageID = ( fieldChoice.hasOwnProperty('imageChoices_imageID') && fieldChoice.imageChoices_imageID !== '' );\n\n\t\t\t\tif ( hasImage && !hasImageID ) {\n\t\t\t\t\twindow.alert(imageChoicesFieldStrings.useLightboxWarning);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\timageChoicesAdmin.updateEntrySetting = function( value ) {\n\t\tSetFieldProperty('imageChoices_entrySetting', value);\n\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-entry-value').val( value );\n\t};\n\n\timageChoicesAdmin.OpenMediaLibrary = function( btnEl ) {\n\t\tif (typeof btnEl === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $choice = $(btnEl).closest('[class*=\"-choice-row\"]');\n\n\t\tvar imageChoices_fileFrame = $choice.data('file-frame');\n\n\t\t// If the media frame already exists, reopen it.\n\t\tif ( imageChoices_fileFrame ) {\n\t\t\t// Open frame\n\t\t\timageChoices_fileFrame.open();\n\t\t\treturn;\n\t\t}\n\n\t\t// Create the media frame.\n\t\timageChoices_fileFrame = wp.media({\n\t\t\ttitle: 'Select an image to upload',\n\t\t\tbutton: {\n\t\t\t\ttext: 'Use this image'\n\t\t\t},\n\t\t\tframe: 'post',\n\t\t\tstate: 'insert',\n\t\t\tmultiple: false\t// Set to true to allow multiple files to be selected\n\t\t});\n\n\t\tsetTimeout(function(){\n\t\t\t$('input[value=\"Insert into Post\"]').val('Use this Image');\n\t\t\t$('button.media-button-insert').text('Use this Image');\n\t\t}, 100);\n\n\t\tjQuery('body').on('click', 'li.attachment', function(){\n\t\t\t$('input[value=\"Insert into Post\"]').val('Use this Image');\n\t\t\t$('button.media-button-insert').text('Use this Image');\n\t\t});\n\n\t\t// When an image is selected, run a callback.\n\t\timageChoices_fileFrame.on( 'insert', function(selection) {\n\t\t\tvar state = imageChoices_fileFrame.state();\n\t\t\tselection = selection || state.get('selection');\n\t\t\tif (! selection) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar attachment = selection.first();\n\t\t\tvar selectedSize = \"\";\n\n\t\t\tvar display = state.display(attachment).toJSON();\n\t\t\tattachment = attachment.toJSON();\n\n\t\t\t// start with the selected size, but fallback to one of the defaults if there's no image\n\t\t\t// this can happen eg when there are existing images in the media library when a new size is created, and thumbnails haven't been generated for existing\n\t\t\t// the size will appear as an option in the media library when selecting the image, but then fails as there's no image in that size\n\t\t\tvar sizes = [\"medium\", \"thumbnail\", \"full\"];\n\t\t\tif ( display && display.hasOwnProperty('size') && display.size ) {\n\t\t\t\tsizes.unshift( display.size );\n\t\t\t}\n\n\t\t\tvar img;\n\t\t\tif ( !attachment.hasOwnProperty('sizes') ) {\n\t\t\t\timg = attachment.url;\n\t\t\t\tselectedSize = \"full\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar i = 0;\n\t\t\t\tvar imageSize = sizes[i].toString();\n\t\t\t\twhile ( !attachment.sizes.hasOwnProperty(imageSize) || !attachment.sizes[imageSize].hasOwnProperty('url') || attachment.sizes[imageSize].url === \"\" ) {\n\t\t\t\t\ti++;\n\t\t\t\t\timageSize = sizes[i].toString();\n\t\t\t\t}\n\t\t\t\timg = attachment.sizes[imageSize].url;\n\t\t\t\tselectedSize = imageSize;\n\t\t\t\t// TODO: size override? But can use the IC image size update tool\n\t\t\t\t/*\n\t\t\t\tif ( imageChoicesVars.hasOwnProperty('defaults') && imageChoicesVars.defaults.hasOwnProperty('imageSize') && sizes.indexOf(imageChoicesVars.defaults.imageSize) !== -1 ) {\n\t\t\t\t\timg = attachment.sizes[imageChoicesVars.defaults.imageSize].url;\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}\n\n\t\t\t$choice.find('.image-choices-option-image').val(img);\n\t\t\t$choice.find('.image-choices-option-image-id').val(attachment.id);\n\t\t\t$choice.find('.image-choices-option-preview').css('background-image', 'url('+img+')');\n\t\t\t$choice.addClass('image-choices-has-image');\n\n\t\t\timageChoicesAdmin.UpdateFieldChoicesObject();\n\n\t\t\tvar field = GetSelectedField();\n\t\t\timageChoicesAdmin.updateFieldPreview(field);\n\n\t\t\t// GF 2.6+\n\t\t\tvar $choicesFlyout = $('#choices-ui-flyout');\n\t\t\tif ( $choicesFlyout.length ) {\n\t\t\t\t$choicesFlyout.addClass('gform-flyout--anim-in-ready gform-flyout--anim-in-active');\n\t\t\t}\n\n\t\t});\n\n\t\t// Finally, open the modal\n\t\timageChoices_fileFrame.open();\n\n\t\t$choice.data('file-frame', imageChoices_fileFrame);\n\t};\n\n\timageChoicesAdmin.fieldCanHaveImages = function( field ) {\n\n\t\tif ( typeof field === 'undefined' || !field.hasOwnProperty('type') ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar canHave = (\n\t\t\tfield.type === 'radio'\n\t\t\t|| field.type === 'checkbox'\n\t\t\t|| ( field.type === 'quiz' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'quiz' && field.inputType == 'checkbox' )\n\t\t\t|| ( field.type === 'poll' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'poll' && field.inputType == 'checkbox' )\n\t\t\t|| ( field.type === 'post_custom_field' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'post_custom_field' && field.inputType == 'checkbox' )\n\t\t\t|| ( field.type === 'survey' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'survey' && field.inputType == 'checkbox' )\n\t\t\t|| ( field.type === 'product' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'option' && field.inputType == 'radio' )\n\t\t\t|| ( field.type === 'option' && field.inputType == 'checkbox' )\n\t\t);\n\n\t\treturn gform.applyFilters('gfic_field_can_have_images', canHave, field);\n\n\t};\n\n\timageChoicesAdmin.$fieldChoices = function( $field ) {\n\t\tif ( typeof $field === 'undefined' || $field instanceof jQuery === false) {\n\t\t\treturn [];\n\t\t}\n\t\tvar choicesSelector = '.ginput_container .gfield_radio div[class*=\"gchoice\"], .ginput_container .gfield_checkbox .gchoice:not(.gchoice_select_all)';// GF 2.5+\n\n\t\treturn $field.find(choicesSelector);\n\t};\n\n\timageChoicesAdmin.getSettingsElement = function() {\n\t\tvar fieldSettingsSelector = '#field_settings_container';// GF 2.5+\n\n\t\tvar field = GetSelectedField();\n\t\tfieldSettingsSelector += ( field.type === \"quiz\" ) ? ', #gquiz_gfield_settings_choices_container' : ', #gfield_settings_choices_container'\n\n\t\treturn $(fieldSettingsSelector);\n\t};\n\n\timageChoicesAdmin.previewHeight = function( $el ) {\n\n\t\tif ( typeof $el !== 'object' ) {\n\t\t\tvar $field = imageChoicesAdmin.getField();\n\t\t\t$el = $field.find('.ginput_container');\n\t\t}\n\n\t\tif ( !$el.length || !$el.closest('.gfield').hasClass('image-choices-admin-field') ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(function(){\n\t\t\t$el.height( $el.find('> ul:first').outerHeight() );\n\t\t}, 20);\n\n\t};\n\n\timageChoicesAdmin.updateThemeSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_theme', value );\n\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-theme').val( value );\n\n\t\tvar $previewWrap = $('#image-choices-theme-preview');\n\t\tvar $previewImg;\n\t\t$previewWrap.toggle(value !== 'none');\n\t\tif (value === 'none') {\n\t\t\t$previewWrap.hide().find('img').hide();\n\t\t}\n\t\telse if (value === 'form_setting') {\n\t\t\tvalue = (window.form.hasOwnProperty('gf-image-choices') && window.form['gf-image-choices'].hasOwnProperty('gf_image_choices_theme')) ? window.form['gf-image-choices'].gf_image_choices_theme : '';\n\t\t\tif ( !value || value === \"global_setting\" ) {\n\t\t\t\tvalue = ( imageChoicesVars.hasOwnProperty('globals') && imageChoicesVars.globals.hasOwnProperty('theme') ) ? imageChoicesVars.globals.theme : ( imageChoicesVars.hasOwnProperty('defaults') && imageChoicesVars.defaults.hasOwnProperty('theme') ) ? imageChoicesVars.defaults.theme : 'simple';\n\t\t\t}\n\t\t\t$previewWrap.find('img').hide();\n\t\t\t$previewImg = $previewWrap.find('img.image-choices-theme-preview-'+value);\n\t\t\tif ( $previewImg.length ) {\n\t\t\t\t$previewImg.show();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t$previewWrap.find('img').hide();\n\t\t\t$previewImg = $previewWrap.find('img.image-choices-theme-preview-'+value);\n\t\t\tif ( $previewImg.length ) {\n\t\t\t\t$previewImg.show();\n\t\t\t}\n\t\t}\n\t};\n\n\timageChoicesAdmin.updateFeatureColorSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_featureColor', value );\n\n\t\tvar $customColorLabel = imageChoicesAdmin.getSettingsElement().find('[for=\"image-choices-feature-color-custom\"]');\n\t\tvar $customColorInput = imageChoicesAdmin.getSettingsElement().find('#image-choices-feature-color-custom');\n\t\tvar $customColorPicker = imageChoicesAdmin.getSettingsElement().find('.image-choices-setting-feature-color .wp-picker-container');\n\t\tvar customColor = $customColorInput.val();\n\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-feature-color').val( value );\n\n\t\tif ( value === \"custom\" ) {\n\t\t\t$customColorLabel.show();\n\t\t\t$customColorInput.show();\n\t\t\tif ( $customColorPicker.length ) {\n\t\t\t\t$customColorPicker.show();\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tif ( customColor !== \"\" ) {\n\t\t\t\t\t\t$customColorInput.wpColorPicker('color', customColor);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$customColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$customColorInput.wpColorPicker({\n\t\t\t\t\tchange: function( e, ui ) {\n\t\t\t\t\t\timageChoicesAdmin.updateCustomFeatureColor( ui.color.toString() );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tif ( customColor !== \"\" ) {\n\t\t\t\t\t\t$customColorInput.wpColorPicker('color', customColor);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$customColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t$customColorLabel.hide();\n\t\t\t$customColorInput.hide();\n\t\t\tif ( $customColorPicker.length ) {\n\t\t\t\t$customColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t$customColorPicker.hide();\n\t\t\t}\n\t\t}\n\n\t};\n\n\timageChoicesAdmin.updateCustomFeatureColor = function( value ) {\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-feature-color-custom').val( value );\n\t\tSetFieldProperty( 'imageChoices_featureColorCustom', value );\n\t};\n\n\timageChoicesAdmin.updateAlignSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_align', value );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-align').val( value );\n\t};\n\n\timageChoicesAdmin.updateImageStyleSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_imageStyle', value );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-image-style').val( value );\n\t};\n\n\timageChoicesAdmin.validateNumericValue = function( val ) {\n\t\tvar numVal = '';\n\t\tval = val.toString();\n\t\tif ( val.trim() !== '' ) {\n\t\t\tvar num = parseInt(val, 10);\n\t\t\tif ( isNaN(num) || num <= 0 ) {\n\t\t\t\tnumVal = '';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnumVal = num.toString();\n\t\t\t}\n\t\t}\n\t\treturn ( numVal !== val ) ? numVal : val;\n\t};\n\n\timageChoicesAdmin.updateColumnsSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_columns', value );\n\t\tvar $settings = imageChoicesAdmin.getSettingsElement();\n\t\t$settings.find('#image-choices-columns').val( value );\n\t\t$settings.find('.image-choices-setting-columns-width').toggle( value === 'fixed' );\n\t};\n\n\timageChoicesAdmin.updateColumnsWidthSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_columnsWidth', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-columns-width').val( numVal );\n\t};\n\n\timageChoicesAdmin.updateColumnsMediumSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_columnsMedium', value );\n\t\tvar $settings = imageChoicesAdmin.getSettingsElement();\n\t\t$settings.find('#image-choices-columns-medium').val( value );\n\t\t$settings.find('.image-choices-setting-columns-width-medium').toggle( value === 'fixed' );\n\t};\n\n\timageChoicesAdmin.updateColumnsMediumWidthSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_columnsWidthMedium', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-columns-width-medium').val( numVal );\n\t};\n\n\timageChoicesAdmin.updateColumnsSmallSetting = function( value ) {\n\t\tSetFieldProperty( 'imageChoices_columnsSmall', value );\n\t\tvar $settings = imageChoicesAdmin.getSettingsElement();\n\t\t$settings.find('#image-choices-columns-small').val( value );\n\t\t$settings.find('.image-choices-setting-columns-width-small').toggle( value === 'fixed' );\n\t};\n\n\timageChoicesAdmin.updateColumnsSmallWidthSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_columnsWidthSmall', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-columns-width-small').val( numVal );\n\t};\n\n\timageChoicesAdmin.updateHeightSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_height', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-height').val( numVal );\n\t};\n\n\timageChoicesAdmin.updateMediumHeightSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_heightMedium', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-height-medium').val( numVal );\n\t};\n\n\timageChoicesAdmin.updateSmallHeightSetting = function( value ) {\n\t\tvar numVal = imageChoicesAdmin.validateNumericValue( value );\n\t\tSetFieldProperty( 'imageChoices_heightSmall', numVal );\n\t\timageChoicesAdmin.getSettingsElement().find('#image-choices-height-small').val( numVal );\n\t};\n\n\timageChoicesAdmin.formEditorInit = function() {\n\n\t\t$('.gfield.image-choices-admin-field').each(function(){\n\t\t\timageChoicesAdmin.$fieldChoices( $(this) ).each(function(){\n\t\t\t\tlet $choice = $(this);\n\t\t\t\tif ( !$choice.hasClass('gchoice_total') ) {\n\t\t\t\t\t$choice.addClass('image-choices-choice');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('#gform_fields .gfield .ginput_container').each(function(){\n\t\t\timageChoicesAdmin.previewHeight( $(this) );\n\t\t});\n\n\n\t\t$(window).on('gf_update_field_choices', function() {\n\t\t\tsetTimeout(function() {\n\t\t\t\timageChoicesAdmin.getChoices();\n\t\t\t}, 10);\n\n\t\t\timageChoicesAdmin.previewHeight();\n\t\t});\n\n\t\t$(document).on('click', '.gf_insert_field_choice, .gf_delete_field_choice', function(e){\n\t\t\timageChoicesAdmin.previewHeight();\n\t\t});\n\n\t\tgform.addAction('gform_load_field_choices', function( fields ){\n\n\t\t\tvar field = ( typeof fields !== 'undefined' && fields.length ) ? fields[0] : GetSelectedField();\n\n\t\t\tsetTimeout(function(){\n\n\t\t\t\tvar $field = $('#field_'+field.id);\n\t\t\t\tvar $fieldSettings = imageChoicesAdmin.getSettingsElement();\n\n\t\t\t\tif ( imageChoicesAdmin.fieldCanHaveImages(field) ) {\n\n\t\t\t\t\tvar imagesEnabled = (field.imageChoices_enableImages === true);\n\t\t\t\t\tvar useLightbox = (field.imageChoices_useLightbox !== undefined) ? field.imageChoices_useLightbox : false;\n\t\t\t\t\tvar displayLabels = (field.imageChoices_showLabels !== undefined) ? field.imageChoices_showLabels : true;\n\t\t\t\t\tvar showPrices = (field.type === 'product' && field.imageChoices_showPrices !== undefined) ? field.imageChoices_showPrices : false;\n\t\t\t\t\tvar entryValue = (field.imageChoices_entrySetting !== undefined) ? field.imageChoices_entrySetting : 'form_setting';\n\t\t\t\t\tvar selectedTheme = (field.imageChoices_theme !== undefined) ? field.imageChoices_theme : 'form_setting';\n\t\t\t\t\tvar featureColor = (field.imageChoices_featureColor !== undefined) ? field.imageChoices_featureColor : 'form_setting';\n\t\t\t\t\tvar featureColorCustom = (field.imageChoices_featureColorCustom !== undefined) ? field.imageChoices_featureColorCustom : '';\n\t\t\t\t\tvar alignSetting = (field.imageChoices_align !== undefined) ? field.imageChoices_align : 'form_setting';\n\t\t\t\t\tvar imageStyle = (field.imageChoices_imageStyle !== undefined) ? field.imageChoices_imageStyle : 'form_setting';\n\t\t\t\t\tvar columnsSetting = (field.imageChoices_columns !== undefined) ? field.imageChoices_columns : 'form_setting';\n\t\t\t\t\tvar columnsWidthSetting = (field.imageChoices_columnsWidth !== undefined) ? field.imageChoices_columnsWidth : '';\n\t\t\t\t\tvar columnsMediumSetting = (field.imageChoices_columnsMedium !== undefined) ? field.imageChoices_columnsMedium : 'form_setting';\n\t\t\t\t\tvar columnsMediumWidthSetting = (field.imageChoices_columnsWidthMedium !== undefined) ? field.imageChoices_columnsWidthMedium : '';\n\t\t\t\t\tvar columnsSmallSetting = (field.imageChoices_columnsSmall !== undefined) ? field.imageChoices_columnsSmall : 'form_setting';\n\t\t\t\t\tvar columnsSmallWidthSetting = (field.imageChoices_columnsWidthSmall !== undefined) ? field.imageChoices_columnsWidthSmall : '';\n\t\t\t\t\tvar useLightboxCaption = (field.imageChoices_useLightboxCaption !== undefined) ? field.imageChoices_useLightboxCaption : true;\n\t\t\t\t\tif ( useLightboxCaption === \"form_setting\" || useLightboxCaption === \"\" ) {\n\t\t\t\t\t\tuseLightboxCaption = true;\n\t\t\t\t\t}\n\t\t\t\t\tvar heightSetting = (field.imageChoices_height !== undefined) ? field.imageChoices_height : '';\n\t\t\t\t\tvar mediumHeightSetting = (field.imageChoices_heightMedium !== undefined) ? field.imageChoices_heightMedium : '';\n\t\t\t\t\tvar smallHeightSetting = (field.imageChoices_heightSmall !== undefined) ? field.imageChoices_heightSmall : '';\n\n\t\t\t\t\t//$field.addClass('image-choices-admin-field');\n\t\t\t\t\t$field.toggleClass('image-choices-admin-field', imagesEnabled);\n\t\t\t\t\t$fieldSettings.addClass('image-choices-field-settings');\n\n\t\t\t\t\timageChoicesAdmin.toggleEnableImages(imagesEnabled);\n\t\t\t\t\timageChoicesAdmin.toggleUseLightbox(useLightbox);\n\t\t\t\t\timageChoicesAdmin.toggleShowLabels(displayLabels);\n\t\t\t\t\timageChoicesAdmin.toggleShowPrices(showPrices);\n\t\t\t\t\timageChoicesAdmin.updateEntrySetting(entryValue);\n\t\t\t\t\timageChoicesAdmin.toggleUseLightboxCaption(useLightboxCaption);\n\n\t\t\t\t\tif ( !imageChoicesAdmin.isLegacyMode() ) {\n\t\t\t\t\t\timageChoicesAdmin.updateThemeSetting(selectedTheme);\n\t\t\t\t\t\timageChoicesAdmin.updateCustomFeatureColor(featureColorCustom);\n\t\t\t\t\t\timageChoicesAdmin.updateFeatureColorSetting(featureColor);\n\t\t\t\t\t\timageChoicesAdmin.updateAlignSetting(alignSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateImageStyleSetting(imageStyle);\n\n\t\t\t\t\t\timageChoicesAdmin.updateHeightSetting(heightSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateMediumHeightSetting(mediumHeightSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateSmallHeightSetting(smallHeightSetting);\n\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsWidthSetting(columnsWidthSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsMediumWidthSetting(columnsMediumWidthSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSmallWidthSetting(columnsSmallWidthSetting);\n\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSetting(columnsSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsMediumSetting(columnsMediumSetting);\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSmallSetting(columnsSmallSetting);\n\t\t\t\t\t}\n\n\t\t\t\t\timageChoicesAdmin.getChoices( field );\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\timageChoicesAdmin.toggleEnableImages(false);\n\t\t\t\t\timageChoicesAdmin.toggleUseLightboxCaption(true);\n\t\t\t\t\t//imageChoicesAdmin.toggleShowLabels(false);\n\n\t\t\t\t\tif ( !imageChoicesAdmin.isLegacyMode() ) {\n\t\t\t\t\t\timageChoicesAdmin.updateThemeSetting('form_setting');\n\t\t\t\t\t\timageChoicesAdmin.updateCustomFeatureColor('');\n\t\t\t\t\t\timageChoicesAdmin.updateFeatureColorSetting('form_setting');\n\t\t\t\t\t\timageChoicesAdmin.updateAlignSetting('form_setting');\n\t\t\t\t\t\timageChoicesAdmin.updateImageStyleSetting('form_setting');\n\n\t\t\t\t\t\timageChoicesAdmin.updateHeightSetting('');\n\t\t\t\t\t\timageChoicesAdmin.updateMediumHeightSetting('');\n\t\t\t\t\t\timageChoicesAdmin.updateSmallHeightSetting('');\n\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsWidthSetting('');\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsMediumWidthSetting('');\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSmallWidthSetting('');\n\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSetting('form_setting');\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsMediumSetting('form_setting');\n\t\t\t\t\t\timageChoicesAdmin.updateColumnsSmallSetting('form_setting');\n\t\t\t\t\t}\n\n\t\t\t\t\t$field.removeClass('image-choices-admin-field');\n\t\t\t\t\t$field.removeClass('image-choices-show-labels');\n\t\t\t\t\t$fieldSettings.removeClass('image-choices-field-settings');\n\n\t\t\t\t}\n\n\t\t\t}, 100);\n\n\t\t});\n\n\t\t$(document).bind('gform_load_field_settings', function (event, field, form) {\n\n\t\t\t// There's currently no action or event fired by GF when the 'show values' or 'show prices' option is toggled, but the preview updates\n\t\t\t// So we override the global UpdateFieldChoices that is called at this point (GF form_editor.js) in order to fire our own gf_update_field_choices event so we can update preview\n\t\t\tif (typeof window.imageChoices_GF_UpdateFieldChoices !== 'function') {\n\t\t\t\twindow.imageChoices_GF_UpdateFieldChoices = UpdateFieldChoices;\n\t\t\t\twindow.UpdateFieldChoices = function() {\n\t\t\t\t\twindow.imageChoices_GF_UpdateFieldChoices.apply(this, arguments);\n\t\t\t\t\t$(window).trigger('gf_update_field_choices');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\timageChoicesAdmin.previewHeight();\n\t\t});\n\n\t};\n\n\timageChoicesAdmin.formEditorLegacyWarning = function() {\n\n\t\treturn;\n\n\t\tvar alertMessage = [\n\t\t\t'<div class=\"gform-alert\" data-js=\"gform-alert\" role=\"status\" data-gform-alert-instance=\"gfic-legacy-alert-' + window.form.id.toString() + '\">',\n\t\t\t\t'<span class=\"gform-alert__icon gform-icon gform-icon--warning\" aria-hidden=\"true\"></span>',\n\t\t\t\t'<div class=\"gform-alert__message-wrap\">',\n\t\t\t\t\t'<p class=\"gform-alert__message\">JetSloth will stop supporting legacy markup at the end of 2023. We encourage you to test out your form with legacy markup turned off, to ensure continued compatibility with Image Choices.</p>',\n\t\t\t\t\t'<a class=\"gform-alert__cta gform-button gform-button--white gform-button--size-xs\" href=\"' + window.imageChoicesVars.form_settings + window.form.id.toString() + '#gform_setting_markupVersion\" aria-label=\"\">Form settings</a>',\n\t\t\t\t'</div>',\n\t\t\t'</div>',\n\t\t].join('');\n\n\t\tvar $gfLegacyAlert = $('.simplebar-content > .gform-alert[data-gform-alert-instance^=\"gform-alert-\"]:first');\n\t\tif ( $gfLegacyAlert.length ) {\n\t\t\t$gfLegacyAlert.after(alertMessage);\n\t\t}\n\t\telse {\n\t\t\t$('.simplebar-content').prepend(alertMessage);\n\t\t}\n\t\tgform.tools.trigger( 'gform_init_alerts' );\n\n\t};\n\n\n\t$(document).bind( 'gform_main_scripts_loaded', function() {\n\n\t\tif ( typeof window.form !== 'undefined' ) {\n\t\t\tvar markupVersion = imageChoicesAdmin.markupDetect();\n\t\t\tif ( markupVersion === 1 && imageChoicesAdmin.formHasImageChoicesFields() ) {\n\t\t\t\timageChoicesAdmin.formEditorLegacyWarning();\n\t\t\t}\n\t\t\timageChoicesAdmin.formEditorInit();\n\t\t}\n\n\t\t// Custom CSS editors\n\t\tvar $customCssBoxes = $('#gf_image_choices_custom_css_global, #gf_image_choices_custom_css, #gf_image_choices_user_css_global, #gf_image_choices_user_css_form');\n\t\tif ( $customCssBoxes.length ) {\n\t\t\tvar editorSettings = wp.codeEditor.defaultSettings ? _.clone( wp.codeEditor.defaultSettings ) : {};\n\t\t\teditorSettings.codemirror = _.extend(\n\t\t\t\t{},\n\t\t\t\teditorSettings.codemirror,\n\t\t\t\t{\n\t\t\t\t\tindentUnit: 4,\n\t\t\t\t\ttabSize: 4,\n\t\t\t\t\tmode: 'css',\n\t\t\t\t\tlineNumbers: true,\n\t\t\t\t\tautoCloseBrackets: true,\n\t\t\t\t\tcontinueComments: true,\n\t\t\t\t\tindentWithTabs: true,\n\t\t\t\t\tinputStyle: \"contenteditable\",\n\t\t\t\t\tlineWrapping: true,\n\t\t\t\t\tlint: false,\n\t\t\t\t\tmatchBrackets: true,\n\t\t\t\t\tstyleActiveLine: true,\n\t\t\t\t\tgutters: [],\n\t\t\t\t\textraKeys: {\n\t\t\t\t\t\t\"Alt-F\": \"findPersistent\",\n\t\t\t\t\t\t\"Cmd-F\": \"findPersistent\",\n\t\t\t\t\t\t\"Ctrl-F\": \"findPersistent\",\n\t\t\t\t\t\t\"Cmd-/\": \"toggleComment\",\n\t\t\t\t\t\t\"Ctrl-/\": \"toggleComment\",\n\t\t\t\t\t\t\"Ctrl-Space\": \"autocomplete\",\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t$customCssBoxes.each(function(){\n\t\t\t\twindow[this.id + '_editor'] = wp.codeEditor.initialize( $(this), editorSettings );\n\t\t\t});\n\t\t}\n\n\t\tvar $legacyCssSectionToggle = $('#gform_settings_section_collapsed_gf_image_choices_legacy_custom_css_section, #gform_settings_section_collapsed_gf_image_choices_legacy_custom_form_css_section');\n\t\tif ( $legacyCssSectionToggle.length ) {\n\t\t\t$legacyCssSectionToggle.on('click', function(){\n\t\t\t\t$(this).closest('.gform-settings-panel').find('textarea').each(function(){\n\t\t\t\t\tvar ref = $(this).attr('id') + '_editor';\n\t\t\t\t\ttry {\n\t\t\t\t\t\twindow[ref].codemirror.refresh();\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e) {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t// show/hide new settings based on toggle\n\t\tvar $legacyModeToggle = $('#_gform_setting_gf_image_choices_use_legacy_styles');\n\t\tvar $newFeaturesElements = $('#gform-settings-section-theme, #gform-settings-section-feature-color, #gform-settings-section-choices-layout, #gform-settings-section-image-options, #gform-settings-section-custom-css, #gform-settings-section-gf_image_choices_legacy_custom_css_section .gform-settings-label');\n\n\t\tif ( $legacyModeToggle.length ) {\n\t\t\t$legacyModeToggle.on('change', function(e){\n\t\t\t\tvar useLegacyMode = $legacyModeToggle.is(':checked');\n\t\t\t\tif ( $newFeaturesElements.length ) {\n\t\t\t\t\t$newFeaturesElements.toggle( !useLegacyMode );\n\t\t\t\t}\n\t\t\t\tif ( $legacyCssSectionToggle.length ) {\n\t\t\t\t\tif ( ( useLegacyMode && $legacyCssSectionToggle.is(\":checked\") ) || ( !useLegacyMode && !$legacyCssSectionToggle.is(\":checked\") ) ) {\n\t\t\t\t\t\t$legacyCssSectionToggle.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t$legacyModeToggle.trigger('change');\n\t\t}\n\n\n\n\t\t// settings page tab switch (hide submit if not settings tab)\n\t\tvar $settingsTabNavLinks = $('#tab_gf-image-choices .gform-settings-tabs__navigation a');\n\t\tif ( $settingsTabNavLinks.length ) {\n\t\t\t$settingsTabNavLinks.each(function(){\n\t\t\t\t$(this).on('click', function(e){\n\t\t\t\t\t$('#tab_gf-image-choices #gform-settings-save').toggle( $(this).data('tab') === \"gf_image_choices_settings_tab\" );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t// numeric settings live validation to number (plugin and form settings)\n\t\tvar $numericSettingsInputs = $('input[id^=\"gf_image_choices\"][id*=\"columns_width\"], input[id^=\"gf_image_choices\"][id*=\"height\"]');\n\t\tif ( $numericSettingsInputs.length ) {\n\t\t\t$numericSettingsInputs.each(function(){\n\t\t\t\tvar $input = $(this);\n\t\t\t\t$input.on('keyup', function(e){\n\t\t\t\t\tvar val = e.currentTarget.value.toString();\n\t\t\t\t\tvar numVal = imageChoicesAdmin.validateNumericValue( val );\n\t\t\t\t\tif ( numVal !== val ) {\n\t\t\t\t\t\te.currentTarget.value = numVal;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\t// form settings theme preview\n\t\tvar $settingsThemeSelect = $('#gf_image_choices_theme, #gf_image_choices_global_theme').first();\n\t\tvar $settingsThemePreview = $('#gform_setting_gf_image_choices_theme_preview .image-choices-theme-preview, #gform_setting_gf_image_choices_global_theme_preview .image-choices-theme-preview').first();\n\t\tif ( $settingsThemeSelect.length && $settingsThemePreview.length ) {\n\t\t\t$settingsThemeSelect.on('change', function(e){\n\t\t\t\tvar value = $(this).val();\n\t\t\t\tif ( value === \"\" || value == \"global_setting\" ) {\n\t\t\t\t\tvalue = ( imageChoicesVars.hasOwnProperty('globals') && imageChoicesVars.globals.hasOwnProperty('theme') ) ? imageChoicesVars.globals.theme : ( imageChoicesVars.hasOwnProperty('defaults') && imageChoicesVars.defaults.hasOwnProperty('theme') ) ? imageChoicesVars.defaults.theme : 'simple';\n\t\t\t\t}\n\n\t\t\t\t$settingsThemePreview.toggle(value !== 'none');\n\t\t\t\tif (value === 'none') {\n\t\t\t\t\t$settingsThemePreview.hide().find('img').hide();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$settingsThemePreview.find('img').hide();\n\t\t\t\t\t$settingsThemePreview.find('img.image-choices-theme-preview-'+value).show();\n\t\t\t\t}\n\t\t\t});\n\t\t\t$settingsThemeSelect.trigger('change');\n\t\t}\n\n\t\t// form settings feature color\n\t\tvar $settingsFeatureColorSelect = $('#gf_image_choices_feature_color, #gf_image_choices_global_feature_color').first();\n\t\tvar $settingsFeatureColorCustom = $('#gform_setting_gf_image_choices_feature_color_custom, #gform_setting_gf_image_choices_global_feature_color_custom').first();\n\t\tvar $settingsFeatureColorInput = $('#gf_image_choices_feature_color_custom, #gf_image_choices_global_feature_color_custom').first();\n\t\tvar settingsCustomFeatureColor;\n\t\tvar $settingsFeatureColorPicker;\n\n\t\tif ( $settingsFeatureColorSelect.length && $settingsFeatureColorCustom.length ) {\n\n\t\t\t$settingsFeatureColorPicker = $settingsFeatureColorCustom.find('.wp-picker-container');\n\t\t\tsettingsCustomFeatureColor = $settingsFeatureColorInput.val();\n\n\t\t\t$settingsFeatureColorSelect.on('change', function(e){\n\t\t\t\tvar value = $(this).val();\n\n\t\t\t\tif ( value === \"custom\" ) {\n\t\t\t\t\t$settingsFeatureColorCustom.show();\n\t\t\t\t\tif ( $settingsFeatureColorPicker.length ) {\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tif ( customColor !== \"\" ) {\n\t\t\t\t\t\t\t\t$settingsFeatureColorInput.wpColorPicker('color', settingsCustomFeatureColor);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$settingsFeatureColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$settingsFeatureColorInput.wpColorPicker();\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tif ( settingsCustomFeatureColor !== \"\" ) {\n\t\t\t\t\t\t\t\t$settingsFeatureColorInput.wpColorPicker('color', settingsCustomFeatureColor);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$settingsFeatureColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$settingsFeatureColorCustom.hide();\n\t\t\t\t\tif ( $settingsFeatureColorPicker.length ) {\n\t\t\t\t\t\t$settingsFeatureColorPicker.find('.wp-picker-clear').trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\t\t\t$settingsFeatureColorSelect.trigger('change');\n\t\t}\n\n\n\n\t\tvar $urlReplacementTool = $('#image_choices_url_replacement');\n\t\tvar $urlReplacementSubmit = ($urlReplacementTool.length) ? $('#image_choices_url_replacement_submit') : null;\n\t\tvar $urlReplacementProgress = ($urlReplacementTool.length) ? $urlReplacementTool.find('.jetbase-tool__progress') : null;\n\t\tvar $urlReplacementProgressBar = ($urlReplacementTool.length) ? $urlReplacementTool.find('.jetbase-tool__progress-percent') : null;\n\t\tvar $urlReplacementStatus = ($urlReplacementTool.length) ? $urlReplacementTool.find('.jetbase-tool__progress-status') : null;\n\n\t\tvar urlReplacements = {\n\t\t\told: \"\",\n\t\t\tnew: \"\",\n\t\t\tforms: [],\n\t\t\tindex: 0,\n\t\t\treplacements: []\n\t\t}\n\n\t\timageChoicesAdmin.processUrlReplacement = function() {\n\t\t\tif ( !urlReplacements.forms.length || urlReplacements.replacements.length === urlReplacements.forms.length || urlReplacements.index >= urlReplacements.forms.length ) {\n\t\t\t\t// done\n\t\t\t\t$urlReplacementProgressBar.css('width', `100%`);\n\t\t\t\t$urlReplacementStatus.html(`Done! ${urlReplacements.forms.length} form(s) processed`);\n\t\t\t\t$urlReplacementTool.removeClass('busy');\n\t\t\t\tif ( $sizeReplacementTool.length ) {\n\t\t\t\t\t$sizeReplacementTool.removeClass('disabled');\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: window.ajaxurl,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'gf_image_choices_url_replacement',\n\t\t\t\t\tid: urlReplacements.forms[urlReplacements.index],\n\t\t\t\t\told: urlReplacements.old,\n\t\t\t\t\tnew: urlReplacements.new\n\t\t\t\t},\n\t\t\t\tbeforeSend: function(jqXHR, settings){\n\t\t\t\t\t$urlReplacementStatus.html(`Processing form ${urlReplacements.index + 1}/${urlReplacements.forms.length}`);\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tif ( response && response.success ) {\n\t\t\t\t\t\turlReplacements.replacements[urlReplacements.index] = response.total;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( response && response.error ) {\n\t\t\t\t\t\turlReplacements.replacements[urlReplacements.index] = false;\n\t\t\t\t\t\t$urlReplacementStatus.html('Error: ' + response.error );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\turlReplacements.replacements[urlReplacements.index] = false;\n\t\t\t\t\t\t$urlReplacementStatus.html('Error');\n\t\t\t\t\t}\n\t\t\t\t\turlReplacements.index++;\n\t\t\t\t\t$urlReplacementProgressBar.css('width', `${ Math.ceil( (urlReplacements.index / urlReplacements.forms.length) * 100 ) }%`);\n\t\t\t\t\timageChoicesAdmin.processUrlReplacement();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t\tif ( $urlReplacementSubmit && $urlReplacementSubmit.length ) {\n\n\t\t\t$urlReplacementSubmit.on('click', function(e){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar formId = $urlReplacementTool.find('#image_choices_url_replacement_form_select').val().trim();\n\t\t\t\tvar oldUrl = $urlReplacementTool.find('#image_choices_url_replacement_from_input').val().trim();\n\t\t\t\tvar newUrl = $urlReplacementTool.find('#image_choices_url_replacement_to_input').val().trim();\n\t\t\t\tif ( !oldUrl || !newUrl || oldUrl === newUrl ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\turlReplacements.old = oldUrl;\n\t\t\t\turlReplacements.new = newUrl;\n\t\t\t\turlReplacements.forms = [];\n\t\t\t\turlReplacements.index = 0;\n\t\t\t\turlReplacements.replacements = [];\n\n\t\t\t\tif ( formId === \"all\" ) {\n\n\t\t\t\t\t$urlReplacementStatus.html('Scanning for forms with old URL in image choices...');\n\t\t\t\t\t$urlReplacementProgressBar.css('width', '0%');\n\t\t\t\t\t$urlReplacementTool.addClass('busy');\n\t\t\t\t\t$urlReplacementProgress.addClass('active');\n\t\t\t\t\tif ( $sizeReplacementTool.length ) {\n\t\t\t\t\t\t$sizeReplacementTool.addClass('disabled');\n\t\t\t\t\t}\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: window.ajaxurl,\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction: 'gf_image_choices_get_url_replacement_form_ids',\n\t\t\t\t\t\t\tform_id: urlReplacements.formId,\n\t\t\t\t\t\t\told: urlReplacements.old,\n\t\t\t\t\t\t\tnew: urlReplacements.new\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\t\tif ( response && response.success ) {\n\t\t\t\t\t\t\t\tif ( response.forms && response.forms.length ) {\n\t\t\t\t\t\t\t\t\turlReplacements.forms = response.forms\n\t\t\t\t\t\t\t\t\timageChoicesAdmin.processUrlReplacement();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t$urlReplacementProgressBar.css('width', `100%`);\n\t\t\t\t\t\t\t\t\t$urlReplacementStatus.html(`Done! No image choices found containing that old URL`);\n\t\t\t\t\t\t\t\t\t$urlReplacementTool.removeClass('busy');\n\t\t\t\t\t\t\t\t\tif ( $sizeReplacementTool.length ) {\n\t\t\t\t\t\t\t\t\t\t$sizeReplacementTool.removeClass('disabled');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if ( response && response.error ) {\n\t\t\t\t\t\t\t\t$urlReplacementStatus.html('Error: ' + response.error );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$urlReplacementStatus.html('Error');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t$urlReplacementStatus.html('...');\n\t\t\t\t\t$urlReplacementProgressBar.css('width', '0%');\n\t\t\t\t\t$urlReplacementTool.addClass('busy');\n\t\t\t\t\t$urlReplacementProgress.addClass('active');\n\t\t\t\t\tif ( $sizeReplacementTool.length ) {\n\t\t\t\t\t\t$sizeReplacementTool.addClass('disabled');\n\t\t\t\t\t}\n\n\t\t\t\t\turlReplacements.forms = [ formId ]\n\t\t\t\t\timageChoicesAdmin.processUrlReplacement();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\n\t\tvar $sizeReplacementTool = $('#image_choices_image_replacement');\n\t\tvar $sizeReplacementSubmit = ($sizeReplacementTool.length) ? $('#image_choices_image_replacement_submit') : null;\n\t\tvar $sizeReplacementProgress = ($sizeReplacementTool.length) ? $sizeReplacementTool.find('.jetbase-tool__progress') : null;\n\t\tvar $sizeReplacementProgressBar = ($sizeReplacementTool.length) ? $sizeReplacementTool.find('.jetbase-tool__progress-percent') : null;\n\t\tvar $sizeReplacementStatus = ($sizeReplacementTool.length) ? $sizeReplacementTool.find('.jetbase-tool__progress-status') : null;\n\n\t\tvar sizeReplacements = {\n\t\t\tnew: \"\",\n\t\t\tforms: [],\n\t\t\tindex: 0,\n\t\t\treplacements: []\n\t\t}\n\n\t\timageChoicesAdmin.processSizeReplacement = function() {\n\t\t\tif ( !sizeReplacements.forms.length || sizeReplacements.replacements.length === sizeReplacements.forms.length || sizeReplacements.index >= sizeReplacements.forms.length ) {\n\t\t\t\t// done\n\t\t\t\t$sizeReplacementProgressBar.css('width', `100%`);\n\t\t\t\t$sizeReplacementStatus.html(`Done! ${sizeReplacements.forms.length} form(s) processed`);\n\t\t\t\t$sizeReplacementTool.removeClass('busy');\n\t\t\t\tif ( $urlReplacementTool.length ) {\n\t\t\t\t\t$urlReplacementTool.removeClass('disabled');\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: window.ajaxurl,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'gf_image_choices_image_size_replacement',\n\t\t\t\t\tid: sizeReplacements.forms[sizeReplacements.index],\n\t\t\t\t\tnew: sizeReplacements.new\n\t\t\t\t},\n\t\t\t\tbeforeSend: function(jqXHR, settings) {\n\t\t\t\t\t$sizeReplacementStatus.html(`Processing form ${sizeReplacements.index + 1}/${sizeReplacements.forms.length}`);\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tif ( response && response.success ) {\n\t\t\t\t\t\tsizeReplacements.replacements[sizeReplacements.index] = response.total;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( response && response.error ) {\n\t\t\t\t\t\tsizeReplacements.replacements[sizeReplacements.index] = false;\n\t\t\t\t\t\t$sizeReplacementStatus.html('Error: ' + response.error );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsizeReplacements.replacements[sizeReplacements.index] = false;\n\t\t\t\t\t\t$sizeReplacementStatus.html('Error');\n\t\t\t\t\t}\n\t\t\t\t\tsizeReplacements.index++;\n\t\t\t\t\t$sizeReplacementProgressBar.css('width', `${ Math.ceil( (sizeReplacements.index / sizeReplacements.forms.length) * 100 ) }%`);\n\t\t\t\t\timageChoicesAdmin.processSizeReplacement();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t\tif ( $sizeReplacementSubmit && $sizeReplacementSubmit.length ) {\n\n\t\t\t$sizeReplacementSubmit.on('click', function(e){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar newSize = $sizeReplacementTool.find('#image_choices_image_replacement_size_select').val().trim();\n\t\t\t\tvar formId = $sizeReplacementTool.find('#image_choices_image_replacement_form_select').val().trim();\n\t\t\t\tif ( !newSize ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsizeReplacements.new = newSize;\n\t\t\t\tsizeReplacements.forms = [];\n\t\t\t\tsizeReplacements.index = 0;\n\t\t\t\tsizeReplacements.replacements = [];\n\n\n\t\t\t\tif ( formId === \"all\" ) {\n\n\t\t\t\t\t$sizeReplacementStatus.html('Scanning for forms with image choices enabled...');\n\t\t\t\t\t$sizeReplacementProgressBar.css('width', '0%');\n\t\t\t\t\t$sizeReplacementTool.addClass('busy');\n\t\t\t\t\t$sizeReplacementProgress.addClass('active');\n\n\t\t\t\t\tif ( $urlReplacementTool.length ) {\n\t\t\t\t\t\t$urlReplacementTool.addClass('disabled');\n\t\t\t\t\t}\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: window.ajaxurl,\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction: 'gf_image_choices_get_image_size_replacement_form_ids',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\t\tif ( response && response.success ) {\n\t\t\t\t\t\t\t\tif ( response.forms && response.forms.length ) {\n\t\t\t\t\t\t\t\t\tsizeReplacements.forms = response.forms\n\t\t\t\t\t\t\t\t\timageChoicesAdmin.processSizeReplacement();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t$sizeReplacementProgressBar.css('width', `100%`);\n\t\t\t\t\t\t\t\t\t$sizeReplacementStatus.html(`Done! No forms found with image choices enabled`);\n\t\t\t\t\t\t\t\t\t$sizeReplacementTool.removeClass('busy');\n\t\t\t\t\t\t\t\t\tif ( $urlReplacementTool.length ) {\n\t\t\t\t\t\t\t\t\t\t$urlReplacementTool.removeClass('disabled');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if ( response && response.error ) {\n\t\t\t\t\t\t\t\t$sizeReplacementStatus.html('Error: ' + response.error );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$sizeReplacementStatus.html('Error');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\t$sizeReplacementStatus.html('...');\n\t\t\t\t\t$sizeReplacementProgressBar.css('width', '0%');\n\t\t\t\t\t$sizeReplacementTool.addClass('busy');\n\t\t\t\t\t$sizeReplacementProgress.addClass('active');\n\n\t\t\t\t\tif ( $urlReplacementTool.length ) {\n\t\t\t\t\t\t$urlReplacementTool.addClass('disabled');\n\t\t\t\t\t}\n\n\t\t\t\t\tsizeReplacements.forms = [ formId ];\n\t\t\t\t\timageChoicesAdmin.processSizeReplacement();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\n\t});\n\n})(jQuery);\n"],"mappings":"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"}