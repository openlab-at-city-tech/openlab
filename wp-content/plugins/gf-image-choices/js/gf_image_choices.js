var imageChoices=imageChoices||{};!function(e){imageChoices.cssClasses={selected:"image-choices-choice-selected",hover:"image-choices-choice-hover",focus:"image-choices-choice-focus"},imageChoices.getFormMarkupVersion=function(i){var o,a,s="";return void 0===i||"string"==typeof i&&""===i||"number"==typeof i&&i<=0?(o=e('form[id^="gform_"]:first').attr("id"),s=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),a=e("#"+o)):i instanceof jQuery?(o=i.attr("id"),s=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),a=i):"string"==typeof i&&-1!==i.indexOf("gform_")?(s=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(i):i.replace("gform_",""),a=e("#"+(o="gform_"+s))):(s=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id("gform_"+i.toString()):i.toString(),a=e("#"+(o="gform_"+s))),a.length?a.find(".gform_body .gfield:first").is("li")?1:2:e(".gform_body .gfield:first").is("li")?1:2},imageChoices.isLegacyMarkup=function(e){return 1===imageChoices.getFormMarkupVersion(e)},imageChoices.isLegacyMode=function(){return!(imageChoicesVars.hasOwnProperty("useNewFeatures")&&"true"===imageChoicesVars.useNewFeatures.toString())},imageChoices.$fieldChoices=function(e){if(void 0===e||e instanceof jQuery==!1)return[];var i='.ginput_container .gfield_radio div[class*="gchoice"], .ginput_container .gfield_checkbox div[class*="gchoice"]:not(.gchoice_select_all)';return imageChoices.isLegacyMarkup(e.closest('[id^="gform_wrapper_"]'))&&(i=".ginput_container .gfield_radio li, .ginput_container .gfield_checkbox li:not(.gchoice_select_all)"),e.find(i)},imageChoices.SelectedFields=function(i){var o=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");imageChoices.$fieldChoices(o.find(".image-choices-field")).find("input:checked").each((function(){e(this).closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.selected)}))},imageChoices.InitLightbox=function(i){e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form").find(".image-choices-field.image-choices-use-lightbox").each((function(){var o=e(this),a=o.attr("id");if(!imageChoicesVars.hasOwnProperty("elementorCompat")||"elementor"!==imageChoicesVars.elementorCompat){var s={captions:imageChoices.isLegacyMode()||gform.applyFilters("gfic_lightbox_captions",o.hasClass("ic-lightbox-captions"),i.toString(),a.substring(a.lastIndexOf("_")+1)),captionType:"data",captionsData:"caption"};o.find(".image-choices-lightbox-btn").jetslothLightbox(s)}}))},imageChoices.onChoiceKeyPress=function(i){var o=e(i.target),a=o.closest(".gfield");if(32===i.keyCode&&(o.is(":checkbox")||o.is(":radio")))o.is(":radio")&&!o.is(":checked")?i.preventDefault():o.is(":checkbox")&&(i.preventDefault(),i.stopImmediatePropagation());else if(9===i.keyCode&&a.hasClass("image-choices-field")){var s=i.shiftKey?"previous":"next",t=o.closest(".image-choices-choice");"next"===s?t.is(":last-child")||(i.preventDefault(),t.next(".image-choices-choice").find("> input").focus()):"previous"===s&&(t.is(":first-child")||(i.preventDefault(),t.prev(".image-choices-choice").find("> input").focus()))}},imageChoices.onChoicesSelectAllClick=function(i){var o=e(this),a=o.closest(".gfield"),s=(o.is("input")?o.is(":checked"):o.data("checked"))?a.find(".image-choices-choice input:checked"):a.find(".image-choices-choice input:not(:checked)");s.length&&s.each((function(i,o){var a=e(o);imageChoices.onChoiceLabelClick(a.next("label"))}))},imageChoices.onChoiceLabelClick=function(e){var i=e.closest('[class*="gchoice"]'),o=i.closest(".gfield_checkbox, .gfield_radio").first(),a=i.find("input");i.hasClass("image-choices-choice-other")&&setTimeout((function(){i.find(".gf_other_wrap").addClass("active"),i.find("input:text").focus()}),250),o.hasClass("gfield_radio")?(o.find("."+imageChoices.cssClasses.selected).not(i).removeClass(imageChoices.cssClasses.selected).find("input").prop("checked",!1),i.addClass(imageChoices.cssClasses.selected)):o.hasClass("gfield_checkbox")&&(a.is(":checked")?i.addClass(imageChoices.cssClasses.selected):i.removeClass(imageChoices.cssClasses.selected))},imageChoices.SetUpFields=function(i,o){e(".entry-details .detail-view .image-choices-choice-image-wrap").each((function(i){e(this).closest(".detail-view").addClass("image-choices-field image-choices-show-labels")}));var a=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");!a.length&&e(".gform_variation_wrapper").length&&(a=e(".gform_variation_wrapper"));var s=a.find(".image-choices-field");s.length&&s.find(".gfield_radio, .gfield_checkbox").addClass("gform-theme__no-reset--children");var t=imageChoices.$fieldChoices(s);a.find('.gchoice_select_all input, button[id$="select_all"]').each((function(i,o){e(o).on("click",imageChoices.onChoicesSelectAllClick)})),t.length>0&&(t.each((function(){var i=e(this);if(!0!==i.data("init")){i.data("init",!0),i.find("label").addClass("gform-field-label"),i.find("label").hover((function(i){var o=e(this);if(o.find("input").is(":disabled"))return!1;o.closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.hover)}),(function(i){var o=e(this);if(o.find("input").is(":disabled"))return!1;o.closest('[class*="gchoice"]').removeClass(imageChoices.cssClasses.hover)})),i.find("input").focus((function(){e(this).closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.focus)})).blur((function(){e(this).closest('[class*="gchoice"]').removeClass(imageChoices.cssClasses.focus)})),i.find('input[value="gf_other_choice"]').length?(i.addClass("image-choices-choice-other"),i.find('input[type="text"]').wrap('<div class="gf_other_wrap"></div>'),e(".gf_other_wrap").append('<a href="#" class="gf_other_close"></a>'),e(document).on("click",".gf_other_close",(function(i){i.preventDefault(),e(this).parent().removeClass("active")})),i.find('input:not([type="text"])').on("click",(function(){var i=e(this).closest(".image-choices-choice").find("label");imageChoices.onChoiceLabelClick(i)}))):i.find("input").on("click",(function(){var i=e(this).closest(".image-choices-choice").find("label");imageChoices.onChoiceLabelClick(i)}));var o=i.closest(".image-choices-field");if(o.hasClass("image-choices-use-lightbox")&&!i.find(".image-choices-lightbox-btn").length){var a=o.attr("id"),s=(i.find(".image-choices-choice-text").html()+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),t=i.find(".image-choices-choice-image").attr("src"),c=i.find(".image-choices-choice-image").data("lightbox-src");if(void 0!==c&&""!==c||(c=t),""!==c){var n=imageChoicesVars.hasOwnProperty("elementorCompat")&&"elementor"!==imageChoicesVars.elementorCompat?'data-elementor-open-lightbox="no"':"",l=e('<a href="'+c+'" class="image-choices-lightbox-btn" '+n+' rel="'+a+'"><i></i></a>');l.data("caption",s),i.prepend(l)}}}})),setTimeout((function(){imageChoices.SelectedFields(i),imageChoices.InitLightbox(i),imageChoices.InitLazyLoad(i,o),"undefined"!=typeof jetslothMatchHeights&&jetslothMatchHeights(),gform.doAction("gfic_setup",i)}),100))},window.imageChoices_SetUpFields=imageChoices.SetUpFields,imageChoices.ConditionalLogic=function(i){var o=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");!o.length&&e(".gform_variation_wrapper").length&&(o=e(".gform_variation_wrapper"));var a=o.find(".image-choices-field");a.length&&(a.each((function(){var i=e(this);i.is(":hidden")&&i.find(".image-choices-choice").removeClass(imageChoices.cssClasses.selected+" "+imageChoices.cssClasses.hover+" "+imageChoices.cssClasses.focus)})),setTimeout((function(){"undefined"!=typeof jetslothMatchHeights&&jetslothMatchHeights()}),10))},e(document).bind("gform_post_render",(function(e,i,o){window.gformGetOptionLabel=imageChoices.gformGetOptionLabel,imageChoices.SetUpFields(i,o)})),e(document).bind("gform_post_conditional_logic",(function(e,i,o,a){imageChoices.ConditionalLogic(i),imageChoices.SelectedFields(i)})),e(document).on("gfcf/conversational/navigate/start gfcf/conversational/navigate/next gfcf/conversational/navigate/prev gfcf/conversational/navigate/error",(function(){jetslothMatchHeights&&jetslothMatchHeights()})),imageChoices.gformGetOptionLabel=function(i,o,a,s,t){if((i=e(i)).closest(".gfield").hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gformGetOptionLabel)return window.colorPicker_gformGetOptionLabel(i,o,a,s,t);var c=i.closest('[class*="gchoice"]').index(),n=gformGetPrice(o),l=i.attr("price"),r=i.html().replace(/<span(.*)<\/span>/i,"").replace(l,""),g=gformGetPriceDifference(a,n);g=0==gformToNumber(g)?"":" "+g,i.attr("price",g);var h="option"==i[0].tagName.toLowerCase()?" "+g:"<span class='ginput_price'>"+g+"</span>",d=r+h;return window.gform_format_option_label&&(d=gform_format_option_label(d,r,h,a,n,s,t,c)),d},window.imageChoices_gformGetOptionLabel=imageChoices.gformGetOptionLabel,window.gformGetOptionLabel=imageChoices.gformGetOptionLabel,imageChoices.gform_format_option_label=function(i,o,a,s,t,c,n,l){var r=[i],g=e("#gform_"+c+" .gfield#field_"+c+"_"+n);if(g.length&&g.hasClass("image-choices-field")){var h=g.find('[class*="gchoice"]'),d=void 0!==l&&l>=0?h.eq(l):h,f=void 0!==g.data("jetsloth-lazy-loaded")?g.data("jetsloth-lazy-loaded"):[];d.each((function(){var i=e(this),h=i.find("label"),d=(i.find("input"),h.data("img")),m=h.data("lightbox-src");o=h.attr("data-text"),a===o&&(a=""),"<span class='ginput_price'></span>"===a&&(a="<span class='ginput_price'>&nbsp;</span>");var p=c.toString()+"_"+n.toString(),_=imageChoices.isLegacyMode()||!g.hasClass("ic-theme--cover-tile")&&!g.hasClass("ic-image--natural")?"":' data-jmh="'+p+"_"+l+'"',u=g.hasClass("has-jetsloth-lazy")&&-1===e.inArray(l,f),C=['<span class="image-choices-choice-image-wrap"'+_+' style="background-image:url('+d+');">','<img src="'+d+'" class="image-choices-choice-image" alt="" data-lightbox-src="'+m+'" />',"</span>"].join("");u&&(C=['<span class="image-choices-choice-image-wrap jetsloth-lazy"'+_+' data-lazy-bg="'+d+'">','<img src="" data-lazy-src="'+d+'" class="image-choices-choice-image jetsloth-lazy" alt="" data-lightbox-src="'+m+'" />',"</span>"].join(""));if(r=[C,'<span class="image-choices-choice-text">'+gform.applyFilters("gfic_choice_text",o,s,t,c,n,l)+"</span>",'<span class="image-choices-choice-price">'+gform.applyFilters("gfic_choice_price",a,s,t,c,n,l)+"</span>"],g.hasClass("image-choices-use-lightbox")&&i.find(".image-choices-lightbox-btn").length){var v=(o+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),b=m;void 0!==b&&""!==b||(b=d),""!==b&&i.find(".image-choices-lightbox-btn").attr("href",b).data("caption",v).attr("rel",n)}"undefined"!=typeof jetslothMatchHeights&&setTimeout((()=>jetslothMatchHeights),100),u&&setTimeout((function(){i.find(".jetsloth-lazy").each((function(){imageChoices.observer.observe(this)}))}),100)}))}return gform.applyFilters("gfic_choice_html",r.join(""),o,a,s,t,c,n,l)},window.imageChoices_gform_format_option_label=imageChoices.gform_format_option_label,window.gform_format_option_label=function(i,o,a,s,t,c,n,l){"undefined"!=typeof gftt&&void 0!==gftt.option_label_reinit&&gftt.option_label_reinit(c,n);var r=e("#field_"+c+"_"+n);return r.length&&r.hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gform_format_option_label?window.colorPicker_gform_format_option_label(i,o,a,s,t,c,n,l):imageChoices.gform_format_option_label(i,o,a,s,t,c,n,l)},imageChoices.onImageLoaded=function(i){var o=e(i);o.addClass("jetsloth-lazy-loaded");var a=o.closest(".gfield");if(a.length){var s=o.closest("li").index(),t=void 0!==a.data("jetsloth-lazy-loaded")?a.data("jetsloth-lazy-loaded"):[];t.push(s),a.data("jetsloth-lazy-loaded",t),"undefined"!=typeof jetslothMatchHeights&&setTimeout((()=>jetslothMatchHeights),100)}},imageChoices.loadImage=function(i){var o=e(i);if(void 0!==o.data("lazy-bg")&&""!==o.data("lazy-bg")){var a=new Image;a.onload=function(){o.css("background-image","url("+o.data("lazy-bg")+")"),imageChoices.onImageLoaded(o)},a.src=o.data("lazy-bg")}else void 0!==o.data("lazy-src")&&""!==o.data("lazy-src")&&(o.on("load",(function(){imageChoices.onImageLoaded(o)})),o.attr("src",o.data("lazy-src")))},imageChoices.lazyLoad=function(i){e.each(i,(function(e,i){i.intersectionRatio>0&&(imageChoices.observer.unobserve(i.target),imageChoices.loadImage(i.target))}))};var i=!1;imageChoices.InitLazyLoad=function(o,a){if(!i){var s={rootMargin:gform.applyFilters("gfic_lazy_root_margin","100px"),threshold:gform.applyFilters("gfic_lazy_threshold",1)};imageChoices.observer=new IntersectionObserver(imageChoices.lazyLoad,s),i=!0}var t=e("#gform_"+o),c=void 0!==a?t.find("#gform_page_"+o+"_"+a):[];(c.length?c.find(".image-choices-field .jetsloth-lazy"):t.find(".image-choices-field .jetsloth-lazy")).each((function(){imageChoices.observer.observe(this)}))}}(jQuery);
//# sourceMappingURL=gf_image_choices.js.map
