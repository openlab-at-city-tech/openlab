var imageChoices=imageChoices||{};!function(e){imageChoices.cssClasses={selected:"image-choices-choice-selected",hover:"image-choices-choice-hover",focus:"image-choices-choice-focus"},imageChoices.getFormMarkupVersion=function(i){var o,t,a="";return void 0===i||"string"==typeof i&&""===i||"number"==typeof i&&i<=0?(o=e('form[id^="gform_"]:first').attr("id"),a=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),t=e("#"+o)):i instanceof jQuery?(o=i.attr("id"),a=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),t=i):"string"==typeof i&&-1!==i.indexOf("gform_")?(a=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(i):i.replace("gform_",""),t=e("#"+(o="gform_"+a))):(a=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id("gform_"+i.toString()):i.toString(),t=e("#"+(o="gform_"+a))),t.length?t.find(".gform_body .gfield:first").is("li")?1:2:e(".gform_body .gfield:first").is("li")?1:2},imageChoices.isLegacyMarkup=function(e){return 1===imageChoices.getFormMarkupVersion(e)},imageChoices.isLegacyMode=function(){return!(imageChoicesVars.hasOwnProperty("useNewFeatures")&&"true"===imageChoicesVars.useNewFeatures.toString())},imageChoices.$fieldChoices=function(e){if(void 0===e||e instanceof jQuery==!1)return[];var i='.ginput_container .gfield_radio div[class*="gchoice"], .ginput_container .gfield_checkbox div[class*="gchoice"]:not(.gchoice_select_all)';return imageChoices.isLegacyMarkup(e.closest('[id^="gform_wrapper_"]'))&&(i=".ginput_container .gfield_radio li, .ginput_container .gfield_checkbox li:not(.gchoice_select_all)"),e.find(i)},imageChoices.SelectedFields=function(i){var o=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");imageChoices.$fieldChoices(o.find(".image-choices-field")).find("input:checked").each((function(){e(this).closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.selected)}))},imageChoices.InitLightbox=function(i){var o=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form"),t=parseInt(i,10);o.find(".image-choices-field.image-choices-use-lightbox").each((function(){var i=e(this),o=i.attr("id"),a=parseInt(o.substring(o.lastIndexOf("_")+1),10);if(!imageChoicesVars.hasOwnProperty("elementorCompat")||"elementor"!==imageChoicesVars.elementorCompat){var c=gform.applyFilters("gfic_lightbox_options",{captions:imageChoices.isLegacyMode()||i.hasClass("ic-lightbox-captions"),captionType:"data",captionsData:"caption"},t,a);c.captions=gform.applyFilters("gfic_lightbox_captions",c.captions,t,a),c=gform.applyFilters(`gfic_lightbox_options_${t}`,c,t,a),c=gform.applyFilters(`gfic_lightbox_options_${t}_${a}`,c,t,a),i.find(".image-choices-lightbox-btn").jetslothLightbox(c)}})),o.find(".product-image-field.product-image-use-lightbox").each((function(){var i=e(this),o=i.attr("id"),a=parseInt(o.substring(o.lastIndexOf("_")+1),10),c=i.find(".ic-product-image-lightbox-btn");if(!imageChoicesVars.hasOwnProperty("elementorCompat")||"elementor"!==imageChoicesVars.elementorCompat){var s=((i.find(".gfield_label_product").length?i.find(".gfield_label_product").text():i.find(".gftt-label").length?i.find(".gftt-label").text():i.find(".gfield_label").text())+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");c.data("caption",s),c.attr("data-elementor-open-lightbox","no");var l=gform.applyFilters("gfic_lightbox_options",{captions:i.hasClass("product-image-lightbox-captions"),captionType:"data",captionsData:"caption"},t,a);l.captions=gform.applyFilters("gfic_lightbox_captions",l.captions,t,a),l=gform.applyFilters(`gfic_lightbox_options_${t}`,l,t,a),l=gform.applyFilters(`gfic_lightbox_options_${t}_${a}`,l,t,a),c.jetslothLightbox(l)}}))},imageChoices.onChoiceKeyPress=function(i){var o=e(i.target),t=o.closest(".gfield");if(32===i.keyCode&&(o.is(":checkbox")||o.is(":radio")))o.is(":radio")&&!o.is(":checked")?i.preventDefault():o.is(":checkbox")&&(i.preventDefault(),i.stopImmediatePropagation());else if(9===i.keyCode&&t.hasClass("image-choices-field")){var a=i.shiftKey?"previous":"next",c=o.closest(".image-choices-choice");"next"===a?c.is(":last-child")||(i.preventDefault(),c.next(".image-choices-choice").find("> input").focus()):"previous"===a&&(c.is(":first-child")||(i.preventDefault(),c.prev(".image-choices-choice").find("> input").focus()))}},imageChoices.onChoicesSelectAllClick=function(i){var o=e(this),t=o.closest(".gfield"),a=(o.is("input")?o.is(":checked"):o.data("checked"))?t.find(".image-choices-choice input:checked"):t.find(".image-choices-choice input:not(:checked)");a.length&&a.each((function(i,o){var t=e(o);imageChoices.onChoiceLabelClick(t.next("label"))}))},imageChoices.onChoiceLabelClick=function(e){var i=e.closest('[class*="gchoice"]'),o=i.closest(".gfield_checkbox, .gfield_radio").first(),t=i.find("input");i.hasClass("image-choices-choice-other")&&setTimeout((function(){i.find(".gf_other_wrap").addClass("active"),i.find("input:text").focus()}),250),o.hasClass("gfield_radio")?(o.find("."+imageChoices.cssClasses.selected).not(i).removeClass(imageChoices.cssClasses.selected).find("input").prop("checked",!1),i.addClass(imageChoices.cssClasses.selected)):o.hasClass("gfield_checkbox")&&(t.is(":checked")?i.addClass(imageChoices.cssClasses.selected):i.removeClass(imageChoices.cssClasses.selected))},imageChoices.clearProductImageChoice=function(e){let i=e.querySelector(".ginput_container_singleproduct .ginput_quantity");e.classList.remove("ic-product-selected"),i.value="",jQuery(i).trigger("input")},imageChoices.selectProductImageChoice=function(e){e.classList.add("ic-product-selected");let i=Array.from(e.classList).filter((e=>-1!==e.indexOf("ic-product-group-"))),o=i.length?"."+i[0]:"";document.querySelectorAll(`.product-image-field.ic-product-single-choice${o}:not([id="${e.id}"])`).forEach((e=>{imageChoices.clearProductImageChoice(e)}))},imageChoices.onProductImageChoiceClick=function(e){e.querySelector(".ginput_container_singleproduct .ginput_quantity");e.classList.contains("ic-product-single-choice")?e.classList.contains("ic-product-selected")||imageChoices.selectProductImageChoice(e):(e.classList.toggle("ic-product-selected"),e.classList.contains("ic-product-selected")||imageChoices.clearProductImageChoice(e))},imageChoices.setupProductImageChoices=function(e){e.querySelectorAll(".product-image-field.ic-product-image-choice .ic-product-image-wrap").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),imageChoices.onProductImageChoiceClick(e.currentTarget.closest(".gfield"))}))}))},imageChoices.SetUpFields=function(i,o){e(".entry-details .detail-view .image-choices-choice-image-wrap").each((function(i){e(this).closest(".detail-view").addClass("image-choices-field image-choices-show-labels")}));var t=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");!t.length&&e(".gform_variation_wrapper").length&&(t=e(".gform_variation_wrapper"));var a=t.find(".image-choices-field");a.length&&a.find(".gfield_radio, .gfield_checkbox").addClass("gform-theme__no-reset--children");var c=imageChoices.$fieldChoices(a),s=t.find(".product-image-field");t.find('.gchoice_select_all input, button[id$="select_all"]').each((function(i,o){e(o).on("click",imageChoices.onChoicesSelectAllClick)})),(c.length>0||s.length>0)&&(c.each((function(){var i=e(this);if(!0!==i.data("init")){i.data("init",!0),i.find("label").addClass("gform-field-label"),i.find("label").hover((function(i){var o=e(this);if(o.find("input").is(":disabled"))return!1;o.closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.hover)}),(function(i){var o=e(this);if(o.find("input").is(":disabled"))return!1;o.closest('[class*="gchoice"]').removeClass(imageChoices.cssClasses.hover)})),i.find("input").focus((function(){e(this).closest('[class*="gchoice"]').addClass(imageChoices.cssClasses.focus)})).blur((function(){e(this).closest('[class*="gchoice"]').removeClass(imageChoices.cssClasses.focus)})),i.find('input[value="gf_other_choice"]').length?(i.addClass("image-choices-choice-other"),i.find('input[type="text"]').wrap('<div class="gf_other_wrap"></div>'),e(".gf_other_wrap").append('<a href="#" class="gf_other_close"></a>'),e(document).on("click",".gf_other_close",(function(i){i.preventDefault(),e(this).parent().removeClass("active")})),i.find('input:not([type="text"])').on("click",(function(){var i=e(this).closest(".image-choices-choice").find("label");imageChoices.onChoiceLabelClick(i)}))):i.find("input").on("click",(function(){var i=e(this).closest(".image-choices-choice").find("label");imageChoices.onChoiceLabelClick(i)}));var o=i.closest(".image-choices-field");if(o.hasClass("image-choices-use-lightbox")&&!i.find(".image-choices-lightbox-btn").length){var t=o.attr("id"),a=(i.find(".image-choices-choice-text").html()+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),c=i.find(".image-choices-choice-image").attr("src"),s=i.find(".image-choices-choice-image").data("lightbox-src");if(void 0!==s&&""!==s||(s=c),""!==s){var l=imageChoicesVars.hasOwnProperty("elementorCompat")&&"elementor"!==imageChoicesVars.elementorCompat?'data-elementor-open-lightbox="no"':"",r=e('<a href="'+s+'" class="image-choices-lightbox-btn" '+l+' rel="'+t+'"><i></i></a>');r.data("caption",a),i.prepend(r)}}}})),imageChoices.setupProductImageChoices(t.get(0)),setTimeout((function(){c.length&&imageChoices.SelectedFields(i),imageChoices.InitLightbox(i),imageChoices.InitLazyLoad(i,o),"undefined"!=typeof jetslothMatchHeights&&jetslothMatchHeights(),gform.doAction("gfic_setup",i)}),100))},window.imageChoices_SetUpFields=imageChoices.SetUpFields,imageChoices.ConditionalLogic=function(i){var o=e(void 0!==i&&""!==i?"#gform_"+i:".gform_wrapper form");!o.length&&e(".gform_variation_wrapper").length&&(o=e(".gform_variation_wrapper"));var t=o.find(".image-choices-field");t.length&&(t.each((function(){var i=e(this);i.is(":hidden")&&i.find(".image-choices-choice").removeClass(imageChoices.cssClasses.selected+" "+imageChoices.cssClasses.hover+" "+imageChoices.cssClasses.focus)})),setTimeout((function(){"undefined"!=typeof jetslothMatchHeights&&jetslothMatchHeights()}),10))},e(document).bind("gform_post_render",(function(e,i,o){window.gformGetOptionLabel=imageChoices.gformGetOptionLabel,imageChoices.SetUpFields(i,o)})),e(document).bind("gform_post_conditional_logic",(function(e,i,o,t){imageChoices.ConditionalLogic(i),imageChoices.SelectedFields(i)})),e(document).on("gfcf/conversational/navigate/start gfcf/conversational/navigate/next gfcf/conversational/navigate/prev gfcf/conversational/navigate/error",(function(){jetslothMatchHeights&&jetslothMatchHeights()})),imageChoices.gformGetOptionLabel=function(i,o,t,a,c){if((i=e(i)).closest(".gfield").hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gformGetOptionLabel)return window.colorPicker_gformGetOptionLabel(i,o,t,a,c);var s=i.closest('[class*="gchoice"]').index(),l=gformGetPrice(o),r=i.attr("price"),n=i.html().replace(/<span(.*)<\/span>/i,"").replace(r,""),g=gformGetPriceDifference(t,l);g=0==gformToNumber(g)?"":" "+g,i.attr("price",g);var h="option"==i[0].tagName.toLowerCase()?" "+g:"<span class='ginput_price'>"+g+"</span>",d=n+h;return window.gform_format_option_label&&(d=gform_format_option_label(d,n,h,t,l,a,c,s)),d},window.imageChoices_gformGetOptionLabel=imageChoices.gformGetOptionLabel,window.gformGetOptionLabel=imageChoices.gformGetOptionLabel,imageChoices.gform_format_option_label=function(i,o,t,a,c,s,l,r){var n=[i],g=`${o}`,h=`${t}`,d=e("#gform_"+s+" .gfield#field_"+s+"_"+l);if(d.length&&d.hasClass("image-choices-field")){var f=d.find('[class*="gchoice"]'),m=void 0!==r&&r>=0?f.eq(r):f,p=void 0!==d.data("jetsloth-lazy-loaded")?d.data("jetsloth-lazy-loaded"):[];m.each((function(){var i=e(this),f=i.find("label"),m=(i.find("input"),f.data("img")),_=f.data("lightbox-src");o=f.attr("data-text"),t===o&&(t=""),"<span class='ginput_price'></span>"===t&&(t="<span class='ginput_price'>&nbsp;</span>");var u=s.toString()+"_"+l.toString(),C=imageChoices.isLegacyMode()||!d.hasClass("ic-theme--cover-tile")&&!d.hasClass("ic-image--natural")?"":' data-jmh="'+u+"_"+r+'"',v=d.hasClass("has-jetsloth-lazy")&&-1===e.inArray(r,p),b=['<span class="image-choices-choice-image-wrap"'+C+' style="background-image:url('+m+');">','<img src="'+m+'" class="image-choices-choice-image" alt="" data-lightbox-src="'+_+'" />',"</span>"].join("");v&&(b=['<span class="image-choices-choice-image-wrap jetsloth-lazy"'+C+' data-lazy-bg="'+m+'">','<img src="" data-lazy-src="'+m+'" class="image-choices-choice-image jetsloth-lazy" alt="" data-lightbox-src="'+_+'" />',"</span>"].join(""));if(g=gform.applyFilters("gfic_choice_text",o,a,c,s,l,r),g=gform.applyFilters(`gfic_choice_text_${s}`,g,a,c,s,l,r),g=gform.applyFilters(`gfic_choice_text_${s}_${l}`,g,a,c,s,l,r),g=gform.applyFilters(`gfic_choice_text_${s}_${l}_${r}`,g,a,c,s,l,r),h=gform.applyFilters("gfic_choice_price",t,a,c,s,l,r),h=gform.applyFilters(`gfic_choice_price_${s}`,h,a,c,s,l,r),h=gform.applyFilters(`gfic_choice_price_${s}_${l}`,h,a,c,s,l,r),h=gform.applyFilters(`gfic_choice_price_${s}_${l}_${r}`,h,a,c,s,l,r),n=[b,'<span class="image-choices-choice-text">'+g+"</span>",'<span class="image-choices-choice-price">'+h+"</span>"],d.hasClass("image-choices-use-lightbox")&&i.find(".image-choices-lightbox-btn").length){var y=(o+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),w=_;void 0!==w&&""!==w||(w=m),""!==w&&i.find(".image-choices-lightbox-btn").attr("href",w).data("caption",y).attr("rel",l)}"undefined"!=typeof jetslothMatchHeights&&setTimeout((()=>jetslothMatchHeights),100),v&&setTimeout((function(){i.find(".jetsloth-lazy").each((function(){imageChoices.observer.observe(this)}))}),100)}))}var _=gform.applyFilters("gfic_choice_html",n.join(""),g,h,a,c,s,l,r);return _=gform.applyFilters(`gfic_choice_html_${s}`,_,g,h,a,c,s,l,r),_=gform.applyFilters(`gfic_choice_html_${s}_${l}`,_,g,h,a,c,s,l,r),_=gform.applyFilters(`gfic_choice_html_${s}_${l}_${r}`,_,g,h,a,c,s,l,r)},window.imageChoices_gform_format_option_label=imageChoices.gform_format_option_label,window.gform_format_option_label=function(i,o,t,a,c,s,l,r){"undefined"!=typeof gftt&&void 0!==gftt.option_label_reinit&&gftt.option_label_reinit(s,l);var n=e("#field_"+s+"_"+l);return n.length&&n.hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gform_format_option_label?window.colorPicker_gform_format_option_label(i,o,t,a,c,s,l,r):imageChoices.gform_format_option_label(i,o,t,a,c,s,l,r)},imageChoices.onImageLoaded=function(i){var o=e(i);o.addClass("jetsloth-lazy-loaded");var t=o.closest(".gfield");if(t.length){var a=o.closest("li").index(),c=void 0!==t.data("jetsloth-lazy-loaded")?t.data("jetsloth-lazy-loaded"):[];c.push(a),t.data("jetsloth-lazy-loaded",c),"undefined"!=typeof jetslothMatchHeights&&setTimeout((()=>jetslothMatchHeights),100)}},imageChoices.loadImage=function(i){var o=e(i);if(void 0!==o.data("lazy-bg")&&""!==o.data("lazy-bg")){var t=new Image;t.onload=function(){o.css("background-image","url("+o.data("lazy-bg")+")"),imageChoices.onImageLoaded(o)},t.src=o.data("lazy-bg")}else void 0!==o.data("lazy-src")&&""!==o.data("lazy-src")&&(o.on("load",(function(){imageChoices.onImageLoaded(o)})),o.attr("src",o.data("lazy-src")))},imageChoices.lazyLoad=function(i){e.each(i,(function(e,i){i.intersectionRatio>0&&(imageChoices.observer.unobserve(i.target),imageChoices.loadImage(i.target))}))};var i=!1;imageChoices.InitLazyLoad=function(o,t){if(!i){var a=gform.applyFilters("gfic_lazy_root_margin","100px",o,t);a=gform.applyFilters(`gfic_lazy_root_margin_${o}`,a,o,t),a=gform.applyFilters(`gfic_lazy_root_margin_${o}_${t}`,a,o,t);var c=gform.applyFilters("gfic_lazy_threshold",1,o,t);c=gform.applyFilters(`gfic_lazy_threshold_${o}`,c,o,t);var s={rootMargin:a,threshold:c=gform.applyFilters(`gfic_lazy_threshold_${o}_${t}`,c,o,t)};imageChoices.observer=new IntersectionObserver(imageChoices.lazyLoad,s),i=!0}var l=e("#gform_"+o),r=void 0!==t?l.find("#gform_page_"+o+"_"+t):[];(r.length?r.find(".image-choices-field .jetsloth-lazy, .product-image-field .jetsloth-lazy"):l.find(".image-choices-field .jetsloth-lazy, .product-image-field .jetsloth-lazy")).each((function(){imageChoices.observer.observe(this)}))}}(jQuery);
//# sourceMappingURL=gf_image_choices.js.map
