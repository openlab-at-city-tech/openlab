jQuery(document).ready((function(){jQuery(".zp-Browse").length>0&&(window.zpBrowseList=new Array,jQuery(".zp-Browse").each((function(e){var s=jQuery(this);window.zpBrowseList.push({id:s.attr("id"),page:1,maxPerPage:10,paginate:""});var t=new URLSearchParams(window.location.search);if(t.get("browsing")){var a=20;jQuery("#wpadminbar").length>0&&(a=jQuery("#wpadminbar").height()),jQuery([document.documentElement,document.body]).scrollTop(jQuery('a[name="'+s.attr("id")+'"]').offset().top-a)}function r(e,s,t,a){var r=window.location.href.split("?");if(a.get("page")&&"Zotpress"==a.get("page")||a.set("page","Zotpress"),!a.get("api_user_id")&&jQuery(".zp-FilterByAccount",t).length>0&&a.set("api_user_id",jQuery("option:selected",jQuery("."+t.attr("id")+" .zp-FilterByAccount")).val()),"collections"==e){if("toplevel"!=s.val()){var n=jQuery("option:selected",s).text().split(" (");a.set("subcollection_id",jQuery("option:selected",s).val()),a.set("subcollection_name",encodeURI(n[0])),a.set("browsing","true")}else a.set("toplevel","toplevel"),a.delete("subcollection_id"),a.delete("subcollection_name"),a.set("browsing","true");a.delete("lib_tag")}else"tags"==e&&"--No Tag Selected--"!=s.val()&&("toplevel"!=s.val()?(a.set("lib_tag",jQuery("option:selected",s).val()),a.set("browsing","true")):a.delete("lib_tag"),a.delete("subcollection_id"),a.delete("subcollection_name"));a=a.toString();var i=new URL(r[0]+"?"+a);window.location=i}jQuery(".ZOTPRESS_AC_MAXPERPAGE",s).length>0&&jQuery(".ZOTPRESS_AC_MAXPERPAGE",s).val().length>0&&(window.zpBrowseList[e].maxPerPage=jQuery(".ZOTPRESS_AC_MAXPERPAGE",s).val()),window.zpBrowseList[e].paginate=function(t=!1,a=!1){if(a=void 0!==a&&"false"!=a&&""!=a,1==t&&(window.zpBrowseList[e].page=1),jQuery(".zpSearchResultsContainer",s).children().addClass("hidden").slice((window.zpBrowseList[e].page-1)*window.zpBrowseList[e].maxPerPage,window.zpBrowseList[e].page*window.zpBrowseList[e].maxPerPage).removeClass("hidden"),a||1==t||0==jQuery(".zpSearchResultsPaging",s).children().length)for(jQuery(".zpSearchResultsPaging",s).empty(),i=1;i<Math.ceil(jQuery(".zpSearchResultsContainer",s).children().length/window.zpBrowseList[e].maxPerPage)+1;i++)0==jQuery(".zpSearchResultsPagingContainer .title",s).length&&jQuery(".zpSearchResultsPagingContainerInner",s).prepend("<span class='title'>Page</span>"),1==i?jQuery(".zpSearchResultsPaging",s).append("<a class='selected' href='javascript:void(0)'><span>"+i+"</span></a>"):jQuery(".zpSearchResultsPaging",s).append("<a href='javascript:void(0)'><span>"+i+"</span></a>");0==jQuery(".zpSearchResultsPagingScroller",s).length&&(jQuery(".zpSearchResultsPagingContainerInner",s).append('<div class="zpSearchResultsPagingScroller"><span class="zpSearchResultsPagingBack">&#8249;</span><span class="zpSearchResultsPagingForward">&#8250;</span></div>'),jQuery(".zpSearchResultsPagingContainer",s).on("click",".zpSearchResultsPagingBack",(function(){var e=parseInt(jQuery(".zpSearchResultsPaging",s).css("left")),t=parseInt(jQuery(".zpSearchResultsPaging a.selected",s).css("width"))+2*parseInt(jQuery(".zpSearchResultsPaging a.selected",s).css("border-left-width"));0!=e&&jQuery(".zpSearchResultsPaging",s).css("left",e+t+"px")})),jQuery(".zpSearchResultsPagingContainer",s).on("click",".zpSearchResultsPagingForward",(function(){var e=parseInt(jQuery(".zpSearchResultsPaging",s).css("left")),t=parseInt(jQuery(".zpSearchResultsPaging a.selected",s).css("width"))+2*parseInt(jQuery(".zpSearchResultsPaging a.selected",s).css("border-left-width"));-1*e<jQuery(".zpSearchResultsPaging",s).width()-50&&jQuery(".zpSearchResultsPaging",s).css("left",e-t+"px")}))),jQuery(".zpSearchResultsPagingContainer",s).is(":hidden")&&jQuery(".zpSearchResultsPagingContainer",s).show()},jQuery("body").on("click","#"+s.attr("id")+" .zpSearchResultsPaging a",(function(){var t=jQuery(".zp-List",s).offset().top;jQuery(".zpSearchResultsPaging a",s).removeClass("selected"),jQuery(this).addClass("selected"),window.zpBrowseList[e].page=jQuery(this).text(),setTimeout((function(){jQuery([document.documentElement,document.body]).scrollTop(t)}),50),window.zpBrowseList[e].paginate(!1)})),jQuery("div.zp-Browse-Bar",s).delegate("select.zp-Browse-Collections-Select","change",(function(){"blank"!=jQuery(this).val()&&r("collections",jQuery(this),s,t)})),jQuery("div.zp-Browse-Bar",s).delegate("select.zp-Browse-Collections-Select","mousedown",(function(){})),jQuery("div.zp-Browse-Bar",s).delegate("select.zp-List-Tags","change",(function(){r("tags",jQuery(this),s,t)}))})))}));