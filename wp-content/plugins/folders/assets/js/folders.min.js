!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){var a,s,o,r,n,l,d="",c=!1,p=!1,u=0,m=0,f=0,h=0,g=!1,v="",j=[],b=wcp_settings.current_url,w=[],y="<li class='grid-view' data-id='__folder_id__' id='folder___folder_id__'><div class='folder-item is-folder' data-id='__folder_id__'><a title='__folder_name__' id='folder_view___folder_id__'class='folder-view __append_class__ has-new-folder'data-id='__folder_id__'><span class='folder item-name'><span id='wcp_folder_text___folder_id__'class='folder-title'>__folder_name__</span></span></a></div></li>",k=null,x=null,$=1;function C(){"yes"==wcp_settings.useFolderUndo&&(e("#do-undo").addClass("active"),e(".undo-folder-action").removeClass("disabled"),setTimeout(function(){e("#do-undo").removeClass("active"),e(".undo-folder-action").addClass("disabled")},parseInt(wcp_settings.defaultTimeout)))}function _(){e(".cut-folder-action, .copy-folder-action, .paste-folder-action, .delete-folder-action").addClass("disabled"),e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e(".delete-folder-action").removeClass("disabled"),e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&e(".delete-folder-action").removeClass("disabled")}function E(){e("#custome_folder_color_css").remove();var t="<style id='custome_folder_color_css'>";e(j).each(function(e,a){""!=a.has_color&&(t+="li.jstree-node[id='"+a.folder_id+"'] .pfolder-folder-close {color: "+a.has_color+"!important;}")}),t+="</style>",e("head").append(t)}function O(){E(),_(),e(".wcp-move-file:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:"clone",cursor:"move",start:function(t,a){e(this).closest("td").addClass("wcp-draggable"),e("body").addClass("no-hover-css")},stop:function(t,a){e(this).closest("td").removeClass("wcp-draggable"),e("body").removeClass("no-hover-css")}}),e(".wcp-move-multiple:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:function(t,a){return(e(".selected-items").remove(),(selectedItems=e("#the-list th input:checked").length)>0)?e("<div class='selected-items'><span class='total-post-count'>"+(selectedItems=0==selectedItems||1==selectedItems?wcp_settings.lang.ONE_ITEM:selectedItems+" "+wcp_settings.lang.ITEMS)+" "+wcp_settings.lang.SELECTED+"</span></div>"):e("<div class='selected-items'><span class='total-post-count'>"+wcp_settings.lang.SELECT_ITEMS+"</span></div>")},start:function(t,a){e("body").addClass("no-hover-css")},cursor:"move",cursorAt:{left:0,top:0},stop:function(t,a){e(".selected-items").remove(),e("body").removeClass("no-hover-css")}}),e(".jstree-anchor:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,s){folderID=e(this).closest("li.jstree-node").attr("id"),s.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each(function(){chkStr+=e(this).val()+","}),a=T(folderID,"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(L(),C(),e("#upgrade-modal-popup").show()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):s.draggable.hasClass("wcp-move-file")?(postID=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each(function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")}),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(t){"1"==(t=e.parseJSON(t)).status?(L(),C(),e("#upgrade-modal-popup").show()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):s.draggable.hasClass("attachment")&&(chkStr=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each(function(){chkStr+=e(this).data("id")+","})),v=chkStr,e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},method:"post",success:function(t){e("#upgrade-modal-popup").show(),L(),C()}}))}}),e(".un-categorised-items:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-hover-list",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,s){folderID=-1,a=wcp_settings.nonce,s.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each(function(){chkStr+=e(this).val()+","}),H(chkStr)):s.draggable.hasClass("wcp-move-file")?(chkStr=(postID=s.draggable[0].attributes["data-id"].nodeValue)+",",e(".wp-list-table input:checked").each(function(){postID!=e(this).val()&&(chkStr+=e(this).val()+",")}),H(chkStr)):s.draggable.hasClass("attachment")&&(chkStr=s.draggable[0].attributes["data-id"].nodeValue,e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each(function(){chkStr+=e(this).data("id")+","})),v=chkStr,H(chkStr))}}),e(".attachments-browser li.attachment:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:function(t,a){return e(".selected-items").remove(),selectedItems=0==(selectedItems=e(".attachments-browser li.attachment.selected").length)||1==selectedItems?"1 Item":selectedItems+" Items",e("<div class='selected-items'><span class='total-post-count'>"+selectedItems+" Selected</span></div>")},start:function(t,a){e("body").addClass("no-hover-css")},cursor:"move",cursorAt:{left:0,top:0},stop:function(t,a){e(".selected-items").remove(),e("body").removeClass("no-hover-css")}}),e(".tree-structure .folder-item:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover-list",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,s){e("body").removeClass("no-hover-css"),folderID=e(this).data("id"),s.draggable.hasClass("wcp-move-multiple")?(a=T(folderID,"nonce"),e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each(function(){chkStr+=e(this).val()+","}),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(e){L(),Y(),C()}}))):s.draggable.hasClass("wcp-move-file")?(postID=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each(function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")}),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(e){L(),Y(),C()}})):s.draggable.hasClass("attachment")&&(chkStr=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each(function(){chkStr+=e(this).data("id")+","})),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(e){L(),Y(),C()}}))}}),e(".sticky-folders li a:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,s){folderID=e(this).closest("li").data("folder-id"),s.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each(function(){chkStr+=e(this).val()+","}),a=T(folderID,"nonce"),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(t){"1"==(t=e.parseJSON(t)).status?(L(),Y(),C()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):s.draggable.hasClass("wcp-move-file")?(postID=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each(function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")}),e.ajax({url:wcp_settings.ajax_url,method:"post",data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},success:function(t){"1"==(t=e.parseJSON(t)).status?(L(),Y(),C()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):s.draggable.hasClass("attachment")&&(chkStr=s.draggable[0].attributes["data-id"].nodeValue,a=T(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each(function(){chkStr+=e(this).data("id")+","})),v=chkStr,e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},method:"post",success:function(e){L(),Y(),C()}}))}}),K()}function S(){e("#js-tree-menu .jstree-node").each(function(){var t=e(this).data("count")&&""!=e(this).data("count")?e(this).data("count"):0;e(".jstree-node[id='"+e(this).attr("id")+"'] > a span.premio-folder-count").text(t)}),e("span.premio-folder-count").each(function(){""==e(this).text()&&e(this).text(0)}),""!=d&&0!=d&&e(".jstree-node[id='"+d+"']").length&&(e("#js-tree-menu").jstree("select_node",d),e(".sticky-folders .sticky-folder-"+d+" a").length&&e(".sticky-folders .sticky-folder-"+d+" a").addClass("active-item")),e(".ajax-preloader").hide(),e(".js-tree-data").show(),N(),G(),e(".sticky-folders ul > li").length>0&&e(".sticky-folders").addClass("active"),P()}function T(e,t){if(j.length>0){for(i=0;i<j.length;i++)if(parseInt(j[i].folder_id)==parseInt(e))return j[i][t]}return""}function D(e){if(j.length>0){for(i=0;i<j.length;i++)if(parseInt(j[i].folder_id)==parseInt(e))return i}return null}function L(){if(e(".media-toolbar").hasClass("media-toolbar-mode-select")&&e("ul.attachments li.selected").length&&(e("ul.attachments li.selected").trigger("click"),e(".select-mode-toggle-button").trigger("click")),""!=v&&(e("#js-tree-menu a.jstree-clicked").length>0||"-1"==d)){if(e("#media-attachment-taxonomy-filter").length){v=v.split(",");for(var t=0;t<v.length;t++)""!=v[t]&&e(".attachments-browser li[data-id='"+v[t]+"']").remove()}v=""}if(e("#media-attachment-taxonomy-filter").length)Q(0);else if(e.ajax({url:wcp_settings.ajax_url,data:{type:wcp_settings.post_type,action:"get_folders_default_list",post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e(".header-posts .total-count").text(t.total_items),e(".un-categorised-items .total-count").text(t.empty_items),w=t.taxonomies,K()}}),e(".folder-loader-ajax").addClass("active"),e("#folder-posts-filter").length)e("#folder-posts-filter").load(b+"&paged="+$+" #posts-filter",function(){var t={Title:"",Url:b+"&paged="+$};history.pushState(t,t.Title,t.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),R()});else{var a,s="paged",o=(a=RegExp("[?&]"+s+"=([^&#]*)").exec(window.location.search),null!==a&&(a[1]||0));o=!1===o?b+"&paged="+$:b,e("#wpbody").load(o+" #wpbody-content",!1,function(t){var a={Title:"",Url:o};history.pushState(a,a.Title,a.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),"object"==typeof inlineEditPost&&(inlineEditPost.init(),e("#the-list").on("click",".editinline",function(){e(this).attr("aria-expanded","true"),inlineEditPost.edit(this)}),e(document).on("click",".inline-edit-save .save",function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.save(t)}),e(document).on("click",".inline-edit-save .cancel",function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.revert(t)}))})}}function R(){P(),e(".form-loader-count").css("width","0"),"object"==typeof inlineEditPost&&(inlineEditPost.init(),e("#the-list").on("click",".editinline",function(){e(this).attr("aria-expanded","true"),inlineEditPost.edit(this)}),e(document).on("click",".inline-edit-save .save",function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.save(t)}),e(document).on("click",".inline-edit-save .cancel",function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.revert(t)})),"attachment"!=wcp_settings.post_type||(e(".move-to-folder-top").length||e("#bulk-action-selector-top").append("<option class='move-to-folder-top' value='move_to_folder'>"+wcp_settings.lang.MOVE_TO_FOLDER+"</option>"),e(".move-to-folder-bottom").length||e("#bulk-action-selector-bottom").append("<option class='move-to-folder-bottom' value='move_to_folder'>"+wcp_settings.lang.MOVE_TO_FOLDER+"</option>"))}function P(){if(j.length&&(e("li.jstree-node").each(function(){null!=(folderPostId=D(e(this).attr("id")))&&(1==j[folderPostId].is_high?e(this).addClass("is-high"):e(this).removeClass("is-high"),1==j[folderPostId].is_sticky?e(this).addClass("is-sticky"):e(this).removeClass("is-sticky"))}),E()),folderId=0,e(".tree-structure ul").html(""),folderStatus=!0,e(".jstree-clicked").length&&(folderID=e(".jstree-clicked").closest(".jstree-node").attr("id"),e(".jstree-node[id='"+folderID+"'] > ul.jstree-children > li.jstree-node").length?(folderStatus=!1,e(".jstree-node[id='"+folderID+"'] > ul.jstree-children > li.jstree-node").each(function(){fID=e(this).attr("id"),fName=e.trim(e("#js-tree-menu").jstree(!0).get_node(fID).text),liHtml=(liHtml=y.replace(/__folder_id__/g,fID)).replace(/__folder_name__/g,fName),selectedClass=e(this).hasClass("is-high")?"is-high":"",liHtml=liHtml.replace(/__append_class__/g,selectedClass),e(".tree-structure ul").append(liHtml)})):e(".jstree-node[id='"+folderID+"']").closest("ul").hasClass("jstree-container-ul")||(folderStatus=!1)),folderStatus&&e("#js-tree-menu > ul > li.jstree-node").each(function(){fID=e(this).attr("id"),fName=e.trim(e("#js-tree-menu").jstree(!0).get_node(fID).text),liHtml=(liHtml=y.replace(/__folder_id__/g,fID)).replace(/__folder_name__/g,fName),selectedClass=e(this).hasClass("is-high")?"is-high":"",liHtml=liHtml.replace(/__append_class__/g,selectedClass),e(".tree-structure ul").append(liHtml)}),X(),"attachment"!=wcp_settings.post_type||(e(".move-to-folder-top").length||e("#bulk-action-selector-top").append("<option class='move-to-folder-top' value='move_to_folder'>Move to Folder</option>"),e(".move-to-folder-bottom").length||e("#bulk-action-selector-bottom").append("<option class='move-to-folder-bottom' value='move_to_folder'>Move to Folder</option>")),e(".sticky-folders .active-item").removeClass("active-item"),e("#js-tree-menu li.jstree-node.active-item").length){var t=e("#js-tree-menu li.jstree-node.active-item").data("folder-id");e(".sticky-folders .sticky-folder-"+t+" a").addClass("active-item")}O()}function N(){var t=e(window).height()-e("#wpadminbar").height()-e(".sticky-wcp-custom-form").height()-40;e("#custom-scroll-menu").height(t),e("#custom-scroll-menu").overlayScrollbars({resize:"none",sizeAutoCapable:!0,autoUpdateInterval:33,x:"scroll",clipAlways:!1,y:"scroll"}),e(".custom-scroll-menu").hasClass("hor-scroll")&&(jQuery("#custom-scroll-menu .os-viewport").on("scroll",function(){A()}),A())}function A(){jQuery("#js-tree-menu span.folder-actions").css("right",jQuery("#custom-scroll-menu .horizontal-scroll-menu").width()-jQuery("#custom-scroll-menu .os-viewport").width()-e("#custom-scroll-menu .os-viewport").scrollLeft()-10)}function U(){P()}function F(){if(0==s&&o>=10)return e("#folder-limitation-message").html("You've reached the 10 folder limitation!"),e("#no-more-folder-credit").show(),!1;e("#add-update-folder-title").text(wcp_settings.lang.ADD_NEW_FOLDER),e("#save-folder-data").text(wcp_settings.lang.SUBMIT),e(".folder-form-errors").removeClass("active"),e("#add-update-folder-name").val(""),p&&(u=m,e("#add-update-folder-name").val(e.trim(e("#js-tree-menu").jstree(!0).get_node(m).text)+" #2"),m=e("#"+m+"_anchor").closest(".jstree-node").parent().parent().hasClass("jstree-node")?e("#"+m+"_anchor").closest(".jstree-node").parent().parent().attr("id"):0),e("#add-update-folder").removeClass("disabled"),e("#add-update-folder").show(),e("#add-update-folder-name").focus(),e(".dynamic-menu").remove()}function I(t){e.ajax({url:wcp_settings.ajax_url,data:{action:"folders_review_box",days:t,nonce:wcp_settings.review_nonce},type:"post"}),e("#rating-modal-popup").remove()}function z(){folderName=e.trim(e("#js-tree-menu").jstree(!0).get_node(m).text),t==(parentID=e("#wcp_folder_"+m).closest("li.jstree-node").data("folder-id"))&&(parentID=0),e("#update-folder-data").text("Submit"),e(".folder-form-errors").removeClass("active"),e("#update-folder-item-name").val(folderName),e("#update-folder-item").removeClass("disabled"),e("#update-folder-item").show(),e("#update-folder-item-name").focus(),e(".dynamic-menu").remove()}function M(t){var a=wcp_settings.lang.DELETE_FOLDER_MESSAGE,s=wcp_settings.lang.ITEM_NOT_DELETED;if(g=!1,1==t&&e("#menu-checkbox").is(":checked")){if(g=!0,0==e("#js-tree-menu input.checkbox:checked").length){e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(wcp_settings.lang.SELECT_AT_LEAST_ONE_FOLDER),e("#error-folder-popup").show();return}e("#js-tree-menu input.checkbox:checked").length>1&&(a=wcp_settings.lang.DELETE_FOLDERS_MESSAGE,s=wcp_settings.lang.ITEMS_NOT_DELETED)}e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#remove-folder-item").text(wcp_settings.lang.YES_DELETE_IT),e("#remove-folder-message").text(a),e("#remove-folder-notice").text(s),e("#confirm-remove-folder").show(),e("#remove-folder-item").focus()}function J(){e("#js-tree-menu").jstree({core:{cache:!1,animation:0,max_depth:n?"-1":1,check_callback:function(t,a,s,o,r){if(e("*").removeClass("drag-bot").removeClass("drag-in").removeClass("drag-up"),("move_node"===t||"copy_node"===t)&&r&&r.dnd)switch(r.pos){case"a":r.origin.get_node(r.ref,!0).addClass("drag-bot"),nodeId=e(".drag-bot").attr("id"),e("#jstree-dnd").text("Below "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;case"i":if(!n&&e("#do_not_show_again").is(":checked"))return!1;r.origin.get_node(r.ref,!0).addClass("drag-in"),nodeId=e(".drag-in").attr("id"),e("#jstree-dnd").text("Inside "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;case"b":r.origin.get_node(r.ref,!0).addClass("drag-up"),nodeId=e(".drag-up").attr("id"),e("#jstree-dnd").text("Above "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;default:e("#jstree-dnd").text(e("#jstree-dnd").data("txt"))}return!0}},data:{cache:!1},select_node:!1,search:{show_only_matches:!0,case_sensitive:!1,fuzzy:!1},plugins:["dnd","search","contextmenu"],contextmenu:{select_node:0,show_at_node:0,items:function(){return{}}}}).bind("ready.jstree",function(){S(),O(),_()}).bind("after_open.jstree",function(){O()}).bind("open_all.jstree",function(){O()}).bind("create_node.jstree",function(){O()}).bind("delete_node.jstree",function(){O()}).bind("close_all.jstree",function(){O()}).bind("after_close.jstree",function(){O()}).bind("move_node.jstree",function(t,a){if(!n){var s=a.old_position;if("#"!=a.parent)return e("#js-tree-menu").jstree("move_node","#"+a.node.id,"#",s),e("#sub-drag-folder-popup").show(),!1}A(),S(),"#"!=a.node.parent&&jQuery("#js-tree-menu").jstree("open_node",a.node.parent),folderMoveId=a.node.id,orderString="",e("#js-tree-menu .jstree-node[id='"+folderMoveId+"']").closest("ul").children().each(function(){"undefined"!=e(this).attr("id")&&(orderString+=e(this).attr("id")+",")}),parentID=e("#"+folderMoveId+"_anchor").closest(".jstree-node").parent().parent().hasClass("jstree-node")?e("#"+folderMoveId+"_anchor").closest(".jstree-node").parent().parent().attr("id"):0,A(),""!=orderString&&(e(".form-loader-count").css("width","100%"),e.ajax({url:wcp_settings.ajax_url,data:"term_ids="+orderString+"&action=wcp_save_folder_order&type="+wcp_settings.post_type+"&nonce="+wcp_settings.nonce+"&term_id="+folderMoveId+"&parent_id="+parentID,method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(e("#wcp_folder_parent").html(t.options),e(".form-loader-count").css("width","0"),L(),Y(),K(),O()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show(),window.location.reload(!0)),A()}}))})}function V(){var t=e.trim(e("#folder-search").val());e("#js-tree-menu").jstree("search",t)}function W(t){e.ajax({url:wcp_settings.ajax_url,type:"post",data:"action=save_folder_last_status&post_type="+wcp_settings.post_type+"&post_id="+t+"&nonce="+wcp_settings.nonce,cache:!1,async:!1,success:function(){}})}function B(){setTimeout(function(){if(currentStatus=!0,e("#js-tree-menu .jstree-node.jstree-leaf").length==e("#js-tree-menu .jstree-node").length)e("#expand-collapse-list").removeClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND);else{var t=e("#js-tree-menu .jstree-node.jstree-closed").length+e("#js-tree-menu .jstree-node.jstree-open").length;e("#js-tree-menu .jstree-node.jstree-closed").length==t?(e("#expand-collapse-list").removeClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND)):(e("#expand-collapse-list").addClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.COLLAPSE),e("#expand-collapse-list .text").text(wcp_settings.lang.COLLAPSE))}},500),O()}function X(){0==e(".tree-structure-content .tree-structure li").length?e(".tree-structure-content").hide():(e(".tree-structure-content").show(),oldHeight=e(".tree-structure-content .tree-structure").height(),e(".tree-structure-content .tree-structure").height("auto"),e(".tree-structure-content .tree-structure").height()>56?e(".folders-toggle-button").show():e(".folders-toggle-button").hide(),newHeight=e(".tree-structure-content .tree-structure").height(),e(".tree-structure-content .tree-structure").attr("data-height",newHeight),e(".tree-structure-content").hasClass("active")?(e(".tree-structure-content .tree-structure").height(newHeight),e(".tree-structure-content .tree-structure").attr("data-height",newHeight)):e(".tree-structure-content .tree-structure").height(oldHeight))}function Y(){e(".folder-loader-ajax").addClass("active"),e(".folder-loader-ajax img").removeClass("active"),e(".folder-loader-ajax svg#successAnimation").addClass("active").addClass("animated"),setTimeout(function(){e(".folder-loader-ajax").removeClass("active"),e(".folder-loader-ajax img").addClass("active"),e(".folder-loader-ajax svg#successAnimation").removeClass("active").removeClass("animated")},2e3)}function G(){e(".sticky-folders > ul").html("");var t="";if(e("#js-tree-menu li.jstree-node.is-sticky").each(function(){var a=e(this).attr("id"),s=e.trim(e("#js-tree-menu").jstree(!0).get_node(a).text),o=e("li.jstree-node[id='"+a+"'] > a span.premio-folder-count").text(),r=e("li.jstree-node[id='"+a+"']").hasClass("is-high")?" is-high ":"";t+="<li data-folder-id='"+a+"' class='sticky-fldr "+r+" sticky-folder-"+a+"'><a href='javascript:;'><span class='folder-title'>"+s+"</span><span class='folder-actions'><span class='update-inline-record'><i class='pfolder-edit-folder'></i></span><span class='star-icon'><i class='pfolder-star'></i></span><span class='premio-folder-count'>"+o+"</span></span></a></li>"}),e(".sticky-folders > ul").html(t),e(".jstree-anchor.jstree-clicked").length){var a=e(".jstree-anchor.jstree-clicked").closest("li.jstree-node").attr("id");e(".sticky-folders .sticky-folder-"+a+" a").addClass("active-item")}e(".sticky-folders > ul > li").length>0?e(".sticky-folders").addClass("active"):e(".sticky-folders").removeClass("active"),O()}function K(){if(e("#media-attachment-taxonomy-filter").length&&(e("#media-attachment-taxonomy-filter").each(function(){wcp_settings.terms=w;var t=e(this);currentDDVal=e(this).val(),t.html("<option value='all'>All Folders</option><option value='unassigned'>(Unassigned)</option>"),lastFolderData=w;for(var a=0;a<w.length;a++)t.append("<option value='"+w[a].term_id+"'>"+w[a].name+" ("+w[a].trash_count+")</option>");t.val(currentDDVal).trigger("change")}),e("select.folder_for_media").length)){var t=e("select.folder_for_media").val();e("select.folder_for_media option:not(:first-child):not(:last-child)").remove();for(var a=0;a<w.length;a++)e("select.folder_for_media option:last-child").before("<option value='"+w[a].term_id+"'>"+w[a].name+"</option>");""!=t&&e(".folder_for_media").val(t)}for(e(".folder-count").text(""),a=0;a<w.length;a++)""==w[a].trash_count&&(w[a].trash_count=0),e(".jstree-node[id='"+w[a].term_id+"'] > a.jstree-anchor span.premio-folder-count").text(w[a].trash_count),e(".sticky-folder-"+w[a].term_id+" .premio-folder-count").text(w[a].trash_count);if(e(".wp-filter #media_folder").length)for(var a=0;a<w.length;a++)e(".wp-filter #media_folder option[value='"+w[a].slug+"']").length&&e(".wp-filter #media_folder option[value='"+w[a].slug+"']").html(w[a].name+" ("+w[a].trash_count+")");if(e("span.premio-folder-count").each(function(){""==e(this).text()&&e(this).text(0)}),e(".media-select-folder").length){for(e(".media-select-folder").html("<option value=''>Select Folder</option><option value='-1'>(Unassigned)</option>"),a=0;a<w.length;a++)e(".media-select-folder").append("<option value='"+w[a].term_id+"'>"+w[a].name+" ("+w[a].trash_count+")</option>");e(".media-select-folder").val("")}""!=d&&e("#wcp_folder_"+d).addClass("active-item"),c&&(e("#title_"+m).trigger("click"),c=!1),uploadFolderID=0}function q(){e("#bulk-action-selector-top, #bulk-action-selector-bottom").val("-1"),0==e(".wp-list-table tbody input[type='checkbox']:checked").length?alert(wcp_settings.lang.SELECT_ITEMS_TO_MOVE):(e("#bulk-move-folder").show(),e("#bulk-select").html("<option value=''>"+wcp_settings.lang.LOADING_FILES+"</option>"),e(".move-to-folder").attr("disabled",!0),e("#move-to-folder").prop("disabled",!0),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_get_default_list&active_id="+d,method:"post",success:function(t){if(t=e.parseJSON(t),e("#bulk-select").html("<option value=''>"+wcp_settings.lang.SELECT_FOLDER+"</option><option value='-1'>"+wcp_settings.lang.UNASSIGNED+"</option>"),e(".move-to-folder").prop("disabled",!1),e("#move-to-folder").prop("disabled",!1),1==t.status){var a=t.taxonomies;for(i=0;i<a.length;i++)e("#bulk-select").append("<option value='"+a[i].term_id+"'>"+a[i].name+"</option>")}}}))}function H(t){""==d||0==d?(a=wcp_settings.nonce,e.ajax({url:wcp_settings.ajax_url,data:"post_id="+t+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id=-1&nonce="+a+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+d,method:"post",success:function(e){L(),C()}})):e.ajax({url:wcp_settings.ajax_url,data:{post_id:t,action:"premio_check_for_other_folders",active_folder:d,type:wcp_settings.post_type,folder_id:-1,nonce:wcp_settings.nonce,status:wcp_settings.taxonomy_status,taxonomy:d},method:"post",success:function(t){-1==(t=e.parseJSON(t)).status?(e("#unassigned_folders").val(t.data.post_id),e("#confirm-your-change").show()):(L(),C())}})}if(e(document).ready(function(){if(e(document).on("click",".subsubsub a",function(t){if(e("#js-tree-menu .jstree-anchor.jstree-clicked").length){var a=e("#js-tree-menu .jstree-anchor.jstree-clicked").closest(".jstree-node").attr("id"),s=T(a,"slug");if(""!=s){t.preventDefault();var o=e(this).attr("href");o=o+"&"+wcp_settings.custom_type+"="+s,window.location=o}}else if(e("#dynamic-tree-folders").length&&e("#dynamic-tree-folders .jstree-anchor.jstree-clicked").length){var a=e("#dynamic-tree-folders .jstree-anchor.jstree-clicked").closest(".jstree-node").attr("id");if(""!=a){t.preventDefault();var o=e(this).attr("href");o=o+"&ajax_action=premio_dynamic_folders&dynamic_folder="+a+"_anchor",window.location=o}}}),e(document).on("click",".view-switch > a",function(t){if(""!=location.search)try{if(e(this).hasClass("view-grid")||e(this).hasClass("view-list"))var a=e(this).attr("href");t.preventDefault();var s=location.search.substring(1);let o=Object.fromEntries(new URLSearchParams(s));Object.keys(o).length&&e.each(o,function(e,t){"mode"!=e&&"paged"!=e&&""!=t&&(a+="&"+e+"="+t)}),window.location=a}catch(r){}}),e("body").hasClass("jetpack-connected")&&!e("body").hasClass("mobile")&&!e("body").hasClass("folded")&&e("#adminmenuwrap").length){var l=parseInt(e("#adminmenuwrap").width());"rtl"==e("html").prop("dir")?e(".wcp-content").css("right",l):e(".wcp-content").css("left",l)}e(document).on("click","#collapse-button",function(){setTimeout(function(){if(e("body").hasClass("jetpack-connected")&&!e("body").hasClass("mobile")&&!e("body").hasClass("folded")&&e("#adminmenuwrap").length){var t=parseInt(e("#adminmenuwrap").width());"rtl"==e("html").prop("dir")?e(".wcp-content").css("right",t):e(".wcp-content").css("left",t)}},50)}),w=wcp_settings.taxonomies,s=parseInt(wcp_settings.is_key_active),o=parseInt(wcp_settings.folders),d=parseInt(wcp_settings.selected_taxonomy),r=parseInt(wcp_settings.hasStars),n=parseInt(wcp_settings.hasChildren),$=parseInt(wcp_settings.currentPage),console.log(d),j=wcp_settings.folder_settings,e(document).on("click",".folder-settings-btn > a",function(t){t.stopPropagation(),e(".folder-settings-btn").toggleClass("active")}),e(document).on("click","body,html",function(){e(".folder-settings-btn").removeClass("active")}),e(document).on("click",".folder-setting-menu",function(e){e.stopPropagation()}),J(),N(),e(document).ajaxComplete(function(e,t,a){var s=a.data;void 0!==s&&s.length&&-1!=s.indexOf("action=inline-save")&&(L(),R())});var c="1"==wcp_settings.isRTL||1==wcp_settings.isRTL?"w":"e";e(".wcp-content").resizable({resizeHeight:!1,handles:c,minWidth:100,maxWidth:500,resize:function(t,a){var s=a.size.width;for(s<=275?e(".plugin-button").addClass("d-block"):e(".plugin-button").removeClass("d-block"),s<=245&&(s=245),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",s+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",s+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+s+"px)"),newWidth=s-40,cssString="",classString="",i=0;i<=15;i++)classString+=" .space > .jstree-node >",cssString+="#js-tree-menu > "+classString+" .title { width: "+(currentWidth=newWidth-(13+20*i))+"px !important; } ",cssString+="#js-tree-menu > "+classString+" .dynamic-menu { left: "+(currentWidth-190)+"px !important; } ",es();e("#wcp-custom-style").html("<style>"+cssString+"</style>"),a.size.width<=185?(folderStatus="hide",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").addClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").removeClass("active"),e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)")):e("#wcp-content").hasClass("hide-folders-area")&&(folderStatus="show",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").removeClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").addClass("active"),e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+s+"px)"),setTimeout(function(){e("#wcp-content").removeClass("no-transition")},250))},stop:function(t,s){var o=s.size.width;s.size.width<=275?e(".plugin-button").addClass("d-block"):e(".plugin-button").removeClass("d-block"),o<=245&&(o=245),s.size.width<=185?(folderStatus="hide",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").addClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").removeClass("active"),e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_folder_display_status&status="+folderStatus+"&nonce="+a,method:"post",success:function(e){es()}})):e("#wcp-content").hasClass("hide-folders-area")&&(folderStatus="show",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").removeClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").addClass("active"),e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+o+"px)"),setTimeout(function(){e("#wcp-content").removeClass("no-transition")},250)),a=wcp_settings.nonce,wcp_settings.folder_width=s.size.width,e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_post_width&width="+o+"&nonce="+a,method:"post",success:function(e){es()}}),s.size.width<=245&&(e(".wcp-content").width(245),wcp_settings.folder_width=245)}}),e(document).on("contextmenu","#js-tree-menu .jstree-anchor",function(t){return k=t.pageX,x=t.pageY,e(this).find("span.folder-inline-edit").trigger("click"),!1}),e(document).on("click","#js-tree-menu .folder-actions span.folder-inline-edit",function(a){var s;a.stopImmediatePropagation(),a.stopPropagation(),0!=wcp_settings.can_manage_folder&&(isHigh=e(this).closest("li.jstree-node").hasClass("is-high"),isStickyClass=!!(isSticky=e(this).closest("li.jstree-node").hasClass("is-sticky")),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),menuHtml="<div class='dynamic-menu' data-id='"+e(this).closest("li").prop("id")+"'><ul>",menuHtml+="<li class='new-main-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_FOLDER+"</a></li>",n?menuHtml+="<li class='new-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_FOLDER+"</a></li>":menuHtml+="<li class='new-folder-pro'><a target='_blank' href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.PRO.NEW_SUB_FOLDER+"</a></li>",menuHtml+="<li class='rename-folder'><a href='javascript:;'><span class=''><i class='pfolder-edit'></i></span>"+wcp_settings.lang.RENAME+"</a></li>",menuHtml+="<li class='color-folder'><a href='javascript:;'><span class=''><span class='dashicons dashicons-art'></span></span>"+wcp_settings.lang.CHANGE_COLOR+"<span class='dashicons dashicons-arrow-right-alt2'></span></a>",menuHtml+="<ul class='color-selector'>",menuHtml+="<li class='color-selector-ul'>",e(wcp_settings.selected_colors).each(function(e,t){menuHtml+="<span class='folder-color-option' data-color='"+t+"' style='background-color:"+t+"'></span>"}),menuHtml+="</li>",menuHtml+="<li><a href='"+wcp_settings.upgrade_url+"' target='_blank' class='change-custom-color'>"+wcp_settings.lang.ADD_CUSTOM_COLORS+"</a></li>",menuHtml+="<li><a href='javascript:;' class='folder-color-default'>"+wcp_settings.lang.REMOVE_COLOR+"</a></li>",menuHtml+="</ul>",menuHtml+="</li>",menuHtml+="<li class='default-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-active-icon'></i></span>"+wcp_settings.lang.PRO.OPEN_THIS_FOLDER+"</a></li><li class='sticky-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+wcp_settings.lang.PRO.STICKY_FOLDER+"</a></li>",r?menuHtml+="<li class='mark-folder'><a href='javascript:;'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.REMOVE_STAR:wcp_settings.lang.ADD_STAR)+"</a></li>":menuHtml+="<li class='mark-folder-pro'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.PRO.REMOVE_STAR:wcp_settings.lang.PRO.ADD_STAR)+"</a></li>",menuHtml+="<li class='lock-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class='dashicons dashicons-lock'></span>"+wcp_settings.lang.PRO.LOCK_FOLDER+"</a></li><li class='duplicate-folder-pro'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.PRO.DUPLICATE_FOLDER+"</a></li>",hasPosts=parseInt(e(this).closest("a.jstree-anchor").find(".premio-folder-count").text()),"attachment"==wcp_settings.post_type&&hasPosts&&(menuHtml+="<li target='_blank' class='download-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.PRO.DOWNLOAD_ZIP+"</a></li>"),menuHtml+="<li class='remove-folder'><a href='javascript:;'><span class=''><i class='pfolder-remove'></i></span>"+wcp_settings.lang.DELETE+"</a></li></ul></div>",e("body").append(menuHtml),t==a.pageX||t==a.pageY?(e(".dynamic-menu").css("left",k),e(".dynamic-menu").css("top",x-10),s=x):(e(".dynamic-menu").css("left",a.pageX),e(".dynamic-menu").css("top",a.pageY),s=a.pageY),e(this).parents("li.jstree-node").addClass("active-menu"),s+e(".dynamic-menu").height()>e(window).height()&&e(".dynamic-menu").css("margin-top",e(window).height()-(s+e(".dynamic-menu").height())))}),e(document).on("click",".folder-color-option , .folder-color-default",function(t){t.stopPropagation(),folderID=e(this).closest(".dynamic-menu").data("id");var s=e(this).attr("data-color");void 0===s&&(s=""),j[D(folderID)].has_color=s,a=T(folderID,"nonce"),E(),e.ajax({url:wcp_settings.ajax_url,data:{term_id:folderID,type:wcp_settings.post_type,action:"wcp_change_color_folder",nonce:a,color:s},method:"post",cache:!1,success:function(t){t=e.parseJSON(t),E()}})}),e(document).on("click",".sticky-folders .sticky-fldr > a",function(t){t.stopPropagation();var a=e(this).closest("li").data("folder-id");e(".jstree-node[id='"+a+"']").length&&(e(".jstree-clicked").removeClass("jstree-clicked"),e(".active-item").removeClass("active-item"),e("#js-tree-menu").jstree("select_node",d),e(".jstree-node[id='"+a+"'] > a.jstree-anchor").trigger("click"),e(".jstree-node[id='"+a+"'] > a.jstree-anchor").addClass("jstree-clicked"),e(".sticky-folders .sticky-folder-"+a+" a").addClass("active-item"))}),e(document).on("contextmenu",".sticky-folders li .sticky-fldr >  a",function(t){return e(this).find("span.update-inline-record").trigger("click"),!1}),e(document).on("click",".tree-structure a",function(t){t.stopPropagation();var a=e(this).data("id");e(".jstree-node[id='"+a+"']").length&&(e(".jstree-clicked").removeClass("jstree-clicked"),e(".active-item").removeClass("active-item"),e("#js-tree-menu").jstree("select_node",d),e(".jstree-node[id='"+a+"'] > a.jstree-anchor").trigger("click"),e(".jstree-node[id='"+a+"'] > a.jstree-anchor").addClass("jstree-clicked"),e(".sticky-folders .sticky-folder-"+a+" a").addClass("active-item"))}),e(document).on("click",".update-inline-record",function(a){var s;a.stopImmediatePropagation(),a.stopPropagation(),0!=wcp_settings.can_manage_folder&&(isHigh=e(this).closest("li.sticky-fldr").hasClass("is-high"),isStickyClass=!!(isSticky=e(this).closest("li.sticky-fldr").hasClass("is-sticky")),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),menuHtml="<div class='dynamic-menu' data-id='"+e(this).closest("li").data("folder-id")+"'><ul>",menuHtml+="<li class='new-main-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_FOLDER+"</a></li>",n?menuHtml+="<li class='new-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_FOLDER+"</a></li>":menuHtml+="<li class='new-folder-pro'><a target='_blank' href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.PRO.NEW_SUB_FOLDER+"</a></li>",menuHtml+="<li class='rename-folder'><a href='javascript:;'><span class=''><i class='pfolder-edit'></i></span>Rename</a></li><li class='default-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-active-icon'></i></span>"+wcp_settings.lang.PRO.OPEN_THIS_FOLDER+"</a></li><li class='sticky-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+wcp_settings.lang.PRO.STICKY_FOLDER+"</a></li>",r?menuHtml+="<li class='mark-folder'><a href='javascript:;'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.ADD_STAR:wcp_settings.lang.REMOVE_STAR)+"</a></li>":menuHtml+="<li class='mark-folder-pro'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.PRO.ADD_STAR:wcp_settings.lang.PRO.REMOVE_STAR)+"</a></li>",menuHtml+="<li class='lock-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class='dashicons dashicons-lock'></span>"+wcp_settings.lang.PRO.LOCK_FOLDER+"</a></li><li class='duplicate-folder-pro'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.PRO.DUPLICATE_FOLDER+"</a></li>",hasPosts=parseInt(e(this).closest("li.jstree-node").find("h3.title:first > .total-count").text()),"attachment"==wcp_settings.post_type&&hasPosts&&(menuHtml+="<li class='download-folder'><a target='_blank' href='"+wcp_settings.upgrade_url+"'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.PRO.DOWNLOAD_ZIP+"</a></li>"),menuHtml+="<li class='remove-folder'><a href='javascript:;'><span class=''><i class='pfolder-remove'></i></span> "+wcp_settings.lang.DELETE+"</a></li></ul></div>",e("body").append(menuHtml),t==a.pageX||t==a.pageY?(e(".dynamic-menu").css("left",k),e(".dynamic-menu").css("top",x-10),s=x):(e(".dynamic-menu").css("left",a.pageX),e(".dynamic-menu").css("top",a.pageY),s=a.pageY),s+e(".dynamic-menu").height()>e(window).height()&&e(".dynamic-menu").css("margin-top",e(window).height()-(s+e(".dynamic-menu").height())))}),e(document).on("click",".dynamic-menu",function(e){e.stopImmediatePropagation(),e.stopPropagation()}),e(document).on("click",".new-folder-pro",function(t){t.preventDefault(),e(".dynamic-menu").remove(),e("#sub-folder-popup").show()}),e(document).on("click",".close-popup-button a:not(.hide-upgrade-modal):not(.is-modal)",function(){e(".folder-popup-form").hide(),e(".jstree-node[id='"+m+"']").length&&e(".jstree-node[id='"+m+"'] > a.jstree-anchor").trigger("focus"),e(this).hasClass("upgrade-model-button")&&e("#upgrade-modal-popup").remove()}),e(document).on("click",".close-popup-button a.hide-upgrade-modal",function(){e(".rating-modal-steps#step-4").hasClass("active")?(I(-1),e(".rating-modal-popup").remove()):e(".rating-modal-steps#step-3").hasClass("active")?I(14):(e(".rating-modal-steps").removeClass("active"),e(".rating-modal-steps#step-3").addClass("active"))}),e(document).on("click","body, html",function(){e(".dynamic-menu").remove()}),e(document).on("click",".wcp-hide-show-buttons .toggle-buttons",function(){var t="show";e(this).hasClass("hide-folders")&&(t="hide"),e(".wcp-hide-show-buttons .toggle-buttons").toggleClass("active"),a=wcp_settings.nonce,"show"==t?(e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+parseInt(wcp_settings.folder_width)+"px)"),setTimeout(function(){e("#wcp-content").removeClass("no-transition")},250)):(e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)")),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_folder_display_status&status="+t+"&nonce="+a,method:"post",success:function(e){es()}})}),O(),e(document).ajaxComplete(function(e,a,s){t!=s.data&&""!=s.data&&-1!=s.data.indexOf("action=query-attachments")&&O()}),e(document).on("click",".undo-button, .undo-folder-action:not(.disabled)",function(){e("#do-undo").removeClass("active"),"yes"==wcp_settings.useFolderUndo&&e.ajax({url:wcp_settings.ajax_url,type:"post",data:{post_type:wcp_settings.post_type,nonce:wcp_settings.nonce,action:"wcp_undo_folder_changes"},success:function(a){if(e("#undo-done").addClass("active"),setTimeout(function(){e("#undo-done").removeClass("active")},2500),e("#media-attachment-taxonomy-filter").length){var s=parent.wp;t!=s.media&&(s.media.frame.setState("insert"),null!==s.media.frame.content.get()&&void 0!==s.media.frame.content.get().collection?(s.media.frame.content.get().collection.props.set({ignore:+new Date}),s.media.frame.content.get().options.selection.reset()):s.media.frame.library.props.set({ignore:+new Date}))}L()}})}),e(document).on("click",".close-undo-box",function(t){t.preventDefault(),e("#do-undo").removeClass("active")})}),e(window).on("resize",function(){N(),es()}),e(window).scroll(function(){es()}),e(document).ready(function(){e(document).on("click","#add-new-folder",function(){e("#js-tree-menu a.jstree-clicked").length?(m=e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"),n||e("#pro-notice").removeClass("hide-it")):(m=0,e("#pro-notice").addClass("hide-it")),c=!1,F()}),e(document).on("mouseover",".folders-action-menu",function(){e("body").addClass("add-folder-zindex")}).on("mouseleave",".folders-action-menu",function(){e("body").removeClass("add-folder-zindex")}),e(document).on("change","#media-attachment-taxonomy-filter",function(t){e("#js-tree-menu").hasClass("jstree")&&e("#js-tree-menu").jstree(!0).deselect_all(),e(".active-item").removeClass("active-item"),"all"==e(this).val()?e(".all-posts").addClass("active-item"):"unassigned"==e(this).val()?e(".un-categorised-items").addClass("active-item"):e("#js-tree-menu").jstree("select_node",e(this).val())}),e(document).on("click",".new-folder",function(){m=e(this).closest(".dynamic-menu").data("id"),c=!1,f=0,F()}),e(document).on("click",".new-main-folder",function(){f=1,m=e(this).closest(".dynamic-menu").data("id"),c=!1,F()}),e(document).on("click",".duplicate-folder",function(t){t.stopPropagation(),f=0,m=e(this).closest(".dynamic-menu").data("id"),e(".dynamic-menu").remove(),c=!1,p=!0,F(),U()}),e(document).on("submit","#save-folder-form",function(t){if(t.stopPropagation(),t.preventDefault(),folderNameDynamic=e.trim(e("#add-update-folder-name").val()),""==e.trim(folderNameDynamic))e(".folder-form-errors").addClass("active"),e("#add-update-folder-name").focus();else{e("#save-folder-data").html('<span class="dashicons dashicons-update"></span>'),e("#add-update-folder").addClass("disabled");var a=m;c&&(a=0),n||(a=0);var r="";0==a?(h=e("#js-tree-menu > ul > li.jstree-node").length,f&&(h=jQuery("#js-tree-menu > ul > li[id='"+m+"']").index(),jQuery("#js-tree-menu > ul > li").each(function(e){r+=jQuery(this).attr("id")+",",e==h&&(r+="#,")}),h+=1)):h=e("#js-tree-menu > ul > li.jstree-node[id='"+a+"'] > ul.jstree-children > li").length+1;var l=[];0==a?e("#js-tree-menu > .jstree-container-ul > .jstree-node").length&&e("#js-tree-menu > .jstree-container-ul > .jstree-node").each(function(){l.push(e(this).attr("id"))}):e("#js-tree-menu .jstree-node[id='"+a+"'] > ul> li.jstree-node").length&&e("#js-tree-menu .jstree-node[id='"+a+"'] > ul> li.jstree-node").each(function(){l.push(e(this).attr("id"))}),e.ajax({url:wcp_settings.ajax_url,data:{parent_id:a,type:wcp_settings.post_type,action:"wcp_add_new_folder",nonce:wcp_settings.nonce,term_id:a,order:h,name:folderNameDynamic,folders:l,is_duplicate:p,duplicate_from:u,parent_ids:r,parent_menu:f},method:"post",success:function(t){if(result=e.parseJSON(t),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),-1==result.status)e("#no-more-folder-credit").show();else if("1"==result.status){if(s=parseInt(result.is_key_active),o=parseInt(result.folders),e("#current-folder").text(o),e("#ttl-fldr").text(10),B(),U(),result.data.length)for(var a=0;a<result.data.length;a++){var r={folder_id:result.data[a].term_id,folder_count:0,is_sticky:result.data[a].is_sticky,is_high:result.data[a].is_high,nonce:result.data[a].nonce,has_color:result.data[a].has_color,slug:result.data[a].slug,is_deleted:0};j.push(r);var n=result.data[a].title;n=n.replace(/\\/g,""),f?e("#js-tree-menu").jstree().create_node("#",{id:result.data[a].term_id,text:" "+n},a,function(){e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-nonce",result.data[a].nonce),e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-slug",result.data[a].slug),e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-parent",result.parent_id),e(".jstree-node[id='"+result.data[a].term_id+"'] > a.jstree-anchor .premio-folder-count").text(result.data[a].folder_count)}):e("#js-tree-menu").jstree().create_node(result.parent_id,{id:result.data[a].term_id,text:" "+n},a,function(){e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-nonce",result.data[a].nonce),e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-slug",result.data[a].slug),e(".jstree-node[id='"+result.data[a].term_id+"']").attr("data-parent",result.parent_id),e(".jstree-node[id='"+result.data[a].term_id+"'] > a.jstree-anchor .premio-folder-count").text(result.data[a].folder_count)}),f=0,e(".jstree-node[id='"+result.data[a].term_id+"']").length&&e(".jstree-node[id='"+result.data[a].term_id+"'] > a.jstree-anchor").trigger("focus")}Y(),G(),e("#media-attachment-taxonomy-filter").length&&(m=result.term_id,Q(0),resetSelectMediaDropDown()),p=!1,u=0}else e("#error-folder-popup-message").html(result.message),e("#error-folder-popup").show()}})}return!1})}),e(document).ready(function(){e("#inline-update").on("click",function(){e("#js-tree-menu a.jstree-clicked").length&&(m=e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"),z())}),e(document).on("click",".rename-folder",function(t){t.stopPropagation(),m=e(this).closest(".dynamic-menu").data("id"),z(),e(".dynamic-menu").remove()}),e(document).on("click",".form-cancel-btn:not(.avoid-cancel)",function(){e(".folder-popup-form").hide(),e(".jstree-node[id='"+m+"']").length?e(".jstree-node[id='"+m+"'] > a.jstree-anchor").trigger("focus"):e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e("#js-tree-menu .jstree-anchor.jstree-clicked").trigger("focus")}),e("#folder-rating").length&&"object"==typeof pr_rating_settings&&(e("#rating-modal-popup").show(),e("#folder-rating").starRating({initialRating:0,useFullStars:!0,strokeColor:"#FDB10C",ratedColor:"#FDB10C",activeColor:"#FDB10C",strokeWidth:0,minRating:1,starSize:32,useGradient:0,onLeave:function(){e(".upgrade-user-rating span").text("0/5")},onHover:function(t){e(".upgrade-user-rating span").text(t+"/5")},callback:function(t){if(5!==t)for(e(".rating-modal-steps").removeClass("active"),e(".rating-modal-steps#step-2").addClass("active"),e("#folder-rated-rating").html(""),i=0;i<parseInt(t);i++)e("#folder-rated-rating").append('<div class="jq-star"><svg shape-rendering="geometricPrecision" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="305px" height="305px" viewBox="60 -62 309 309" style="enable-background:new 64 -59 305 305; stroke-width:0px;" xml:space="preserve"> <polygon data-side="center" className="svg-empty-28" points="281.1,129.8 364,55.7 255.5,46.8 214,-59 172.5,46.8 64,55.4 146.8,129.7 121.1,241 212.9,181.1 213.9,181 306.5,241 " style="fill: transparent; stroke: #ffa83e;"></polygon> <polygon data-side="left" className="svg-empty-28" points="281.1,129.8 364,55.7 255.5,46.8 214,-59 172.5,46.8 64,55.4 146.8,129.7 121.1,241 213.9,181.1 213.9,181 306.5,241 " style="stroke-opacity: 0;"></polygon> <polygon data-side="right" className="svg-empty-28" points="364,55.7 255.5,46.8 214,-59 213.9,181 306.5,241 281.1,129.8 " style="stroke-opacity: 0;"></polygon> </svg></div>');else window.open("https://wordpress.org/support/plugin/folders/reviews/#new-post","_blank"),e(".rating-logo").remove(),e(".rating-modal-steps").removeClass("active"),e(".rating-modal-steps#step-4").addClass("active")}})),e(document).on("keyup","#upgrade-review-comment",function(){var t=1e3-parseInt(e.trim(e(this).val()).length);if(t<0){var a=e.trim(e(this).val());a=a.slice(0,1e3),e(".upgrade-review-textarea label span").text(0),e(this).val(a)}else e(".upgrade-review-textarea label span").text(t)}),e(document).on("change","#upgrade-review-comment",function(){var t=1e3-parseInt(e.trim(e(this).val()).length);if(t<0){var a=e.trim(e(this).val());a=a.slice(0,1e3),e(".upgrade-review-textarea label span").text(0),e(this).val(a)}else e(".upgrade-review-textarea label span").text(t)}),e(document).on("click",".hide-upgrade-popup",function(t){t.preventDefault(),e("#upgrade-modal-popup").remove()}),e(document).on("click",".upgrade-footer .upgrade-button",function(t){e("#upgrade-modal-popup").remove()}),e(document).on("click",".folder-popup-form:not(.always-show)",function(t){e(".folder-popup-form").hide(),e(".jstree-node[id='"+m+"']").length?e(".jstree-node[id='"+m+"'] > a.jstree-anchor").trigger("focus"):e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e("#js-tree-menu .jstree-anchor.jstree-clicked").trigger("focus"),"rating-modal-popup"==e(this).attr("id")&&(e(".rating-modal-steps#step-4").hasClass("active")?(I(-1),e(".rating-modal-popup").remove()):I(14)),"upgrade-modal-popup"==e(this).attr("id")&&e("#upgrade-modal-popup").remove()}),e(document).on("click",".popup-form-content",function(e){e.stopPropagation()}),e(document).on("submit","#update-folder-form",function(s){return s.stopPropagation(),s.preventDefault(),folderNameDynamic=e("#update-folder-item-name").val(),""==e.trim(folderNameDynamic)?(e(".folder-form-errors").addClass("active"),e("#update-folder-item-name").focus()):(e("#update-folder-data").html('<span class="dashicons dashicons-update"></span>'),e("#update-folder-item").addClass("disabled"),a=T(m,"nonce"),t==(parentID=e(".jstree-node[id='"+m+"']").closest("li.jstree-node").attr("id"))&&(parentID=0),e.ajax({url:wcp_settings.ajax_url,data:{parent_id:parentID,type:wcp_settings.post_type,action:"wcp_update_folder",nonce:a,term_id:m,order:h,name:folderNameDynamic},method:"post",success:function(t){"1"==(result=e.parseJSON(t)).status?(e("#js-tree-menu").jstree("rename_node",result.id," "+result.term_title),null!=(folderPostId=D(result.id))&&(j[folderPostId].nonce=result.nonce,j[folderPostId].slug=result.slug),U(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),Y(),e("#media-attachment-taxonomy-filter").length&&Q(0)):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(result.message),e("#error-folder-popup").show()),e("#dynamic-folders .jstree-clicked").length&&e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked")}})),!1}),e(document).on("click","#upgrade-review-button",function(){e("#rating-modal-popup").hide(),e.ajax({url:wcp_settings.ajax_url,data:{action:"folders_review_box_message",rating:e("#folder-rated-rating .jq-star").length,nonce:wcp_settings.review_box_nonce,message:e.trim(e("#upgrade-review-comment").val())},type:"post",success:function(){I(-1)}})}),e(document).on("click","#update-review-time",function(){I(e("#upgrade-review-reminder").val())})}),e(document).ready(function(){e(document).on("click","#inline-remove, .delete-folder-action:not(.disabled)",function(){e("#js-tree-menu a.jstree-clicked").length?(m=e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"),M(1),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu")):e("#menu-checkbox").is(":checked")&&(e(".dynamic-menu").remove(),M(1))}),e(document).on("click","#menu-checkbox",function(){e(this).is(":checked")?(e(".js-tree-data").addClass("show-folder-checkbox"),e("#menu-checkbox").prop("checked",!0)):(e("#js-tree-menu input.checkbox").attr("checked",!1),e(".js-tree-data").removeClass("show-folder-checkbox"),e("#menu-checkbox").prop("checked",!1))}),e(document).on("click",".folder-checkbox, .input-checkbox",function(e){e.stopImmediatePropagation(),e.stopPropagation()}),e(document).on("click",".remove-folder",function(){folderID=e(this).closest("li.jstree-node").data("id"),m=e(this).closest(".dynamic-menu").data("id"),M(0),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu")}),e(document).on("click","#remove-folder-item",function(t){t.stopPropagation(),e(".folder-popup-form").addClass("disabled"),e("#remove-folder-item").html('<span class="dashicons dashicons-update"></span>'),a=T(m,"nonce"),g?function t(){if(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0){var a="",r=!1;e("#js-tree-menu input.checkbox:checked").each(function(){!e(this).closest("li.jstree-node").hasClass("is-locked")&&(a+=e(this).closest("li.jstree-node").attr("id")+",",e(this).closest("li.jstree-node").hasClass("jstree-clicked")&&(r=!0))}),""!=a&&(e(".form-loader-count").css("width","100%"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_remove_muliple_folder&term_id="+a+"&nonce="+wcp_settings.nonce,method:"post",success:function(t){if(t=e.parseJSON(t),e(".form-loader-count").css("width","0px"),"1"==t.status){for(s=parseInt(t.is_key_active),o=parseInt(t.folders),e("#current-folder").text(o),i=0;i<t.term_ids.length;i++)e("#js-tree-menu").jstree().delete_node(t.term_ids[i]);e("#ttl-fldr").text(10),Y(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),L(),G(),Y(),e("#js-tree-menu li.jstree-node").removeClass("has-sub-tree"),e("#js-tree-menu li.jstree-node").each(function(){e(this).find("ul.ui-sortable li").length?e(this).addClass("has-sub-tree"):e(this).removeClass("active")}),e("#wcp_folder_"+d).length||(e(".header-posts a").trigger("click"),d=0)}else window.location.reload();e("#menu-checkbox").attr("checked",!1),e("#js-tree-menu input.checkbox").attr("checked",!1),e("#js-tree-menu").removeClass("show-folder-checkbox")}}))}}():e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_remove_folder&term_id="+m+"&nonce="+a,method:"post",success:function(t){if("1"==(t=e.parseJSON(t)).status){var a,r=(a=m,e(".jstree-node[id='"+a+"']").next().length?e(".jstree-node[id='"+a+"']").next().attr("id"):e(".jstree-node[id='"+a+"']").prev().length?e(".jstree-node[id='"+a+"']").prev().attr("id"):e(".jstree-node[id='"+a+"']").parent().parent().hasClass("jstree-node")?e(".jstree-node[id='"+a+"']").parent().parent().attr("id"):0);e("#js-tree-menu").jstree().delete_node(m),s=parseInt(t.is_key_active),o=parseInt(t.folders),e("#current-folder").text(o),e("#ttl-fldr").text(10),e(".sticky-folders .sticky-folder-"+m).remove(),U(),Y(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),L(),G(),0!=r&&e("#"+r+"_anchor").length?e("#"+r+"_anchor").trigger("click"):e(".header-posts").trigger("click")}else e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show()}})})}),e(document).ready(function(){e(document).on("click",".mark-folder",function(t){t.stopPropagation(),folderID=e(this).closest(".dynamic-menu").data("id"),a=T(folderID,"nonce"),e(".form-loader-count").css("width","100%"),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),e.ajax({url:wcp_settings.ajax_url,data:"term_id="+folderID+"&type="+wcp_settings.post_type+"&action=wcp_mark_un_mark_folder&nonce="+a,method:"post",cache:!1,success:function(t){t=e.parseJSON(t),e(".form-loader-count").css("width","0%"),"1"==t.status?(folderPostId=D(t.id),"1"==t.marked?(e("li.jstree-node[id='"+t.id+"']").addClass("is-high"),e(".sticky-folder-"+t.id).addClass("is-high"),null!=folderPostId&&(j[folderPostId].is_high=1)):(e("li.jstree-node[id='"+t.id+"']").removeClass("is-high"),e(".sticky-folder-"+t.id).removeClass("is-high"),null!=folderPostId&&(j[folderPostId].is_high=0)),U(),Y(),e(".jstree-node[id='"+t.id+"']").length&&e(".jstree-node[id='"+t.id+"'] > a.jstree-anchor").trigger("focus")):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})})}),e(document).ready(function(){e(document).on("click",".jstree-node .jstree-icon",function(){folderID=e(this).closest("li.jstree-node").attr("id"),folderStatus=e("li.jstree-node[id='"+folderID+"']").hasClass("jstree-open")?1:0,e(".form-loader-count").css("width","100%"),a=T(folderID,"nonce"),B(),e.ajax({url:wcp_settings.ajax_url,data:"is_active="+folderStatus+"&action=save_wcp_folder_state&term_id="+folderID+"&nonce="+a,method:"post",success:function(t){e(".form-loader-count").css("width","0"),"0"==(t=e.parseJSON(t)).status||(e("#wcp_folder_"+folderID).hasClass("active")?(e("#wcp_folder_"+folderID).removeClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideUp(),folderStatus=0):(e("#wcp_folder_"+folderID).addClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideDown(),folderStatus=1),Y())}})})}),e(document).ready(function(){e(document).on("click","a.jstree-anchor",function(t){if($=1,t.stopPropagation(),e(".un-categorised-items").removeClass("active-item"),e(".header-posts a").removeClass("active-item"),e("active-item").removeClass("active-item"),d=e(this).closest("li.jstree-node").attr("id"),m=e(this).closest("li.jstree-node").attr("id"),e(".sticky-folders .sticky-folder-"+d+" a").addClass("active-item"),e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked"),e("#js-tree-menu").jstree("select_node",d),e("#js-tree-menu #"+d+"_anchor").addClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){var a=e(this).closest("li.jstree-node").attr("id");e("#media-attachment-taxonomy-filter").val(a),e("#media-attachment-taxonomy-filter").trigger("change"),thisSlug=T(a,"slug"),b=wcp_settings.page_url+thisSlug+"&paged="+$;var s={Title:thisSlug,Url:b};history.pushState(s,s.Title,s.Url),W(thisSlug),e(".custom-media-select").removeClass("active")}else{var o=T(d,"slug");b=wcp_settings.page_url+o+"&paged="+$,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(b+" #posts-filter",function(){var t={Title:o,Url:b};history.pushState(t,t.Title,t.Url),W(o),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),R()}):e("#wpbody").load(b+" #wpbody-content",function(){var t={Title:o,Url:b};history.pushState(t,t.Title,t.Url),W(o),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),R()})}P(),e(".sticky-folders .sticky-folder-"+d+" a").addClass("active-item")}),e(document).on("click","#js-tree-menu input.checkbox",function(){_()}),e(".header-posts").on("click",function(){if(d="",e(".wcp-container .route").removeClass("active-item"),e(".un-categorised-items").removeClass("active-item"),e(".sticky-folders .active-item").removeClass("active-item"),e(".header-posts a").addClass("active-item"),e(".jstree-clicked").removeClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){d="",e("#media-attachment-taxonomy-filter").val("all"),e("#media-attachment-taxonomy-filter").trigger("change");var t={Title:"",Url:wcp_settings.page_url};history.pushState(t,t.Title,t.Url),W("all"),P()}else $=1,b=wcp_settings.page_url+"&paged="+$,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(b+" #posts-filter",function(){var t={Title:"",Url:b};history.pushState(t,t.Title,t.Url),W("all"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),R()}):e("#wpbody").load(b+" #wpbody-content",function(){var t={Title:"",Url:b};history.pushState(t,t.Title,t.Url),W("all"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),R()});_()}),e(".un-categorised-items").on("click",function(){if(d="-1",e(".wcp-container .route").removeClass("active-item"),e(".header-posts a").removeClass("active-item"),e(".un-categorised-items").addClass("active-item"),e(".sticky-folders .active-item").removeClass("active-item"),e(".jstree-clicked").removeClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){e("#media-attachment-taxonomy-filter").val("unassigned"),e("#media-attachment-taxonomy-filter").trigger("change");var t={Title:"",Url:wcp_settings.page_url+"-1"};history.pushState(t,t.Title,t.Url),W("-1"),P()}else $=1,b=wcp_settings.page_url+"-1&paged="+$,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(b+" #posts-filter",function(){var t={Title:"",Url:b};history.pushState(t,t.Title,t.Url),W("-1"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),R()}):e("#wpbody").load(b+" #wpbody-content",function(){var t={Title:"",Url:b};history.pushState(t,t.Title,t.Url),W("-1"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),P(),R()});_()}),e("#expand-collapse-list").on("click",function(t){t.stopPropagation(),statusType=0,e(this).hasClass("all-open")?(e(this).removeClass("all-open"),statusType=0,e(this).attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#js-tree-menu").jstree("close_all"),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND)):(e(this).addClass("all-open"),statusType=1,e(this).attr("data-folder-tooltip",wcp_settings.lang.COLLAPSE),e("#js-tree-menu").jstree("open_all"),e("#expand-collapse-list .text").text(wcp_settings.lang.COLLAPSE)),v="",e("#js-tree-menu .jstree-node:not(.jstree-leaf)").each(function(){v+=e(this).attr("id")+","}),""!=v&&(e(".form-loader-count").css("width","100%"),a=wcp_settings.nonce,e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_all_status&status="+statusType+"&folders="+v+"&nonce="+a,method:"post",success:function(t){e(".form-loader-count").css("width","0"),"0"==(t=e.parseJSON(t)).status&&(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show(),window.location.reload(!0))}}))}),B()}),e(document).ready(function(){e(document).on("click","body, html",function(){e(".folder-order").removeClass("active")}),e(document).on("click","#sort-order-list",function(t){t.stopPropagation(),e(".folder-order").toggleClass("active")}),e(document).on("click",".folder-sort-menu a:not(.pro-feature)",function(t){t.stopPropagation(),t.preventDefault(),e(".form-loader-count").css("width","100%"),e(".folder-order").removeClass("active"),lastOrderStatus=e(this).attr("data-sort"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_folders_by_order&nonce="+wcp_settings.nonce+"&order="+e(this).attr("data-sort"),method:"post",success:function(t){1==(t=e.parseJSON(t)).status&&(e("#js-tree-menu").jstree().destroy(),e("#js-tree-menu").append("<ul></ul>"),e("#js-tree-menu ul").html(t.data),J(),w=t.terms,K()),e(".form-loader-count").css("width","0"),P()}})})}),e(document).ready(function(){e(document).on("keyup","#folder-search",function(){V()}),e(document).on("change","#folder-search",function(){V()}),e(document).on("blur","#folder-search",function(){V()}),e(document).on("click","#do_not_show_again",function(){var t=e(this).is(":checked")?1:0;e.ajax({url:wcp_settings.ajax_url,type:"post",data:{action:"premio_hide_child_popup",status:t,nonce:wcp_settings.nonce,post_type:wcp_settings.post_type}})})}),e(document).ready(function(){e(document).on("click",".folders-toggle-button",function(){dbStatus="show",e(".tree-structure-content").hasClass("active")?(e(".tree-structure-content .tree-structure").animate({height:"40px"},100,function(){e(".tree-structure-content").removeClass("active")}),dbStatus="hide"):(newHeight=parseInt(e(".tree-structure-content .tree-structure").attr("data-height")),e(".tree-structure-content .tree-structure").animate({height:newHeight},100,function(){e(".tree-structure-content").addClass("active")})),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_hide_folders&status="+dbStatus+"&nonce="+wcp_settings.nonce,method:"post",success:function(e){es()}})})}),e(document).ready(function(){e(document).on("click","#remove-from-all-folders:not(.disabled), #remove-from-current-folder:not(.disabled)",function(){e("#remove-from-all-folders, #remove-from-current-folder").addClass("disabled");var t="all";e(this).hasClass("remove-from-current-folder")&&(t="current"),e("#confirm-your-change").hide(),e.ajax({url:wcp_settings.ajax_url,data:{post_id:e("#unassigned_folders").val(),action:"wcp_remove_post_folder",active_folder:d,type:wcp_settings.post_type,folder_id:-1,nonce:wcp_settings.nonce,status:wcp_settings.taxonomy_status,taxonomy:d,remove_from:t},method:"post",success:function(t){e("#remove-from-all-folders, #remove-from-current-folder").removeClass("disabled"),Y(),L(),C()}})}),e(document).on("click",".thumbnail-hover-box a",function(t){return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),window.open(e(this).prop("href"),"_blank"),wp.media.frame.close(),!1}),e(document).on("click","#doaction",function(t){return"move_to_folder"==e("#bulk-action-selector-top").val()?(q(),!1):"edit"==e("#bulk-action-selector-top").val()&&"object"==typeof inlineEditPost?(inlineEditPost.setBulk(),!1):void 0}),e(document).on("click","#doaction2",function(t){return"move_to_folder"==e("#bulk-action-selector-bottom").val()?(q(),!1):"edit"==e("#bulk-action-selector-bottom").val()&&"object"==typeof inlineEditPost?(inlineEditPost.setBulk(),!1):void 0}),e(document).on("submit","#bulk-folder-form",function(t){t.stopPropagation(),t.preventDefault(),""!=e("#bulk-select").val()&&(chkStr="",e(".wp-list-table input:checked").each(function(){chkStr+=e(this).val()+","}),""!=e("#bulk-select").val()&&("-1"==e("#bulk-select").val()?e.ajax({url:wcp_settings.ajax_url,data:"post_id="+chkStr+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id="+e(this).val()+"&nonce="+wcp_settings.nonce+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+d,method:"post",success:function(t){e("#bulk-move-folder").hide(),L(),Y()}}):(a=T(e("#bulk-select").val(),"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:e("#bulk-select").val(),nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e("#bulk-move-folder").hide(),"1"==t.status?(L(),Y()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}}))))})}),"attachment"==wcp_settings.post_type){e(document).ready(function(){"show"==wcp_settings.show_in_page&&e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div><div class="folders-toggle-button"><span></span></div></div>'),U(),X()});var Z=null;function Q(a){Z=e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_get_default_list&active_id="+d,method:"post",beforeSend:function(){null!=Z&&Z.abort()},success:function(s){if(s=e.parseJSON(s),e(".header-posts .total-count").text(s.total_items),e(".un-categorised-items .total-count").text(s.empty_items),"all"!=(selectedVal=e("#media-attachment-taxonomy-filter").val())&&1==a){var o=parent.wp;t!=o.media&&(o.media.frame.setState("insert"),null!==o.media.frame.content.get()&&void 0!==o.media.frame.content.get().collection?(o.media.frame.content.get().collection.props.set({ignore:+new Date}),o.media.frame.content.get().options.selection.reset()):o.media.frame.library.props.set({ignore:+new Date}))}w=s.taxonomies,K(),""!=d&&e("#wcp_folder_"+d).addClass("active-item"),c&&(e("#title_"+m).trigger("click"),c=!1)}})}function ee(){e(".media-frame-content .media-toolbar").width(e(".media-frame-content").width()-20)}function et(e,t,a){var s="";if(a){var o=new Date;o.setTime(o.getTime()+864e5*a),s="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+s+"; path=/"}function ea(e){document.cookie=e+"=; Max-Age=-99999999;"}function es(){e(".media-position").length||e(".media-frame-content .media-toolbar").before("<div class='media-position'></div>"),e(".media-position").length&&(ee(),(thisPosition=e(".media-position").offset().top-e(window).scrollTop())<=32?(e(".media-frame-content .media-toolbar").addClass("sticky-media"),e(".media-position").height(e(".media-frame-content .media-toolbar").outerHeight())):(e(".media-frame-content .media-toolbar").removeClass("sticky-media"),e(".media-position").height(1)))}ee(),e(window).resize(function(){ee()}),e(document).on("click",".button.organize-button",function(){e(".media-frame").hasClass("mode-select")?ea("media-select-mode"):et("media-select-mode","on",7),e("button.button.media-button.select-mode-toggle-button").trigger("click"),e(".media-frame").hasClass("mode-select")?(e(".media-info-message").addClass("active"),e(".select-all-item-btn").addClass("active")):(e(".media-info-message, .custom-media-select").removeClass("active"),e(".select-all-item-btn").removeClass("active"))}),e(document).on("click",".select-mode-toggle-button",function(){setTimeout(function(){e(".media-frame").hasClass("mode-select")||et("media-select-mode","off",-1),e(".media-frame").hasClass("mode-select")?(e(".media-info-message").addClass("active"),e(".select-all-item-btn").addClass("active")):(e(".media-info-message, .custom-media-select").removeClass("active"),e(".select-all-item-btn").removeClass("active"))},10)}),e(document).on("click",".select-all-item-btn",function(){e("ul.attachments li:not(.selected)").trigger("click")}),e(document).on("change",".folder_for_media",function(){"add-folder"==e(this).val()&&(m=0,c=!0,F())}),e(window).scroll(function(){es()})}else function es(){}e(document).ready(function(){"attachment"==wcp_settings.post_type&&e("#tmpl-media-frame").length&&(l=setInterval(function(){e("button.button.media-button.select-mode-toggle-button").length&&(clearInterval(l),e("button.button.media-button.select-mode-toggle-button").after("<button class='button organize-button'>"+wcp_settings.lang.BULK_ORGANIZE+"</button>"),e(".media-toolbar-secondary").append("<span class='media-info-message'>"+wcp_settings.lang.DRAG_AND_DROP+"</span>"),e(".delete-selected-button").before("<button type='button' class='button button-primary select-all-item-btn'>"+wcp_settings.lang.SELECT_ALL+"</button>"),e(".media-toolbar-secondary").after("<div class='custom-media-select'>"+wcp_settings.lang.MOVE_SELECTED_FILES+" <select class='media-select-folder'></select></div>"),e(".media-toolbar").append("<div style='clear:both;'></div><div class='media-folder-loader'><span>"+wcp_settings.lang.UPLOADING_FILES+"</span> <span id='current_upload_files'></span>/<span id='total_upload_files'></span><div class='folder-progress'><div class='folder-meter orange-bg'><span></span></div></div></div>"),e(".wcp-custom-form").length&&(t!==wp.Uploader&&wp.Uploader.queue.on("reset",function(){Q(1)}),e(document).ajaxComplete(function(e,t,a){void 0!==(actionName=a.data)&&actionName.length&&0==actionName.indexOf("action=delete-post&id=")&&Q(0)})),setTimeout(function(){-1!=(docReferrar=document.referrer).indexOf("wp-admin/upload.php")?"on"==(mediaMode=function e(t){for(var a=t+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var r=s[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(a))return r.substring(a.length,r.length)}return null}("media-select-mode"))&&(e("button.button.media-button.select-mode-toggle-button").trigger("click"),e(".media-frame").hasClass("mode-select")?e(".media-info-message").addClass("active"):e(".media-info-message, .custom-media-select").removeClass("active")):ea("media-select-mode"),Q(1)},1e3))},1e3)),e(document).on("click",".attachments-browser ul.attachments .thumbnail",function(){"attachment"==wcp_settings.post_type&&e(".media-toolbar").hasClass("media-toolbar-mode-select")&&(0==e("ul.attachments li.selected").length?e(".custom-media-select").removeClass("active"):e(".custom-media-select").addClass("active"))}),e(document).on("change",".media-select-folder",function(){if("attachment"==wcp_settings.post_type&&""!=e(this).val()){var t="";e(".attachments-browser li.attachment.selected").each(function(){t+=e(this).attr("data-id")+","}),"-1"==e(this).val()?e.ajax({url:wcp_settings.ajax_url,data:"post_id="+t+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id="+e(this).val()+"&nonce="+wcp_settings.nonce+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+d,method:"post",success:function(t){0!=m&&m!=e(".media-select-folder").val()&&e("ul.attachments li.selected").remove(),L(),Y()}}):(a=T(e(this).val(),"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:e(this).val(),nonce:a,status:wcp_settings.taxonomy_status,taxonomy:d,post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e("#bulk-move-folder").hide(),"1"==t.status?(0!=m&&m!=e(".media-select-folder").val()&&e("ul.attachments li.selected").remove(),L(),Y()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}}))}})}),e(document).ready(function(){"yes"==wcp_settings.use_shortcuts&&(e(document).on("click",".view-shortcodes",function(t){t.preventDefault(),e("#keyboard-shortcut").show()}),e(document).keydown(function(t){var a=!!t.ctrlKey||!!t.metaKey;if(!(e("input").is(":focus")||e("textarea").is(":focus"))&&t.altKey&&(78==t.keyCode||78==t.which)&&(t.preventDefault(),e("#add-new-folder").trigger("click")),(113==t.keyCode||113==t.which)&&e("#js-tree-menu .jstree-anchor").is(":focus")&&(m=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),z(),e(".dynamic-menu").remove()),a&&(67==t.keyCode||t.which),a&&(88==t.keyCode||t.which),a&&(86==t.keyCode||t.which),a&&(75==t.keyCode||75==t.which)&&e("#keyboard-shortcut").show(),(46==t.keyCode||46==t.which||8==t.keyCode||8==t.which)&&(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?e(".delete-folder-action").trigger("click"):e("#js-tree-menu .jstree-anchor").is(":focus")&&!e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").hasClass("is-locked")&&(m=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),M(0),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"))),a&&(40==t.keyCode||40==t.which)&&e("#js-tree-menu .jstree-anchor").is(":focus")){m=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id");var s=parseInt(e("#"+m).data("parent")),o=parseInt(e("#"+m).index())+1,r=parseInt(e("#"+m).data("child"));isNaN(s)&&(s=e("li#"+m).parents("li.jstree-node").length?e("li#"+m).parents("li.jstree-node").data("folder"):0,r=e("li#"+m).parents("li.jstree-node").length?e("li#"+m).parents("li.jstree-node").children():e("#js-tree-menu > ul > li").length),0==s&&(s=""),r==o?e("#js-tree-menu").jstree("move_node","#"+m,"#"+s,0):e("#js-tree-menu").jstree("move_node","#"+m,"#"+s,o+1)}if(a&&(38==t.keyCode||38==t.which)&&e("#js-tree-menu .jstree-anchor").is(":focus")){m=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id");var s=parseInt(e("#"+m).data("parent")),o=parseInt(e("#"+m).index())-1,r=parseInt(e("#"+m).data("child"));isNaN(s)&&(o=parseInt(e("#"+m).index())-1,s=e("li#"+m).parents("li.jstree-node").length?e("li#"+m).parents("li.jstree-node").data("folder"):0,r=e("li#"+m).parents("li.jstree-node").length?e("li#"+m).parents("li.jstree-node").children():e("#js-tree-menu > ul > li").length),0==s&&(s=""),-1==o?e("#js-tree-menu").jstree("move_node","#"+m,"#"+s,r):e("#js-tree-menu").jstree("move_node","#"+m,"#"+s,o)}(27==t.keyCode||27==t.which)&&(e(".folder-popup-form:not(#rating-modal-popup)").hide(),e(".jstree-node[id='"+m+"']").length?e(".jstree-node[id='"+m+"'] > a.jstree-anchor").trigger("focus"):e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e("#js-tree-menu .jstree-anchor.jstree-clicked").trigger("focus"))}))})});
