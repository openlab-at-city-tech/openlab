"use strict";(self.webpackChunkgravityforms=self.webpackChunkgravityforms||[]).push([[921],{1057:function(e,a,t){t.r(a);var r=t(9801),i=t(5210),n=t(9509),o=t.n(n),s=t(9608),c=t.n(s),m=t(8349),l=t(2036),u=t(6134),g=t(5518),d=t(5872),_=t.n(d),p=t(564),f=t.n(p),w=t(4065),z=t.n(w),b=t(9843),k=t.n(b),v=t(4216),h=t.n(v),E=t(4824),R=t.n(E),y=t(8472),x=t.n(y),C=t(6172),N=t.n(C),T=t(1047),P=m.React.useEffect,Z=m.React.useState;a.default=function(e){var a,t,n=e.data,s=void 0===n?{}:n,d=e.endpoints,p=e.i18n,w=Z(!1),b=(0,i.Z)(w,2),v=b[0],E=b[1],y=Z(!1),C=(0,i.Z)(y,2),A=C[0],I=C[1],S=Z(!1),O=(0,i.Z)(S,2),B=O[0],D=O[1],K=Z(!1),W=(0,i.Z)(K,2),F=W[0],L=W[1],M=Z(!1),U=(0,i.Z)(M,2),q=U[0],j=U[1],G=Z(""),H=(0,i.Z)(G,2),J=H[0],Q=H[1],V=(0,u.useStateWithDep)((null==s||null===(a=s.defaults)||void 0===a?void 0:a.licenseKey)||""),X=(0,i.Z)(V,2),Y=X[0],$=X[1],ee=(0,T.default)((function(e){return e.email})),ae=(0,T.default)((function(e){return e.emailConsent})),te=(0,T.default)((function(e){return e.activeStep}));P((function(){B&&D(!1)}),[Y]);var re=(0,T.default)((function(e){return e.setActiveStepNext})),ie=(0,T.default)((function(e){return e.setAutoUpdate})),ne=(0,T.default)((function(e){return e.setEmail})),oe=(0,T.default)((function(e){return e.setEmailConsent})),se=(0,T.default)((function(e){return e.setLicenseKey})),ce=(0,T.default)((function(e){return e.setInnerDialogOpen})),me=p.activate_license,le=p.check_license,ue=p.close_button,ge=p.column_layouts,de=p.email_message_title,_e=p.email_message,pe=p.email_message_plhldr,fe=p.email_message_submit,we=p.email_message_footer,ze=p.enter_license,be=p.enter_license_plhdr,ke=p.invalid_key,ve=p.key_validated,he=p.license_instructions,Ee=p.most_accessible,Re=p.take_payments,ye=p.welcome_title,xe=p.welcome_copy,Ce=p.next,Ne="mock_endpoint"===(null==d||null===(t=d.validate_license)||void 0===t?void 0:t.action),Te={checked:ae,id:"email-consent",onChange:function(e){oe(e)},spacing:3,labelAttributes:{label:we,size:"text-xxs",weight:"regular",customClasses:["gform-setup-wizard__email-footer"]}},Pe={ref:(0,u.useFocusTrap)(1===te),className:(0,m.classnames)({"gform-setup-wizard__screen":!0,"gform-setup-wizard__screen--step-1":!0}),"aria-hidden":1!==te};return m.React.createElement("div",Pe,m.React.createElement("div",{className:"gform-setup-wizard__outer-content"},m.React.createElement("div",{className:"gform-setup-wizard__content"},m.React.createElement(u.FadeIn,{delay:200,transitionDuration:800},m.React.createElement(_(),{customClasses:["gform-setup-wizard__heading-container"]},m.React.createElement(h(),{content:ye,customClasses:["gform-typography--md-size-display-lg"],size:"display-md",spacing:{"":6,md:5},tagName:"h2",weight:"semibold"})),m.React.createElement(_(),{customClasses:["gform-setup-wizard__body-container"]},m.React.createElement(N(),{content:xe,spacing:{"":3,md:5}}),m.React.createElement(x(),{listItems:[Ee,ge,Re],spacing:{"":6,md:8}}),m.React.createElement(h(),{content:ze,size:"text-xl",spacing:3,tagName:"h3",weight:"medium"}),m.React.createElement(N(),{content:he,spacing:{"":3,md:5}})),m.React.createElement(_(),{customClasses:["gform-setup-wizard__license-container"]},m.React.createElement(R(),{customAttributes:{disabled:v},onChange:$,placeholder:be,size:"size-xl",spacing:3,value:Y}),m.React.createElement(f(),{customClasses:{"gform-setup-wizard__validate-license-button":!0,"gform-setup-wizard__validate-license-button--valid":B},size:"size-height-xl",label:B?ve:me,icon:"check-circle",iconPosition:"leading",iconPrefix:"gform-common-icon",active:v,activeType:"loader",disabled:v||B,activeText:le,type:B?"apple-green":"primary-new",width:"full",onClick:(0,r.Z)(o().mark((function e(){var a,t,r,i,n,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:if(E(!0),g.cookieStorage.remove(s.options.invalidKeyCookieName),a={baseUrl:c(),method:"POST",body:{license:Y}},!Ne){e.next=16;break}return(0,g.consoleInfo)("Mock endpoint, data that would have been sent is:"),(0,g.consoleInfo)(a),e.next=10,new Promise((function(e){return setTimeout(e,1e3)}));case 10:return D(!0),E(!1),e.next=14,new Promise((function(e){return setTimeout((function(){re(),e()}),600)}));case 14:e.next=36;break;case 16:return r=Date.now(),e.next=19,(0,l.ZP)("validate_license",d,a);case 19:if(i=e.sent,!((n=Date.now()-r)<600)){e.next=24;break}return e.next=24,new Promise((function(e){return setTimeout(e,600-n)}));case 24:if(null==i||null===(t=i.data)||void 0===t||!t.success){e.next=32;break}return D(!0),E(!1),se(Y),e.next=30,new Promise((function(e){return setTimeout((function(){re(),e()}),600)}));case 30:e.next=36;break;case 32:Q(null==i||null===(m=i.data)||void 0===m?void 0:m.data),I(!0),E(!1),g.cookieStorage.set(s.options.invalidKeyCookieName,"1",null,!0);case 36:case"end":return e.stop()}}),e)})))}))),m.React.createElement(_(),{display:"flex",customClasses:["gform-setup-wizard__nav-footer"]},m.React.createElement(f(),{size:"size-height-xl",customClasses:["gform-setup-wizard__nav-next"],type:"white",icon:"arrow-narrow-right",iconPrefix:"gform-common-icon",disabled:v,ariaLabel:Ce,onClick:function(){B||q?re():L(!0)}})),A&&m.React.createElement(k(),{alertButtonText:ue,alignment:"top",buttonWidth:"full",confirmButtonType:"white",content:J,customWrapperClasses:["gform-setup-wizard__alert"],isOpen:!0,maskTheme:"dark",mode:"alert",onOpen:function(){ce(!0)},onClose:function(){ce(!1)},onCloseAfterAnimation:function(){I(!1)},showCloseButton:!1,theme:"cosmos",title:ke,titleIndicatorType:"error"}),F&&m.React.createElement(k(),{alignment:"top",animateModal:!0,customWrapperClasses:["gform-setup-wizard__email-dialog"],isOpen:!0,maskBlur:!1,maskTheme:"light",mode:"modal",onOpen:function(){ce(!0)},theme:"cosmos",titleIndicatorType:"error",onClose:function(){ce(!1)},onCloseAfterAnimation:function(){ne(""),L(!1)},closeButtonTitle:ue},m.React.createElement("div",{className:"gform-setup-wizard__email-logo"}),m.React.createElement(h(),{content:de,customClasses:["gform-setup-wizard__email-heading","gform-typography--md-size-display-sm"],size:"display-xs",spacing:1,tagName:"h3",weight:"semibold"}),m.React.createElement(N(),{content:_e,customClasses:["gform-setup-wizard__email-message","gform-typography--md-size-text-xl"],size:"text-md",spacing:6}),m.React.createElement(_(),{customClasses:["gform-setup-wizard__email-actions"]},m.React.createElement(R(),{size:"size-xl",onChange:ne,placeholder:pe,spacing:3}),m.React.createElement(z(),Te),m.React.createElement(f(),{customClasses:["gform-setup-wizard__submit-email-button"],size:"size-height-xl",label:fe,type:"primary-new",width:"full",onClick:function(){ee&&(ce(!1),ie(),L(!1),j(!0),re())}})))),m.React.createElement("div",{className:"gform-setup-wizard__background"},m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--sendgrid"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--google-analytics"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--stripe"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--slack"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--hubspot"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--mailgun"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--help-scout"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--aweber"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--dropbox"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--zapier"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--mailchimp"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--paypal"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--get-response"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--active-campaign"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--logo gform-setup-wizard__background-image--square"}),m.React.createElement("div",{className:"gform-setup-wizard__background-image gform-setup-wizard__background-image--hero"}))))}}}]);