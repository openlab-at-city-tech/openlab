"use strict";(self.webpackChunkneve=self.webpackChunkneve||[]).push([[637],{971:(e,t,l)=>{l.r(t),l.d(t,{default:()=>T});var n=l(307),o=l(941),a=l(184),s=l.n(a),i=l(697),r=l.n(i),c=l(736),u=l(609),d=l(540),m=l(15),v=l(904),p=l(140),b=l(266),g=l(626),E=l(434),h=l(408),f=l(374);const w=({handleRef:e,onKeyDown:t,onBlur:l,isActive:o})=>(0,n.createElement)(u.Tooltip,{text:(0,c.__)("Drag to Reorder","neve")},(0,n.createElement)("button",{ref:e,"aria-label":(0,c.__)("Drag to Reorder","neve"),className:s()("handle",{"keyboard-active":o}),onClick:e=>{e.preventDefault()},onKeyDown:t,onBlur:l,tabIndex:0},(0,n.createElement)(u.Icon,{icon:d.Z,size:18}))),y=({item:e,onToggle:t,components:l,allowsToggle:o=!0,locked:a=!1,itemIndex:i,totalItems:r,onMove:p,isKeyboardActive:E,onKeyboardActiveChange:h})=>{var f;const y=(null===(f=l[e.id])||void 0===f?void 0:f.label)||l[e.id],{handleRef:R,handleKeyDown:T,handleBlur:_}=(0,g.Z)(i,r,p,E,h),z=(0,n.useMemo)((()=>{var t;return!(null===(t=l[e.id])||void 0===t||!t.controls)&&Object.keys(l[e.id].controls).length>0}),[]),[C,N]=(0,n.useState)(!1),[I,q]=(0,n.useState)(!1),x=()=>{if(!z)return;const t=Object.keys(l[e.id].controls).map((e=>wp.customize.control(e).active())).filter(Boolean).length>0;q(t)};return(0,n.useEffect)((()=>{if(z)return x(),wp.customize.control.bind("change",x),()=>{wp.customize.control.unbind("change",x)}}),[]),(0,n.createElement)("div",{className:s()("neve-sortable-item",{visible:e.visible,disabled:!e.visible,"no-toggle":!o})},(0,n.createElement)("div",{className:"top-bar"},a?(0,n.createElement)(u.Tooltip,{text:(0,c.__)("Ordering locked for current layout","neve")},(0,n.createElement)("button",{className:"locked",disabled:!0},(0,n.createElement)(u.Icon,{icon:d.Z,size:18}))):(0,n.createElement)(w,{handleRef:R,onKeyDown:T,onBlur:_,isActive:E}),(0,n.createElement)("span",{className:"label"},y),(0,n.createElement)("div",{className:"actions"},I&&(0,n.createElement)(u.Tooltip,{text:(0,c.__)("Toggle Controls","neve")},(0,n.createElement)("button",{className:"toggle-controls",onClick:e=>{e.preventDefault(),N(!C)},"aria-label":(0,c.__)("Toggle Controls","neve")},(0,n.createElement)(u.Icon,{size:18,icon:C?m.Z:v.Z}))),(0,n.createElement)("span",{className:"separator"}),o&&(0,n.createElement)(u.Tooltip,{text:(0,c.__)("Toggle Visibility","neve")},(0,n.createElement)("button",{disabled:a,"aria-label":(0,c.__)("Toggle Visibility","neve"),className:"toggle",onClick:l=>{l.preventDefault(),l.stopPropagation(),t(e.id)}},(0,n.createElement)(u.Icon,{icon:e.visible?b.K:b._,size:18}))))),I&&(0,n.createElement)("div",{className:s()("sortable-subcontrols",{open:C})},(0,n.createElement)("div",{className:"sortable-subcontrols-inner"},Object.entries(l[e.id].controls).map((([e,t])=>(0,n.createElement)(k,{key:e,id:e,args:t}))))))},k=({id:e,args:t})=>{var l,o,a,s,i,r;const{label:c,description:d,type:m,attrs:v,initialValue:b}=t,g=c||(null===(l=wp.customize)||void 0===l||null===(o=l.control(e))||void 0===o||null===(a=o.params)||void 0===a?void 0:a.label)||"",w=d||(null===(s=wp.customize)||void 0===s||null===(i=s.control(e))||void 0===i||null===(r=i.params)||void 0===r?void 0:r.description)||"",y=wp.customize.value(e).get(),[k,R]=(0,n.useState)(b||y),[T,_]=(0,n.useState)(!1);(0,n.useEffect)((()=>{_(wp.customize.control(e).active())}),[]);const z=(0,n.useCallback)((e=>{_(e)}),[]);(0,n.useEffect)((()=>(wp.customize.control(e).active.bind(z),()=>{wp.customize.control(e).active.unbind(z)})),[]);const C=e=>{e.preventDefault(),N(e.target.value)},N=t=>{var l;R(t),l=t,wp.customize.value(e).set(l)};return T?(0,n.createElement)("div",{id:`sub-control-${e}`},!["toggle","responsive-range","responsive-button-group","responsive-spacing"].includes(m)&&(0,n.createElement)(n.Fragment,null,g&&(0,n.createElement)("span",{className:"subcontrol-label"},g),w&&(0,n.createElement)("span",{className:"subcontrol-description",dangerouslySetInnerHTML:{__html:w}})),(0,n.createElement)("div",null,"select"===m&&(0,n.createElement)("select",{value:k,onBlur:C,onChange:C},Object.entries(t.choices).map((([e,t])=>(0,n.createElement)("option",{key:e,value:e},t)))),"range"===m&&(0,n.createElement)(u.RangeControl,{resetFallbackValue:0===(null==v?void 0:v.defaultVal)?0:(null==v?void 0:v.defaultVal)||"",value:0===parseFloat(k)?0:parseFloat(k)||"",allowReset:!0,onChange:N,step:(null==v?void 0:v.step)||1,min:(null==v?void 0:v.min)||0,max:(null==v?void 0:v.max)||100}),"text"===m&&(0,n.createElement)("input",{type:"text",value:k,onChange:C}),"toggle"===m&&(0,n.createElement)(u.ToggleControl,{checked:k,label:g,help:w?(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:w}}):null,onChange:N}),"responsive-range"===m&&(0,n.createElement)(E.Z,{control:wp.customize.control(e)}),"button-group"===m&&(0,n.createElement)(p.RadioIcons,{options:t.choices,value:k,onChange:N,showLabels:!0}),"responsive-button-group"===m&&(0,n.createElement)(h.Z,{control:wp.customize.control(e)}),"responsive-spacing"===m&&(0,n.createElement)(f.Z,{control:wp.customize.control(e)}))):null};y.propTypes={item:r().object.isRequired,onToggle:r().func.isRequired,allowsToggle:r().bool.isRequired,itemIndex:r().number.isRequired,totalItems:r().number.isRequired,onMove:r().func.isRequired,components:r().object.isRequired,locked:r().bool,isKeyboardActive:r().bool.isRequired,onKeyboardActiveChange:r().func.isRequired,className:r().string,disabled:r().bool};const R=({label:e,onUpdate:t,value:l,components:a,locked:s=[],allowsToggle:i=!0})=>{const r=(0,n.useRef)(null),[,c]=(0,n.useState)({}),u=e=>{const t=l.map((t=>(t.id===e&&(t.visible=!t.visible),t)));d(t)},d=e=>{const l=e.sort(((e,t)=>e.visible===t.visible?0:e.visible?-1:1));t(l)},m=(e,t)=>{const n=[...l],[o]=n.splice(e,1);n.splice(t,0,o),d(n)};return l=l.filter((e=>a.hasOwnProperty(e.id))),(0,n.createElement)(n.Fragment,null,e&&(0,n.createElement)("label",{className:"customize-control-title"},e),(0,n.createElement)(o._O,{className:"items-list",list:l,setList:d,animation:300,handle:".handle"},l.filter((e=>a.hasOwnProperty(e.id))).map(((e,t)=>(0,n.createElement)(y,{locked:s.includes(e.id),key:e.id,item:e,onToggle:u,allowsToggle:i,components:a,itemIndex:t,totalItems:l.length,onMove:m,isKeyboardActive:r.current===e.id,onKeyboardActiveChange:t=>{r.current=t?e.id:null,c({})}})))))};R.propTypes={label:r().string.isRequired,onUpdate:r().func.isRequired,value:r().array.isRequired,allowsToggle:r().bool,components:r().object.isRequired};const T=R}}]);